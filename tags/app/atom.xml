<?xml version="1.0" encoding="utf-8"?> 
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-us">
    <generator uri="https://gohugo.io/" version="0.63.2">Hugo</generator><title type="html"><![CDATA[app on 焉知非鱼]]></title>
    
        <subtitle type="html"><![CDATA[rakulang, dartlang, nimlang, golang, rustlang, lang lang no see]]></subtitle>
    
    
    
            <link href="https://ohmyweekly.github.io/tags/app/" rel="alternate" type="text/html" title="HTML" />
            <link href="https://ohmyweekly.github.io/tags/app/index.xml" rel="alternate" type="application/rss+xml" title="RSS" />
            <link href="https://ohmyweekly.github.io/tags/app/atom.xml" rel="self" type="application/atom+xml" title="Atom" />
            <link href="https://ohmyweekly.github.io/tags/app/jf2feed.json" rel="alternate" type="application/jf2feed+json" title="jf2feed" />
    <updated>2020-09-03T20:20:09+08:00</updated>
    
    
    
    
        <id>https://ohmyweekly.github.io/tags/app/</id>
    
        
        <entry>
            <title type="html"><![CDATA[编写你的第一个 Flutter 应用，第一部分]]></title>
            <link href="https://ohmyweekly.github.io/notes/write-your-first-flutter-app/?utm_source=atom_feed" rel="alternate" type="text/html" />
            
                <link href="https://ohmyweekly.github.io/notes/write-your-first-flutter-app-part-two/?utm_source=atom_feed" rel="related" type="text/html" title="编写你的第一个 Flutter 应用，第二部分" />
            
                <id>https://ohmyweekly.github.io/notes/write-your-first-flutter-app/</id>
            
            
                    <author>
                        <name>焉知非鱼</name>
                    </author>
            <published>2020-06-26T00:00:00+08:00</published>
            <updated>2020-06-26T00:00:00+08:00</updated>
            
            
            <content type="html"><![CDATA[<blockquote>Flutter 是 Google 的 UI 工具包，用于从单一代码库中为手机、网页和桌面构建漂亮的、原生编译的应用程序。Flutter 可以与现有的代码一起使用，被世界各地的开发者和组织使用，并且是免费和开源的。</blockquote><h2 id="介绍">介绍</h2>
<p>Flutter 是 Google 的 UI 工具包，用于从单一代码库中为手机、网页和桌面构建漂亮的、原生编译的应用程序。Flutter 可以与现有的代码一起工作，被世界各地的开发者和组织使用，并且是免费和开源的。</p>
<p>在这个代码实验室中，你将创建一个简单的手机 Flutter 应用。如果你熟悉面向对象的代码和基本的编程概念-如变量、循环和条件, 那么你就可以完成这个 codelab。你不需要以前有 Dart、手机或 Web 编程的经验。</p>
<h3 id="你将在第1部分学到什么">你将在第1部分学到什么</h3>
<ul>
<li>如何编写一款在 iOS、Android 和 Web 上看起来很自然的 Flutter 应用？</li>
<li>Flutter 应用程序的基本结构。</li>
<li>寻找和使用包来扩展功能。</li>
<li>使用热重装来加快开发周期。</li>
<li>如何实现一个有状态的小组件。</li>
<li>如何创建一个无限的、懒加载的列表。</li>
</ul>
<p>在这个 codelab 的<a href="https://codelabs.developers.google.com/codelabs/first-flutter-app-pt2/index.html?index=..%2F..%2Findex#0">第2部分</a>中，你将添加交互性，修改应用程序的主题，并添加导航到新页面的能力(在 Flutter 中称为路由)。</p>
<h3 id="你将在第1部分中构建什么">你将在第1部分中构建什么</h3>
<p>你将实现一个移动应用，为一家创业公司生成建议的名字。用户可以选择和取消选择名字，保存最好的名字。代码一次懒惰地生成10个名字。随着用户的滚动，会生成更多的名字。用户可以滚动的范围没有限制。</p>
<p>下面的 GIF 动画显示了应用程序在完成部分时的工作情况。</p>
<p><img src="https://codelabs.developers.google.com/codelabs/first-flutter-app-pt1/img/6556f8b61acd6a89.gif" alt="img"></p>
<h2 id="设置你的-flutter-环境">设置你的 Flutter 环境</h2>
<p>你需要两个软件来完成这个实验室-<a href="https://flutter.io/get-started/install/">Flutter SDK</a>和<a href="https://flutter.io/get-started/editor/">一个编辑器</a>。(codelab 假设你使用 Android Studio，但你可以使用你的首选编辑器。)</p>
<p>你可以通过使用以下任何设备来运行 codelab。</p>
<ul>
<li>一个物理的 <a href="https://flutter.io/setup-macos/#set-up-your-android-device">Android</a> 或 <a href="https://flutter.io/setup-macos/#deploy-to-ios-devices">iOS</a> 设备连接到你的计算机并设置为开发者模式。</li>
<li><a href="https://flutter.io/setup-macos/#set-up-the-ios-simulator">iOS 模拟器</a>(需要安装 Xcode 工具)</li>
<li><a href="https://flutter.io/setup-macos/#set-up-the-android-emulator">安卓模拟器</a>(需要在 Android Studio 中进行设置)</li>
<li>浏览器(调试时需要使用 Chrome 浏览器)</li>
</ul>
<p>如果你想编译你的应用程序以在 web 上运行，你必须启用此功能（目前处于测试阶段）。要启用 web 支持，请使用以下说明。</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">flutter channel beta
flutter upgrade
flutter config --enable-web
</code></pre></div><p>你只需要运行一次 <code>config</code> 命令。启用 Web 支持后，你创建的每个 Flutter 应用也会为 Web 编译。在你的 IDE 的<strong>设备</strong>下拉菜单下面，或者在命令行使用 <code>flutter devices</code>，你现在应该看到 Chrome 和 Web 服务器被列出。<strong>Chrome</strong> 设备会自动启动 Chrome。Web 服务器会启动一个托管应用程序的服务器，这样你就可以从任何浏览器加载它。在开发过程中使用 <strong>Chrome</strong> 设备，以便你可以使用 DevTools，而当你要在其他浏览器上进行测试时使用 Web 服务器。有关更多信息，请参阅<a href="https://flutter.dev/docs/get-started/web">使用 Flutter 构建 Web 应用程序</a>和<a href="https://flutter.dev/docs/get-started/codelab-web">在 Web 上编写你的第一个 Flutter 应用程序</a>。</p>
<h2 id="创建-flutter-应用程序的启动器">创建 Flutter 应用程序的启动器</h2>
<p>通过使用<a href="https://flutter.dev/docs/get-started/test-drive#androidstudio">创建应用程序</a>中的说明来创建一个简单的、模板化的 Flutter 应用程序。输入 <code>startup_namer</code>(而不是 <code>flutter_app</code>)作为项目名称。您将修改启动器应用程序来创建完成的应用程序。</p>
<p>提示：如果你在 IDE 中没有看到能够启动一个新的 Flutter 项目作为一个选项，那么请确保你已经<a href="https://flutter.io/get-started/editor/#androidstudio">安装了 Flutter 和 Dart 的插件</a>。</p>
<p>你将主要编辑 <code>lib/main.dart</code>，Dart 的代码就在这里。</p>
<p>替换 <code>lib/main.dart</code> 的内容。
删除 <code>lib/main.dart</code> 中的所有代码，并用下面的代码替换，在屏幕中央显示 &ldquo;Hello World&rdquo;。</p>
<div class="highlight"><pre class="chroma"><code class="language-dart" data-lang="dart"><span class="k">import</span> <span class="s1">&#39;</span><span class="s1">package:flutter/material.dart</span><span class="s1">&#39;</span><span class="p">;</span>

<span class="kt">void</span> <span class="n">main</span><span class="p">(</span><span class="p">)</span> <span class="o">=</span><span class="o">&gt;</span> <span class="n">runApp</span><span class="p">(</span><span class="n">MyApp</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">MyApp</span> <span class="kd">extends</span> <span class="n">StatelessWidget</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">MaterialApp</span><span class="p">(</span>
      <span class="nl">title:</span> <span class="s1">&#39;</span><span class="s1">Welcome to Flutter</span><span class="s1">&#39;</span><span class="p">,</span>
      <span class="nl">home:</span> <span class="n">Scaffold</span><span class="p">(</span>
        <span class="nl">appBar:</span> <span class="n">AppBar</span><span class="p">(</span>
          <span class="nl">title:</span> <span class="kd">const</span> <span class="n">Text</span><span class="p">(</span><span class="s1">&#39;</span><span class="s1">Welcome to Flutter</span><span class="s1">&#39;</span><span class="p">)</span><span class="p">,</span>
        <span class="p">)</span><span class="p">,</span>
        <span class="nl">body:</span> <span class="kd">const</span> <span class="n">Center</span><span class="p">(</span>
          <span class="nl">child:</span> <span class="kd">const</span> <span class="n">Text</span><span class="p">(</span><span class="s1">&#39;</span><span class="s1">Hello World</span><span class="s1">&#39;</span><span class="p">)</span><span class="p">,</span>
        <span class="p">)</span><span class="p">,</span>
      <span class="p">)</span><span class="p">,</span>
    <span class="p">)</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>提示：当把代码粘贴到你的应用程序中时，缩进会变得歪斜。你可以用以下 Flutter 工具来解决。</p>
<ul>
<li>Android Studio/IntelliJ IDEA: 右键点击 Dart 代码，选择<strong>用 dartfmt 重格式代码</strong>。</li>
<li>VS code: 右键点击并选择<strong>格式化文档</strong>。</li>
<li>终端: 运行 <code>flutter format &lt;文件名&gt;</code>。</li>
</ul>
<p><a href="https://flutter.io/get-started/test-drive/#androidstudio">运行应用程序</a>。您应该看到 Android，iOS 或 Web 输出，取决于您的设备。</p>
<p>安卓系统:</p>
<p><img src="https://codelabs.developers.google.com/codelabs/first-flutter-app-pt1/img/f9df7832965ede9f.png" alt="img"></p>
<p>iOS:</p>
<p><img src="https://codelabs.developers.google.com/codelabs/first-flutter-app-pt1/img/20374605026d582.png" alt="img"></p>
<p>小贴士：第一次在物理设备上运行时，可能需要一段时间来加载。之后，你可以使用热重载来快速更新。在支持的 IDE 中，如果应用正在运行，<strong>Save</strong> 也会执行热重载。当使用 <code>flutter run</code> 直接从控制台运行应用程序时，输入 <code>r</code> 来执行热重载。</p>
<p>观察:</p>
<ul>
<li>这个例子创建了一个 Material 应用。<a href="https://material.io/guidelines/">Material</a> 是一种视觉设计语言，是移动和 Web 的标准。Flutter 提供了一套丰富的 Material 部件。</li>
<li><code>main</code> 方法使用箭头(<code>=&gt;</code>)符号。对单行函数或方法使用箭头符号。</li>
<li>应用程序扩展了 <code>StatelessWidget</code>，这使得应用程序本身成为一个组件。在 Flutter 中，几乎所有的东西都是组件，包括对齐、填充和布局。</li>
<li><code>Scaffold</code> 组件来自 Material 库，它提供了一个默认的应用栏、一个标题和一个 body 属性，其中存放着主屏幕的组件树。组件子树可以相当复杂。</li>
<li>组件的主要工作是提供一个 <code>build</code> 方法，描述如何用其他低级组件来显示该组件。</li>
<li>本例的主体由包含 <code>Text</code> 子部件的 <code>Center</code> 部件组成。<code>Center</code> 组件将其组件子树对齐到屏幕的中心。</li>
</ul>
<h2 id="使用外部软件包">使用外部软件包</h2>
<p>在这一步中，您将开始使用一个名为 <code>english_words</code> 的开源包，它包含了几千个最常用的英语单词，还有一些实用函数。</p>
<p>你可以在 <a href="https://pub.dev/">pub.dev</a> 找到 <code>english_words</code> 包，以及许多其他开源包。</p>
<p>pubspec 文件管理着 Flutter 应用的资产。在 <code>pubspec.yaml</code> 中，附加 <code>english_words: ^3.1.5</code>(<code>english_words</code> 3.1.5 或更高)到依赖列表中。</p>
<div class="highlight"><pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="k">dependencies</span><span class="p">:</span><span class="w">
</span><span class="w"></span><span class="w">  </span><span class="k">flutter</span><span class="p">:</span><span class="w">
</span><span class="w"></span><span class="w">    </span><span class="k">sdk</span><span class="p">:</span><span class="w"> </span>flutter<span class="w">
</span><span class="w">
</span><span class="w">  </span><span class="k">cupertino_icons</span><span class="p">:</span><span class="w"> </span>^<span class="m">0.1</span><span class="m">.2</span><span class="w">
</span><span class="w">  </span><span class="k">english_words</span><span class="p">:</span><span class="w"> </span>^<span class="m">3.1</span><span class="m">.5</span><span class="w">   </span><span class="c"># add this line</span><span class="w">
</span></code></pre></div><p>在 Android Studio 的编辑器视图中查看 pubspec 时，点击 <strong>Packages get</strong>。这将把包拉到你的项目中。你应该在控制台中看到以下内容。</p>
<div class="highlight"><pre class="chroma"><code class="language-txt" data-lang="txt">flutter packages get
Running &#34;flutter packages get&#34; in startup_namer...
Process finished with exit code 0
</code></pre></div><p>执行 <code>Pub get</code> 也会自动生成 &ldquo;pubspec.lock&rdquo; 文件，其中包含所有拉入项目的包的列表和它们的版本号。</p>
<p>在 <code>lib/main.dart</code> 中，导入新包:</p>
<div class="highlight"><pre class="chroma"><code class="language-dart" data-lang="dart"><span class="k">import</span> <span class="s1">&#39;</span><span class="s1">package:flutter/material.dart</span><span class="s1">&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="s1">&#39;</span><span class="s1">package:english_words/english_words.dart</span><span class="s1">&#39;</span><span class="p">;</span>  <span class="c1">// Add this line.
</span></code></pre></div><p>当你输入时，Android Studio 会给你建议导入的库。然后，它将导入的字符串渲染成灰色，让你知道导入的库是未使用的（到目前为止）。</p>
<p>接下来，你将使用 <code>english_words</code> 包来生成文本，而不是使用 &ldquo;Hello World&rdquo;。</p>
<p>做以下修改。</p>
<div class="highlight"><pre class="chroma"><code class="language-dart" data-lang="dart"><span class="k">import</span> <span class="s1">&#39;</span><span class="s1">package:flutter/material.dart</span><span class="s1">&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="s1">&#39;</span><span class="s1">package:english_words/english_words.dart</span><span class="s1">&#39;</span><span class="p">;</span>

<span class="kt">void</span> <span class="n">main</span><span class="p">(</span><span class="p">)</span> <span class="o">=</span><span class="o">&gt;</span> <span class="n">runApp</span><span class="p">(</span><span class="n">MyApp</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">MyApp</span> <span class="kd">extends</span> <span class="n">StatelessWidget</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">final</span> <span class="n">wordPair</span> <span class="o">=</span> <span class="n">WordPair</span><span class="p">.</span><span class="n">random</span><span class="p">(</span><span class="p">)</span><span class="p">;</span> <span class="c1">// Add this line.
</span><span class="c1"></span>    <span class="k">return</span> <span class="n">MaterialApp</span><span class="p">(</span>
      <span class="nl">title:</span> <span class="s1">&#39;</span><span class="s1">Welcome to Flutter</span><span class="s1">&#39;</span><span class="p">,</span>
      <span class="nl">home:</span> <span class="n">Scaffold</span><span class="p">(</span>
        <span class="nl">appBar:</span> <span class="n">AppBar</span><span class="p">(</span>
          <span class="nl">title:</span> <span class="n">Text</span><span class="p">(</span><span class="s1">&#39;</span><span class="s1">Welcome to Flutter</span><span class="s1">&#39;</span><span class="p">)</span><span class="p">,</span>
        <span class="p">)</span><span class="p">,</span>
        <span class="nl">body:</span> <span class="n">Center</span><span class="p">(</span>
          <span class="c1">//child: Text(&#39;Hello World&#39;),   // Replace this text...
</span><span class="c1"></span>          <span class="nl">child:</span> <span class="n">Text</span><span class="p">(</span><span class="n">wordPair</span><span class="p">.</span><span class="n">asPascalCase</span><span class="p">)</span><span class="p">,</span>  <span class="c1">// With this text.
</span><span class="c1"></span>        <span class="p">)</span><span class="p">,</span>
      <span class="p">)</span><span class="p">,</span>
    <span class="p">)</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>提示: Pascal 大小写(也称为上驼形大小写)意味着字符串中的每个单词，包括第一个单词，都以大写字母开头。所以，<code>uppercamelcase</code> 就变成了 <code>UpperCamelCase</code>。</p>
<p>如果应用程序正在运行，热重载来更新正在运行的应用程序。(在命令行中，你可以输入 <code>r</code> 来热重载。)每次点击热重载或保存项目时，你应该会在运行中的应用程序中看到一个不同的单词对，随机选择。这是因为单词对是在 <code>build</code> 方法里面生成的，每次 <code>MaterialApp</code> 需要渲染时，或者在 Flutter Inspector 中切换 <strong>Platform</strong> 时，都会运行该方法。</p>
<p>Android:</p>
<p><img src="https://codelabs.developers.google.com/codelabs/first-flutter-app-pt1/img/57cfbac8f2b50e5b.png" alt="img"></p>
<p>iOS:</p>
<p><img src="https://codelabs.developers.google.com/codelabs/first-flutter-app-pt1/img/30ed7f83a1500fa9.png" alt="img"></p>
<h3 id="有问题">有问题？</h3>
<p>如果您的应用程序没有正确运行，请查找错别字。如果需要，请使用以下链接中的代码来恢复正常。</p>
<ul>
<li><a href="https://github.com/flutter/codelabs/blob/b3293b5bb0c0187bdbe8112f7759f4d75f4c040a/startup_namer/step2_use_package/pubspec.yaml">pubspec.yaml</a></li>
<li><a href="https://github.com/flutter/codelabs/blob/b3293b5bb0c0187bdbe8112f7759f4d75f4c040a/startup_namer/step2_use_package/lib/main.dart">lib/main.dart</a></li>
</ul>
<h2 id="添加一个有状态的组件">添加一个有状态的组件</h2>
<p>无状态组件是不可改变的，这意味着它们的属性不能改变-所有值都是最终值。</p>
<p>有状态组件维护的状态可能在组件的生命周期内发生变化。实现一个有状态的组件至少需要两个类。1) 一个 <a href="https://docs.flutter.io/flutter/widgets/StatefulWidget-class.html">StatefulWidget</a>，它可以创建一个 <a href="https://docs.flutter.io/flutter/widgets/State-class.html">State</a> 类的实例。<code>StatefulWidget</code> 对象本身是不可变的，可以被丢弃和再生，但 <code>State</code> 对象会在 widget 的生命周期内持久存在。</p>
<p>在这一步骤中，您将添加一个有状态的组件 <code>RandomWords</code>，并创建其 <code>State</code> 类 <code>_RandomWordsState</code>。然后，您将在现有的 MyApp 无状态组件中使用 <code>RandomWords</code> 作为子类。</p>
<p>为有状态组件创建模板代码。</p>
<p>它可以放在 <code>MyApp</code> 以外的文件中的任何位置，但解决方案将其放在文件的底部。在 <code>lib/main.dart</code> 中，将光标定位在所有代码之后，输入回车键几次，重新开始一行。在你的 IDE 中，开始输入 <code>stful</code>。编辑器会询问你是否要创建一个 <code>Stateful</code> 的组件。按回车键接受。两个类的模板代码出现了，光标定位让你输入无状态组件的名称。</p>
<p>输入 <code>RandomWords</code> 作为您的小组件的名称。</p>
<p>正如您在下面的代码中所看到的，<code>RandomWords</code> 组件除了创建它的 <code>State</code> 类之外，几乎没有其他的功能。</p>
<p>一旦您输入 <code>RandomWords</code> 作为有状态组件的名称，IDE 会自动更新相应的 <code>State</code> 类，将其命名为 <code>_RandomWordState</code>。默认情况下，<code>State</code> 类的名称是以下划线为前缀的。在标识符前加上下划线可以加强 Dart 语言的<a href="https://dart.dev/guides/language/language-tour#libraries-and-visibility">隐私性</a>，也是 <code>State</code> 对象的最佳实践。</p>
<p>IDE 也会自动更新 State 类以扩展 <code>State&lt;RandomWords&gt;</code>，表明你正在使用一个专门用于 <code>RandomWords</code> 的通用 <a href="https://api.flutter.dev/flutter/widgets/State-class.html">State</a> 类。应用程序的大部分逻辑都在这里-它为 <code>RandomWords</code> 组件维护状态。这个类保存了生成的词对列表，随着用户的滚动而无限增长，在本实验室的第二部分中，当用户通过切换心形图标从列表中添加或删除这些词对时，该类会对其进行收藏。</p>
<p>现在两个类的外观如下:</p>
<div class="highlight"><pre class="chroma"><code class="language-dart" data-lang="dart"><span class="kd">class</span> <span class="nc">RandomWords</span> <span class="kd">extends</span> <span class="n">StatefulWidget</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">override</span>
  <span class="n">_RandomWordsState</span> <span class="n">createState</span><span class="p">(</span><span class="p">)</span> <span class="o">=</span><span class="o">&gt;</span> <span class="n">_RandomWordsState</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">_RandomWordsState</span> <span class="kd">extends</span> <span class="n">State</span><span class="o">&lt;</span><span class="n">RandomWords</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">Container</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>更新 <code>_RandomWordsState</code> 中的 <code>build()</code> 方法。</p>
<p>用以下两行替换 <code>return Container();</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-dart" data-lang="dart"><span class="kd">class</span> <span class="nc">_RandomWordsState</span> <span class="kd">extends</span> <span class="n">State</span><span class="o">&lt;</span><span class="n">RandomWords</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">override</span>                                  
  <span class="n">Widget</span> <span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">final</span> <span class="n">wordPair</span> <span class="o">=</span> <span class="n">WordPair</span><span class="p">.</span><span class="n">random</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>      <span class="c1">// NEW
</span><span class="c1"></span>    <span class="k">return</span> <span class="n">Text</span><span class="p">(</span><span class="n">wordPair</span><span class="p">.</span><span class="n">asPascalCase</span><span class="p">)</span><span class="p">;</span>      <span class="c1">// NEW
</span><span class="c1"></span>  <span class="p">}</span>                                         
<span class="p">}</span>
</code></pre></div><p>通过以下修改，删除 <code>MyApp</code> 中的文字生成代码:</p>
<div class="highlight"><pre class="chroma"><code class="language-dart" data-lang="dart"><span class="kd">class</span> <span class="nc">MyApp</span> <span class="kd">extends</span> <span class="n">StatelessWidget</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">final</span> <span class="n">wordPair</span> <span class="o">=</span> <span class="n">WordPair</span><span class="p">.</span><span class="n">random</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>  <span class="c1">// DELETE
</span><span class="c1"></span>
    <span class="k">return</span> <span class="n">MaterialApp</span><span class="p">(</span>
      <span class="nl">title:</span> <span class="s1">&#39;</span><span class="s1">Welcome to Flutter</span><span class="s1">&#39;</span><span class="p">,</span>
      <span class="nl">home:</span> <span class="n">Scaffold</span><span class="p">(</span>
        <span class="nl">appBar:</span> <span class="n">AppBar</span><span class="p">(</span>
          <span class="nl">title:</span> <span class="n">Text</span><span class="p">(</span><span class="s1">&#39;</span><span class="s1">Welcome to Flutter</span><span class="s1">&#39;</span><span class="p">)</span><span class="p">,</span>
        <span class="p">)</span><span class="p">,</span>
        <span class="nl">body:</span> <span class="n">Center</span><span class="p">(</span>
          <span class="c1">//child: Text(wordPair.asPascalCase), // REPLACE with... 
</span><span class="c1"></span>          <span class="nl">child:</span> <span class="n">RandomWords</span><span class="p">(</span><span class="p">)</span><span class="p">,</span>                 <span class="c1">// ...this line
</span><span class="c1"></span>        <span class="p">)</span><span class="p">,</span>
      <span class="p">)</span><span class="p">,</span>
    <span class="p">)</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>热重载应用程序。应用程序应该像以前一样，每次热重载或保存应用程序时都会显示一个单词配对。</p>
<p>提示：如果您在热重载时看到警告，表明您可能需要重新启动应用程序，您应该考虑重新启动应用程序。这可能是一个假阳性，但重启可以确保您的更改反映在应用程序的 UI 中。</p>
<h3 id="遇到问题了">遇到问题了？</h3>
<p>如果您的应用程序没有正确运行，您可以使用以下链接中的代码来恢复正常。</p>
<ul>
<li><a href="https://github.com/flutter/codelabs/blob/b3293b5bb0c0187bdbe8112f7759f4d75f4c040a/startup_namer/step3_stateful_widget/lib/main.dart">lib/main.dart</a></li>
</ul>
<h2 id="创建一个无限滚动的-listview">创建一个无限滚动的 ListView</h2>
<p>在这一步中，您将展开 <code>_RandomWordsState</code> 来生成并显示单词配对列表。随着用户的滚动，列表（显示在 ListView 小组件中）会无限增长。ListView 中的构建器工厂构造函数允许你按需懒惰地构建一个列表视图。</p>
<p>在 <code>_RandomWordState</code> 类中添加一些状态变量。</p>
<p>增加一个 <code>_suggestions</code> 列表，用于保存建议的单词配对。另外，添加一个 <code>_biggerFont</code> 变量，用于使字体大小变大。</p>
<div class="highlight"><pre class="chroma"><code class="language-dart" data-lang="dart"><span class="kd">class</span> <span class="nc">_RandomWordsState</span> <span class="kd">extends</span> <span class="n">State</span><span class="o">&lt;</span><span class="n">RandomWords</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">WordPair</span><span class="o">&gt;</span> <span class="n">_suggestions</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">WordPair</span><span class="o">&gt;</span><span class="p">[</span><span class="p">]</span><span class="p">;</span>            <span class="c1">// NEW
</span><span class="c1"></span>  <span class="kd">final</span> <span class="n">TextStyle</span> <span class="n">_biggerFont</span> <span class="o">=</span> <span class="kd">const</span> <span class="n">TextStyle</span><span class="p">(</span><span class="nl">fontSize:</span> <span class="m">18</span><span class="p">)</span><span class="p">;</span> <span class="c1">// NEW
</span><span class="c1"></span>  <span class="p">.</span><span class="p">.</span><span class="p">.</span>
<span class="p">}</span>
</code></pre></div><p>接下来，你将在 <code>_RandomWordsState</code> 类中添加一个 <code>_buildSuggestions()</code> 函数。这个方法可以构建显示建议词对的 <code>ListView</code>。</p>
<p><code>ListView</code> 类提供了一个构建器属性 <code>itemBuilder</code>，它是一个工厂构建器和回调函数，指定为一个匿名函数。两个参数被传递给函数&ndash;<code>BuildContext</code> 和行迭代器 <code>i</code>。迭代器从0开始，每次调用函数时递增，每一个建议的单词配对都会递增一次。这个模型允许建议列表在用户滚动时继续增长。</p>
<p>添加整个 <code>_buildSuggestions</code> 函数。</p>
<p>在 <code>_RandomWordsState</code> 类中，添加以下函数，如果你喜欢，请删除注释:</p>
<div class="highlight"><pre class="chroma"><code class="language-dart" data-lang="dart"><span class="n">Widget</span> <span class="n">_buildSuggestions</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">ListView</span><span class="p">.</span><span class="n">builder</span><span class="p">(</span>
      <span class="nl">padding:</span> <span class="kd">const</span> <span class="n">EdgeInsets</span><span class="p">.</span><span class="n">all</span><span class="p">(</span><span class="m">16</span><span class="p">)</span><span class="p">,</span>
      <span class="c1">// The itemBuilder callback is called once per suggested 
</span><span class="c1"></span>      <span class="c1">// word pairing, and places each suggestion into a ListTile
</span><span class="c1"></span>      <span class="c1">// row. For even rows, the function adds a ListTile row for
</span><span class="c1"></span>      <span class="c1">// the word pairing. For odd rows, the function adds a 
</span><span class="c1"></span>      <span class="c1">// Divider widget to visually separate the entries. Note that
</span><span class="c1"></span>      <span class="c1">// the divider may be difficult to see on smaller devices.
</span><span class="c1"></span>      <span class="nl">itemBuilder:</span> <span class="p">(</span><span class="n">BuildContext</span> <span class="n">_context</span><span class="p">,</span> <span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Add a one-pixel-high divider widget before each row 
</span><span class="c1"></span>        <span class="c1">// in the ListView.
</span><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">isOdd</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="n">Divider</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">// The syntax &#34;i ~/ 2&#34; divides i by 2 and returns an 
</span><span class="c1"></span>        <span class="c1">// integer result.
</span><span class="c1"></span>        <span class="c1">// For example: 1, 2, 3, 4, 5 becomes 0, 1, 1, 2, 2.
</span><span class="c1"></span>        <span class="c1">// This calculates the actual number of word pairings 
</span><span class="c1"></span>        <span class="c1">// in the ListView,minus the divider widgets.
</span><span class="c1"></span>        <span class="kd">final</span> <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">i</span> <span class="o">~</span><span class="o">/</span> <span class="m">2</span><span class="p">;</span>
        <span class="c1">// If you&#39;ve reached the end of the available word
</span><span class="c1"></span>        <span class="c1">// pairings...
</span><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="n">index</span> <span class="o">&gt;</span><span class="o">=</span> <span class="n">_suggestions</span><span class="p">.</span><span class="n">length</span><span class="p">)</span> <span class="p">{</span>
          <span class="c1">// ...then generate 10 more and add them to the 
</span><span class="c1"></span>          <span class="c1">// suggestions list.
</span><span class="c1"></span>          <span class="n">_suggestions</span><span class="p">.</span><span class="n">addAll</span><span class="p">(</span><span class="n">generateWordPairs</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="n">take</span><span class="p">(</span><span class="m">10</span><span class="p">)</span><span class="p">)</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">_buildRow</span><span class="p">(</span><span class="n">_suggestions</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="p">)</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">)</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre></div><p><code>_buildSuggestions</code> 函数对每个词对调用一次 <code>_buildRow</code>。该函数在 <code>ListTile</code> 中显示每一个新的词对，这使得你可以在<a href="https://codelabs.developers.google.com/codelabs/first-flutter-app-pt2/index.html?index=..%2F..index#0">第2部分</a>中使行更有吸引力。</p>
<p>在 <code>_RandomWordsState</code> 中添加一个 <code>_buildRow</code> 函数。</p>
<div class="highlight"><pre class="chroma"><code class="language-dart" data-lang="dart"><span class="n">Widget</span> <span class="n">_buildRow</span><span class="p">(</span><span class="n">WordPair</span> <span class="n">pair</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">ListTile</span><span class="p">(</span>
      <span class="nl">title:</span> <span class="n">Text</span><span class="p">(</span>
        <span class="n">pair</span><span class="p">.</span><span class="n">asPascalCase</span><span class="p">,</span>
        <span class="nl">style:</span> <span class="n">_biggerFont</span><span class="p">,</span>
      <span class="p">)</span><span class="p">,</span>
    <span class="p">)</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre></div><p>更新 <code>_RandomWordsState</code> 的构建方法。</p>
<p>将其改为使用 <code>_buildSuggestions()</code>，而不是直接调用单词生成库。(<code>Scaffold</code> 实现了基本的 Material Design 视觉布局。)</p>
<div class="highlight"><pre class="chroma"><code class="language-dart" data-lang="dart"><span class="err">@</span><span class="n">override</span>
<span class="n">Widget</span> <span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//final wordPair = WordPair.random(); // Delete these... 
</span><span class="c1"></span>    <span class="c1">//return Text(wordPair.asPascalCase); // ... two lines.
</span><span class="c1"></span>
    <span class="k">return</span> <span class="n">Scaffold</span> <span class="p">(</span>                     <span class="c1">// Add from here... 
</span><span class="c1"></span>      <span class="nl">appBar:</span> <span class="n">AppBar</span><span class="p">(</span>
        <span class="nl">title:</span> <span class="n">Text</span><span class="p">(</span><span class="s1">&#39;</span><span class="s1">Startup Name Generator</span><span class="s1">&#39;</span><span class="p">)</span><span class="p">,</span>
      <span class="p">)</span><span class="p">,</span>
      <span class="nl">body:</span> <span class="n">_buildSuggestions</span><span class="p">(</span><span class="p">)</span><span class="p">,</span>
    <span class="p">)</span><span class="p">;</span>                                      <span class="c1">// ... to here.
</span><span class="c1"></span>  <span class="p">}</span>
</code></pre></div><p>更新 <code>MyApp</code> 的构建方法，更改标题，删除 <code>AppBar</code>，并将 home 属性改为 <code>RandomWords</code> 部件。</p>
<div class="highlight"><pre class="chroma"><code class="language-dart" data-lang="dart"><span class="err">@</span><span class="n">override</span>
<span class="n">Widget</span> <span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">MaterialApp</span><span class="p">(</span>
      <span class="nl">title:</span> <span class="s1">&#39;</span><span class="s1">Startup Name Generator</span><span class="s1">&#39;</span><span class="p">,</span>
      <span class="nl">home:</span> <span class="n">RandomWords</span><span class="p">(</span><span class="p">)</span><span class="p">,</span>
    <span class="p">)</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre></div><p>重新启动应用程序。无论你滚动多远，你都应该看到一个单词配对的列表。</p>
<p>Android:</p>
<p><img src="https://codelabs.developers.google.com/codelabs/first-flutter-app-pt1/img/df2b3cb779e0020e.png" alt="img"></p>
<p>iOS:</p>
<p><img src="https://codelabs.developers.google.com/codelabs/first-flutter-app-pt1/img/ae47ef0ac2f492b8.png" alt="img"></p>
<h3 id="遇到问题了-1">遇到问题了？</h3>
<p>如果你的应用程序不能正常运行，你可以使用下面链接中的代码来回到正轨。</p>
<ul>
<li><a href="https://github.com/flutter/codelabs/blob/b3293b5bb0c0187bdbe8112f7759f4d75f4c040a/startup_namer/step4_infinite_list/lib/main.dart">lib/main.dart</a></li>
</ul>
<h2 id="今后的步骤">今后的步骤</h2>
<p><strong>恭喜你！</strong></p>
<p>你已经完成了这个代码实验室的第一部分! 如果你想扩展这款应用，请进入<a href="https://codelabs.developers.google.com/codelabs/first-flutter-app-pt2/#0">第二部分</a>，你将对应用进行如下修改。</p>
<ul>
<li>增加互动性</li>
<li>增加导航到新路由的功能。</li>
<li>修改主题颜色。</li>
</ul>
<p>当第2部分完成后，应用程序将是这样的：</p>
<p><img src="https://codelabs.developers.google.com/codelabs/first-flutter-app-pt1/img/7fcab088cd22cff7.gif" alt="img"></p>
<h3 id="其他后续步骤">其他后续步骤</h3>
<p>通过以下资源了解更多关于 Flutter SDK 的信息。</p>
<ul>
<li><a href="https://flutter.dev/docs/development/ui/layout">Flutter 中的布局</a></li>
<li><a href="https://flutter.dev/docs/development/ui/interactive">增加互动性教程</a></li>
<li><a href="https://flutter.dev/docs/development/ui/widgets-intro">组件介绍</a></li>
<li><a href="https://flutter.dev/docs/get-started/flutter-for/android-devs">为 Android 开发者提供的 Flutter</a></li>
<li><a href="https://flutter.dev/docs/get-started/flutter-for/react-native-devs">针对 React Native 开发者的 Flutter</a></li>
<li><a href="https://flutter.dev/docs/get-started/flutter-for/web-devs">Web 开发人员的 Flutter</a></li>
<li><a href="https://www.youtube.com/flutterdev">Flutter YouTube 频道</a></li>
</ul>
<p>其他资源包括以下几点:</p>
<ul>
<li><a href="https://www.udacity.com/course/build-native-mobile-apps-with-flutter--ud905">用 Flutter 构建本地移动应用</a></li>
<li><a href="https://codelabs.developers.google.com/codelabs/from-java-to-dart/#1">从 Java 到 Dart codelab</a></li>
<li><a href="https://flutter.dev/cookbook/">Flutter cookbook</a></li>
<li><a href="https://flutter.dev/bootstrap-into-dart/">融入 Dart 的 Bootstrap：了解更多关于这门语言的信息</a></li>
</ul>
<p>同时，<a href="https://flutter.dev/community">与 Flutter 社区联系起来!</a></p>
]]></content>
            
                 
                    
                         
                        
                            
                             
                                <category scheme="https://ohmyweekly.github.io/categories/programming" term="programming" label="programming" />
                            
                        
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://ohmyweekly.github.io/tags/flutter" term="flutter" label="flutter" />
                             
                                <category scheme="https://ohmyweekly.github.io/tags/app" term="app" label="app" />
                            
                        
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[编写你的第一个 Flutter 应用，第二部分]]></title>
            <link href="https://ohmyweekly.github.io/notes/write-your-first-flutter-app-part-two/?utm_source=atom_feed" rel="alternate" type="text/html" />
            
                <link href="https://ohmyweekly.github.io/notes/write-your-first-flutter-app/?utm_source=atom_feed" rel="related" type="text/html" title="编写你的第一个 Flutter 应用，第一部分" />
            
                <id>https://ohmyweekly.github.io/notes/write-your-first-flutter-app-part-two/</id>
            
            
                    <author>
                        <name>焉知非鱼</name>
                    </author>
            <published>2020-06-26T00:00:00+08:00</published>
            <updated>2020-06-26T00:00:00+08:00</updated>
            
            
            <content type="html"><![CDATA[<blockquote>Flutter 是 Google 的 UI 工具包，用于从单一代码库中为手机、网页和桌面构建漂亮的、原生编译的应用程序。Flutter 可以与现有的代码一起使用，被世界各地的开发者和组织使用，并且是免费和开源的。</blockquote><h2 id="介绍">介绍</h2>
<p>Flutter 是 Google 的 UI 工具包，用于从单一代码库中为移动、Web 和桌面构建漂亮的、原生编译的应用程序。Flutter 可以与现有的代码一起工作，被世界各地的开发者和组织使用，并且是免费和开源的。</p>
<p>在这个代码实验室中，您将扩展一个基本的、移动的 Flutter 应用程序，以包含交互性。您还将创建一个用户可以导航到的第二个页面（称为路由）。最后，您将修改应用程序的主题（颜色）。这个代码实验室扩展了第1部分，在这部分中，你将<a href="https://codelabs.developers.google.com/codelabs/first-flutter-app-pt1/">创建一个无限的懒惰加载的列表</a>，但如果你想从第2部分开始，我们将提供起始代码。</p>
<h3 id="你将在第二部分学到什么">你将在第二部分学到什么</h3>
<ul>
<li>如何编写一款在 iOS、Android 和 Web 上看起来很自然的 Flutter 应用？</li>
<li>如何使用热重装，加快开发周期？</li>
<li>如何为有状态的 widget 添加交互性？</li>
<li>如何创建并导航到第二个屏幕？</li>
<li>如何使用主题来改变应用程序的外观？</li>
</ul>
<h3 id="你将在第二部分建立什么">你将在第二部分建立什么</h3>
<p>您将从一个简单的移动应用程序开始，为创业公司生成一个无尽的建议名称列表。在代码实验室结束时，您的最终用户可以选择和取消选择名称，保存最好的名称。点击应用栏右上角的列表图标可以导航到一个新的页面（称为路由），该页面只列出了最喜欢的名字。</p>
<p>下面的 GIF 动画显示了完成的应用程序将如何工作。</p>
<p><img src="https://codelabs.developers.google.com/codelabs/first-flutter-app-pt2/img/7fcab088cd22cff7.gif" alt="img"></p>
<h2 id="设置您的-flutter-环境">设置您的 Flutter 环境</h2>
<p>如果你还没有完成第1部分，请看<a href="https://codelabs.developers.google.com/codelabs/first-flutter-app-pt1/#1">设置你的 Flutter 环境</a>，在<a href="https://codelabs.developers.google.com/codelabs/first-flutter-app-pt1/">编写你的第一个Flutter应用，第1部分</a>，设置你的 Flutter 开发环境。</p>
<h2 id="获取启动应用程序">获取启动应用程序</h2>
<p>如果你已经完成了这个 codelab 的第一部分，你已经有了启动应用程序，<code>startup_namer</code>。你可以进行下一步。</p>
<p>如果你没有 <code>startup_namer</code>，不要害怕，你可以使用下面的说明得到它。</p>
<p>使用<a href="https://flutter.dev/get-started/test-drive/#create-app">创建应用程序</a>中的说明创建一个简单的模板化 Flutter 应用程序。将项目命名为 <code>startup_namer</code>（而不是 <code>flutter_app</code>）。</p>
<p>删除 <code>lib/main.dart</code> 中的所有代码。用这个<a href="https://github.com/flutter/codelabs/blob/b3293b5bb0c0187bdbe8112f7759f4d75f4c040a/startup_namer/step4_infinite_list/lib/main.dart">文件</a>中的代码替换，它显示了一个无限的，懒惰加载的建议启动名称列表。</p>
<p>更新 <code>pubspec.yaml</code>，加入英文单词包。</p>
<div class="highlight"><pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="k">dependencies</span><span class="p">:</span><span class="w">
</span><span class="w"></span><span class="w">  </span><span class="k">flutter</span><span class="p">:</span><span class="w">
</span><span class="w"></span><span class="w">    </span><span class="k">sdk</span><span class="p">:</span><span class="w"> </span>flutter<span class="w">
</span><span class="w">
</span><span class="w">  </span><span class="k">cupertino_icons</span><span class="p">:</span><span class="w"> </span>^<span class="m">0.1</span><span class="m">.2</span><span class="w">
</span><span class="w">  </span><span class="k">english_words</span><span class="p">:</span><span class="w"> </span>^<span class="m">3.1</span><span class="m">.5</span><span class="w">    </span>//<span class="w"> </span>NEW<span class="w">
</span></code></pre></div><p>英文单词包会生成一对随机的单词，作为潜在的启动名称。</p>
<p>在 Android Studio 的编辑器视图中查看 pubspec 时，点击右上角的 <strong>Pub get</strong>，这将包拉到你的项目中。你应该在控制台中看到以下内容:</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">flutter pub get
Running <span class="s2">&#34;flutter pub get&#34;</span> in startup_namer...
Process finished with <span class="nb">exit</span> code <span class="m">0</span>
</code></pre></div><p>运行该应用。</p>
<p>随意滚动，查看持续供应的拟创业公司名称。</p>
<h2 id="将图标添加到列表中">将图标添加到列表中</h2>
<p>在这一步中，你将为每一行添加心形图标。在下一步中，您将使它们可点击并保存收藏夹。</p>
<p>在 <code>_RandomWordsState</code> 中添加一个 <code>_saved</code> Set。这个 <code>Set</code> 存储了用户收藏的单词配对。<code>Set</code> 比 <code>List</code> 更受欢迎，因为一个正确实现的 <code>Set</code> 不允许重复的条目。</p>
<div class="highlight"><pre class="chroma"><code class="language-dart" data-lang="dart"><span class="kd">class</span> <span class="nc">_RandomWordsState</span> <span class="kd">extends</span> <span class="n">State</span><span class="o">&lt;</span><span class="n">RandomWords</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">_suggestions</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">WordPair</span><span class="o">&gt;</span><span class="p">[</span><span class="p">]</span><span class="p">;</span>
  <span class="kd">final</span> <span class="n">_saved</span> <span class="o">=</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">WordPair</span><span class="o">&gt;</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>     <span class="c1">// NEW
</span><span class="c1"></span>  <span class="kd">final</span> <span class="n">_biggerFont</span> <span class="o">=</span> <span class="n">TextStyle</span><span class="p">(</span><span class="nl">fontSize:</span> <span class="m">18.0</span><span class="p">)</span><span class="p">;</span>
  <span class="p">.</span><span class="p">.</span><span class="p">.</span>
<span class="p">}</span>
</code></pre></div><p>在 <code>_buildRow</code> 函数中，添加一个 <code>alreadySaved</code> 检查，以确保一个单词配对还没有被添加到收藏夹中。</p>
<div class="highlight"><pre class="chroma"><code class="language-dart" data-lang="dart"><span class="n">Widget</span> <span class="n">_buildRow</span><span class="p">(</span><span class="n">WordPair</span> <span class="n">pair</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">alreadySaved</span> <span class="o">=</span> <span class="n">_saved</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span><span class="p">;</span>  <span class="c1">// NEW
</span><span class="c1"></span>  <span class="p">.</span><span class="p">.</span><span class="p">.</span>
<span class="p">}</span>
</code></pre></div><p>在 <code>_buildRow()</code> 中，你还将为 <code>ListTile</code> 对象添加心形图标以实现收藏夹。在下一步中，你将添加与心形图标交互的功能。</p>
<p>在文本之后添加图标，如下图所示。</p>
<div class="highlight"><pre class="chroma"><code class="language-dart" data-lang="dart"><span class="n">Widget</span> <span class="n">_buildRow</span><span class="p">(</span><span class="n">WordPair</span> <span class="n">pair</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">alreadySaved</span> <span class="o">=</span> <span class="n">_saved</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">ListTile</span><span class="p">(</span>
    <span class="nl">title:</span> <span class="n">Text</span><span class="p">(</span>
      <span class="n">pair</span><span class="p">.</span><span class="n">asPascalCase</span><span class="p">,</span>
      <span class="nl">style:</span> <span class="n">_biggerFont</span><span class="p">,</span>
    <span class="p">)</span><span class="p">,</span>
    <span class="nl">trailing:</span> <span class="n">Icon</span><span class="p">(</span>   <span class="c1">// NEW from here... 
</span><span class="c1"></span>      <span class="n">alreadySaved</span> <span class="o">?</span> <span class="n">Icons</span><span class="p">.</span><span class="n">favorite</span> <span class="o">:</span> <span class="n">Icons</span><span class="p">.</span><span class="n">favorite_border</span><span class="p">,</span>
      <span class="nl">color:</span> <span class="n">alreadySaved</span> <span class="o">?</span> <span class="n">Colors</span><span class="p">.</span><span class="n">red</span> <span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="p">)</span><span class="p">,</span>                <span class="c1">// ... to here.
</span><span class="c1"></span>  <span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><p>热重新加载应用程序。</p>
<p>你现在应该看到每一行都有空心，但它们还没有互动。</p>
<p>Android</p>
<p><img src="https://codelabs.developers.google.com/codelabs/first-flutter-app-pt2/img/819e2ff89da9421a.png" alt="img"></p>
<p>iOS</p>
<p><img src="https://codelabs.developers.google.com/codelabs/first-flutter-app-pt2/img/4df48933551e7c48.png" alt="img"></p>
<h3 id="遇到问题了">遇到问题了？</h3>
<p>如果你的应用程序不能正常运行，你可以使用下面链接中的代码来回到正轨。</p>
<ul>
<li><a href="https://github.com/flutter/codelabs/blob/master/startup_namer/step5_add_icons/lib/main.dart">lib/main.dart</a></li>
</ul>
<h2 id="增加互动性">增加互动性</h2>
<p>在这一步中，你将使心形图标可以点击。当用户点击列表中的一个条目，切换其收藏状态时，该词对就会从一组保存的收藏夹中添加或删除。</p>
<p>要做到这一点，你将修改 <code>_buildRow</code> 函数。如果一个词条已经被添加到收藏夹中，再次点击它就会将其从收藏夹中删除。当一个磁贴被点击后，函数会调用 <code>setState()</code> 来通知框架状态已经改变。</p>
<p>在 <code>_buildRow</code> 方法中加入 <code>onTap</code>，如下图所示:</p>
<div class="highlight"><pre class="chroma"><code class="language-dart" data-lang="dart"><span class="n">Widget</span> <span class="n">_buildRow</span><span class="p">(</span><span class="n">WordPair</span> <span class="n">pair</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">alreadySaved</span> <span class="o">=</span> <span class="n">_saved</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">ListTile</span><span class="p">(</span>
    <span class="nl">title:</span> <span class="n">Text</span><span class="p">(</span>
      <span class="n">pair</span><span class="p">.</span><span class="n">asPascalCase</span><span class="p">,</span>
      <span class="nl">style:</span> <span class="n">_biggerFont</span><span class="p">,</span>
    <span class="p">)</span><span class="p">,</span>
    <span class="nl">trailing:</span> <span class="n">Icon</span><span class="p">(</span>
      <span class="n">alreadySaved</span> <span class="o">?</span> <span class="n">Icons</span><span class="p">.</span><span class="n">favorite</span> <span class="o">:</span> <span class="n">Icons</span><span class="p">.</span><span class="n">favorite_border</span><span class="p">,</span>
      <span class="nl">color:</span> <span class="n">alreadySaved</span> <span class="o">?</span> <span class="n">Colors</span><span class="p">.</span><span class="n">red</span> <span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="p">)</span><span class="p">,</span>
    <span class="nl">onTap:</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>      <span class="c1">// NEW lines from here...
</span><span class="c1"></span>      <span class="n">setState</span><span class="p">(</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">alreadySaved</span><span class="p">)</span> <span class="p">{</span>
          <span class="n">_saved</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> 
          <span class="n">_saved</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span><span class="p">;</span> 
        <span class="p">}</span> 
      <span class="p">}</span><span class="p">)</span><span class="p">;</span>
    <span class="p">}</span><span class="p">,</span>               <span class="c1">// ... to here.
</span><span class="c1"></span>  <span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><p>提示：在 Flutter 的反应式框架中，调用 <code>setState()</code> 会触发对 <code>State</code> 对象的 <code>build()</code> 方法的调用，导致 UI 的更新。</p>
<p>热重载应用。</p>
<p>你应该能够点击任何磁贴来收藏或不收藏该条目。点击瓷砖会产生一个隐含的从点击点发出的泼墨动画。</p>
<p>Android</p>
<p><img src="https://codelabs.developers.google.com/codelabs/first-flutter-app-pt2/img/43dfc7ba5f728e8f.png" alt="img"></p>
<p>iOS</p>
<p><img src="https://codelabs.developers.google.com/codelabs/first-flutter-app-pt2/img/e7a99a1b94bea7d4.png" alt="img"></p>
<h3 id="遇到问题了-1">遇到问题了？</h3>
<p>如果你的应用程序不能正常运行，你可以使用下面链接中的代码来回到正轨。</p>
<ul>
<li><a href="https://github.com/flutter/codelabs/blob/master/startup_namer/step6_add_interactivity/lib/main.dart">lib/main.dart</a></li>
</ul>
<h2 id="导航到一个新的屏幕">导航到一个新的屏幕</h2>
<p>在这一步中，您将添加一个新的页面（在 Flutter 中称为路由），显示收藏夹。您将学习如何在主页路线和新路由之间进行导航。</p>
<p>在 Flutter 中，<code>Navigator</code> 管理着一个包含应用程序路由的堆栈。将一个路由推到 <code>Navigator</code> 的堆栈上，会将显示更新到该路由。从 <code>Navigator</code> 的堆栈中弹出一条路由，会将显示返回到之前的路由。</p>
<p>接下来，您将在 <code>_RandomWordsState</code> 的 <code>build</code> 方法中为 <code>AppBar</code> 添加一个列表图标。当用户点击列表图标时，一个包含保存的收藏夹的新路由会被推送到 <code>Navigator</code>，显示图标。</p>
<p>在 <code>build</code> 方法中添加图标及其对应的操作:</p>
<div class="highlight"><pre class="chroma"><code class="language-dart" data-lang="dart"><span class="kd">class</span> <span class="nc">_RandomWordsState</span> <span class="kd">extends</span> <span class="n">State</span><span class="o">&lt;</span><span class="n">RandomWords</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="p">.</span><span class="p">.</span><span class="p">.</span>
  <span class="err">@</span><span class="n">override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">Scaffold</span><span class="p">(</span>
      <span class="nl">appBar:</span> <span class="n">AppBar</span><span class="p">(</span>
        <span class="nl">title:</span> <span class="n">Text</span><span class="p">(</span><span class="s1">&#39;</span><span class="s1">Startup Name Generator</span><span class="s1">&#39;</span><span class="p">)</span><span class="p">,</span>
        <span class="nl">actions:</span> <span class="p">[</span>              <span class="c1">// NEW lines from here...
</span><span class="c1"></span>          <span class="n">IconButton</span><span class="p">(</span><span class="nl">icon:</span> <span class="n">Icon</span><span class="p">(</span><span class="n">Icons</span><span class="p">.</span><span class="n">list</span><span class="p">)</span><span class="p">,</span> <span class="nl">onPressed:</span> <span class="n">_pushSaved</span><span class="p">)</span><span class="p">,</span>
        <span class="p">]</span><span class="p">,</span>                      <span class="c1">// ... to here.
</span><span class="c1"></span>      <span class="p">)</span><span class="p">,</span>
      <span class="nl">home:</span> <span class="n">RandomWords</span><span class="p">(</span><span class="p">)</span><span class="p">,</span>
    <span class="p">)</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="p">.</span><span class="p">.</span><span class="p">.</span>
<span class="p">}</span>
</code></pre></div><p>提示：一些小组件属性会取一个小组件(<code>child</code>)，而其他属性，如 <code>action</code>，会取一组小组件(<code>children</code>), 如方括号(<code>[]</code>)所示。</p>
<p>在 <code>_RandomWordsState</code> 类中添加一个 <code>_pushSaved()</code> 函数。</p>
<div class="highlight"><pre class="chroma"><code class="language-dart" data-lang="dart"><span class="kt">void</span> <span class="n">_pushSaved</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre></div><p>热重新加载应用程序。<a href="https://codelabs.developers.google.com/codelabs/first-flutter-app-pt2/img/a114478ae13b853.png">列表图标</a>出现在应用栏中。点击它还没有任何作用，因为 <code>_pushSaved</code> 函数是空的。</p>
<p>接下来，你将建立一条路由，并将其推送到 <code>Navigator</code> 的栈中。这个操作会改变屏幕以显示新的路由。新页面的内容是在 <code>MaterialPageRoute</code> 的构建器属性中以匿名函数的方式构建的。</p>
<p>调用 <code>Navigator.push</code>，如下图所示，它将路由推送到 <code>Navigator</code> 的堆栈中。IDE 会抱怨无效代码，但你会在下一节中解决这个问题。</p>
<div class="highlight"><pre class="chroma"><code class="language-dart" data-lang="dart"><span class="kt">void</span> <span class="n">_pushSaved</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Navigator</span><span class="p">.</span><span class="n">of</span><span class="p">(</span><span class="n">context</span><span class="p">)</span><span class="p">.</span><span class="n">push</span><span class="p">(</span>
  <span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><p>接下来，你将添加 <code>MaterialPageRoute</code> 和它的构建器。现在，添加生成 <code>ListTile</code> 行的代码。<code>ListTile</code> 的 <code>divideTiles()</code> 方法在每个 <code>ListTile</code> 之间增加了水平间距。被划分的变量持有通过方便函数 <code>toList()</code> 转换为列表的最终行。</p>
<p>添加代码，如下面的代码片段所示:</p>
<div class="highlight"><pre class="chroma"><code class="language-dart" data-lang="dart"><span class="kt">void</span> <span class="n">_pushSaved</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Navigator</span><span class="p">.</span><span class="n">of</span><span class="p">(</span><span class="n">context</span><span class="p">)</span><span class="p">.</span><span class="n">push</span><span class="p">(</span>
      <span class="n">MaterialPageRoute</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="p">(</span>
        <span class="c1">// NEW lines from here...
</span><span class="c1"></span>        <span class="nl">builder:</span> <span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">final</span> <span class="n">tiles</span> <span class="o">=</span> <span class="n">_saved</span><span class="p">.</span><span class="n">map</span><span class="p">(</span>
            <span class="p">(</span><span class="n">WordPair</span> <span class="n">pair</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="n">ListTile</span><span class="p">(</span>
                <span class="nl">title:</span> <span class="n">Text</span><span class="p">(</span>
                  <span class="n">pair</span><span class="p">.</span><span class="n">asPascalCase</span><span class="p">,</span>
                  <span class="nl">style:</span> <span class="n">_biggerFont</span><span class="p">,</span>
                <span class="p">)</span><span class="p">,</span>
              <span class="p">)</span><span class="p">;</span>
            <span class="p">}</span><span class="p">,</span>
          <span class="p">)</span><span class="p">;</span>
          <span class="kd">final</span> <span class="n">divided</span> <span class="o">=</span> <span class="n">ListTile</span><span class="p">.</span><span class="n">divideTiles</span><span class="p">(</span>
            <span class="nl">context:</span> <span class="n">context</span><span class="p">,</span>
            <span class="nl">tiles:</span> <span class="n">tiles</span><span class="p">,</span>
          <span class="p">)</span><span class="p">.</span><span class="n">toList</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>

          <span class="k">return</span> <span class="n">Scaffold</span><span class="p">(</span>
            <span class="nl">appBar:</span> <span class="n">AppBar</span><span class="p">(</span>
              <span class="nl">title:</span> <span class="n">Text</span><span class="p">(</span><span class="s1">&#39;</span><span class="s1">Saved Suggestions</span><span class="s1">&#39;</span><span class="p">)</span><span class="p">,</span>
            <span class="p">)</span><span class="p">,</span>
            <span class="nl">body:</span> <span class="n">ListView</span><span class="p">(</span><span class="nl">children:</span> <span class="n">divided</span><span class="p">)</span><span class="p">,</span>
          <span class="p">)</span><span class="p">;</span>
        <span class="p">}</span><span class="p">,</span> <span class="c1">// ...to here.
</span><span class="c1"></span>      <span class="p">)</span><span class="p">,</span>
    <span class="p">)</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p><code>builder</code> 属性返回一个 <code>Scaffold</code>，包含名为 <code>SavedSuggestions</code> 的新路由的应用栏。新路由的主体由一个包含 <code>ListTiles</code> 行的 <code>ListView</code> 组成。每一行都由一个分隔符隔开。</p>
<p>热重载应用。将一些选择收藏起来，然后点击应用栏中的列表图标。新的路由出现，包含收藏夹。请注意，Navigator 在应用栏中增加了一个&quot;返回&quot;按钮。你不必明确地实现 <code>Navigator.pop</code>。点击&quot;返回&quot;按钮就可以返回到主路由。</p>
<p>iOS - Main route</p>
<p><img src="https://codelabs.developers.google.com/codelabs/first-flutter-app-pt2/img/928693968b8e482a.png" alt="img"></p>
<p>iOS - Saved suggestions route</p>
<p><img src="https://codelabs.developers.google.com/codelabs/first-flutter-app-pt2/img/2245376356747d5a.png" alt="img"></p>
<h3 id="遇到问题了-2">遇到问题了？</h3>
<p>如果你的应用程序没有正确运行，那么你可以使用下面链接中的代码来回到正轨。</p>
<ul>
<li><a href="https://github.com/flutter/codelabs/blob/master/startup_namer/step7_navigate_route/lib/main.dart">lib/main.dart</a></li>
</ul>
<h2 id="使用主题改变用户界面">使用主题改变用户界面</h2>
<p>在这一步中，您将修改应用程序的主题。主题控制你的应用程序的外观和感觉。您可以使用默认主题，这取决于物理设备或模拟器，或者自定义主题以反映您的品牌。</p>
<p>您可以通过配置 <a href="https://docs.flutter.io/flutter/material/ThemeData-class.html">ThemeData</a> 类轻松更改应用程序的主题。应用程序使用默认主题，但你会将应用程序的主色调改为白色。</p>
<p>在 <code>MyApp</code> 类中更改颜色:</p>
<div class="highlight"><pre class="chroma"><code class="language-dart" data-lang="dart"><span class="kd">class</span> <span class="nc">MyApp</span> <span class="kd">extends</span> <span class="n">StatelessWidget</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">MaterialApp</span><span class="p">(</span>
      <span class="nl">title:</span> <span class="s1">&#39;</span><span class="s1">Startup Name Generator</span><span class="s1">&#39;</span><span class="p">,</span>
      <span class="nl">theme:</span> <span class="n">ThemeData</span><span class="p">(</span>          <span class="c1">// Add the 3 lines from here... 
</span><span class="c1"></span>        <span class="nl">primaryColor:</span> <span class="n">Colors</span><span class="p">.</span><span class="n">white</span><span class="p">,</span>
      <span class="p">)</span><span class="p">,</span>                         <span class="c1">// ... to here.
</span><span class="c1"></span>      <span class="nl">home:</span> <span class="n">RandomWords</span><span class="p">(</span><span class="p">)</span><span class="p">,</span>
    <span class="p">)</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>热重载应用。现在整个背景都是白色的，甚至应用栏也是白色的。</p>
<p>作为一个练习，使用 <code>ThemeData</code> 来改变 UI 的其他方面。Material 库中的 <a href="https://docs.flutter.io/flutter/material/Colors-class.html">Colors</a> 类提供了许多你可以玩的颜色常量。热重载使得对 UI 的实验变得快速而简单。</p>
<p>Android</p>
<p><img src="https://codelabs.developers.google.com/codelabs/first-flutter-app-pt2/img/5d4ed8aeea9e4d0a.png" alt="img"></p>
<p>iOS</p>
<p><img src="https://codelabs.developers.google.com/codelabs/first-flutter-app-pt2/img/c325151f1ae4820d.png" alt="img"></p>
<h3 id="遇到问题了-3">遇到问题了？</h3>
<p>如果你已经偏离了轨道，那么使用下面链接中的代码来查看最终应用的代码。</p>
<p>= <a href="https://github.com/flutter/codelabs/blob/master/startup_namer/step8_themes/lib/main.darts">lib/main.dart</a></p>
<h2 id="做得很好">做得很好！</h2>
<p>你写了一个交互式的 Flutter 应用，可以在 iOS 和 Android 上运行，具体做法如下</p>
<ul>
<li>编写 Dart 代码。</li>
<li>使用热重载来加快开发周期。</li>
<li>实现一个有状态的 widget，为你的应用添加交互性。</li>
<li>创建途径并添加在原途径和新途径之间移动的逻辑。</li>
<li>学习如何使用主题改变你的应用程序的 UI 外观。</li>
</ul>
<h2 id="今后的步骤">今后的步骤</h2>
<p>从以下资源中了解更多关于 Flutter SDK 的信息。</p>
<ul>
<li><a href="https://flutter.dev/docs/development/ui/layout">Flutter 中的布局</a></li>
<li><a href="https://flutter.dev/docs/development/ui/interactive">增加互动性教程</a></li>
<li><a href="https://flutter.dev/docs/development/ui/widgets-intro">组件介绍</a></li>
<li><a href="https://flutter.dev/docs/get-started/flutter-for/android-devs">为 Android 开发者提供的 Flutter</a></li>
<li><a href="https://flutter.dev/docs/get-started/flutter-for/react-native-devs">针对 React Native 开发者的 Flutter</a></li>
<li><a href="https://flutter.dev/docs/get-started/flutter-for/web-devs">Web 开发人员的 Flutter</a></li>
<li><a href="https://www.youtube.com/flutterdev">Flutter YouTube 频道</a></li>
</ul>
<p>其他资源包括以下几点:</p>
<ul>
<li><a href="https://www.udacity.com/course/build-native-mobile-apps-with-flutter--ud905">用 Flutter 构建本地移动应用</a></li>
<li><a href="https://codelabs.developers.google.com/codelabs/from-java-to-dart/#1">从 Java 到 Dart codelab</a></li>
<li><a href="https://flutter.dev/cookbook/">Flutter cookbook</a></li>
<li><a href="https://flutter.dev/bootstrap-into-dart/">融入 Dart 的 Bootstrap：了解更多关于这门语言的信息</a></li>
</ul>
<p>同时，<a href="https://flutter.dev/community">与 Flutter 社区联系起来!</a></p>
]]></content>
            
                 
                    
                         
                        
                            
                             
                                <category scheme="https://ohmyweekly.github.io/categories/programming" term="programming" label="programming" />
                            
                        
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://ohmyweekly.github.io/tags/flutter" term="flutter" label="flutter" />
                             
                                <category scheme="https://ohmyweekly.github.io/tags/app" term="app" label="app" />
                            
                        
                    
                
            
        </entry>
    
</feed>
