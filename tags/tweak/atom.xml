<?xml version="1.0" encoding="utf-8"?> 
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-us">
    <generator uri="https://gohugo.io/" version="0.79.0">Hugo</generator><title type="html"><![CDATA[TWEAK on 焉知非鱼]]></title>
    
        <subtitle type="html"><![CDATA[rakulang, dartlang, nimlang, golang, rustlang, lang lang no see]]></subtitle>
    
    
    
            <link href="https://ohmyweekly.github.io/tags/tweak/" rel="alternate" type="text/html" title="HTML" />
            <link href="https://ohmyweekly.github.io/tags/tweak/index.xml" rel="alternate" type="application/rss+xml" title="RSS" />
            <link href="https://ohmyweekly.github.io/tags/tweak/atom.xml" rel="self" type="application/atom+xml" title="Atom" />
            <link href="https://ohmyweekly.github.io/tags/tweak/jf2feed.json" rel="alternate" type="application/jf2feed+json" title="jf2feed" />
    <updated>2021-04-05T19:55:25+08:00</updated>
    
    
    
    
        <id>https://ohmyweekly.github.io/tags/tweak/</id>
    
        
        <entry>
            <title type="html"><![CDATA[BUILD 和 TWEAK 的区别]]></title>
            <link href="https://ohmyweekly.github.io/notes/2021-03-07-difference-between-build-and-tweak-in-raku/?utm_source=atom_feed" rel="alternate" type="text/html" />
            
                <link href="https://ohmyweekly.github.io/notes/2021-03-01-how-to-type-unicode-in-raku/?utm_source=atom_feed" rel="related" type="text/html" title="如何在 Raku 中输入 Unicode" />
                <link href="https://ohmyweekly.github.io/notes/2021-02-17-method-isd/?utm_source=atom_feed" rel="related" type="text/html" title="Method-ish" />
                <link href="https://ohmyweekly.github.io/notes/2021-02-28-pattern-dispatch/?utm_source=atom_feed" rel="related" type="text/html" title="模式分派" />
                <link href="https://ohmyweekly.github.io/notes/2021-02-28-custom-when/?utm_source=atom_feed" rel="related" type="text/html" title="自定义 when" />
                <link href="https://ohmyweekly.github.io/notes/2021-02-16-contributing-to-raku/?utm_source=atom_feed" rel="related" type="text/html" title="为最年轻的 Raku 贡献力量" />
            
                <id>https://ohmyweekly.github.io/notes/2021-03-07-difference-between-build-and-tweak-in-raku/</id>
            
            
                    <author>
                        <name>焉知非鱼</name>
                    </author>
            <published>2021-03-07T00:00:00+08:00</published>
            <updated>2021-03-07T00:00:00+08:00</updated>
            
            
            <content type="html"><![CDATA[<blockquote>Difference Between Build and Tweak in Raku</blockquote><pre><code class="language-raku" data-lang="raku">class Student {
    has $.name;
    has $.sex;
    has $!age;

    method BUILD(:$!name) {

    }
}

my $stu = Student.new(:name('赵今麦'), :sex('女'));
dd $stu;
# Student $stu = Student.new(name =&gt; &quot;赵今麦&quot;, sex =&gt; Any)
</code></pre><p>如果你加上 <code>BUILD</code> 方法, 你必须自己全权负责设置所有的东西。也就是既包括公共属性, 也包括私有属性。</p>
<p>但你可以通过巧妙地命名参数来让你的生活更轻松。</p>
<pre><code class="language-raku" data-lang="raku">method BUILD (:$!name, :$!sex, :$!age) { }
</code></pre><p><code>BUILD</code> 方法可以初始化私有属性:</p>
<pre><code class="language-raku" data-lang="raku">class Student {
    has $.name;
    has $.sex;
    has $!age;

    method BUILD(:$name, :$sex, :$age) {
        $!name = $name;
        $!sex = $sex;
        $!age = $age;
    }

    method heart() { return '♥ ' ~ $!age }
}

my $stu = Student.new(:name('赵今麦'), :sex('女'), :age(18));
dd $stu;
say $stu;
say $stu.heart(); 
</code></pre><p>也可以在 TWEAK 方法中初始化私有属性:</p>
<pre><code class="language-raku" data-lang="raku">class Student {
    has $.name;
    has $.sex;
    has $!age;

    method TWEAK(:$name, :$sex, :$age) {
        $!age = $age + 1;
    }

    method heart() { return '♥' ~ $!age }
}

my $stu = Student.new(:name('赵今麦'), :sex('女'), :age(18));
dd $stu;
say $stu;
say $stu.heart(); 
</code></pre><p>使用 <code>TWEAK</code>，你会得到与 <code>BUILD</code> 相同的参数，但所有的初始设置都已经完成了（<code>BUILD</code> 或公共属性的自动绑定，以及所有的默认值，再加上保证所需值的存在）。你只是有机会做一些最后的调整。</p>
]]></content>
            
                 
                    
                         
                        
                            
                             
                                <category scheme="https://ohmyweekly.github.io/categories/raku" term="raku" label="Raku" />
                            
                        
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://ohmyweekly.github.io/tags/raku" term="raku" label="Raku" />
                             
                                <category scheme="https://ohmyweekly.github.io/tags/build" term="build" label="BUILD" />
                             
                                <category scheme="https://ohmyweekly.github.io/tags/tweak" term="tweak" label="TWEAK" />
                             
                                <category scheme="https://ohmyweekly.github.io/tags/object" term="object" label="Object" />
                            
                        
                    
                
            
        </entry>
    
</feed>
