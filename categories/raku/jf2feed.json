{"author":{"name":null,"type":"card","url":"https://ohmyweekly.github.io"},"children":[{"content":{"html":"\u003cpre\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003eclass Student {\n    has $.name;\n    has $.sex;\n    has $!age;\n\n    method BUILD(:$!name) {\n\n    }\n}\n\nmy $stu = Student.new(:name('èµµä»Šéº¦'), :sex('å¥³'));\ndd $stu;\n# Student $stu = Student.new(name =\u0026gt; \u0026quot;èµµä»Šéº¦\u0026quot;, sex =\u0026gt; Any)\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eå¦‚æœä½ åŠ ä¸Š \u003ccode\u003eBUILD\u003c/code\u003e æ–¹æ³•, ä½ å¿…é¡»è‡ªå·±å…¨æƒè´Ÿè´£è®¾ç½®æ‰€æœ‰çš„ä¸œè¥¿ã€‚ä¹Ÿå°±æ˜¯æ—¢åŒ…æ‹¬å…¬å…±å±æ€§, ä¹ŸåŒ…æ‹¬ç§æœ‰å±æ€§ã€‚\u003c/p\u003e\n\u003cp\u003eä½†ä½ å¯ä»¥é€šè¿‡å·§å¦™åœ°å‘½åå‚æ•°æ¥è®©ä½ çš„ç”Ÿæ´»æ›´è½»æ¾ã€‚\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003emethod BUILD (:$!name, :$!sex, :$!age) { }\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003ccode\u003eBUILD\u003c/code\u003e æ–¹æ³•å¯ä»¥åˆå§‹åŒ–ç§æœ‰å±æ€§:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003eclass Student {\n    has $.name;\n    has $.sex;\n    has $!age;\n\n    method BUILD(:$name, :$sex, :$age) {\n        $!name = $name;\n        $!sex = $sex;\n        $!age = $age;\n    }\n\n    method heart() { return 'â™¥ ' ~ $!age }\n}\n\nmy $stu = Student.new(:name('èµµä»Šéº¦'), :sex('å¥³'), :age(18));\ndd $stu;\nsay $stu;\nsay $stu.heart(); \n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eä¹Ÿå¯ä»¥åœ¨ TWEAK æ–¹æ³•ä¸­åˆå§‹åŒ–ç§æœ‰å±æ€§:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003eclass Student {\n    has $.name;\n    has $.sex;\n    has $!age;\n\n    method TWEAK(:$name, :$sex, :$age) {\n        $!age = $age + 1;\n    }\n\n    method heart() { return 'â™¥' ~ $!age }\n}\n\nmy $stu = Student.new(:name('èµµä»Šéº¦'), :sex('å¥³'), :age(18));\ndd $stu;\nsay $stu;\nsay $stu.heart(); \n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eä½¿ç”¨ \u003ccode\u003eTWEAK\u003c/code\u003eï¼Œä½ ä¼šå¾—åˆ°ä¸ \u003ccode\u003eBUILD\u003c/code\u003e ç›¸åŒçš„å‚æ•°ï¼Œä½†æ‰€æœ‰çš„åˆå§‹è®¾ç½®éƒ½å·²ç»å®Œæˆäº†ï¼ˆ\u003ccode\u003eBUILD\u003c/code\u003e æˆ–å…¬å…±å±æ€§çš„è‡ªåŠ¨ç»‘å®šï¼Œä»¥åŠæ‰€æœ‰çš„é»˜è®¤å€¼ï¼Œå†åŠ ä¸Šä¿è¯æ‰€éœ€å€¼çš„å­˜åœ¨ï¼‰ã€‚ä½ åªæ˜¯æœ‰æœºä¼šåšä¸€äº›æœ€åçš„è°ƒæ•´ã€‚\u003c/p\u003e\n","text":"class Student { has $.name; has $.sex; has $!age; method BUILD(:$!name) { } } my $stu = Student.new(:name('èµµä»Šéº¦'), :sex('å¥³')); dd $stu; # Student $stu = Student.new(name =\u0026gt; \u0026quot;èµµä»Šéº¦\u0026quot;, sex =\u0026gt; Any) å¦‚æœä½ åŠ ä¸Š BUILD æ–¹æ³•, ä½ å¿…é¡»è‡ªå·±å…¨æƒè´Ÿè´£è®¾ç½®æ‰€æœ‰çš„ä¸œè¥¿ã€‚ä¹Ÿå°±æ˜¯æ—¢åŒ…æ‹¬å…¬å…±å±æ€§, ä¹ŸåŒ…æ‹¬ç§æœ‰å±æ€§ã€‚\nä½†ä½ å¯ä»¥é€šè¿‡å·§å¦™åœ°å‘½åå‚æ•°æ¥è®©ä½ çš„ç”Ÿæ´»æ›´è½»æ¾ã€‚\nmethod BUILD (:$!name, :$!sex, :$!age) { } BUILD æ–¹æ³•å¯ä»¥åˆå§‹åŒ–ç§æœ‰å±æ€§:\nclass Student { has $.name; has $.sex; has $!age; method BUILD(:$name, :$sex, :$age) { $!name = $name; $!sex = $sex; $!age = $age; } method heart() { return 'â™¥ ' ~ $!age } } my $stu = Student.new(:name('èµµä»Šéº¦'), :sex('å¥³'), :age(18)); dd $stu; say $stu; say $stu.heart(); ä¹Ÿå¯ä»¥åœ¨ TWEAK æ–¹æ³•ä¸­åˆå§‹åŒ–ç§æœ‰å±æ€§:\nclass Student { has $.name; has $.sex; has $!age; method TWEAK(:$name, :$sex, :$age) { $!age = $age + 1; } method heart() { return 'â™¥' ~ $!age } } my $stu = Student.new(:name('èµµä»Šéº¦'), :sex('å¥³'), :age(18)); dd $stu; say $stu; say $stu.heart(); ä½¿ç”¨ TWEAKï¼Œä½ ä¼šå¾—åˆ°ä¸ BUILD ç›¸åŒçš„å‚æ•°ï¼Œä½†æ‰€æœ‰çš„åˆå§‹è®¾ç½®éƒ½å·²ç»å®Œæˆäº†ï¼ˆBUILD æˆ–å…¬å…±å±æ€§çš„è‡ªåŠ¨ç»‘å®šï¼Œä»¥åŠæ‰€æœ‰çš„é»˜è®¤å€¼ï¼Œå†åŠ ä¸Šä¿è¯æ‰€éœ€å€¼çš„å­˜åœ¨ï¼‰ã€‚ä½ åªæ˜¯æœ‰æœºä¼šåšä¸€äº›æœ€åçš„è°ƒæ•´ã€‚\n"},"name":"BUILD å’Œ TWEAK çš„åŒºåˆ«","published":"2021-03-07T00:00:00+08:00","summary":"Difference Between Build and Tweak in Raku","type":"entry","url":"https://ohmyweekly.github.io/notes/2021-03-07-difference-between-build-and-tweak-in-raku/"},{"content":{"html":"\u003cp\u003eRaku æœ‰éå¸¸å¥½çš„ Unicode æ”¯æŒ, ä½†æ˜¯è¾“å…¥ Unicode ä¸€ç›´æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ã€‚åœ¨ REPL ä¸­, è¾“å…¥ Unicode éƒ½ä¸å¤ªæ–¹ä¾¿ã€‚ä¸‹é¢ä»‹ç»å‡ ç§æ–¹æ³•æ¥æ–¹ä¾¿åœ°è¾“å…¥ Unicodeã€‚\u003c/p\u003e\n\u003ch1 id=\"comma\"\u003eComma\u003c/h1\u003e\n\u003cp\u003eæœ€æ–¹ä¾¿çš„æ˜¯ä½¿ç”¨ Raku è‡ªå·±çš„ IDE, \u003ca href=\"http://commaide.com\"\u003eComma\u003c/a\u003eã€‚ä½†æ˜¯éœ€è¦åšä¸¤ä¸ªè®¾ç½®:\u003c/p\u003e\n\u003cp\u003eé¦–å…ˆ, åˆ‡æ¢åˆ° Comma IDE, ç‚¹å‡»å·¦ä¸Šè§’èœå•æ çš„ \u003cstrong\u003eComma\u003c/strong\u003e é€‰é¡¹, åœ¨å¼¹å‡ºçš„ \u003cstrong\u003ePreference\u003c/strong\u003e çª—å£ä¸­, æ‰¾åˆ°å·¦ä¾§èœå•æ ä¸­çš„ \u003cstrong\u003eEditor\u003c/strong\u003e é€‰é¡¹, ç‚¹å‡» \u003cstrong\u003eCode Style\u003c/strong\u003e ä¸­çš„ \u003cstrong\u003eRaku\u003c/strong\u003e, åœ¨å³ä¾§çš„çª—å£çš„æœ€ä¸Šé¢, æ‰¾åˆ° \u003cstrong\u003eSchema\u003c/strong\u003e ä¸€è¡Œ, ç‚¹å‡»å€’ä¸‰è§’å›¾æ ‡, åœ¨ä¸‹æ‹‰èœå•ä¸­é€‰æ‹© \u003cstrong\u003eProject\u003c/strong\u003eã€‚ç„¶ååœ¨ç¬¬äºŒè¡Œæ–‡å­—ä¸­æ‰¾åˆ° \u003cstrong\u003eEditor Behavior\u003c/strong\u003e, å‹¾é€‰ \u003cstrong\u003eConvert operators to Unicode\u003c/strong\u003eã€‚å®Œæˆåç‚¹å‡»å³ä¸‹è§’çš„ \u003cstrong\u003eApply\u003c/strong\u003e, ç„¶åç‚¹å‡» \u003cstrong\u003eOK\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003eè¿™æ ·å½“ä½ åœ¨ Comma ä¸­é”®å…¥ \u003ccode\u003e\u0026gt;\u0026gt;\u003c/code\u003e è¿™æ ·çš„è¿ç®—ç¬¦å, Comma ä¼šè‡ªåŠ¨æŠŠå®ƒè½¬ä¸º Unicode å½¢å¼çš„ \u003ccode\u003eÂ»\u003c/code\u003eã€‚ç›®å‰å·²æ”¯æŒå¤§éƒ¨åˆ† Unicode è¿ç®—ç¬¦äº†ã€‚Comma æ˜¯è·¨å¹³å°çš„ Raku ç¼–è¾‘å™¨, æ”¯æŒ Windowsã€Linux å’Œ MacOS, æ‰€ä»¥ä½ æƒ³è·¨å¹³å°å¼€å‘çš„è¯, Comma å€¼å¾—ä¸€è¯•ã€‚\u003c/p\u003e\n\u003ch1 id=\"kitty\"\u003eKitty\u003c/h1\u003e\n\u003cp\u003eå¦‚æœä½ æƒ³åœ¨ Vim ä¸­å¼€å‘ Raku, åˆä¸æƒ³å¤±å»è¾“å…¥ Unicode çš„ä¹è¶£, è¯·ä½¿ç”¨ \u003ca href=\"https://github.com/kovidgoyal/kitty\"\u003eKitty\u003c/a\u003e ç»ˆç«¯ã€‚ç‚¹å¼€ Kitty ç»ˆç«¯, ä½¿ç”¨å¿«æ·é”® Ctrl + Shift + U å³å¯è§¦å‘è¾“å…¥ Unnicode çš„ç•Œé¢(ä¹Ÿå¯ä»¥é”®å…¥å‘½ä»¤ kitty +kitten unicode_input æ¥è§¦å‘)ã€‚å†é€šè¿‡å¿«æ·é”®  F1ã€F2ã€F3 å’Œ F4 (æˆ–é€šè¿‡ Ctrl+[ å’Œ Ctrl+] åˆ‡æ¢æ ‡ç­¾)å¯ä»¥åˆ†åˆ«æŒ‰ä»£ç æœç´¢ Unicodeã€æŒ‰åå­—æœç´¢ Unicodeã€æŒ‰è¡¨æƒ…æœç´¢å’Œæ”¶è—ã€‚\u003c/p\u003e\n\u003cp\u003eä¾‹å¦‚åœ¨ REPL ä¸­é”®å…¥ Unicode å­—ç¬¦:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e$ raku\nWelcome to ğ‘ğšğ¤ğ®ğğ¨â„¢ v2021.02.\nImplementing the ğ‘ğšğ¤ğ®â„¢ programming language v6.d.\nBuilt on MoarVM version 2021.02.\n\nTo \u003cspan class=\"nb\"\u003eexit\u003c/span\u003e \u003cspan class=\"nb\"\u003etype\u003c/span\u003e \u003cspan class=\"s1\"\u003e\u0026#39;exit\u0026#39;\u003c/span\u003e or \u003cspan class=\"s1\"\u003e\u0026#39;^D\u0026#39;\u003c/span\u003e\n\u0026gt; my @a \u003cspan class=\"o\"\u003e=\u003c/span\u003e 1..5\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u0026gt; @aÂ».sin\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eå€ŸåŠ© Kitty, æ•°ç»„ \u003ccode\u003e@a\u003c/code\u003e åé¢çš„ \u003ccode\u003eÂ»\u003c/code\u003e å¯ä»¥è¿™æ ·è¾“å…¥, å…ˆè¾“å…¥ \u003ccode\u003e@a\u003c/code\u003e, ç„¶åä½¿ç”¨å¿«æ·é”® Shift + Ctrl + U è°ƒå‡º Kitty çš„ \u003cstrong\u003eUnicode input\u003c/strong\u003e ç•Œé¢, ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹æ³•, ç¬¬ä¸€ç§æ˜¯é€šè¿‡å¿«æ·é”® F1, ç„¶åè¾“å…¥å¯¹åº”çš„ Unicode ç¼–ç , å†å›è½¦ã€‚ç¬¬äºŒç§æ˜¯é€šè¿‡å¿«æ·é”® F2, é€šè¿‡åå­—æœç´¢, ä¾‹å¦‚è¾“å…¥å•è¯ quota, ä¼šå‡ºç°ä¸€å †å¼•å·ç¬¦å·ä¾›ä½ é€‰æ‹©, æŒ‰ä¸Šä¸‹æ–¹å‘é”®é€‰ä¸­ \u003ccode\u003eÂ»\u003c/code\u003e, å†å›è½¦å³å¯ã€‚Vim ä¸­åŒç†ã€‚\u003c/p\u003e\n\u003ch1 id=\"julia-repl\"\u003eJulia REPL\u003c/h1\u003e\n\u003cp\u003eåœ¨ REPL ä¸­è¾“å…¥ \u003ccode\u003e\\â€² + å•è¯ + Tab, ä¾‹å¦‚è¾“å…¥ \u003c/code\u003e\\heartsuit` å†æŒ‰ Tab, å°±ä¼šè‡ªåŠ¨å˜æˆ â™¡\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003ejulia\u0026gt; \u003cspan class=\"se\"\u003e\\h\u003c/span\u003eeartsuit\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch1 id=\"ipython\"\u003eIPython\u003c/h1\u003e\n\u003cp\u003e\u003ccode\u003e\\^\u003c/code\u003e è¾“å…¥ä¸Šæ ‡, \u003ccode\u003e\\_p\u003c/code\u003e è¾“å…¥ä¸‹æ ‡ã€‚\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e$ ipython\n\u003cspan class=\"se\"\u003e\\^\u003c/span\u003ea\n\u003cspan class=\"se\"\u003e\\_\u003c/span\u003ep\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch1 id=\"vscode\"\u003eVScode\u003c/h1\u003e\n\u003cp\u003e\u003ccode\u003e\\\\â€² + å®Œæ•´çš„å•è¯ + Tab, VsCode ä¼šè‡ªåŠ¨è½¬æ¢ä¸º Unicodeã€‚ ä¾‹å¦‚ \u003c/code\u003e^a\u003ccode\u003eå’Œ\u003c/code\u003e_p`\u003c/p\u003e\n\u003ch1 id=\"dmenu\"\u003edmenu\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-perl\" data-lang=\"perl\"\u003e\u003cspan class=\"ch\"\u003e#!/usr/bin/perl\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e#use strict;\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#use warnings;\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#use autodie;\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#use utf8;\u003c/span\u003e\n\n\n\u003cspan class=\"nb\"\u003eopen\u003c/span\u003e \u003cspan class=\"nv\"\u003e$FH\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34; | dmenu -i -l 30 -fn \u0026#39;-xos4-terminus-medium-r-*-*-10-*\u0026#39; | sed \u0026#39;s/^\\\\(.\\\\).*/\\\\1/\u0026#39; | tr -d \u0026#39;\\n\u0026#39; | { pbcopy; pbpaste; } \u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e# if you do not have the xos4-terminus font that makes characters a little bigger :\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e# uncoment this line and use the second here document\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#open $FH, \u0026#34; | dmenu -i -l 30 | sed \u0026#39;s/^\\\\(.\\\\).*/\\\\1/\u0026#39; | tr -d \u0026#39;\\n\u0026#39; | { xsel -ib; xsel -ip; } \u0026#34;;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e# also you can compile dmenu from source and change the font size directly in the C done\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e# in the file config.h / config.def.h\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e# this heredoc is well aligned with the -xos4-terminus-medium-r-*-*-10-* font\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eprint\u003c/span\u003e \u003cspan class=\"nv\"\u003e$FH\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026lt;\u0026lt;\u0026#39;\u003c/span\u003e\u003cspan class=\"dl\"\u003eEOF\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#39;\n\u003c/span\u003e\u003cspan class=\"s\"\u003eÂ«         hyper operator\n\u003c/span\u003e\u003cspan class=\"s\"\u003eÂ»         hyper operator\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâˆˆ        membership\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâˆ‰        non-membership\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâˆª         set union\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâˆ©         set intersection\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâˆ–         set difference\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâ‰¡         set equality\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâ‰¢        set inequality\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâŠ–        symmetric set difference\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâŠ         baggy multiplication\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâŠ         baggy addition\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâˆ…        empty set\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâŠ†        subset\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâŠˆ         not a subset\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâŠ‚        strict subset\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâŠ„        not a strict subset\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâˆ‹        reverse membership\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâˆŒ          reverse non-membership\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâŠ‡        superset\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâŠ‰         not a superset\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâŠƒ        strict superset\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâŠ…        not a strict superset\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâˆ         infinity\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâš›        atomic operator\n\u003c/span\u003e\u003cspan class=\"s\"\u003eÏ€        pi\n\u003c/span\u003e\u003cspan class=\"s\"\u003eÏ„         tau\n\u003c/span\u003e\u003cspan class=\"s\"\u003eğ‘’         Euler\u0026#39;s number\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâˆ˜         function composition\n\u003c/span\u003e\u003cspan class=\"s\"\u003eÃ—        multiplication \n\u003c/span\u003e\u003cspan class=\"s\"\u003eÃ·        division\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâ‰¤         inferior or equal\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâ‰¥         greater or equal\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâ‰    \t     inequality\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâˆ’        substraction\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâ‰…       approximatively equal\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâ€¦      sequence operator\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâ€˜         left single quotation mark\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâ€™         right single quotation mark\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâ€š         single low-9 quotation mark \n\u003c/span\u003e\u003cspan class=\"s\"\u003eâ€         right double quotation mark\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâ€œ         left double quotation mark\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâ€         double low-9 quotation mark\n\u003c/span\u003e\u003cspan class=\"s\"\u003eï½¢         halfwidth left corner bracket\n\u003c/span\u003e\u003cspan class=\"s\"\u003eï½£         halfwidth right corner bracket\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâº         plus superscript\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâ»         minus superscript\n\u003c/span\u003e\u003cspan class=\"s\"\u003eâ°         0 superscript\n\u003c/span\u003e\u003cspan class=\"s\"\u003eÂ¹         1 superscript \n\u003c/span\u003e\u003cspan class=\"s\"\u003eÂ²         2 superscript \n\u003c/span\u003e\u003cspan class=\"s\"\u003eÂ³         3 superscript \n\u003c/span\u003e\u003cspan class=\"s\"\u003eâ´         4 superscript \n\u003c/span\u003e\u003cspan class=\"s\"\u003eâµ         5 superscript \n\u003c/span\u003e\u003cspan class=\"s\"\u003eâ¶         6 superscript \n\u003c/span\u003e\u003cspan class=\"s\"\u003eâ·         7 superscript \n\u003c/span\u003e\u003cspan class=\"s\"\u003eâ¸         8 superscript \n\u003c/span\u003e\u003cspan class=\"s\"\u003eâ¹         9 superscript \n\u003c/span\u003e\u003cspan class=\"s\"\u003e\u003c/span\u003e\u003cspan class=\"dl\"\u003eEOF\u003c/span\u003e\n\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e# use this without -xos4-terminus-medium-r-*-*-10-* font\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e# the default font may change given which font packages are installed and given the font configurations\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e#print $FH \u0026lt;\u0026lt;\u0026#39;EOF\u0026#39;\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#Â«         hyper operator\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#Â»         hyper operator\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#âˆˆ         membership\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#âˆ‰         non-membership\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#âˆª         set union\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#âˆ©         set intersection\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#âˆ–         set difference\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#â‰¡         set equality\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#â‰¢         set inequality\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#âŠ–         symmetric set difference\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#âŠ         baggy multiplication\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#âŠ         baggy addition\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#âˆ…         empty set\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#âŠ†         subset\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#âŠˆ         not a subset\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#âŠ‚         strict subset\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#âŠ„         not a strict subset\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#âˆ‹         reverse membership\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#âˆŒ         reverse non-membership\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#âŠ‡         superset\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#âŠ‰         not a superset\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#âŠƒ         strict superset\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#âŠ…         not a strict superset\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#âˆ         infinity\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#âš›         atomic operator\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#Ï€         pi\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#Ï„         tau\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#ğ‘’         Euler\u0026#39;s number\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#âˆ˜         function composition\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#Ã—         multiplication \u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#Ã·         division\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#â‰¤         inferior or equal\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#â‰¥         greater or equal\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#â‰          inequality\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#âˆ’         substraction\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#â‰…         approximatively equal\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#â€¦         sequence operator\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#â€˜         left single quotation mark\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#â€™         right single quotation mark\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#â€š         single low-9 quotation mark \u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#â€         right double quotation mark\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#â€œ         left double quotation mark\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#â€         double low-9 quotation mark\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#ï½¢         halfwidth left corner bracket\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#ï½£         halfwidth right corner bracket\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#âº         plus superscript\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#â»         minus superscript\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#â°         0 superscript\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#Â¹         1 superscript \u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#Â²         2 superscript \u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#Â³         3 superscript \u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#â´         4 superscript \u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#âµ         5 superscript \u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#â¶         6 superscript \u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#â·         7 superscript \u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#â¸         8 superscript \u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#â¹         9 superscript \u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#EOF\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#;\u003c/span\u003e\n\n\n\n\u003cspan class=\"nb\"\u003eclose\u003c/span\u003e \u003cspan class=\"nv\"\u003e$FH\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\n\n\u003cspan class=\"cp\"\u003e__END__\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e=pod \n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e=head1 NAME\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003elazy_raku_unicode.pl\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e=head1 SYNOPSIS\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003eThis script allows you to select a Unicode symbol from a drop-down menu that you can simply paste into your text editor, terminal or IDE.\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003eAll it does is send a heredoc through a pipe to dmenu, and copy to the clipboard the character that you selected.\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003eDmenu is a program that reads lines from stdin, display them in a menu, and write to stdout the lines selected.\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003eIt is not practical to execute this script from a terminal each time you want a character though. This is why it should be executed by sxhkd.\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003eSxhkd is the program that will call this script each time you press the right key combination.\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003eOnly the most useful Unicode characters are present to not make dmenu get too slow. (It is usually very fast when there is only ascii text.)\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003eThis include most of the Raku operators that have a Unicode version, plus some quoting characters, superscripts, and mathematical constants.\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e=head1 MANUAL INSTALLATION STEPS\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e=head2 INSTALLING DMENU\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003eB\u0026lt;On Debian or Ubuntu :\u0026gt;\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\tsudo apt install suckless-tools\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003eB\u0026lt;On Archlinux :\u0026gt;\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\tsudo pacman -Sy dmenu\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003eB\u0026lt;Compile it from source :\u0026gt;\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\thttps://tools.suckless.org/dmenu/\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e=head2 CHANGING DMENU FONT SIZE (OPTIIONAL)\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003eYou have only two ways of changing the font size :\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003eChange the default font with the B\u0026lt;-fn\u0026gt; flag (See dmenu(1) for the specifics).\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\t\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\tdmenu -l 30 -fn \u0026#39;-xos4-terminus-medium-r-*-*-10-*\u0026#39;\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003eModify directly the C source code of dmenu. Only the files B\u0026lt;config.h / config.def.h\u0026gt;.\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003eSimply edit this line and change 10 by 14 for example.\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\tstatic const char *fonts[] = {\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\t\t\u0026#34;monospace:size=10\u0026#34;\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\t};\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003eThen execute sudo make install and you\u0026#39;re ready to go.\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e=head2 INSTALLING SXHKD\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003eB\u0026lt;On Debian or Ubuntu :\u0026gt;\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\tsudo apt install sxhkd\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003eB\u0026lt;On Archlinux :\u0026gt;\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\tsudo pacman -Sy sxhkd\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e=head2 CONFIGURING SXHKD\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003eB\u0026lt;Autostarting sxhkd at startup :\u0026gt;\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003esimply put this line in B\u0026lt;~/.xprofile\u0026gt; :\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\tsxhkd \u0026amp;\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003eB\u0026lt;Setting the keybinding :\u0026gt;\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\t\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003eAdd these two lines in B\u0026lt;~/.config/sxhkd/sxhkdrc\u0026gt;\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\tctrl + apostrophe\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\t\t/path/to/lazy_raku_unicode.pl\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003eThe keybinding have to start at the beginning of a line, and the command has to follow on the next line and be preceded by a tabulation.\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003eTo make sxhkd reload the config file, either kill it and relaunch it, or send a SIGUSR1 signal. This command can do it :\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\tpidof sxhkd | kill -SIGUSR1 $(cat /dev/stdin)\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003eIf you want to use a different keybinding, please see sxhkd(1) and use xev(1) to find the name of keys.\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003eHere the name of some of the keys : ctrl, super, alt, Return .\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e=head1 SEE ALSO\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003edmenu(1), sxhkd(1), xev(1)\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e=cut\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eå‚è€ƒé“¾æ¥: \u003ca href=\"https://docs.raku.org/language/unicode_entry\"\u003ehttps://docs.raku.org/language/unicode_entry\u003c/a\u003e\u003c/p\u003e\n","text":"Raku æœ‰éå¸¸å¥½çš„ Unicode æ”¯æŒ, ä½†æ˜¯è¾“å…¥ Unicode ä¸€ç›´æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ã€‚åœ¨ REPL ä¸­, è¾“å…¥ Unicode éƒ½ä¸å¤ªæ–¹ä¾¿ã€‚ä¸‹é¢ä»‹ç»å‡ ç§æ–¹æ³•æ¥æ–¹ä¾¿åœ°è¾“å…¥ Unicodeã€‚\nComma æœ€æ–¹ä¾¿çš„æ˜¯ä½¿ç”¨ Raku è‡ªå·±çš„ IDE, Commaã€‚ä½†æ˜¯éœ€è¦åšä¸¤ä¸ªè®¾ç½®:\né¦–å…ˆ, åˆ‡æ¢åˆ° Comma IDE, ç‚¹å‡»å·¦ä¸Šè§’èœå•æ çš„ Comma é€‰é¡¹, åœ¨å¼¹å‡ºçš„ Preference çª—å£ä¸­, æ‰¾åˆ°å·¦ä¾§èœå•æ ä¸­çš„ Editor é€‰é¡¹, ç‚¹å‡» Code Style ä¸­çš„ Raku, åœ¨å³ä¾§çš„çª—å£çš„æœ€ä¸Šé¢, æ‰¾åˆ° Schema ä¸€è¡Œ, ç‚¹å‡»å€’ä¸‰è§’å›¾æ ‡, åœ¨ä¸‹æ‹‰èœå•ä¸­é€‰æ‹© Projectã€‚ç„¶ååœ¨ç¬¬äºŒè¡Œæ–‡å­—ä¸­æ‰¾åˆ° Editor Behavior, å‹¾é€‰ Convert operators to Unicodeã€‚å®Œæˆåç‚¹å‡»å³ä¸‹è§’çš„ Apply, ç„¶åç‚¹å‡» OKã€‚\nè¿™æ ·å½“ä½ åœ¨ Comma ä¸­é”®å…¥ \u0026gt;\u0026gt; è¿™æ ·çš„è¿ç®—ç¬¦å, Comma ä¼šè‡ªåŠ¨æŠŠå®ƒè½¬ä¸º Unicode å½¢å¼çš„ Â»ã€‚ç›®å‰å·²æ”¯æŒå¤§éƒ¨åˆ† Unicode è¿ç®—ç¬¦äº†ã€‚Comma æ˜¯è·¨å¹³å°çš„ Raku ç¼–è¾‘å™¨, æ”¯æŒ Windowsã€Linux å’Œ MacOS, æ‰€ä»¥ä½ æƒ³è·¨å¹³å°å¼€å‘çš„è¯, Comma å€¼å¾—ä¸€è¯•ã€‚\nKitty å¦‚æœä½ æƒ³åœ¨ Vim ä¸­å¼€å‘ Raku, åˆä¸æƒ³å¤±å»è¾“å…¥ Unicode çš„ä¹è¶£, è¯·ä½¿ç”¨ Kitty ç»ˆç«¯ã€‚ç‚¹å¼€ Kitty ç»ˆç«¯, ä½¿ç”¨å¿«æ·é”® Ctrl + Shift + U å³å¯è§¦å‘è¾“å…¥ Unnicode çš„ç•Œé¢(ä¹Ÿå¯ä»¥é”®å…¥å‘½ä»¤ kitty +kitten unicode_input æ¥è§¦å‘)ã€‚å†é€šè¿‡å¿«æ·é”® F1ã€F2ã€F3 å’Œ F4 (æˆ–é€šè¿‡ Ctrl+[ å’Œ Ctrl+] åˆ‡æ¢æ ‡ç­¾)å¯ä»¥åˆ†åˆ«æŒ‰ä»£ç æœç´¢ Unicodeã€æŒ‰åå­—æœç´¢ Unicodeã€æŒ‰è¡¨æƒ…æœç´¢å’Œæ”¶è—ã€‚\nä¾‹å¦‚åœ¨ REPL ä¸­é”®å…¥ Unicode å­—ç¬¦:\n$ raku Welcome to ğ‘ğšğ¤ğ®ğğ¨â„¢ v2021.02. Implementing the ğ‘ğšğ¤ğ®â„¢ programming language v6.d. Built on MoarVM version 2021.02. To exit type \u0026#39;exit\u0026#39; or \u0026#39;^D\u0026#39; \u0026gt; my @a = 1..5; \u0026gt; @aÂ».sin å€ŸåŠ© Kitty, æ•°ç»„ @a åé¢çš„ Â» å¯ä»¥è¿™æ ·è¾“å…¥, å…ˆè¾“å…¥ @a, ç„¶åä½¿ç”¨å¿«æ·é”® Shift + Ctrl + U è°ƒå‡º Kitty çš„ Unicode input ç•Œé¢, ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹æ³•, ç¬¬ä¸€ç§æ˜¯é€šè¿‡å¿«æ·é”® F1, ç„¶åè¾“å…¥å¯¹åº”çš„ Unicode ç¼–ç , å†å›è½¦ã€‚ç¬¬äºŒç§æ˜¯é€šè¿‡å¿«æ·é”® F2, é€šè¿‡åå­—æœç´¢, ä¾‹å¦‚è¾“å…¥å•è¯ quota, ä¼šå‡ºç°ä¸€å †å¼•å·ç¬¦å·ä¾›ä½ é€‰æ‹©, æŒ‰ä¸Šä¸‹æ–¹å‘é”®é€‰ä¸­ Â», å†å›è½¦å³å¯ã€‚Vim ä¸­åŒç†ã€‚\nJulia REPL åœ¨ REPL ä¸­è¾“å…¥ \\â€² + å•è¯ + Tab, ä¾‹å¦‚è¾“å…¥ \\heartsuit` å†æŒ‰ Tab, å°±ä¼šè‡ªåŠ¨å˜æˆ â™¡\njulia\u0026gt; \\heartsuit IPython \\^ è¾“å…¥ä¸Šæ ‡, \\_p è¾“å…¥ä¸‹æ ‡ã€‚\n$ ipython \\^a \\_p VScode \\\\â€² + å®Œæ•´çš„å•è¯ + Tab, VsCode ä¼šè‡ªåŠ¨è½¬æ¢ä¸º Unicodeã€‚ ä¾‹å¦‚ ^aå’Œ_p`\ndmenu #!/usr/bin/perl #use strict; #use warnings; #use autodie; #use utf8; open $FH, \u0026#34; | dmenu -i -l 30 -fn \u0026#39;-xos4-terminus-medium-r-*-*-10-*\u0026#39; | sed \u0026#39;s/^\\\\(.\\\\).*/\\\\1/\u0026#39; | tr -d \u0026#39;\\n\u0026#39; | { pbcopy; pbpaste; } \u0026#34;; # if you do not have the xos4-terminus font that makes characters a little bigger : # uncoment this line and use the second here document #open $FH, \u0026#34; | dmenu -i -l 30 | sed \u0026#39;s/^\\\\(.\\\\).*/\\\\1/\u0026#39; | tr -d \u0026#39;\\n\u0026#39; | { xsel -ib; xsel -ip; } \u0026#34;; # also you can compile dmenu from source and change the font size directly in the C done # in the file config.h / config.def.h # this heredoc is well aligned with the -xos4-terminus-medium-r-*-*-10-* font print $FH \u0026lt;\u0026lt;\u0026#39;EOF\u0026#39; Â« hyper operator Â» hyper operator âˆˆ membership âˆ‰ non-membership âˆª set union âˆ© set intersection âˆ– set difference â‰¡ set equality â‰¢ set inequality âŠ– symmetric set difference âŠ baggy multiplication âŠ baggy addition âˆ… empty set âŠ† subset âŠˆ not a subset âŠ‚ strict subset âŠ„ not a strict subset âˆ‹ reverse membership âˆŒ reverse non-membership âŠ‡ superset âŠ‰ not a superset âŠƒ strict superset âŠ… not a strict superset âˆ infinity âš› atomic operator Ï€ pi Ï„ tau ğ‘’ Euler\u0026#39;s number âˆ˜ function composition Ã— multiplication Ã· division â‰¤ inferior or equal â‰¥ greater or equal â‰  inequality âˆ’ substraction â‰… approximatively equal â€¦ sequence operator â€˜ left single quotation mark â€™ right single quotation mark â€š single low-9 quotation mark â€ right double quotation mark â€œ left double quotation mark â€ double low-9 quotation mark ï½¢ halfwidth left corner bracket ï½£ halfwidth right corner bracket âº plus superscript â» minus superscript â° 0 superscript Â¹ 1 superscript Â² 2 superscript Â³ 3 superscript â´ 4 superscript âµ 5 superscript â¶ 6 superscript â· 7 superscript â¸ 8 superscript â¹ 9 superscript EOF ; # use this without -xos4-terminus-medium-r-*-*-10-* font # the default font may change given which font packages are installed and given the font configurations #print $FH \u0026lt;\u0026lt;\u0026#39;EOF\u0026#39; #Â« hyper operator #Â» hyper operator #âˆˆ membership #âˆ‰ non-membership #âˆª set union #âˆ© set intersection #âˆ– set difference #â‰¡ set equality #â‰¢ set inequality #âŠ– symmetric set difference #âŠ baggy multiplication #âŠ baggy addition #âˆ… empty set #âŠ† subset #âŠˆ not a subset #âŠ‚ strict subset #âŠ„ not a strict subset #âˆ‹ reverse membership #âˆŒ reverse non-membership #âŠ‡ superset #âŠ‰ not a superset #âŠƒ strict superset #âŠ… not a strict superset #âˆ infinity #âš› atomic operator #Ï€ pi #Ï„ tau #ğ‘’ Euler\u0026#39;s number #âˆ˜ function composition #Ã— multiplication  #Ã· division #â‰¤ inferior or equal #â‰¥ greater or equal #â‰  inequality #âˆ’ substraction #â‰… approximatively equal #â€¦ sequence operator #â€˜ left single quotation mark #â€™ right single quotation mark #â€š single low-9 quotation mark  #â€ right double quotation mark #â€œ left double quotation mark #â€ double low-9 quotation mark #ï½¢ halfwidth left corner bracket #ï½£ halfwidth right corner bracket #âº plus superscript #â» minus superscript #â° 0 superscript #Â¹ 1 superscript  #Â² 2 superscript  #Â³ 3 superscript  #â´ 4 superscript  #âµ 5 superscript  #â¶ 6 superscript  #â· 7 superscript  #â¸ 8 superscript  #â¹ 9 superscript  #EOF #; close $FH; __END__ =pod =head1 NAME lazy_raku_unicode.pl =head1 SYNOPSIS This script allows you to select a Unicode symbol from a drop-down menu that you can simply paste into your text editor, terminal or IDE. All it does is send a heredoc through a pipe to dmenu, and copy to the clipboard the character that you selected. Dmenu is a program that reads lines from stdin, display them in a menu, and write to stdout the lines selected. It is not practical to execute this script from a terminal each time you want a character though. This is why it should be executed by sxhkd. Sxhkd is the program that will call this script each time you press the right key combination. Only the most useful Unicode characters are present to not make dmenu get too slow. (It is usually very fast when there is only ascii text.) This include most of the Raku operators that have a Unicode version, plus some quoting characters, superscripts, and mathematical constants. =head1 MANUAL INSTALLATION STEPS =head2 INSTALLING DMENU B\u0026lt;On Debian or Ubuntu :\u0026gt; sudo apt install suckless-tools B\u0026lt;On Archlinux :\u0026gt; sudo pacman -Sy dmenu B\u0026lt;Compile it from source :\u0026gt; https://tools.suckless.org/dmenu/ =head2 CHANGING DMENU FONT SIZE (OPTIIONAL) You have only two ways of changing the font size : Change the default font with the B\u0026lt;-fn\u0026gt; flag (See dmenu(1) for the specifics). dmenu -l 30 -fn \u0026#39;-xos4-terminus-medium-r-*-*-10-*\u0026#39; Modify directly the C source code of dmenu. Only the files B\u0026lt;config.h / config.def.h\u0026gt;. Simply edit this line and change 10 by 14 for example. static const char *fonts[] = { \u0026#34;monospace:size=10\u0026#34; }; Then execute sudo make install and you\u0026#39;re ready to go. =head2 INSTALLING SXHKD B\u0026lt;On Debian or Ubuntu :\u0026gt; sudo apt install sxhkd B\u0026lt;On Archlinux :\u0026gt; sudo pacman -Sy sxhkd =head2 CONFIGURING SXHKD B\u0026lt;Autostarting sxhkd at startup :\u0026gt; simply put this line in B\u0026lt;~/.xprofile\u0026gt; : sxhkd \u0026amp; B\u0026lt;Setting the keybinding :\u0026gt; Add these two lines in B\u0026lt;~/.config/sxhkd/sxhkdrc\u0026gt; ctrl + apostrophe /path/to/lazy_raku_unicode.pl The keybinding have to start at the beginning of a line, and the command has to follow on the next line and be preceded by a tabulation. To make sxhkd reload the config file, either kill it and relaunch it, or send a SIGUSR1 signal. This command can do it : pidof sxhkd | kill -SIGUSR1 $(cat /dev/stdin) If you want to use a different keybinding, please see sxhkd(1) and use xev(1) to find the name of keys. Here the name of some of the keys : ctrl, super, alt, Return . =head1 SEE ALSO dmenu(1), sxhkd(1), xev(1) =cut å‚è€ƒé“¾æ¥: https://docs.raku.org/language/unicode_entry\n"},"name":"å¦‚ä½•åœ¨ Raku ä¸­è¾“å…¥ Unicode","published":"2021-03-01T00:00:00+08:00","summary":"How to Type Unicode in Raku","type":"entry","url":"https://ohmyweekly.github.io/notes/2021-03-01-how-to-type-unicode-in-raku/"},{"content":{"html":"\u003cp\u003eåœ¨æˆ‘çš„ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘åˆä¸€æ¬¡ä¸ºä» CORE ä¸­å¢å¼ºç±»çš„æ–¹æ³•è€Œè‹¦æ¼ã€‚è¿™ç§æŒ£æ‰å®Œå…¨æ²¡æœ‰å¿…è¦ï¼Œå› ä¸ºæˆ‘å¹¶æ²¡æœ‰ç”¨å¢åŠ çš„æ–¹æ³•æ”¹å˜å¯¹è±¡çš„çŠ¶æ€ã€‚å¯¹äºåšæ›´é«˜çº§çš„ä¸œè¥¿ï¼Œæˆ‘å¯èƒ½ä¸å¾—ä¸è¿™æ ·åšã€‚æŠŠæ‰‹ä¼¸è¿› Raku çš„å†…éƒ¨è¿™ä¹ˆæ·±ï¼Œæˆ‘å¯èƒ½ä¼šæŠŠè‡ªå·±çƒ«ä¼¤ã€‚æ—¢ç„¶æˆ‘æƒ³åšçš„æ˜¯æŠŠæˆ‘çš„ä»£ç ç»‘åœ¨ç¼–è¯‘å™¨çš„å˜åŒ–ä¸Šï¼Œåæ­£æˆ‘å¯èƒ½ä¼šå…¨èº«å¿ƒåœ°æŠ•å…¥åˆ° nqp-land ä¸­å»ã€‚\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003emy \\j = 1 | 2 | 3;\ndd j;\nuse nqp;\n.say for nqp::getattr(j, Junction, '$!eigenstates');\n# OUTPUT: any(1, 2, 3)\n          1\n          2\n          3\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ nqp æ¥è·å–ç§æœ‰å±æ€§ï¼Œè€Œä¸éœ€è¦æ·»åŠ ä»»ä½•æ–¹æ³•ã€‚è¿™å°±æœ‰ç‚¹å„¿ä¸ä¼¦ä¸ç±»äº†ã€‚æ‰€ä»¥ï¼Œè®©æˆ‘ä»¬ç”¨ä¸€ä¸ªä¼ªæ–¹æ³•æ¥åšä¸€äº› deboilerplatingã€‚\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003esub pry(Mu $the-object is raw) {\n    use InterceptAllMethods;\n\n    class Interceptor {\n        has Mu $!the-object;\n        method ^find_method(Mu \\type, Str $name) {\n            my method (Mu \\SELF:) is raw {\n                use nqp;\n                my $the-object := nqp::getattr(SELF, Interceptor, '$!the-object');\n                nqp::getattr($the-object, $the-object.WHAT, '$!' ~ $name)\n            }\n        }\n    }\n\n    use nqp;\n    nqp::p6bindattrinvres(nqp::create(Interceptor), Interceptor, '$!the-object', $the-object);\n}\n\n.say for j.\u0026amp;pry.eigenstates;\n# OUTPUT: 1\n          2\n          3\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eé€šè¿‡ InterceptAllMethodsï¼Œlizmat æ”¹å˜äº†ç±»å…³é”®å­—çš„è¡Œä¸ºï¼Œå…è®¸æˆ‘ä»¬æä¾›ä¸€ä¸ª FALLBACK-method æ¥æ•è·ä»»ä½•æ–¹æ³•ï¼ŒåŒ…æ‹¬ä» Mu ç»§æ‰¿çš„æ–¹æ³•ã€‚è¿™åè¿‡æ¥åˆå…è®¸ pry è¿”å›çš„å¯¹è±¡å°†ä»»ä½•æ–¹æ³•è°ƒç”¨è½¬ç§»åˆ°ä¸€ä¸ªè‡ªå®šä¹‰çš„æ–¹æ³•ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ \u003ccode\u003e.\u0026amp;pry\u003c/code\u003e è¢«è°ƒç”¨çš„å¯¹è±¡åšä»»ä½•æˆ‘ä»¬æƒ³åšçš„äº‹æƒ…ã€‚\u003c/p\u003e\n\u003cp\u003eç”±äºæˆ‘ä»¬çš„ç‰¹æ®Šå¯¹è±¡ä¼šæ‹¦æˆªä»»ä½•è°ƒç”¨ï¼Œç”šè‡³æ˜¯ Mu çš„è°ƒç”¨ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°å¦ä¸€ç§æ–¹æ³•æ¥è°ƒç”¨ \u003ccode\u003e.new\u003c/code\u003eã€‚ç”±äº \u003ccode\u003e.^\u003c/code\u003e ä¸æ˜¯ \u003ccode\u003e.\u003c/code\u003e çš„ç‰¹æ®Šå½¢å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥è·å¾—å¯¹ç±»æ–¹æ³•çš„è®¿é—®ã€‚\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003esub interceptor(Method $the-method){\n    use InterceptAllMethods;\n    use nqp;\n\n    sub (Mu $the-object is raw) {\n        my class Interceptor {\n            has Mu $!the-object;\n            has Code $!the-method;\n\n            method ^find_method(Mu \\type, Mu:D $name) {\n                my method (Mu \\SELF: |c) is raw {\n                    $!the-method.($!the-object, $name, |c)\n                }\n            }\n            method ^introspect(Mu \\type, Mu \\obj) {\n                my method call-it() is raw {\n                    $!the-object\n                }\n                obj.\u0026amp;call-it;\n            }\n            method ^new(Mu \\type, $the-object!, $the-method) {\n                nqp::p6bindattrinvres(\n                        nqp::p6bindattrinvres(nqp::create(Interceptor), Interceptor, '$!the-object', $the-object),\n                        Interceptor, '$!the-method', $the-method)\n            }\n        }\n\n            # nqp::p6bindattrinvres(\n                #     nqp::p6bindattrinvres(nqp::create(Interceptor), Interceptor, '$!the-object', $the-object),\n                #   Interceptor, '$!the-method', $the-method);\n        Interceptor.^new($the-object, $the-method)\n    }\n}\n\nmy \u0026amp;first-defined = interceptor(\n    my method (Positional \\SELF: $name) {\n        for SELF.flat -\u0026gt; $e {\n            with $e.\u0026quot;$name\u0026quot;(|%_) {\n                .return\n            }\n        }\n        Nil\n    }\n);\n\nmy $file = \u0026lt;file1.txt file2.txt file3.txt nohup.out\u0026gt;Â».IO.\u0026amp;first-defined.open(:r);\ndd $file;\n# OUTPUT: Handle $file = IO::Handle.new(path =\u0026gt; IO::Path.new(\u0026quot;nohup.out\u0026quot;, :SPEC(IO::Spec::Unix), :CWD(\u0026quot;/home/dex/projects/raku/tmp\u0026quot;)), chomp =\u0026gt; Bool::True, nl-in =\u0026gt; $[\u0026quot;\\n\u0026quot;, \u0026quot;\\r\\n\u0026quot;], nl-out =\u0026gt; \u0026quot;\\n\u0026quot;, encoding =\u0026gt; \u0026quot;utf8\u0026quot;)\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003esub \u003ccode\u003einterceptor\u003c/code\u003e æ¥å—ä¸€ä¸ªæ–¹æ³•å¹¶è¿”å›ä¸€ä¸ª subã€‚å¦‚æœè¿™ä¸ª sub åƒæ–¹æ³•ä¸€æ ·è¢«è°ƒç”¨ï¼Œå®ƒå°†æŠŠè¦è¢«è°ƒç”¨çš„æ–¹æ³•çš„åç§°å’Œè°ƒç”¨è€…è½¬å‘ç»™ä¸€ä¸ªè‡ªå®šä¹‰æ–¹æ³•ã€‚å½“ \u003ccode\u003e.\u0026amp;first-defined\u003c/code\u003e è¢«è°ƒç”¨æ—¶ï¼Œä¼šè¿”å›ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒæ˜¯ä»€ä¹ˆã€‚\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003emy \\uhhh-special = \u0026lt;a b c\u0026gt;.\u0026amp;first-defined;\ndd uhhh-special.^introspect(uhhh-special);\n# OUTPUT: ($(\u0026quot;a\u0026quot;, \u0026quot;b\u0026quot;, \u0026quot;c\u0026quot;), method \u0026lt;anon\u0026gt; (Positional \\SELF: $name, *%_) { #`(Method|93927752146784) ... })\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eæˆ‘ä»¬å¿…é¡»ç»™ \u003ccode\u003e.^introspect\u003c/code\u003e ä¸€ä¸ªæˆ‘ä»¬æƒ³çœ‹çš„å¯¹è±¡ï¼Œå› ä¸ºå®ƒçš„è°ƒç”¨è€…æ˜¯ç±» Interceptor çš„ç±»å‹å¯¹è±¡ã€‚\u003c/p\u003e\n\u003cp\u003eç›®å‰ï¼Œæˆ‘è¿˜ä¸çŸ¥é“æœ‰ä»€ä¹ˆåŠæ³•ï¼ˆæ¯•ç«Ÿï¼Œæˆ‘çŸ¥é“çš„åªæ˜¯è¶³å¤Ÿå¤šçš„ä¸œè¥¿ï¼ŒçœŸçš„å¾ˆå±é™©ã€‚è¿™æ˜¯ä¸å¹¸çš„ï¼Œå› ä¸º lizmat å†³å®šé‡è½½å…³é”®å­— \u003ccode\u003eclass\u003c/code\u003eï¼Œè€Œä¸æ˜¯ç”¨ä¸åŒçš„åå­—å¯¼å‡ºç‰¹æ®Šçš„ \u003ccode\u003eMetamodel::ClassHOW\u003c/code\u003eã€‚å¦‚æœæˆ‘ä»¬ä¸æƒ³æˆ–ä¸èƒ½æœ‰å¤–éƒ¨ä¾èµ–ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ MOP æ¥åˆ›å»ºæˆ‘ä»¬çš„ç±»å‹å¯¹è±¡ã€‚\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003eclass InterceptHOW is Metamodel::ClassHOW {\n    method publish_method_cache(|) { }\n}\n\nsub ipry(Mu $the-object is raw) {\n    my \\Interceptor = InterceptHOW.new_type(:name\u0026lt;Interceptor\u0026gt;);\n    Interceptor.^add_attribute(Attribute.new(:name\u0026lt;$!the-object\u0026gt;, :type(Mu), :package(Interceptor)));\n    Interceptor.^add_meta_method('find_method',\n        my method find_method(Mu \\type, Str $name) {\n            # say â€looking for $nameâ€œ;\n            my method (Mu \\SELF:) is raw {\n                use nqp;\n                my $the-object := nqp::getattr(SELF, Interceptor, '$!the-object');\n                nqp::getattr($the-object, $the-object.WHAT, '$!' ~ $name)\n            }\n    });\n    Interceptor.^compose;\n\n    use nqp;\n    nqp::p6bindattrinvres(nqp::create(Interceptor), Interceptor, '$!the-object', $the-object);\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eå½“æˆ‘å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œæˆ‘å‘ç° \u003ccode\u003e.^add_meta_method\u003c/code\u003e åªæœ‰åœ¨æä¾›ç»™å®ƒçš„æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°çš„åå­—å’Œ \u003ccode\u003eStr\u003c/code\u003e ç›¸åŒçš„æ—¶å€™æ‰ä¼šå·¥ä½œã€‚èµ·åˆï¼Œæˆ‘å°è¯•äº†ä¸€ä¸ªåŒ¿åæ–¹æ³•ï¼Œå®ƒæœ€ç»ˆå‡ºç°åœ¨ \u003ccode\u003e.^meta_method_table\u003c/code\u003e ä¸­ï¼Œä½†ä»æœªè¢«è°ƒç”¨ã€‚æˆ‘æƒ³è¿™ä¸ª bug å…¶å®å¹¶ä¸é‡è¦ï¼Œå› ä¸ºè¿™ä¸ªå…ƒæ–¹æ³•æ ¹æœ¬æ²¡æœ‰è¢«è®°å½•ä¸‹æ¥ã€‚å¦‚æœæˆ‘ç©ç«ï¼Œæˆ‘æ²¡æœ‰æƒåˆ©æŠ±æ€¨çƒ§ä¼¤ã€‚ä½ ä¼šåœ¨é‡å¤–çš„ \u003ccode\u003eActions.nqp\u003c/code\u003e ä¸­å‘ç°è¿™ä¸ªæ–¹æ³•ã€‚Class å…³é”®å­—å¹¶æ²¡æœ‰ä»€ä¹ˆç¥å¥‡çš„ä½œç”¨ã€‚Rakudo åªæ˜¯ä½¿ç”¨ MOP æ¥æ„é€ ç±»å‹å¯¹è±¡ã€‚\u003c/p\u003e\n\u003cp\u003eæˆ‘ä»¬ä¸èƒ½åœ¨ Raku ä¸­é‡è½½èµ‹å€¼æ“ä½œç¬¦ã€‚è¿™å…¶å®å¹¶ä¸éœ€è¦ï¼Œå› ä¸ºèµ‹å€¼æ˜¯é€šè¿‡è°ƒç”¨ä¸€ä¸ªåä¸º STORE çš„æ–¹æ³•æ¥å®ç°çš„ã€‚ç”±äºæˆ‘ä»¬å¾—åˆ°äº†å¯¹ dispatch çš„å®Œå…¨æ§åˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥æ‹¦æˆªä»»ä½•æ–¹æ³•è°ƒç”¨ï¼ŒåŒ…æ‹¬ä¸€è¿ä¸²çš„æ–¹æ³•è°ƒç”¨ã€‚\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003emulti sub methodify(%h, :$deeply!) {\n    sub interceptor(%h, $parent = Nil){\n        use InterceptAllMethods;\n        use nqp;\n\n        class Interceptor is Callable {\n            has Mu $!the-object;\n            has Mu @!stack;\n\n            method ^find_method(Mu \\type, Mu:D $name) {\n                my method (Mu \\SELF: |c) is raw {\n                    my @new-stack = @!stack;\n                    my $the-object = $!the-object;\n\n                    if $name eq 'STORE' {\n                        # workaround for rakudobug#4203\n                        $the-object{||@new-stack.head(*-1)}:delete if $the-object{||@new-stack.head(*-1)}:exists;\n\n                        $the-object{||@new-stack} = c;\n                        return-rw c\n                    } else {\n                        @new-stack.push: $name;\n                        my \\nextlevel = SELF.^new($!the-object, @new-stack, $name);\n                        nextlevel\n                    }\n                }\n            }\n            method ^introspect(Mu \\type, Mu \\obj) {\n                my method call-it() is raw {\n                    $!the-object, @!stack\n                }\n                obj.\u0026amp;call-it;\n            }\n            method ^new(Mu \\type, $the-object!, @new-stack?, $name?) {\n                $name\n                    ?? nqp::p6bindattrinvres(\n                        nqp::p6bindattrinvres(nqp::create(Interceptor), Interceptor, '$!the-object', $the-object),\n                        Interceptor, '@!stack', @new-stack)\n                    !! nqp::p6bindattrinvres(nqp::create(Interceptor), Interceptor, '$!the-object', $the-object)\n                }\n        }\n\n        Interceptor.^new(%h)\n    }\n\n    interceptor(%h)\n}\n\nmy %h2;\nmy $o2 = methodify(%h2, :deeply);\n$o2.a.b = 42;\ndd %h2;\n$o2.a.b.c = \u0026lt;answer\u0026gt;;\ndd %h2;\nsay $o2.a.b.c;\n# OUTPUT: Hash %h2 = {:a(${:b(\\(42))})}\n          Hash %h2 = {:a(${:b(${:c(\\(\u0026quot;answer\u0026quot;))})})}\n          This type cannot unbox to a native string: P6opaque, Interceptor\n            in block \u0026lt;unit\u0026gt; at /home/dex/projects/raku/any-chain.raku line 310\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eæ¯å½“æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ Interceptor å®ä¾‹ï¼Œå®ƒå­˜å‚¨äº†å‰ä¸€ä¸ªæ–¹æ³•çš„åç§°ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ²¿ç€æ–¹æ³•è°ƒç”¨é“¾ç§»åŠ¨ã€‚ç”±äºèµ‹å€¼è°ƒç”¨ STOREï¼Œæˆ‘ä»¬å¯ä»¥å°†èµ‹å€¼è½¬ç§»åˆ°æˆ‘ä»¬ç”¨ä½œå®é™…æ•°æ®ç»“æ„çš„ Hash ä¸­ã€‚å”‰ï¼Œæ£€ç´¢å€¼å°±ä¸ä¸€æ ·äº†ï¼Œå› ä¸º Raku ä¸åŒºåˆ†æ–¹æ³•è°ƒç”¨å’Œ FETCHã€‚åœ¨è¿™é‡Œï¼Œé¾™æ¯”æˆ‘å¼ºã€‚æˆ‘è¿˜æ˜¯åŒ…å«äº†è¿™ä¸ªä¸€åŠå¤±è´¥çš„å°è¯•ï¼Œå› ä¸ºæˆ‘å¯¹ slippy åŠåˆ—è¡¨æœ‰å¾ˆå¥½çš„åˆ©ç”¨ã€‚è¿™éœ€è¦ä½¿ç”¨ \u003ccode\u003ev6.e.preview\u003c/code\u003eï¼Œè®©æˆ‘è¸©åˆ°äº†ä¸€ä¸ª bugã€‚å¯èƒ½è¿˜æœ‰æ›´å¤šè¿™æ ·çš„æƒ…å†µã€‚æ‰€ä»¥è¯·ä½¿ç”¨åŒæ ·çš„ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ \u003ccode\u003e.e\u003c/code\u003e å‘å¸ƒåˆ°é‡å¤–ä¹‹å‰ï¼ŒæŠŠæ‰€æœ‰çš„é‡å…½éƒ½æ€æ‰ã€‚\u003c/p\u003e\n\u003cp\u003eèƒ½å¤Ÿå®Œå…¨æ§åˆ¶æ–¹æ³•è°ƒç”¨é“¾å°†æ˜¯ä¸€ä»¶å¥½äº‹ã€‚ä¹Ÿè®¸æˆ‘ä»¬å¯ä»¥ç”¨ RakuAST æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚\u003c/p\u003e\n\u003cp\u003eæœ‰äº†è¿™äº›å·²ç»å¯ä»¥å·¥ä½œçš„ä¸œè¥¿ï¼Œæˆ‘ä»¬å¯ä»¥åšä¸€äº›æœ‰è¶£çš„äº‹æƒ…ã€‚é‚£äº›çƒ¦äººçš„å¼‚å¸¸æ€»æ˜¯åœ¨æ‹–æˆ‘ä»¬çš„åè…¿ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ \u003ccode\u003etry\u003c/code\u003e æ¥åŒ–è§£å®ƒä»¬ï¼Œä½†é‚£ä¼šç ´åä¸€ä¸ªæ–¹æ³•è°ƒç”¨é“¾ã€‚\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003econstant no-argument-given = Mu.new;\nsub try(Mu $obj is raw, Mu $alternate-value = no-argument-given) {\n    interceptor(my method (Mu \\SELF: $name, |c) {\n        my $o = SELF;\n        my \\m = $o.^lookup($name) orelse {\n            my $bt = Backtrace.new;\n            my $idx = $bt.next-interesting-index($bt.next-interesting-index + 1);\n            (X::Method::NotFound.new(:method($name), :typename($o.^name)) but role :: { method vault-backtrace { False }}).throw(Backtrace.new($idx + 1));\n        }\n\n        try {\n            $o = $o.\u0026quot;$name\u0026quot;(|c);\n        }\n \n        $! ~~ Exception\n            ?? $alternate-value.WHICH eqv no-argument-given.WHICH\n                ?? $o\n                !! $alternate-value\n            !! $o\n    }).($obj)\n}\n\nclass C {\n    has $.greeting;\n    method might-throw { die \u0026quot;Not today love!\u0026quot; }\n    method greet { say $.greeting }\n}\n\nC.new(greeting =\u0026gt; â€šLet's make love!â€˜).\u0026amp;try.might-throw.greet;\n# OUTPUT: Let's make love!\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eä¼ªæ–¹æ³• try å°†ä¼šåŒ–è§£ä»»ä½•å¼‚å¸¸ï¼Œå¹¶å…è®¸ç»§ç»­è°ƒç”¨ C è¯­è¨€çš„æ–¹æ³•ã€‚æˆ‘å¿…é¡»ç”¨ä¸€ä¸ªç‰¹æ®Šçš„å€¼æ¥æ ‡è®°æ²¡æœ‰å¯é€‰çš„å‚æ•° \u003ccode\u003e$alternate-value\u003c/code\u003eï¼Œå› ä¸ºå®ƒå®é™…ä¸Šå¯èƒ½ä¼šæŠŠå¼‚å¸¸å¯¹è±¡å˜æˆ \u003ccode\u003eNil\u003c/code\u003eã€‚\u003c/p\u003e\n\u003cp\u003eæˆ‘å¾ˆè‚¯å®šè¿˜æœ‰å¾ˆå¤šè¿™æ ·çš„å°å¸®æ‰‹åœ¨ç­‰ç€æˆ‘ä»¬å»å‘ç°ã€‚æœªæ¥å¯èƒ½ä¼šæœ‰ä¸€ä¸ªæ¨¡å—ï¼Œå¸Œæœ›èƒ½å¸®åŠ© Raku æˆä¸ºä¸€ä¸ªå¥½çš„\u003ca href=\"https://ftp.fau.de/fosdem/2021/D.perl/programming_lang_for_free_software.webm\"\u003eç¼–ç¨‹è¯­è¨€\u003c/a\u003eã€‚\u003c/p\u003e\n\u003cp\u003eåŸæ–‡é“¾æ¥: \u003ca href=\"https://gfldex.wordpress.com/2021/02/17/method-ish/\"\u003ehttps://gfldex.wordpress.com/2021/02/17/method-ish/\u003c/a\u003e\u003c/p\u003e\n","text":"åœ¨æˆ‘çš„ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘åˆä¸€æ¬¡ä¸ºä» CORE ä¸­å¢å¼ºç±»çš„æ–¹æ³•è€Œè‹¦æ¼ã€‚è¿™ç§æŒ£æ‰å®Œå…¨æ²¡æœ‰å¿…è¦ï¼Œå› ä¸ºæˆ‘å¹¶æ²¡æœ‰ç”¨å¢åŠ çš„æ–¹æ³•æ”¹å˜å¯¹è±¡çš„çŠ¶æ€ã€‚å¯¹äºåšæ›´é«˜çº§çš„ä¸œè¥¿ï¼Œæˆ‘å¯èƒ½ä¸å¾—ä¸è¿™æ ·åšã€‚æŠŠæ‰‹ä¼¸è¿› Raku çš„å†…éƒ¨è¿™ä¹ˆæ·±ï¼Œæˆ‘å¯èƒ½ä¼šæŠŠè‡ªå·±çƒ«ä¼¤ã€‚æ—¢ç„¶æˆ‘æƒ³åšçš„æ˜¯æŠŠæˆ‘çš„ä»£ç ç»‘åœ¨ç¼–è¯‘å™¨çš„å˜åŒ–ä¸Šï¼Œåæ­£æˆ‘å¯èƒ½ä¼šå…¨èº«å¿ƒåœ°æŠ•å…¥åˆ° nqp-land ä¸­å»ã€‚\nmy \\j = 1 | 2 | 3; dd j; use nqp; .say for nqp::getattr(j, Junction, '$!eigenstates'); # OUTPUT: any(1, 2, 3) 1 2 3 æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ nqp æ¥è·å–ç§æœ‰å±æ€§ï¼Œè€Œä¸éœ€è¦æ·»åŠ ä»»ä½•æ–¹æ³•ã€‚è¿™å°±æœ‰ç‚¹å„¿ä¸ä¼¦ä¸ç±»äº†ã€‚æ‰€ä»¥ï¼Œè®©æˆ‘ä»¬ç”¨ä¸€ä¸ªä¼ªæ–¹æ³•æ¥åšä¸€äº› deboilerplatingã€‚\nsub pry(Mu $the-object is raw) { use InterceptAllMethods; class Interceptor { has Mu $!the-object; method ^find_method(Mu \\type, Str $name) { my method (Mu \\SELF:) is raw { use nqp; my $the-object := nqp::getattr(SELF, Interceptor, '$!the-object'); nqp::getattr($the-object, $the-object.WHAT, '$!' ~ $name) } } } use nqp; nqp::p6bindattrinvres(nqp::create(Interceptor), Interceptor, '$!the-object', $the-object); } .say for j.\u0026amp;pry.eigenstates; # OUTPUT: 1 2 3 é€šè¿‡ InterceptAllMethodsï¼Œlizmat æ”¹å˜äº†ç±»å…³é”®å­—çš„è¡Œä¸ºï¼Œå…è®¸æˆ‘ä»¬æä¾›ä¸€ä¸ª FALLBACK-method æ¥æ•è·ä»»ä½•æ–¹æ³•ï¼ŒåŒ…æ‹¬ä» Mu ç»§æ‰¿çš„æ–¹æ³•ã€‚è¿™åè¿‡æ¥åˆå…è®¸ pry è¿”å›çš„å¯¹è±¡å°†ä»»ä½•æ–¹æ³•è°ƒç”¨è½¬ç§»åˆ°ä¸€ä¸ªè‡ªå®šä¹‰çš„æ–¹æ³•ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ .\u0026amp;pry è¢«è°ƒç”¨çš„å¯¹è±¡åšä»»ä½•æˆ‘ä»¬æƒ³åšçš„äº‹æƒ…ã€‚\nç”±äºæˆ‘ä»¬çš„ç‰¹æ®Šå¯¹è±¡ä¼šæ‹¦æˆªä»»ä½•è°ƒç”¨ï¼Œç”šè‡³æ˜¯ Mu çš„è°ƒç”¨ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°å¦ä¸€ç§æ–¹æ³•æ¥è°ƒç”¨ .newã€‚ç”±äº .^ ä¸æ˜¯ . çš„ç‰¹æ®Šå½¢å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥è·å¾—å¯¹ç±»æ–¹æ³•çš„è®¿é—®ã€‚\nsub interceptor(Method $the-method){ use InterceptAllMethods; use nqp; sub (Mu $the-object is raw) { my class Interceptor { has Mu $!the-object; has Code $!the-method; method ^find_method(Mu \\type, Mu:D $name) { my method (Mu \\SELF: |c) is raw { $!the-method.($!the-object, $name, |c) } } method ^introspect(Mu \\type, Mu \\obj) { my method call-it() is raw { $!the-object } obj.\u0026amp;call-it; } method ^new(Mu \\type, $the-object!, $the-method) { nqp::p6bindattrinvres( nqp::p6bindattrinvres(nqp::create(Interceptor), Interceptor, '$!the-object', $the-object), Interceptor, '$!the-method', $the-method) } } # nqp::p6bindattrinvres( # nqp::p6bindattrinvres(nqp::create(Interceptor), Interceptor, '$!the-object', $the-object), # Interceptor, '$!the-method', $the-method); Interceptor.^new($the-object, $the-method) } } my \u0026amp;first-defined = interceptor( my method (Positional \\SELF: $name) { for SELF.flat -\u0026gt; $e { with $e.\u0026quot;$name\u0026quot;(|%_) { .return } } Nil } ); my $file = \u0026lt;file1.txt file2.txt file3.txt nohup.out\u0026gt;Â».IO.\u0026amp;first-defined.open(:r); dd $file; # OUTPUT: Handle $file = IO::Handle.new(path =\u0026gt; IO::Path.new(\u0026quot;nohup.out\u0026quot;, :SPEC(IO::Spec::Unix), :CWD(\u0026quot;/home/dex/projects/raku/tmp\u0026quot;)), chomp =\u0026gt; Bool::True, nl-in =\u0026gt; $[\u0026quot;\\n\u0026quot;, \u0026quot;\\r\\n\u0026quot;], nl-out =\u0026gt; \u0026quot;\\n\u0026quot;, encoding =\u0026gt; \u0026quot;utf8\u0026quot;) sub interceptor æ¥å—ä¸€ä¸ªæ–¹æ³•å¹¶è¿”å›ä¸€ä¸ª subã€‚å¦‚æœè¿™ä¸ª sub åƒæ–¹æ³•ä¸€æ ·è¢«è°ƒç”¨ï¼Œå®ƒå°†æŠŠè¦è¢«è°ƒç”¨çš„æ–¹æ³•çš„åç§°å’Œè°ƒç”¨è€…è½¬å‘ç»™ä¸€ä¸ªè‡ªå®šä¹‰æ–¹æ³•ã€‚å½“ .\u0026amp;first-defined è¢«è°ƒç”¨æ—¶ï¼Œä¼šè¿”å›ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒæ˜¯ä»€ä¹ˆã€‚\nmy \\uhhh-special = \u0026lt;a b c\u0026gt;.\u0026amp;first-defined; dd uhhh-special.^introspect(uhhh-special); # OUTPUT: ($(\u0026quot;a\u0026quot;, \u0026quot;b\u0026quot;, \u0026quot;c\u0026quot;), method \u0026lt;anon\u0026gt; (Positional \\SELF: $name, *%_) { #`(Method|93927752146784) ... }) æˆ‘ä»¬å¿…é¡»ç»™ .^introspect ä¸€ä¸ªæˆ‘ä»¬æƒ³çœ‹çš„å¯¹è±¡ï¼Œå› ä¸ºå®ƒçš„è°ƒç”¨è€…æ˜¯ç±» Interceptor çš„ç±»å‹å¯¹è±¡ã€‚\nç›®å‰ï¼Œæˆ‘è¿˜ä¸çŸ¥é“æœ‰ä»€ä¹ˆåŠæ³•ï¼ˆæ¯•ç«Ÿï¼Œæˆ‘çŸ¥é“çš„åªæ˜¯è¶³å¤Ÿå¤šçš„ä¸œè¥¿ï¼ŒçœŸçš„å¾ˆå±é™©ã€‚è¿™æ˜¯ä¸å¹¸çš„ï¼Œå› ä¸º lizmat å†³å®šé‡è½½å…³é”®å­— classï¼Œè€Œä¸æ˜¯ç”¨ä¸åŒçš„åå­—å¯¼å‡ºç‰¹æ®Šçš„ Metamodel::ClassHOWã€‚å¦‚æœæˆ‘ä»¬ä¸æƒ³æˆ–ä¸èƒ½æœ‰å¤–éƒ¨ä¾èµ–ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ MOP æ¥åˆ›å»ºæˆ‘ä»¬çš„ç±»å‹å¯¹è±¡ã€‚\nclass InterceptHOW is Metamodel::ClassHOW { method publish_method_cache(|) { } } sub ipry(Mu $the-object is raw) { my \\Interceptor = InterceptHOW.new_type(:name\u0026lt;Interceptor\u0026gt;); Interceptor.^add_attribute(Attribute.new(:name\u0026lt;$!the-object\u0026gt;, :type(Mu), :package(Interceptor))); Interceptor.^add_meta_method('find_method', my method find_method(Mu \\type, Str $name) { # say â€looking for $nameâ€œ; my method (Mu \\SELF:) is raw { use nqp; my $the-object := nqp::getattr(SELF, Interceptor, '$!the-object'); nqp::getattr($the-object, $the-object.WHAT, '$!' ~ $name) } }); Interceptor.^compose; use nqp; nqp::p6bindattrinvres(nqp::create(Interceptor), Interceptor, '$!the-object', $the-object); } å½“æˆ‘å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œæˆ‘å‘ç° .^add_meta_method åªæœ‰åœ¨æä¾›ç»™å®ƒçš„æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°çš„åå­—å’Œ Str ç›¸åŒçš„æ—¶å€™æ‰ä¼šå·¥ä½œã€‚èµ·åˆï¼Œæˆ‘å°è¯•äº†ä¸€ä¸ªåŒ¿åæ–¹æ³•ï¼Œå®ƒæœ€ç»ˆå‡ºç°åœ¨ .^meta_method_table ä¸­ï¼Œä½†ä»æœªè¢«è°ƒç”¨ã€‚æˆ‘æƒ³è¿™ä¸ª bug å…¶å®å¹¶ä¸é‡è¦ï¼Œå› ä¸ºè¿™ä¸ªå…ƒæ–¹æ³•æ ¹æœ¬æ²¡æœ‰è¢«è®°å½•ä¸‹æ¥ã€‚å¦‚æœæˆ‘ç©ç«ï¼Œæˆ‘æ²¡æœ‰æƒåˆ©æŠ±æ€¨çƒ§ä¼¤ã€‚ä½ ä¼šåœ¨é‡å¤–çš„ Actions.nqp ä¸­å‘ç°è¿™ä¸ªæ–¹æ³•ã€‚Class å…³é”®å­—å¹¶æ²¡æœ‰ä»€ä¹ˆç¥å¥‡çš„ä½œç”¨ã€‚Rakudo åªæ˜¯ä½¿ç”¨ MOP æ¥æ„é€ ç±»å‹å¯¹è±¡ã€‚\næˆ‘ä»¬ä¸èƒ½åœ¨ Raku ä¸­é‡è½½èµ‹å€¼æ“ä½œç¬¦ã€‚è¿™å…¶å®å¹¶ä¸éœ€è¦ï¼Œå› ä¸ºèµ‹å€¼æ˜¯é€šè¿‡è°ƒç”¨ä¸€ä¸ªåä¸º STORE çš„æ–¹æ³•æ¥å®ç°çš„ã€‚ç”±äºæˆ‘ä»¬å¾—åˆ°äº†å¯¹ dispatch çš„å®Œå…¨æ§åˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥æ‹¦æˆªä»»ä½•æ–¹æ³•è°ƒç”¨ï¼ŒåŒ…æ‹¬ä¸€è¿ä¸²çš„æ–¹æ³•è°ƒç”¨ã€‚\nmulti sub methodify(%h, :$deeply!) { sub interceptor(%h, $parent = Nil){ use InterceptAllMethods; use nqp; class Interceptor is Callable { has Mu $!the-object; has Mu @!stack; method ^find_method(Mu \\type, Mu:D $name) { my method (Mu \\SELF: |c) is raw { my @new-stack = @!stack; my $the-object = $!the-object; if $name eq 'STORE' { # workaround for rakudobug#4203 $the-object{||@new-stack.head(*-1)}:delete if $the-object{||@new-stack.head(*-1)}:exists; $the-object{||@new-stack} = c; return-rw c } else { @new-stack.push: $name; my \\nextlevel = SELF.^new($!the-object, @new-stack, $name); nextlevel } } } method ^introspect(Mu \\type, Mu \\obj) { my method call-it() is raw { $!the-object, @!stack } obj.\u0026amp;call-it; } method ^new(Mu \\type, $the-object!, @new-stack?, $name?) { $name ?? nqp::p6bindattrinvres( nqp::p6bindattrinvres(nqp::create(Interceptor), Interceptor, '$!the-object', $the-object), Interceptor, '@!stack', @new-stack) !! nqp::p6bindattrinvres(nqp::create(Interceptor), Interceptor, '$!the-object', $the-object) } } Interceptor.^new(%h) } interceptor(%h) } my %h2; my $o2 = methodify(%h2, :deeply); $o2.a.b = 42; dd %h2; $o2.a.b.c = \u0026lt;answer\u0026gt;; dd %h2; say $o2.a.b.c; # OUTPUT: Hash %h2 = {:a(${:b(\\(42))})} Hash %h2 = {:a(${:b(${:c(\\(\u0026quot;answer\u0026quot;))})})} This type cannot unbox to a native string: P6opaque, Interceptor in block \u0026lt;unit\u0026gt; at /home/dex/projects/raku/any-chain.raku line 310 æ¯å½“æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ Interceptor å®ä¾‹ï¼Œå®ƒå­˜å‚¨äº†å‰ä¸€ä¸ªæ–¹æ³•çš„åç§°ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ²¿ç€æ–¹æ³•è°ƒç”¨é“¾ç§»åŠ¨ã€‚ç”±äºèµ‹å€¼è°ƒç”¨ STOREï¼Œæˆ‘ä»¬å¯ä»¥å°†èµ‹å€¼è½¬ç§»åˆ°æˆ‘ä»¬ç”¨ä½œå®é™…æ•°æ®ç»“æ„çš„ Hash ä¸­ã€‚å”‰ï¼Œæ£€ç´¢å€¼å°±ä¸ä¸€æ ·äº†ï¼Œå› ä¸º Raku ä¸åŒºåˆ†æ–¹æ³•è°ƒç”¨å’Œ FETCHã€‚åœ¨è¿™é‡Œï¼Œé¾™æ¯”æˆ‘å¼ºã€‚æˆ‘è¿˜æ˜¯åŒ…å«äº†è¿™ä¸ªä¸€åŠå¤±è´¥çš„å°è¯•ï¼Œå› ä¸ºæˆ‘å¯¹ slippy åŠåˆ—è¡¨æœ‰å¾ˆå¥½çš„åˆ©ç”¨ã€‚è¿™éœ€è¦ä½¿ç”¨ v6.e.previewï¼Œè®©æˆ‘è¸©åˆ°äº†ä¸€ä¸ª bugã€‚å¯èƒ½è¿˜æœ‰æ›´å¤šè¿™æ ·çš„æƒ…å†µã€‚æ‰€ä»¥è¯·ä½¿ç”¨åŒæ ·çš„ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ .e å‘å¸ƒåˆ°é‡å¤–ä¹‹å‰ï¼ŒæŠŠæ‰€æœ‰çš„é‡å…½éƒ½æ€æ‰ã€‚\nèƒ½å¤Ÿå®Œå…¨æ§åˆ¶æ–¹æ³•è°ƒç”¨é“¾å°†æ˜¯ä¸€ä»¶å¥½äº‹ã€‚ä¹Ÿè®¸æˆ‘ä»¬å¯ä»¥ç”¨ RakuAST æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚\næœ‰äº†è¿™äº›å·²ç»å¯ä»¥å·¥ä½œçš„ä¸œè¥¿ï¼Œæˆ‘ä»¬å¯ä»¥åšä¸€äº›æœ‰è¶£çš„äº‹æƒ…ã€‚é‚£äº›çƒ¦äººçš„å¼‚å¸¸æ€»æ˜¯åœ¨æ‹–æˆ‘ä»¬çš„åè…¿ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ try æ¥åŒ–è§£å®ƒä»¬ï¼Œä½†é‚£ä¼šç ´åä¸€ä¸ªæ–¹æ³•è°ƒç”¨é“¾ã€‚\nconstant no-argument-given = Mu.new; sub try(Mu $obj is raw, Mu $alternate-value = no-argument-given) { interceptor(my method (Mu \\SELF: $name, |c) { my $o = SELF; my \\m = $o.^lookup($name) orelse { my $bt = Backtrace.new; my $idx = $bt.next-interesting-index($bt.next-interesting-index + 1); (X::Method::NotFound.new(:method($name), :typename($o.^name)) but role :: { method vault-backtrace { False }}).throw(Backtrace.new($idx + 1)); } try { $o = $o.\u0026quot;$name\u0026quot;(|c); } $! ~~ Exception ?? $alternate-value.WHICH eqv no-argument-given.WHICH ?? $o !! $alternate-value !! $o }).($obj) } class C { has $.greeting; method might-throw { die \u0026quot;Not today love!\u0026quot; } method greet { say $.greeting } } C.new(greeting =\u0026gt; â€šLet's make love!â€˜).\u0026amp;try.might-throw.greet; # OUTPUT: Let's make love! ä¼ªæ–¹æ³• try å°†ä¼šåŒ–è§£ä»»ä½•å¼‚å¸¸ï¼Œå¹¶å…è®¸ç»§ç»­è°ƒç”¨ C è¯­è¨€çš„æ–¹æ³•ã€‚æˆ‘å¿…é¡»ç”¨ä¸€ä¸ªç‰¹æ®Šçš„å€¼æ¥æ ‡è®°æ²¡æœ‰å¯é€‰çš„å‚æ•° $alternate-valueï¼Œå› ä¸ºå®ƒå®é™…ä¸Šå¯èƒ½ä¼šæŠŠå¼‚å¸¸å¯¹è±¡å˜æˆ Nilã€‚\næˆ‘å¾ˆè‚¯å®šè¿˜æœ‰å¾ˆå¤šè¿™æ ·çš„å°å¸®æ‰‹åœ¨ç­‰ç€æˆ‘ä»¬å»å‘ç°ã€‚æœªæ¥å¯èƒ½ä¼šæœ‰ä¸€ä¸ªæ¨¡å—ï¼Œå¸Œæœ›èƒ½å¸®åŠ© Raku æˆä¸ºä¸€ä¸ªå¥½çš„ç¼–ç¨‹è¯­è¨€ã€‚\nåŸæ–‡é“¾æ¥: https://gfldex.wordpress.com/2021/02/17/method-ish/\n"},"name":"Method-ish","published":"2021-02-28T00:00:00+08:00","summary":"Method-ish","type":"entry","url":"https://ohmyweekly.github.io/notes/2021-02-17-method-isd/"},{"content":{"html":"\u003cp\u003eä¸€ç›´ä»¥æ¥ä¹äºåŠ©äººçš„ \u003ca href=\"https://stackoverflow.com/users/1077672/raiph\"\u003eraiph\u003c/a\u003e åœ¨å›ç­”ä¸€ä¸ªå…³äºæ¨¡å¼åŒ¹é…çš„\u003ca href=\"https://stackoverflow.com/questions/66233465/haskell-like-pattern-matching-in-raku\"\u003eé—®é¢˜\u003c/a\u003eæ—¶å¸Œæœ›å¾—åˆ° RakuASTï¼Œå°±åƒåœ¨ Haskell ä¸­ä¸€æ ·ã€‚æœ‰äººæå‡ºç”¨ MMD æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è¿™æ ·åšï¼Œå¾—åˆ°ä¸€ä¸ªè´¯ç©¿çš„é»˜è®¤è·¯å¾„æ˜¯æ— è§£çš„ã€‚ç”±äº dispatch ç®€å•æ¥è¯´å°±æ˜¯æ¨¡å¼åŒ¹é…ï¼Œæˆ‘ä»¬åªéœ€è¦åšä¸€äº›é¢å¤–çš„å·¥ä½œã€‚ç®€è€Œè¨€ä¹‹ï¼Œdispatcher å¾—åˆ°ä¸€ä¸ªå‡½æ•°åˆ—è¡¨å’Œä¸€ä¸ªå¸¦å‚æ•°çš„åˆ—è¡¨ã€‚ç¬¬ä¸€ä¸ªæ¥å—æ‰€æœ‰å‚æ•°çš„å‡½æ•°è·èƒœã€‚\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003eclass Hold { has $.key; }\nclass Press { has $.key; }\nclass Err { has $.msg; }\n\nsub else(\u0026amp;code) { \u0026amp;code }\n\nsub match($needle, *@tests) {\n    for @tests.head(*-1) -\u0026gt; \u0026amp;f {\n        if \u0026amp;f.cando(\\($needle)) {\n            return f($needle);\n        }\n    }\n    @tests.tail.();\n}\n\nmatch Hold.new(:key\u0026lt;a\u0026gt;),\n    -\u0026gt; Hold (:$key) { put â€holding $keyâ€œ; },\n    -\u0026gt; Press (:$key) { put â€pressing $keyâ€œ; },\n    -\u0026gt; Err (:$msg) { warn â€ERR: $msgâ€œ },\n    else { fail â€šunsopportedâ€˜ };\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eæ–¹æ³• \u003ccode\u003e.cando\u003c/code\u003e éœ€è¦ä¸€ä¸ª \u003ca href=\"https://docs.raku.org/type/Capture\"\u003eCapture\u003c/a\u003e æ¥å‘Šè¯‰æˆ‘ä»¬ä¸€ä¸ª Routine æ˜¯å¦å¯ä»¥ç”¨ä¸€ä¸ªç»™å®šçš„å‚æ•°åˆ—è¡¨æ¥è°ƒç”¨ã€‚ä¸ºäº†åˆ›å»ºè¿™æ ·ä¸€ä¸ªæ•è·ï¼Œæˆ‘ä»¬ä½¿ç”¨å­—é¢çš„ \u003ccode\u003e\\($arguments, $go, $here)\u003c/code\u003eã€‚æˆ‘ä»¬ä¸åœ¨æœ€åæµ‹è¯•é»˜è®¤å€¼ã€‚ç›¸åï¼Œå½“æ²¡æœ‰å…¶ä»–å‡½æ•°åŒ¹é…æ—¶ï¼Œæˆ‘ä»¬ä¼šè°ƒç”¨è¯¥å‡½æ•°ã€‚å£°æ˜ sub \u003ccode\u003eelse\u003c/code\u003e åªæ˜¯ä¸ºäº†ç¾åŒ–ã€‚\u003c/p\u003e\n\u003cp\u003eç”±äºæˆ‘ä»¬æ˜¯åœ¨å‡½æ•°å¼çš„åœŸåœ°ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Raku æä¾›ç»™æˆ‘ä»¬çš„æ‰€æœ‰æ–¹ä¾¿çš„åŠŸèƒ½ã€‚\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003emy \u0026amp;key-matcher = \u0026amp;match.assuming(*,[\n        -\u0026gt; Hold (:$key) { put â€holding $keyâ€œ; },\n        -\u0026gt; Press (:$key) { put â€pressing $keyâ€œ; },\n        -\u0026gt; Err (:$msg) { warn â€ERR: $msgâ€œ },\n        else { fail â€šunsopportedâ€˜ };\n]);\n\nsub key-source {\n    gather loop {\n        sleep 1;\n        take (Hold.new(:key\u0026lt;a\u0026gt;), Press.new(:key\u0026lt;b\u0026gt;), Err.new(:msg\u0026lt;WELP!\u0026gt;), 'unsupported').pick;\n    }\n}\n\n.\u0026amp;key-matcher for key-source;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eæˆ‘ä»¬è¦å¸®åŠ© \u003ccode\u003e.assuming\u003c/code\u003e æœ‰ç‚¹ç†è§£ slurpiesï¼ŒæŠŠå‡½æ•°åˆ—è¡¨æ”¾åœ¨ä¸€ä¸ªæ˜¾å¼ Array ä¸­ã€‚\u003c/p\u003e\n\u003cp\u003eæ€»æœ‰ä¸€ç§å‡½æ•°å¼çš„æ–¹æ³•æ¥è§£å†³ä¸€ä¸ªé—®é¢˜ã€‚æœ‰æ—¶æˆ‘ä»¬ç”šè‡³å¯ä»¥ä»ä¸­å¾—åˆ°ä¸€ä¸ªæ•´é½çš„è¯­æ³•ã€‚\u003c/p\u003e\n\u003cp\u003eåŸæ–‡é“¾æ¥: \u003ca href=\"https://gfldex.wordpress.com/2021/02/24/pattern-dispatch/\"\u003ehttps://gfldex.wordpress.com/2021/02/24/pattern-dispatch/\u003c/a\u003e\u003c/p\u003e\n","text":"ä¸€ç›´ä»¥æ¥ä¹äºåŠ©äººçš„ raiph åœ¨å›ç­”ä¸€ä¸ªå…³äºæ¨¡å¼åŒ¹é…çš„é—®é¢˜æ—¶å¸Œæœ›å¾—åˆ° RakuASTï¼Œå°±åƒåœ¨ Haskell ä¸­ä¸€æ ·ã€‚æœ‰äººæå‡ºç”¨ MMD æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è¿™æ ·åšï¼Œå¾—åˆ°ä¸€ä¸ªè´¯ç©¿çš„é»˜è®¤è·¯å¾„æ˜¯æ— è§£çš„ã€‚ç”±äº dispatch ç®€å•æ¥è¯´å°±æ˜¯æ¨¡å¼åŒ¹é…ï¼Œæˆ‘ä»¬åªéœ€è¦åšä¸€äº›é¢å¤–çš„å·¥ä½œã€‚ç®€è€Œè¨€ä¹‹ï¼Œdispatcher å¾—åˆ°ä¸€ä¸ªå‡½æ•°åˆ—è¡¨å’Œä¸€ä¸ªå¸¦å‚æ•°çš„åˆ—è¡¨ã€‚ç¬¬ä¸€ä¸ªæ¥å—æ‰€æœ‰å‚æ•°çš„å‡½æ•°è·èƒœã€‚\nclass Hold { has $.key; } class Press { has $.key; } class Err { has $.msg; } sub else(\u0026amp;code) { \u0026amp;code } sub match($needle, *@tests) { for @tests.head(*-1) -\u0026gt; \u0026amp;f { if \u0026amp;f.cando(\\($needle)) { return f($needle); } } @tests.tail.(); } match Hold.new(:key\u0026lt;a\u0026gt;), -\u0026gt; Hold (:$key) { put â€holding $keyâ€œ; }, -\u0026gt; Press (:$key) { put â€pressing $keyâ€œ; }, -\u0026gt; Err (:$msg) { warn â€ERR: $msgâ€œ }, else { fail â€šunsopportedâ€˜ }; æ–¹æ³• .cando éœ€è¦ä¸€ä¸ª Capture æ¥å‘Šè¯‰æˆ‘ä»¬ä¸€ä¸ª Routine æ˜¯å¦å¯ä»¥ç”¨ä¸€ä¸ªç»™å®šçš„å‚æ•°åˆ—è¡¨æ¥è°ƒç”¨ã€‚ä¸ºäº†åˆ›å»ºè¿™æ ·ä¸€ä¸ªæ•è·ï¼Œæˆ‘ä»¬ä½¿ç”¨å­—é¢çš„ \\($arguments, $go, $here)ã€‚æˆ‘ä»¬ä¸åœ¨æœ€åæµ‹è¯•é»˜è®¤å€¼ã€‚ç›¸åï¼Œå½“æ²¡æœ‰å…¶ä»–å‡½æ•°åŒ¹é…æ—¶ï¼Œæˆ‘ä»¬ä¼šè°ƒç”¨è¯¥å‡½æ•°ã€‚å£°æ˜ sub else åªæ˜¯ä¸ºäº†ç¾åŒ–ã€‚\nç”±äºæˆ‘ä»¬æ˜¯åœ¨å‡½æ•°å¼çš„åœŸåœ°ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Raku æä¾›ç»™æˆ‘ä»¬çš„æ‰€æœ‰æ–¹ä¾¿çš„åŠŸèƒ½ã€‚\nmy \u0026amp;key-matcher = \u0026amp;match.assuming(*,[ -\u0026gt; Hold (:$key) { put â€holding $keyâ€œ; }, -\u0026gt; Press (:$key) { put â€pressing $keyâ€œ; }, -\u0026gt; Err (:$msg) { warn â€ERR: $msgâ€œ }, else { fail â€šunsopportedâ€˜ }; ]); sub key-source { gather loop { sleep 1; take (Hold.new(:key\u0026lt;a\u0026gt;), Press.new(:key\u0026lt;b\u0026gt;), Err.new(:msg\u0026lt;WELP!\u0026gt;), 'unsupported').pick; } } .\u0026amp;key-matcher for key-source; æˆ‘ä»¬è¦å¸®åŠ© .assuming æœ‰ç‚¹ç†è§£ slurpiesï¼ŒæŠŠå‡½æ•°åˆ—è¡¨æ”¾åœ¨ä¸€ä¸ªæ˜¾å¼ Array ä¸­ã€‚\næ€»æœ‰ä¸€ç§å‡½æ•°å¼çš„æ–¹æ³•æ¥è§£å†³ä¸€ä¸ªé—®é¢˜ã€‚æœ‰æ—¶æˆ‘ä»¬ç”šè‡³å¯ä»¥ä»ä¸­å¾—åˆ°ä¸€ä¸ªæ•´é½çš„è¯­æ³•ã€‚\nåŸæ–‡é“¾æ¥: https://gfldex.wordpress.com/2021/02/24/pattern-dispatch/\n"},"name":"æ¨¡å¼åˆ†æ´¾","published":"2021-02-28T00:00:00+08:00","summary":"Pattern Dispatch","type":"entry","url":"https://ohmyweekly.github.io/notes/2021-02-28-pattern-dispatch/"},{"content":{"html":"\u003cp\u003eæˆ‘ä¸å¤ªå–œæ¬¢ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ä½¿ç”¨åŒ¹é…çš„è¯­æ³•ã€‚å®ƒçš„å‚æ•°åˆ—è¡¨ä¸­çš„é€—å·çœ‹èµ·æ¥å¾ˆå¥‡æ€ªï¼Œä¸åˆé€‚ã€‚ä¹Ÿè®¸æ˜¯å› ä¸ºæˆ‘çš„çœ¼ç›ä¹ æƒ¯äº†ç»™å®šçš„å—ã€‚ç¡ä¸€è§‰å°±å¥½äº†ã€‚\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003esub accord(\u0026amp;c) { (c(CALLER::\u0026lt;$_\u0026gt;); succeed) if \u0026amp;c.cando(\\(CALLER::\u0026lt;$_\u0026gt;)) }\n\ngiven Err.new(:msg\u0026lt;a\u0026gt;) {\n    accord -\u0026gt; Hold (:$key) { put â€holding $keyâ€œ; }\n    accord -\u0026gt; Err (:$msg) { warn â€ERR: $msgâ€œ }\n    default { fail â€šunsupportedâ€˜ }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eè¿™æ˜¯å› ä¸º \u003ccode\u003eaccord\u003c/code\u003e æ¨¡ä»¿äº† \u003ccode\u003ewhen\u003c/code\u003e çš„å·¥ä½œã€‚å®ƒåšäº†ä¸€äº›åŒ¹é…ï¼Œå½“ True æ—¶è°ƒç”¨ä¸€ä¸ªå—ï¼Œå¹¶åœ¨æ¯ä¸ªå—çš„ç»“å°¾æ·»åŠ ä¸€ä¸ª successï¼ˆé€šè¿‡æŠ›å‡ºä¸€ä¸ªæ§åˆ¶å¼‚å¸¸ï¼‰ã€‚given æ‰€åšçš„åªæ˜¯è®¾ç½®ä¸»é¢˜ã€‚å®ƒè¿˜å……å½“äº† caller çš„è§’è‰²ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªä¼ªåŒ…æ¥è®¿é—®å®ƒçš„ \u003ccode\u003e$_\u003c/code\u003eã€‚åˆ©ç”¨ pointy çš„ç­¾åæ¥åš\u003ca href=\"https://docs.raku.org/type/Signature#Destructuring_arguments\"\u003eè§£æ„\u003c/a\u003eæ˜¯ç›¸å½“å¼ºå¤§çš„ã€‚æŠŠè¿™ä¸ªæ·»åŠ åˆ° CORE ä¸­å¯èƒ½æ˜¯ä¸ªå¥½ä¸»æ„ã€‚\u003c/p\u003e\n\u003cp\u003eæˆ‘ä»¬å¯èƒ½è¦æŠŠ Raku çš„å®šä¹‰æ”¹æˆ: \u0026ldquo;Raku æ˜¯ä¸€ç§é«˜åº¦å¯ç»„åˆçš„ç¼–ç¨‹è¯­è¨€\u0026rdquo;, åœ¨è¿™é‡Œï¼Œæ‰€æœ‰çš„ä¸œè¥¿éƒ½ä¼šè½åˆ°å®å¤„ã€‚\u0026quot;\u003c/p\u003e\n\u003cp\u003eæ›´æ–°ä¸€ä¸‹ã€‚\u003c/p\u003e\n\u003cp\u003eæœ‰äº›æƒ…å†µä¸‹ï¼Œ\u003ccode\u003e$_\u003c/code\u003e ä¸æ˜¯åŠ¨æ€çš„ã€‚å¦å¤–ï¼Œsuccess æ­£åœ¨æŠ›å‡ºä¸€ä¸ªæ§åˆ¶å¼‚å¸¸ï¼Œè€Œè¿™äº›çš„å¤„ç†ç¨‹åºæ˜¯ç”± when æˆ–é»˜è®¤æ·»åŠ çš„ã€‚è¿™ç§æƒ…å†µæ˜¯åœ¨ç¼–è¯‘æ—¶å‘ç”Ÿçš„ï¼Œç›®å‰ä¸èƒ½ç”¨å®æ¥è§£å†³ã€‚ç¬¬ä¸€ä¸ªé—®é¢˜å¯ä»¥ç”¨é»‘é­”æ³•è§£å†³ã€‚åä¸€ä¸ªé—®é¢˜éœ€è¦ç”¨é»˜è®¤å—ã€‚æˆ‘æ²¡æœ‰æ‰¾åˆ°ä¸€ç§æ–¹æ³•æ¥æä¾›ä¸€ä¸ªåˆç†çš„é”™è¯¯ä¿¡æ¯ï¼Œå¦‚æœç¼ºå°‘è¿™ä¸ªå—ã€‚\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003emulti sub accord(\u0026amp;c) {\n    use nqp;\n    $_ := nqp::getlexcaller('$_');\n    (c($_); succeed) if \u0026amp;c.cando(\\($_))\n}\n\nfor @possibilities.roll(1) -\u0026gt; $needle {\n    given $needle {\n        accord -\u0026gt; Hold (:$key) { put â€holding $keyâ€œ; }\n        accord -\u0026gt; Err (:$msg) { warn â€ERR: $msgâ€œ }\n        default { warn â€šunsopportedâ€˜ }\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eåŸæ–‡é“¾æ¥: \u003ca href=\"https://gfldex.wordpress.com/2021/02/25/custom-when/\"\u003ehttps://gfldex.wordpress.com/2021/02/25/custom-when/\u003c/a\u003e\u003c/p\u003e\n","text":"æˆ‘ä¸å¤ªå–œæ¬¢ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ä½¿ç”¨åŒ¹é…çš„è¯­æ³•ã€‚å®ƒçš„å‚æ•°åˆ—è¡¨ä¸­çš„é€—å·çœ‹èµ·æ¥å¾ˆå¥‡æ€ªï¼Œä¸åˆé€‚ã€‚ä¹Ÿè®¸æ˜¯å› ä¸ºæˆ‘çš„çœ¼ç›ä¹ æƒ¯äº†ç»™å®šçš„å—ã€‚ç¡ä¸€è§‰å°±å¥½äº†ã€‚\nsub accord(\u0026amp;c) { (c(CALLER::\u0026lt;$_\u0026gt;); succeed) if \u0026amp;c.cando(\\(CALLER::\u0026lt;$_\u0026gt;)) } given Err.new(:msg\u0026lt;a\u0026gt;) { accord -\u0026gt; Hold (:$key) { put â€holding $keyâ€œ; } accord -\u0026gt; Err (:$msg) { warn â€ERR: $msgâ€œ } default { fail â€šunsupportedâ€˜ } } è¿™æ˜¯å› ä¸º accord æ¨¡ä»¿äº† when çš„å·¥ä½œã€‚å®ƒåšäº†ä¸€äº›åŒ¹é…ï¼Œå½“ True æ—¶è°ƒç”¨ä¸€ä¸ªå—ï¼Œå¹¶åœ¨æ¯ä¸ªå—çš„ç»“å°¾æ·»åŠ ä¸€ä¸ª successï¼ˆé€šè¿‡æŠ›å‡ºä¸€ä¸ªæ§åˆ¶å¼‚å¸¸ï¼‰ã€‚given æ‰€åšçš„åªæ˜¯è®¾ç½®ä¸»é¢˜ã€‚å®ƒè¿˜å……å½“äº† caller çš„è§’è‰²ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªä¼ªåŒ…æ¥è®¿é—®å®ƒçš„ $_ã€‚åˆ©ç”¨ pointy çš„ç­¾åæ¥åšè§£æ„æ˜¯ç›¸å½“å¼ºå¤§çš„ã€‚æŠŠè¿™ä¸ªæ·»åŠ åˆ° CORE ä¸­å¯èƒ½æ˜¯ä¸ªå¥½ä¸»æ„ã€‚\næˆ‘ä»¬å¯èƒ½è¦æŠŠ Raku çš„å®šä¹‰æ”¹æˆ: \u0026ldquo;Raku æ˜¯ä¸€ç§é«˜åº¦å¯ç»„åˆçš„ç¼–ç¨‹è¯­è¨€\u0026rdquo;, åœ¨è¿™é‡Œï¼Œæ‰€æœ‰çš„ä¸œè¥¿éƒ½ä¼šè½åˆ°å®å¤„ã€‚\u0026quot;\næ›´æ–°ä¸€ä¸‹ã€‚\næœ‰äº›æƒ…å†µä¸‹ï¼Œ$_ ä¸æ˜¯åŠ¨æ€çš„ã€‚å¦å¤–ï¼Œsuccess æ­£åœ¨æŠ›å‡ºä¸€ä¸ªæ§åˆ¶å¼‚å¸¸ï¼Œè€Œè¿™äº›çš„å¤„ç†ç¨‹åºæ˜¯ç”± when æˆ–é»˜è®¤æ·»åŠ çš„ã€‚è¿™ç§æƒ…å†µæ˜¯åœ¨ç¼–è¯‘æ—¶å‘ç”Ÿçš„ï¼Œç›®å‰ä¸èƒ½ç”¨å®æ¥è§£å†³ã€‚ç¬¬ä¸€ä¸ªé—®é¢˜å¯ä»¥ç”¨é»‘é­”æ³•è§£å†³ã€‚åä¸€ä¸ªé—®é¢˜éœ€è¦ç”¨é»˜è®¤å—ã€‚æˆ‘æ²¡æœ‰æ‰¾åˆ°ä¸€ç§æ–¹æ³•æ¥æä¾›ä¸€ä¸ªåˆç†çš„é”™è¯¯ä¿¡æ¯ï¼Œå¦‚æœç¼ºå°‘è¿™ä¸ªå—ã€‚\nmulti sub accord(\u0026amp;c) { use nqp; $_ := nqp::getlexcaller('$_'); (c($_); succeed) if \u0026amp;c.cando(\\($_)) } for @possibilities.roll(1) -\u0026gt; $needle { given $needle { accord -\u0026gt; Hold (:$key) { put â€holding $keyâ€œ; } accord -\u0026gt; Err (:$msg) { warn â€ERR: $msgâ€œ } default { warn â€šunsopportedâ€˜ } } } åŸæ–‡é“¾æ¥: https://gfldex.wordpress.com/2021/02/25/custom-when/\n"},"name":"è‡ªå®šä¹‰ when","published":"2021-02-28T00:00:00+08:00","summary":"Custom When","type":"entry","url":"https://ohmyweekly.github.io/notes/2021-02-28-custom-when/"},{"content":{"html":"\u003cp\u003e[113] å‘è¡¨äº2021å¹´1æœˆ30æ—¥ã€‚\nè¿™æ˜¯æˆ‘å¯¹ \u003ca href=\"https://perlweeklychallenge.org/blog/perl-weekly-challenge-097/\"\u003ePerl æ¯å‘¨æŒ‘æˆ˜#097\u003c/a\u003e çš„å›åº”ã€‚\u003c/p\u003e\n\u003ch2 id=\"æŒ‘æˆ˜-0971-å‡¯æ’’å¯†ç \"\u003eæŒ‘æˆ˜ #097.1: å‡¯æ’’å¯†ç \u003c/h2\u003e\n\u003cp\u003eç»™ä½ ä¸€ä¸ªåªåŒ…å«å­—æ¯ \u003ccode\u003eA..Z\u003c/code\u003e çš„å­—ç¬¦ä¸² \u003ccode\u003e$S\u003c/code\u003e å’Œä¸€ä¸ªæ•°å­— \u003ccode\u003e$N\u003c/code\u003eã€‚\nå†™ä¸€ä¸ªè„šæœ¬ï¼Œç”¨\u003ca href=\"https://en.wikipedia.org/wiki/Caesar_cipher\"\u003eå‡¯æ’’å¯†ç \u003c/a\u003eå¯¹ç»™å®šçš„å­—ç¬¦ä¸² \u003ccode\u003e$S\u003c/code\u003e è¿›è¡ŒåŠ å¯†ï¼Œå·¦ç§»å¤§å°ä¸º \u003ccode\u003e$N\u003c/code\u003eã€‚\u003c/p\u003e\n\u003cp\u003eä¾‹å­:\nè¾“å…¥: $S = \u0026ldquo;THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG\u0026rdquo;, $N = 3\nè¾“å‡º: \u0026ldquo;QEB NRFZH YOLTK CLU GRJMP LSBO QEB IXWV ALD\u0026rdquo;\u003c/p\u003e\n\u003cp\u003ePlain:    ABCDEFGHIJKLMNOPQRSTUVWXYZ\nCipher:   XYZABCDEFGHIJKLMNOPQRSTUVW\u003c/p\u003e\n\u003cp\u003ePlaintext:  THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG\nCiphertext: QEB NRFZH YOLTK CLU GRJMP LSBO QEB IXWV ALD\u003c/p\u003e\n\u003cp\u003e\u0026ldquo;åªç”¨å­—æ¯ \u003ccode\u003eA...Z\u003c/code\u003e\u0026rdquo; çš„è¡¨è¿°æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºä¾‹å­ä¸­ä¹Ÿæœ‰å‡ ä¸ªç©ºæ ¼ã€‚å› æ­¤ï¼Œåº”è¯¥å…è®¸è¿™äº›ç©ºæ ¼ã€‚\u003c/p\u003e\n\u003cp\u003eæ–‡ä»¶: caesar-cipher\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003e#! /usr/bin/env raku\n\nsubset AZ-space of Str where /^ \u0026lt;[ A .. Z \\s ]\u0026gt;+ $/;   # [1]\nsubset PosInt of Int where -25 \u0026lt;= $_ \u0026lt;= 25;            # [2]\n\nunit sub MAIN (AZ-space $S = 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG',\n               PosInt $N = 3);                         # [3]\n\nsay $S.comb.map({ caesar($_, $N) }).join;              # [4]\n\nsub caesar ($char, $shift)\n{\n  return $char if $char eq \u0026quot; \u0026quot;;                        # [5]\n\n  my $code = $char.ord;                                # [6]\n\n  $code -= $shift;                                     # [7]\n\n  $code += 26 if $code \u0026lt; 65;  # 'A'                    # [8]\n  $code -= 26 if $code \u0026gt; 90;  # 'Z'                    # [8a]\n\n  return $code.chr;                                    # [9]\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e[1] æ‰€å…è®¸çš„å­—ç¬¦ (æˆ– Â«ç‰¹å®šé¢†åŸŸå­—æ¯Â»).\u003c/p\u003e\n\u003cp\u003e[2] æŒ‘æˆ˜è¯´å·¦ç§»å€¼æ˜¯ä¸€ä¸ªæ•°å­—ã€‚å…è®¸é™¤æ•´æ•°ä»¥å¤–çš„ä»»ä½•ä¸œè¥¿æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œæ‰€ä»¥æˆ‘æŠŠå€¼é™åˆ¶åœ¨è¿™ä¸ªç±»å‹ã€‚è´Ÿå€¼åº”è¯¥æ˜¯å¯ä»¥çš„ï¼Œå®ƒä»¬æ„å‘³ç€å³ç§»å€¼ï¼ˆè€Œä¸æ˜¯å·¦ç§»ï¼‰ã€‚\u003c/p\u003e\n\u003cp\u003e[3] å‚æ•°ï¼Œé»˜è®¤å€¼ä¸ºæŒ‘æˆ˜ä¸­ç»™å‡ºçš„å€¼ã€‚\u003c/p\u003e\n\u003cp\u003e[4] å°†å­—ç¬¦ä¸²åˆ†å‰²æˆå•ä¸ªå­—ç¬¦ï¼ˆç”¨æ¢³å­(comb)ï¼Œåœ¨æ¯ä¸ªå­—ç¬¦ä¸Šåº”ç”¨ \u0026ldquo;caesar\u0026rdquo; å‡½æ•°ï¼ˆç”¨mapï¼‰ï¼Œå†æ¬¡å°†å­—ç¬¦è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆç”¨joinï¼‰ï¼Œç„¶åæ‰“å°å‡ºæ¥ã€‚\u003c/p\u003e\n\u003cp\u003e[5] ä¸ç§»åŠ¨ç©ºæ ¼ã€‚\u003c/p\u003e\n\u003cp\u003e[6] è·å–å­—ç¬¦çš„ä»£ç ç‚¹ã€‚\u003c/p\u003e\n\u003cp\u003e[7] å‡å»ç§»ä½å€¼ï¼ˆå½“æˆ‘ä»¬å‘å·¦ç§»ä½æ—¶ï¼Œæˆ–åœ¨å­—æ¯è¡¨ä¸­é™ä½ç§»ä½å€¼ï¼‰ã€‚\u003c/p\u003e\n\u003cp\u003e[8] ç»•å›, å¦‚æœæˆ‘ä»¬ç§»å‡ºA-ZèŒƒå›´ï¼Œè¿™é‡Œä¸ºæ›´ä½ - æˆ–æ›´é«˜çš„ [8b]ã€‚\u003c/p\u003e\n\u003cp\u003e[9] è·å–æŒ‡å®šä»£ç ç‚¹çš„å­—ç¬¦ã€‚\u003c/p\u003e\n\u003cp\u003eæŸ¥çœ‹ docs.raku.org/routine/ord è·å–æ›´å¤šå…³äº ord çš„ä¿¡æ¯ã€‚\u003c/p\u003e\n\u003cp\u003eæŸ¥çœ‹ docs.raku.org/routine/chr è·å–æ›´å¤šå…³äº chr çš„ä¿¡æ¯ã€‚\u003c/p\u003e\n\u003cp\u003eè¿è¡Œå®ƒ:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ ./caesar-cipher 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' 3\nQEB NRFZH YOLTK CLU GRJMP LSBO QEB IXWV ALD\n\n$ ./caesar-cipher 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' -3\nWKH TXLFN EURZQ IRA MXPSV RYHU WKH ODCB GRJ\n\n$ ./caesar-cipher 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' 13\nGUR DHVPX OEBJA SBK WHZCF BIRE GUR YNML QBT\n\n$ ./caesar-cipher 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' -13\nGUR DHVPX OEBJA SBK WHZCF BIRE GUR YNML QBT\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eRaku æœ‰ä¸€ä¸ª ords å˜ä½“ï¼Œå®ƒæ¥æ”¶ä¸€æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä½œä¸º ordã€‚è¿˜æœ‰ chrsï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªä»£ç ç‚¹æ•°ç»„ï¼Œå¹¶å°†å®ƒä»¬å˜æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯åƒ chr é‚£æ ·æ¥æ”¶ä¸€ä¸ªå­—ç¬¦çš„ä»£ç ç‚¹ã€‚è®©æˆ‘ä»¬ç”¨å®ƒä»¬æ¥å†™ä¸€ä¸ªæ›´çŸ­çš„ç¨‹åºã€‚\u003c/p\u003e\n\u003cp\u003eæ–‡ä»¶: caesar-cipher-map\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003e#! /usr/bin/env raku\n\nsubset AZ-space of Str where /^ \u0026lt;[ A .. Z \\s ]\u0026gt;+ $/;\nsubset PosInt of Int where -25 \u0026lt;= $_ \u0026lt;= 25;\n\nunit sub MAIN (AZ-space $S = 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG',\n               PosInt $N = 3);\n\nsay caesar($S, $N);\n\nsub caesar ($string, $shift)\n{\n  return $string.ords.map({$_ == 32 ?? 32 !! (($_ - $shift - 65) % 26 ) + 65}).chrs;\n    # #################### # 1a ############# ############ # 1b  # 1c ## 1d\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e[1] æˆ‘ä»¬ä½¿ç”¨mapæ¥æ”¹å˜å„ä¸ªä»£ç ç‚¹ã€‚æˆ‘ä»¬è®©ä»£ç ç‚¹ä¸º32çš„ç©ºé—´å•ç‹¬å­˜åœ¨[1a]ã€‚æ¯ä¸€ä¸ªå…¶ä»–çš„å€¼æˆ‘ä»¬éƒ½è¿˜åŸæˆ0åˆ°25ä¹‹é—´çš„æ•°å­—ï¼ˆé€šè¿‡å‡å»ç¬¬ä¸€ä¸ªå­—æ¯çš„ä»£ç ç‚¹ï¼ˆAï¼š65ï¼‰å’Œç§»ä½å€¼[1b]ï¼‰ã€‚æ¨¡æ•°è¿ç®—ç¬¦ (%) ä¸ºæˆ‘ä»¬å¤„ç†è´Ÿå€¼ï¼Œåšæ­£ç¡®çš„äº‹æƒ…ã€‚ä¾‹å¦‚ï¼š-2 % 26 -\u0026gt; 24 [1c]ã€‚ç„¶åæˆ‘ä»¬æ·»åŠ è°ƒæ•´å€¼åˆ°å®ƒä»¬åº”è¯¥åœ¨çš„ä½ç½®(ä»Aåˆ°Z)[1d]ï¼Œç„¶åæˆ‘ä»¬å°†æ•´ä¸ªæ•°ç»„çš„ä»£ç ç‚¹å˜æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚\u003c/p\u003e\n\u003cp\u003eæŸ¥çœ‹ docs.raku.org/routine/ords è·å–æ›´å¤šå…³äº ords çš„ä¿¡æ¯ã€‚\u003c/p\u003e\n\u003cp\u003eæŸ¥çœ‹ docs.raku.org/routine/chrs è·å–æ›´å¤šå…³äº chrs çš„ä¿¡æ¯ã€‚\u003c/p\u003e\n\u003cp\u003eè¿è¡Œå®ƒçš„ç»“æœå’Œä¹‹å‰ä¸€æ ·ã€‚\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ ./caesar-cipher-map 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' 3\nQEB NRFZH YOLTK CLU GRJMP LSBO QEB IXWV ALD\n\n$ ./caesar-cipher-map 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' -3\nWKH TXLFN EURZQ IRA MXPSV RYHU WKH ODCB GRJ\n\n$ ./caesar-cipher-map 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' 13\nGUR DHVPX OEBJA SBK WHZCF BIRE GUR YNML QBT\n\n$ ./caesar-cipher-map 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' -13\nGUR DHVPX OEBJA SBK WHZCF BIRE GUR YNML QBT\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"perl-ç‰ˆæœ¬\"\u003ePerl ç‰ˆæœ¬\u003c/h2\u003e\n\u003cp\u003eè¿™æ˜¯å¯¹ç¬¬ä¸€ä¸ª Raku ç‰ˆçš„ç›´æ¥ç¿»è¯‘ã€‚\u003c/p\u003e\n\u003cp\u003eFile: caesar-cipher-perl\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-perl\" data-lang=\"perl\"\u003e\u003cspan class=\"ch\"\u003e#! /usr/bin/env perl\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003euse\u003c/span\u003e \u003cspan class=\"nn\"\u003estrict\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003euse\u003c/span\u003e \u003cspan class=\"nn\"\u003ewarnings\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003euse\u003c/span\u003e \u003cspan class=\"nn\"\u003efeature\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#39;say\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003euse\u003c/span\u003e \u003cspan class=\"nn\"\u003efeature\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#39;signatures\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eno\u003c/span\u003e \u003cspan class=\"nn\"\u003ewarnings\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;experimental::signatures\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003emy\u003c/span\u003e \u003cspan class=\"nv\"\u003e$S\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003eshift\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nv\"\u003e@ARGV\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"sr\"\u003e//\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#39;THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"nb\"\u003edie\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;Illegal characters\u0026#34;\u003c/span\u003e \u003cspan class=\"k\"\u003eunless\u003c/span\u003e \u003cspan class=\"nv\"\u003e$S\u003c/span\u003e \u003cspan class=\"o\"\u003e=~\u003c/span\u003e\u003cspan class=\"sr\"\u003e /^[A-Z\\s]+$/\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003emy\u003c/span\u003e \u003cspan class=\"nv\"\u003e$N\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003eshift\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nv\"\u003e@ARGV\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"sr\"\u003e//\u003c/span\u003e \u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"nb\"\u003edie\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;Illegal shift $N\u0026#34;\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nv\"\u003e$N\u003c/span\u003e \u003cspan class=\"o\"\u003e!~\u003c/span\u003e \u003cspan class=\"sr\"\u003e/^\\-?\\d+$/\u003c/span\u003e \u003cspan class=\"o\"\u003e||\u003c/span\u003e \u003cspan class=\"nv\"\u003e$N\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e25\u003c/span\u003e \u003cspan class=\"o\"\u003e||\u003c/span\u003e \u003cspan class=\"nv\"\u003e$N\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e25\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003esay\u003c/span\u003e \u003cspan class=\"nb\"\u003ejoin\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nb\"\u003emap\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003ecaesar\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nv\"\u003e$_\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nv\"\u003e$N\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"nb\"\u003esplit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sr\"\u003e//\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nv\"\u003e$S\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003esub\u003c/span\u003e \u003cspan class=\"nf\"\u003ecaesar\u003c/span\u003e \u003cspan class=\"p\"\u003e($char, $shift)\n\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nv\"\u003e$char\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nv\"\u003e$char\u003c/span\u003e \u003cspan class=\"ow\"\u003eeq\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34; \u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003emy\u003c/span\u003e \u003cspan class=\"nv\"\u003e$code\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003eord\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nv\"\u003e$char\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n  \u003cspan class=\"nv\"\u003e$code\u003c/span\u003e \u003cspan class=\"o\"\u003e-=\u003c/span\u003e \u003cspan class=\"nv\"\u003e$shift\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n  \u003cspan class=\"nv\"\u003e$code\u003c/span\u003e \u003cspan class=\"o\"\u003e+=\u003c/span\u003e \u003cspan class=\"mi\"\u003e26\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nv\"\u003e$code\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e65\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e  \u003cspan class=\"c1\"\u003e# \u0026#39;A\u0026#39;\u003c/span\u003e\n  \u003cspan class=\"nv\"\u003e$code\u003c/span\u003e \u003cspan class=\"o\"\u003e-=\u003c/span\u003e \u003cspan class=\"mi\"\u003e26\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nv\"\u003e$code\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e90\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e  \u003cspan class=\"c1\"\u003e# \u0026#39;Z\u0026#39;\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nb\"\u003echr\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nv\"\u003e$code\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eè¿è¡Œå®ƒçš„ç»“æœå’Œ Raku ç‰ˆä¸€æ ·ã€‚\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ ./caesar-cipher-perl 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' 3\nQEB NRFZH YOLTK CLU GRJMP LSBO QEB IXWV ALD\n\n$ ./caesar-cipher-perl 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' -3\nWKH TXLFN EURZQ IRA MXPSV RYHU WKH ODCB GRJ\n\n$ ./caesar-cipher-perl 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' 13\nGUR DHVPX OEBJA SBK WHZCF BIRE GUR YNML QBT\n\n$ ./caesar-cipher-perl 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' -13\nGUR DHVPX OEBJA SBK WHZCF BIRE GUR YNML QBT\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"æŒ‘æˆ˜-0972äºŒè¿›åˆ¶å­å­—ç¬¦ä¸²binary-substrings\"\u003eæŒ‘æˆ˜ #097.2ï¼šäºŒè¿›åˆ¶å­å­—ç¬¦ä¸²(Binary Substrings)\u003c/h2\u003e\n\u003cp\u003eç»™ä½ ä¸€ä¸ªäºŒè¿›åˆ¶å­—ç¬¦ä¸² \u003ccode\u003e$B\u003c/code\u003e å’Œä¸€ä¸ªæ•´æ•° \u003ccode\u003e$S\u003c/code\u003eã€‚\u003c/p\u003e\n\u003cp\u003eå†™ä¸€ä¸ªè„šæœ¬æ¥æ‹†åˆ†å¤§å°ä¸º \u003ccode\u003e$S\u003c/code\u003e çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸² \u003ccode\u003e$B\u003c/code\u003eï¼Œç„¶åæ‰¾å‡ºä½¿å…¶ç›¸åŒçš„æœ€å°ç¿»è½¬æ¬¡æ•°ã€‚\u003c/p\u003e\n\u003cp\u003eä¾‹ 1:\nè¾“å…¥: $B = â€œ101100101â€, $S = 3\nè¾“å‡º: 1\u003c/p\u003e\n\u003cp\u003eäºŒè¿›åˆ¶å­å­—ç¬¦ä¸²:\n\u0026ldquo;101\u0026rdquo;: 0 flip\n\u0026ldquo;100\u0026rdquo;: 1 flip to make it \u0026ldquo;101\u0026rdquo;\n\u0026ldquo;101\u0026rdquo;: 0 flip\u003c/p\u003e\n\u003cp\u003eä¾‹ 2:\nè¾“å…¥ $B = â€œ10110111â€, $S = 4\nè¾“å‡º: 2\u003c/p\u003e\n\u003cp\u003eäºŒè¿›åˆ¶å­å­—ç¬¦ä¸²:\n\u0026ldquo;1011\u0026rdquo;: 0 flip\n\u0026ldquo;0111\u0026rdquo;: 2 flips to make it \u0026ldquo;1011\u0026rdquo;\u003c/p\u003e\n\u003cp\u003eæˆ‘ä»¬å…ˆä»ç¬¬ä¸€ä¸ªä¾‹å­ä¸­çš„äºŒè¿›åˆ¶å­å­—ç¬¦ä¸²ä¸­ç æ‰3ä¸ªå­—ç¬¦å—ã€‚\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\u0026gt; say \u0026quot;101100101\u0026quot;.comb(3);   # -\u0026gt; (101 100 101)\n\u0026gt; say \u0026quot;1011001010\u0026quot;.comb(3);  # -\u0026gt; (101 100 101 0)\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eç¬¬äºŒè¡Œæ˜¾ç¤ºäº†å¦‚æœé•¿åº¦ä¸åŒ¹é…ä¼šå‘ç”Ÿä»€ä¹ˆã€‚è¿™å°±ç»™äº†æˆ‘ä»¬ä¸€ä¸ªéæ³•çš„å€¼ï¼Œå› ä¸ºæˆ‘ä»¬ä¸èƒ½å°†ä¸€ä½æ•°ç¿»è½¬ä¸ºä¸‰ä½æ•°çš„å€¼ã€‚æ‰€ä»¥æˆ‘ä»¬å¿…é¡»æ·»åŠ ä¸€ä¸ªæ£€æŸ¥ã€‚\u003c/p\u003e\n\u003cp\u003eç„¶åæˆ‘ä»¬å°†ç¬¬ä¸€ä¸ªå­ä¸²ä¸å…¶ä½™çš„å­ä¸²è¿›è¡Œæ¯”è¾ƒï¼Œä¸€æ¬¡ä¸€ä¸ªã€‚åœ¨è¿™é‡Œä½¿ç”¨bitwise XORï¼ˆExclusive ORï¼‰è¿ç®—ç¬¦æ˜¯ä¸€ä¸ªåˆç†çš„é€‰æ‹©ã€‚è¿™ç»™äº†æˆ‘ä»¬ä¸€ä¸ªäºŒè¿›åˆ¶å€¼ï¼Œå…¶ä¸­1çš„æ•°é‡å°±æ˜¯è¯¥å­ä¸²çš„ç¿»è½¬æ¬¡æ•°ã€‚Rakuç¡®å®æœ‰ä¸€ä¸ªXORè¿ç®—ç¬¦ã€‚+^. ä½†æ˜¯å®ƒ \u0026ldquo;å°†ä¸¤ä¸ªå‚æ•°éƒ½å¼ºåˆ¶ä¸ºIntï¼Œå¹¶è¿›è¡Œä½æ™ºXORæ“ä½œ\u0026rdquo;(æ ¹æ®æ–‡æ¡£\u0026quot;ï¼›å‚è§docs.raku.org/language/operators#infix_+^)ã€‚\u003c/p\u003e\n\u003cp\u003eæˆ‘ä»¬å¯ä»¥åœ¨è¿›è¡ŒXORæ“ä½œä¹‹å‰ï¼Œå°†äºŒè¿›åˆ¶å€¼è½¬æ¢ä¸ºåè¿›åˆ¶å€¼ã€‚è®©æˆ‘ä»¬è¯•è¯•ã€‚\u003c/p\u003e\n\u003cp\u003eè·å–ç¿»è½¬çš„æ¬¡æ•°ã€‚\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\u0026gt; say (\u0026quot;10101\u0026quot;.parse-base(2) +^ \u0026quot;10111\u0026quot;.parse-base(2)).base(2).comb.sum;  # -\u0026gt; 1\n\u0026gt; say (\u0026quot;11101\u0026quot;.parse-base(2) +^ \u0026quot;10111\u0026quot;.parse-base(2)).base(2).comb.sum;  # -\u0026gt; 2\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eè¿™å½“ç„¶å¯è¡Œï¼Œä½†éœ€è¦å¤§é‡çš„ä»£ç ã€‚æ‰€ä»¥æˆ‘å°†ä½¿ç”¨ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³• - é€ä¸ªæ¯”è¾ƒæ¯ä¸ªæ•°å­—ã€‚\u003c/p\u003e\n\u003cp\u003eFile: binary-substring\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003e#! /usr/bin/env raku\n\nsubset BinaryString where /^ \u0026lt;[01]\u0026gt;+ $/;                    # [1]\nsubset PosInt of Int where * \u0026gt; 0;                           # [2]\n\nunit sub MAIN (BinaryString $B = '101100101',               # [1]\n               PosInt $S where $B.chars %% $S = 3,          # [2]\n\t       :v(:$verbose));\n\nmy @B     = $B.comb($S.Int);                                # [3]\nmy $first = @B.shift;                                       # [4]\nmy $total = 0;                                              # [5]\n\nfor @B -\u0026gt; $current                                          # [6]\n{\n  my $flip = bit-diff($first, $current);                    # [7]\n  $total += $flip;                                          # [8]\n  say \u0026quot;: $first -\u0026gt; $current -\u0026gt; Flip: $flip\u0026quot; if $verbose;\n}\n\nsay $total;                                                 # [9]\n\nsub bit-diff ($a, $b)                                       # [7]\n{\n  my $flip = 0;                                             # [10]\n\n  for ^$a.chars -\u0026gt; $index                                   # [11]\n  {\n    $flip++ if $a.substr($index,1) ne $b.substr($index,1);  # [12]\n  }\n\n  return $flip;\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e[1] ç¡®ä¿äºŒè¿›åˆ¶å­—ç¬¦ä¸²æ˜¯åˆæ³•çš„ï¼ˆåªåŒ…å« \u0026ldquo;0 \u0026ldquo;å’Œ \u0026ldquo;1\u0026rdquo;ï¼‰ã€‚\u003c/p\u003e\n\u003cp\u003e[2] ç¡®ä¿æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼ŒåŒæ—¶ç¡®ä¿å­—ç¬¦ä¸²æ˜¯è¢«å®ƒå¶æ•°åˆ†å‰²çš„ã€‚(ä¾‹å¦‚ï¼Œ\u0026ldquo;4 \u0026ldquo;ç»™æˆ‘ä»¬æä¾›äº†é•¿åº¦ä¸º4çš„å­ä¸²ï¼Œå¦‚æœæœ€åä¸€ä¸ªè¾ƒçŸ­ï¼Œç¨‹åºå°†ä¸­æ­¢ã€‚)\u003c/p\u003e\n\u003cp\u003e[3] æ¢³å­é€šå¸¸ç”¨äºå°†ä¸€ä¸ªå­—ç¬¦ä¸²åˆ†å‰²æˆå•ä¸ªå­—ç¬¦ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡æŒ‡å®šé•¿åº¦æ¥è·å¾—æ¯ä¸ªå­å­—ç¬¦ä¸²ä¸­çš„å¤šä¸ªå­—ç¬¦ï¼Œæ¯”å¦‚è¿™æ ·ã€‚\u003c/p\u003e\n\u003cp\u003e[4] ä¾‹å­é¦–å…ˆå°†ç¬¬ä¸€ä¸ªå­ä¸²ä¸è‡ªå·±è¿›è¡Œæ¯”è¾ƒï¼Œç»™å‡ºé›¶ç¿»è½¬ã€‚è¿™æ˜¯æ„šè ¢çš„(ish)ï¼Œæ‰€ä»¥æˆ‘è·³è¿‡è¿™ä¸€ç‚¹ï¼ŒæŠŠç¬¬ä¸€ä¸ªå­ä¸²ç§»å‡ºã€‚\u003c/p\u003e\n\u003cp\u003e[5] ç»“æœä¼šåˆ°è¿™é‡Œã€‚\u003c/p\u003e\n\u003cp\u003e[6] å¯¹äºæ¯ä¸€ä¸ªå­ä¸²ï¼ˆé™¤äº†ç¬¬ä¸€ä¸ªï¼Œè§[4]ï¼‰ã€‚\u003c/p\u003e\n\u003cp\u003e[7] è·å–æ¯ä¸ªå­ä¸²çš„ç¿»è½¬æ¬¡æ•°ã€‚\u003c/p\u003e\n\u003cp\u003e[8] å¹¶å°†å…¶æ·»åŠ åˆ°æ€»æ•°ä¸­ã€‚\u003c/p\u003e\n\u003cp\u003e[9] æ‰“å°å®ƒã€‚\u003c/p\u003e\n\u003cp\u003e[10] ç¿»è½¬çš„æ•°é‡ä¼šåœ¨è¿™é‡Œã€‚\u003c/p\u003e\n\u003cp\u003e[11] å¯¹äºä¸¤ä¸ªå­ä¸²ä¸­çš„æ¯ä¸ªç´¢å¼•ï¼ˆå…·æœ‰ç›¸åŒçš„é•¿åº¦ï¼‰ã€‚\u003c/p\u003e\n\u003cp\u003e[12] - å¦‚æœç»™å®šä½ç½®ä¸Šçš„å­—ç¬¦ä¸åŒï¼Œåˆ™åœ¨æ€»æ•°çš„åŸºç¡€ä¸ŠåŠ 1ï¼Œæ„å‘³ç€ç§»åŠ¨ã€‚\u003c/p\u003e\n\u003cp\u003eSee docs.raku.org/routine/comb for more information about comb.\u003c/p\u003e\n\u003cp\u003eè¿è¡Œå®ƒã€‚\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ ./binary-substring \u0026quot;101100101\u0026quot; 3\n 1\n\n$ ./binary-substring -v \u0026quot;101100101\u0026quot; 3\n: 101 -\u0026gt; 100 -\u0026gt; Flip: 1\n: 101 -\u0026gt; 101 -\u0026gt; Flip: 0\n1\n\n$ ./binary-substring \u0026quot;10110111\u0026quot; 4\n2\n\n$ ./binary-substring -v \u0026quot;10110111\u0026quot; 4\n: 1011 -\u0026gt; 0111 -\u0026gt; Flip: 2\n2\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eçœ‹èµ·æ¥ä¸é”™ã€‚\u003c/p\u003e\n\u003ch2 id=\"perl\"\u003ePerl\u003c/h2\u003e\n\u003cp\u003eè¿™æ˜¯å¯¹ Raku ç‰ˆæœ¬çš„ç›´æ¥ç¿»è¯‘ï¼Œåªæ˜¯æˆ‘å¿…é¡»å®ç° \u0026ldquo;comb\u0026rdquo;ã€‚\u003c/p\u003e\n\u003cp\u003eæ–‡ä»¶ï¼š binary-substring-perl\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003e#! /usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\nuse feature 'signatures';\nuse Getopt::Long;\n\nno warnings \u0026quot;experimental::signatures\u0026quot;;\n\nmy $verbose = 0;\n\nGetOptions(\u0026quot;verbose\u0026quot;  =\u0026gt; \\$verbose);\n\nmy $B = shift(@ARGV) // '101100101';\n\ndie \u0026quot;Not a binary number\u0026quot; unless $B =~ /^[01]+$/;\n\nmy $S = shift(@ARGV) // 3;\n\ndie \u0026quot;Not an integer\u0026quot; unless $S =~ /^[1-9][0-9]*$/;\ndie \u0026quot;Not a legal length\u0026quot; if length($B) % $S;\n\nmy @B     =  comb($B, $S);\nmy $first = shift(@B);\nmy $total = 0;\n\nfor my $current (@B)\n{\n  my $flip = bit_diff($first, $current);\n  $total += $flip;\n  say \u0026quot;: $first -\u0026gt; $current -\u0026gt; Flip: $flip\u0026quot; if $verbose;\n}\n\nsay $total;\n\nsub bit_diff ($a, $b)\n{\n  my $flip = 0;\n\n  for my $index (0 .. length($a))\n  {\n    $flip++ if substr($a, $index,1) ne substr($b, $index,1);\n  }\n\n  return $flip;\n}\n\nsub comb ($string, $length = 1)  # [1]\n{\n  my @result;\n\n  while ($string)\n  {\n    push(@result, substr($string, 0, $length));\n    $string = substr($string, $length);\n  }\n  return @result;\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e[1] ç¼ºå¤±çš„ Raku ä¾‹ç¨‹ \u0026ldquo;comb\u0026rdquo;ã€‚å¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šäº†å®ƒæ‰€è¿”å›çš„æ¯ä¸ªå­ä¸²ä¸­æ‰€åŒ…å«çš„ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°çš„ï¼‰å­ä¸²é•¿åº¦ã€‚\u003c/p\u003e\n\u003cp\u003eè¿è¡Œå®ƒçš„ç»“æœä¸ Raku ç‰ˆæœ¬ç›¸åŒã€‚\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ ./binary-substring-perl \u0026quot;101100101\u0026quot; 3\n1\n\n$ ./binary-substring-perl -v \u0026quot;101100101\u0026quot; 3\n: 101 -\u0026gt; 100 -\u0026gt; Flip: 1\n: 101 -\u0026gt; 101 -\u0026gt; Flip: 0\n1\n\n$ ./binary-substring-perl \u0026quot;101100111\u0026quot; 3\n2\n\n$ ./binary-substring-perl -v \u0026quot;101100111\u0026quot; 3\n: 101 -\u0026gt; 100 -\u0026gt; Flip: 1\n: 101 -\u0026gt; 111 -\u0026gt; Flip: 1\n2\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eå°±æ˜¯è¿™æ ·ã€‚\u003c/p\u003e\n","text":"[113] å‘è¡¨äº2021å¹´1æœˆ30æ—¥ã€‚ è¿™æ˜¯æˆ‘å¯¹ Perl æ¯å‘¨æŒ‘æˆ˜#097 çš„å›åº”ã€‚\næŒ‘æˆ˜ #097.1: å‡¯æ’’å¯†ç  ç»™ä½ ä¸€ä¸ªåªåŒ…å«å­—æ¯ A..Z çš„å­—ç¬¦ä¸² $S å’Œä¸€ä¸ªæ•°å­— $Nã€‚ å†™ä¸€ä¸ªè„šæœ¬ï¼Œç”¨å‡¯æ’’å¯†ç å¯¹ç»™å®šçš„å­—ç¬¦ä¸² $S è¿›è¡ŒåŠ å¯†ï¼Œå·¦ç§»å¤§å°ä¸º $Nã€‚\nä¾‹å­: è¾“å…¥: $S = \u0026ldquo;THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG\u0026rdquo;, $N = 3 è¾“å‡º: \u0026ldquo;QEB NRFZH YOLTK CLU GRJMP LSBO QEB IXWV ALD\u0026rdquo;\nPlain: ABCDEFGHIJKLMNOPQRSTUVWXYZ Cipher: XYZABCDEFGHIJKLMNOPQRSTUVW\nPlaintext: THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG Ciphertext: QEB NRFZH YOLTK CLU GRJMP LSBO QEB IXWV ALD\n\u0026ldquo;åªç”¨å­—æ¯ A...Z\u0026rdquo; çš„è¡¨è¿°æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºä¾‹å­ä¸­ä¹Ÿæœ‰å‡ ä¸ªç©ºæ ¼ã€‚å› æ­¤ï¼Œåº”è¯¥å…è®¸è¿™äº›ç©ºæ ¼ã€‚\næ–‡ä»¶: caesar-cipher\n#! /usr/bin/env raku subset AZ-space of Str where /^ \u0026lt;[ A .. Z \\s ]\u0026gt;+ $/; # [1] subset PosInt of Int where -25 \u0026lt;= $_ \u0026lt;= 25; # [2] unit sub MAIN (AZ-space $S = 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG', PosInt $N = 3); # [3] say $S.comb.map({ caesar($_, $N) }).join; # [4] sub caesar ($char, $shift) { return $char if $char eq \u0026quot; \u0026quot;; # [5] my $code = $char.ord; # [6] $code -= $shift; # [7] $code += 26 if $code \u0026lt; 65; # 'A' # [8] $code -= 26 if $code \u0026gt; 90; # 'Z' # [8a] return $code.chr; # [9] } [1] æ‰€å…è®¸çš„å­—ç¬¦ (æˆ– Â«ç‰¹å®šé¢†åŸŸå­—æ¯Â»).\n[2] æŒ‘æˆ˜è¯´å·¦ç§»å€¼æ˜¯ä¸€ä¸ªæ•°å­—ã€‚å…è®¸é™¤æ•´æ•°ä»¥å¤–çš„ä»»ä½•ä¸œè¥¿æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œæ‰€ä»¥æˆ‘æŠŠå€¼é™åˆ¶åœ¨è¿™ä¸ªç±»å‹ã€‚è´Ÿå€¼åº”è¯¥æ˜¯å¯ä»¥çš„ï¼Œå®ƒä»¬æ„å‘³ç€å³ç§»å€¼ï¼ˆè€Œä¸æ˜¯å·¦ç§»ï¼‰ã€‚\n[3] å‚æ•°ï¼Œé»˜è®¤å€¼ä¸ºæŒ‘æˆ˜ä¸­ç»™å‡ºçš„å€¼ã€‚\n[4] å°†å­—ç¬¦ä¸²åˆ†å‰²æˆå•ä¸ªå­—ç¬¦ï¼ˆç”¨æ¢³å­(comb)ï¼Œåœ¨æ¯ä¸ªå­—ç¬¦ä¸Šåº”ç”¨ \u0026ldquo;caesar\u0026rdquo; å‡½æ•°ï¼ˆç”¨mapï¼‰ï¼Œå†æ¬¡å°†å­—ç¬¦è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆç”¨joinï¼‰ï¼Œç„¶åæ‰“å°å‡ºæ¥ã€‚\n[5] ä¸ç§»åŠ¨ç©ºæ ¼ã€‚\n[6] è·å–å­—ç¬¦çš„ä»£ç ç‚¹ã€‚\n[7] å‡å»ç§»ä½å€¼ï¼ˆå½“æˆ‘ä»¬å‘å·¦ç§»ä½æ—¶ï¼Œæˆ–åœ¨å­—æ¯è¡¨ä¸­é™ä½ç§»ä½å€¼ï¼‰ã€‚\n[8] ç»•å›, å¦‚æœæˆ‘ä»¬ç§»å‡ºA-ZèŒƒå›´ï¼Œè¿™é‡Œä¸ºæ›´ä½ - æˆ–æ›´é«˜çš„ [8b]ã€‚\n[9] è·å–æŒ‡å®šä»£ç ç‚¹çš„å­—ç¬¦ã€‚\næŸ¥çœ‹ docs.raku.org/routine/ord è·å–æ›´å¤šå…³äº ord çš„ä¿¡æ¯ã€‚\næŸ¥çœ‹ docs.raku.org/routine/chr è·å–æ›´å¤šå…³äº chr çš„ä¿¡æ¯ã€‚\nè¿è¡Œå®ƒ:\n$ ./caesar-cipher 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' 3 QEB NRFZH YOLTK CLU GRJMP LSBO QEB IXWV ALD $ ./caesar-cipher 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' -3 WKH TXLFN EURZQ IRA MXPSV RYHU WKH ODCB GRJ $ ./caesar-cipher 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' 13 GUR DHVPX OEBJA SBK WHZCF BIRE GUR YNML QBT $ ./caesar-cipher 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' -13 GUR DHVPX OEBJA SBK WHZCF BIRE GUR YNML QBT Raku æœ‰ä¸€ä¸ª ords å˜ä½“ï¼Œå®ƒæ¥æ”¶ä¸€æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä½œä¸º ordã€‚è¿˜æœ‰ chrsï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªä»£ç ç‚¹æ•°ç»„ï¼Œå¹¶å°†å®ƒä»¬å˜æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯åƒ chr é‚£æ ·æ¥æ”¶ä¸€ä¸ªå­—ç¬¦çš„ä»£ç ç‚¹ã€‚è®©æˆ‘ä»¬ç”¨å®ƒä»¬æ¥å†™ä¸€ä¸ªæ›´çŸ­çš„ç¨‹åºã€‚\næ–‡ä»¶: caesar-cipher-map\n#! /usr/bin/env raku subset AZ-space of Str where /^ \u0026lt;[ A .. Z \\s ]\u0026gt;+ $/; subset PosInt of Int where -25 \u0026lt;= $_ \u0026lt;= 25; unit sub MAIN (AZ-space $S = 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG', PosInt $N = 3); say caesar($S, $N); sub caesar ($string, $shift) { return $string.ords.map({$_ == 32 ?? 32 !! (($_ - $shift - 65) % 26 ) + 65}).chrs; # #################### # 1a ############# ############ # 1b # 1c ## 1d } [1] æˆ‘ä»¬ä½¿ç”¨mapæ¥æ”¹å˜å„ä¸ªä»£ç ç‚¹ã€‚æˆ‘ä»¬è®©ä»£ç ç‚¹ä¸º32çš„ç©ºé—´å•ç‹¬å­˜åœ¨[1a]ã€‚æ¯ä¸€ä¸ªå…¶ä»–çš„å€¼æˆ‘ä»¬éƒ½è¿˜åŸæˆ0åˆ°25ä¹‹é—´çš„æ•°å­—ï¼ˆé€šè¿‡å‡å»ç¬¬ä¸€ä¸ªå­—æ¯çš„ä»£ç ç‚¹ï¼ˆAï¼š65ï¼‰å’Œç§»ä½å€¼[1b]ï¼‰ã€‚æ¨¡æ•°è¿ç®—ç¬¦ (%) ä¸ºæˆ‘ä»¬å¤„ç†è´Ÿå€¼ï¼Œåšæ­£ç¡®çš„äº‹æƒ…ã€‚ä¾‹å¦‚ï¼š-2 % 26 -\u0026gt; 24 [1c]ã€‚ç„¶åæˆ‘ä»¬æ·»åŠ è°ƒæ•´å€¼åˆ°å®ƒä»¬åº”è¯¥åœ¨çš„ä½ç½®(ä»Aåˆ°Z)[1d]ï¼Œç„¶åæˆ‘ä»¬å°†æ•´ä¸ªæ•°ç»„çš„ä»£ç ç‚¹å˜æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚\næŸ¥çœ‹ docs.raku.org/routine/ords è·å–æ›´å¤šå…³äº ords çš„ä¿¡æ¯ã€‚\næŸ¥çœ‹ docs.raku.org/routine/chrs è·å–æ›´å¤šå…³äº chrs çš„ä¿¡æ¯ã€‚\nè¿è¡Œå®ƒçš„ç»“æœå’Œä¹‹å‰ä¸€æ ·ã€‚\n$ ./caesar-cipher-map 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' 3 QEB NRFZH YOLTK CLU GRJMP LSBO QEB IXWV ALD $ ./caesar-cipher-map 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' -3 WKH TXLFN EURZQ IRA MXPSV RYHU WKH ODCB GRJ $ ./caesar-cipher-map 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' 13 GUR DHVPX OEBJA SBK WHZCF BIRE GUR YNML QBT $ ./caesar-cipher-map 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' -13 GUR DHVPX OEBJA SBK WHZCF BIRE GUR YNML QBT Perl ç‰ˆæœ¬ è¿™æ˜¯å¯¹ç¬¬ä¸€ä¸ª Raku ç‰ˆçš„ç›´æ¥ç¿»è¯‘ã€‚\nFile: caesar-cipher-perl\n#! /usr/bin/env perl use strict; use warnings; use feature \u0026#39;say\u0026#39;; use feature \u0026#39;signatures\u0026#39;; no warnings \u0026#34;experimental::signatures\u0026#34;; my $S = shift(@ARGV) // \u0026#39;THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG\u0026#39;; die \u0026#34;Illegal characters\u0026#34; unless $S =~/^[A-Z\\s]+$/; my $N = shift(@ARGV) // 3; die \u0026#34;Illegal shift $N\u0026#34; if $N !~ /^\\-?\\d+$/ || $N \u0026lt; -25 || $N \u0026gt; 25; say join(\u0026#34;\u0026#34;, map { caesar($_, $N) } split(//, $S)); sub caesar ($char, $shift) { return $char if $char eq \u0026#34; \u0026#34;; my $code = ord($char); $code -= $shift; $code += 26 if $code \u0026lt; 65; # \u0026#39;A\u0026#39; $code -= 26 if $code \u0026gt; 90; # \u0026#39;Z\u0026#39; return chr($code); } è¿è¡Œå®ƒçš„ç»“æœå’Œ Raku ç‰ˆä¸€æ ·ã€‚\n$ ./caesar-cipher-perl 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' 3 QEB NRFZH YOLTK CLU GRJMP LSBO QEB IXWV ALD $ ./caesar-cipher-perl 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' -3 WKH TXLFN EURZQ IRA MXPSV RYHU WKH ODCB GRJ $ ./caesar-cipher-perl 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' 13 GUR DHVPX OEBJA SBK WHZCF BIRE GUR YNML QBT $ ./caesar-cipher-perl 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' -13 GUR DHVPX OEBJA SBK WHZCF BIRE GUR YNML QBT æŒ‘æˆ˜ #097.2ï¼šäºŒè¿›åˆ¶å­å­—ç¬¦ä¸²(Binary Substrings) ç»™ä½ ä¸€ä¸ªäºŒè¿›åˆ¶å­—ç¬¦ä¸² $B å’Œä¸€ä¸ªæ•´æ•° $Sã€‚\nå†™ä¸€ä¸ªè„šæœ¬æ¥æ‹†åˆ†å¤§å°ä¸º $S çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸² $Bï¼Œç„¶åæ‰¾å‡ºä½¿å…¶ç›¸åŒçš„æœ€å°ç¿»è½¬æ¬¡æ•°ã€‚\nä¾‹ 1: è¾“å…¥: $B = â€œ101100101â€, $S = 3 è¾“å‡º: 1\näºŒè¿›åˆ¶å­å­—ç¬¦ä¸²: \u0026ldquo;101\u0026rdquo;: 0 flip \u0026ldquo;100\u0026rdquo;: 1 flip to make it \u0026ldquo;101\u0026rdquo; \u0026ldquo;101\u0026rdquo;: 0 flip\nä¾‹ 2: è¾“å…¥ $B = â€œ10110111â€, $S = 4 è¾“å‡º: 2\näºŒè¿›åˆ¶å­å­—ç¬¦ä¸²: \u0026ldquo;1011\u0026rdquo;: 0 flip \u0026ldquo;0111\u0026rdquo;: 2 flips to make it \u0026ldquo;1011\u0026rdquo;\næˆ‘ä»¬å…ˆä»ç¬¬ä¸€ä¸ªä¾‹å­ä¸­çš„äºŒè¿›åˆ¶å­å­—ç¬¦ä¸²ä¸­ç æ‰3ä¸ªå­—ç¬¦å—ã€‚\n\u0026gt; say \u0026quot;101100101\u0026quot;.comb(3); # -\u0026gt; (101 100 101) \u0026gt; say \u0026quot;1011001010\u0026quot;.comb(3); # -\u0026gt; (101 100 101 0) ç¬¬äºŒè¡Œæ˜¾ç¤ºäº†å¦‚æœé•¿åº¦ä¸åŒ¹é…ä¼šå‘ç”Ÿä»€ä¹ˆã€‚è¿™å°±ç»™äº†æˆ‘ä»¬ä¸€ä¸ªéæ³•çš„å€¼ï¼Œå› ä¸ºæˆ‘ä»¬ä¸èƒ½å°†ä¸€ä½æ•°ç¿»è½¬ä¸ºä¸‰ä½æ•°çš„å€¼ã€‚æ‰€ä»¥æˆ‘ä»¬å¿…é¡»æ·»åŠ ä¸€ä¸ªæ£€æŸ¥ã€‚\nç„¶åæˆ‘ä»¬å°†ç¬¬ä¸€ä¸ªå­ä¸²ä¸å…¶ä½™çš„å­ä¸²è¿›è¡Œæ¯”è¾ƒï¼Œä¸€æ¬¡ä¸€ä¸ªã€‚åœ¨è¿™é‡Œä½¿ç”¨bitwise XORï¼ˆExclusive ORï¼‰è¿ç®—ç¬¦æ˜¯ä¸€ä¸ªåˆç†çš„é€‰æ‹©ã€‚è¿™ç»™äº†æˆ‘ä»¬ä¸€ä¸ªäºŒè¿›åˆ¶å€¼ï¼Œå…¶ä¸­1çš„æ•°é‡å°±æ˜¯è¯¥å­ä¸²çš„ç¿»è½¬æ¬¡æ•°ã€‚Rakuç¡®å®æœ‰ä¸€ä¸ªXORè¿ç®—ç¬¦ã€‚+^. ä½†æ˜¯å®ƒ \u0026ldquo;å°†ä¸¤ä¸ªå‚æ•°éƒ½å¼ºåˆ¶ä¸ºIntï¼Œå¹¶è¿›è¡Œä½æ™ºXORæ“ä½œ\u0026rdquo;(æ ¹æ®æ–‡æ¡£\u0026quot;ï¼›å‚è§docs.raku.org/language/operators#infix_+^)ã€‚\næˆ‘ä»¬å¯ä»¥åœ¨è¿›è¡ŒXORæ“ä½œä¹‹å‰ï¼Œå°†äºŒè¿›åˆ¶å€¼è½¬æ¢ä¸ºåè¿›åˆ¶å€¼ã€‚è®©æˆ‘ä»¬è¯•è¯•ã€‚\nè·å–ç¿»è½¬çš„æ¬¡æ•°ã€‚\n\u0026gt; say (\u0026quot;10101\u0026quot;.parse-base(2) +^ \u0026quot;10111\u0026quot;.parse-base(2)).base(2).comb.sum; # -\u0026gt; 1 \u0026gt; say (\u0026quot;11101\u0026quot;.parse-base(2) +^ \u0026quot;10111\u0026quot;.parse-base(2)).base(2).comb.sum; # -\u0026gt; 2 è¿™å½“ç„¶å¯è¡Œï¼Œä½†éœ€è¦å¤§é‡çš„ä»£ç ã€‚æ‰€ä»¥æˆ‘å°†ä½¿ç”¨ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³• - é€ä¸ªæ¯”è¾ƒæ¯ä¸ªæ•°å­—ã€‚\nFile: binary-substring\n#! /usr/bin/env raku subset BinaryString where /^ \u0026lt;[01]\u0026gt;+ $/; # [1] subset PosInt of Int where * \u0026gt; 0; # [2] unit sub MAIN (BinaryString $B = '101100101', # [1] PosInt $S where $B.chars %% $S = 3, # [2] :v(:$verbose)); my @B = $B.comb($S.Int); # [3] my $first = @B.shift; # [4] my $total = 0; # [5] for @B -\u0026gt; $current # [6] { my $flip = bit-diff($first, $current); # [7] $total += $flip; # [8] say \u0026quot;: $first -\u0026gt; $current -\u0026gt; Flip: $flip\u0026quot; if $verbose; } say $total; # [9] sub bit-diff ($a, $b) # [7] { my $flip = 0; # [10] for ^$a.chars -\u0026gt; $index # [11] { $flip++ if $a.substr($index,1) ne $b.substr($index,1); # [12] } return $flip; } [1] ç¡®ä¿äºŒè¿›åˆ¶å­—ç¬¦ä¸²æ˜¯åˆæ³•çš„ï¼ˆåªåŒ…å« \u0026ldquo;0 \u0026ldquo;å’Œ \u0026ldquo;1\u0026rdquo;ï¼‰ã€‚\n[2] ç¡®ä¿æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼ŒåŒæ—¶ç¡®ä¿å­—ç¬¦ä¸²æ˜¯è¢«å®ƒå¶æ•°åˆ†å‰²çš„ã€‚(ä¾‹å¦‚ï¼Œ\u0026ldquo;4 \u0026ldquo;ç»™æˆ‘ä»¬æä¾›äº†é•¿åº¦ä¸º4çš„å­ä¸²ï¼Œå¦‚æœæœ€åä¸€ä¸ªè¾ƒçŸ­ï¼Œç¨‹åºå°†ä¸­æ­¢ã€‚)\n[3] æ¢³å­é€šå¸¸ç”¨äºå°†ä¸€ä¸ªå­—ç¬¦ä¸²åˆ†å‰²æˆå•ä¸ªå­—ç¬¦ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡æŒ‡å®šé•¿åº¦æ¥è·å¾—æ¯ä¸ªå­å­—ç¬¦ä¸²ä¸­çš„å¤šä¸ªå­—ç¬¦ï¼Œæ¯”å¦‚è¿™æ ·ã€‚\n[4] ä¾‹å­é¦–å…ˆå°†ç¬¬ä¸€ä¸ªå­ä¸²ä¸è‡ªå·±è¿›è¡Œæ¯”è¾ƒï¼Œç»™å‡ºé›¶ç¿»è½¬ã€‚è¿™æ˜¯æ„šè ¢çš„(ish)ï¼Œæ‰€ä»¥æˆ‘è·³è¿‡è¿™ä¸€ç‚¹ï¼ŒæŠŠç¬¬ä¸€ä¸ªå­ä¸²ç§»å‡ºã€‚\n[5] ç»“æœä¼šåˆ°è¿™é‡Œã€‚\n[6] å¯¹äºæ¯ä¸€ä¸ªå­ä¸²ï¼ˆé™¤äº†ç¬¬ä¸€ä¸ªï¼Œè§[4]ï¼‰ã€‚\n[7] è·å–æ¯ä¸ªå­ä¸²çš„ç¿»è½¬æ¬¡æ•°ã€‚\n[8] å¹¶å°†å…¶æ·»åŠ åˆ°æ€»æ•°ä¸­ã€‚\n[9] æ‰“å°å®ƒã€‚\n[10] ç¿»è½¬çš„æ•°é‡ä¼šåœ¨è¿™é‡Œã€‚\n[11] å¯¹äºä¸¤ä¸ªå­ä¸²ä¸­çš„æ¯ä¸ªç´¢å¼•ï¼ˆå…·æœ‰ç›¸åŒçš„é•¿åº¦ï¼‰ã€‚\n[12] - å¦‚æœç»™å®šä½ç½®ä¸Šçš„å­—ç¬¦ä¸åŒï¼Œåˆ™åœ¨æ€»æ•°çš„åŸºç¡€ä¸ŠåŠ 1ï¼Œæ„å‘³ç€ç§»åŠ¨ã€‚\nSee docs.raku.org/routine/comb for more information about comb.\nè¿è¡Œå®ƒã€‚\n$ ./binary-substring \u0026quot;101100101\u0026quot; 3 1 $ ./binary-substring -v \u0026quot;101100101\u0026quot; 3 : 101 -\u0026gt; 100 -\u0026gt; Flip: 1 : 101 -\u0026gt; 101 -\u0026gt; Flip: 0 1 $ ./binary-substring \u0026quot;10110111\u0026quot; 4 2 $ ./binary-substring -v \u0026quot;10110111\u0026quot; 4 : 1011 -\u0026gt; 0111 -\u0026gt; Flip: 2 2 çœ‹èµ·æ¥ä¸é”™ã€‚\nPerl è¿™æ˜¯å¯¹ Raku ç‰ˆæœ¬çš„ç›´æ¥ç¿»è¯‘ï¼Œåªæ˜¯æˆ‘å¿…é¡»å®ç° \u0026ldquo;comb\u0026rdquo;ã€‚\næ–‡ä»¶ï¼š binary-substring-perl\n#! /usr/bin/env perl use strict; use warnings; use feature 'say'; use feature 'signatures'; use Getopt::Long; no warnings \u0026quot;experimental::signatures\u0026quot;; my $verbose = 0; GetOptions(\u0026quot;verbose\u0026quot; =\u0026gt; \\$verbose); my $B = shift(@ARGV) // '101100101'; die \u0026quot;Not a binary number\u0026quot; unless $B =~ /^[01]+$/; my $S = shift(@ARGV) // 3; die \u0026quot;Not an integer\u0026quot; unless $S =~ /^[1-9][0-9]*$/; die \u0026quot;Not a legal length\u0026quot; if length($B) % $S; my @B = comb($B, $S); my $first = shift(@B); my $total = 0; for my $current (@B) { my $flip = bit_diff($first, $current); $total += $flip; say \u0026quot;: $first -\u0026gt; $current -\u0026gt; Flip: $flip\u0026quot; if $verbose; } say $total; sub bit_diff ($a, $b) { my $flip = 0; for my $index (0 .. length($a)) { $flip++ if substr($a, $index,1) ne substr($b, $index,1); } return $flip; } sub comb ($string, $length = 1) # [1] { my @result; while ($string) { push(@result, substr($string, 0, $length)); $string = substr($string, $length); } return @result; } [1] ç¼ºå¤±çš„ Raku ä¾‹ç¨‹ \u0026ldquo;comb\u0026rdquo;ã€‚å¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šäº†å®ƒæ‰€è¿”å›çš„æ¯ä¸ªå­ä¸²ä¸­æ‰€åŒ…å«çš„ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°çš„ï¼‰å­ä¸²é•¿åº¦ã€‚\nè¿è¡Œå®ƒçš„ç»“æœä¸ Raku ç‰ˆæœ¬ç›¸åŒã€‚\n$ ./binary-substring-perl \u0026quot;101100101\u0026quot; 3 1 $ ./binary-substring-perl -v \u0026quot;101100101\u0026quot; 3 : 101 -\u0026gt; 100 -\u0026gt; Flip: 1 : 101 -\u0026gt; 101 -\u0026gt; Flip: 0 1 $ ./binary-substring-perl \u0026quot;101100111\u0026quot; 3 2 $ ./binary-substring-perl -v \u0026quot;101100111\u0026quot; 3 : 101 -\u0026gt; 100 -\u0026gt; Flip: 1 : 101 -\u0026gt; 111 -\u0026gt; Flip: 1 2 å°±æ˜¯è¿™æ ·ã€‚\n"},"name":"Caesarean Substrings With Raku and Perl","published":"2021-02-07T00:00:00+08:00","summary":"Caesarean Substrings With Raku and Perl","type":"entry","url":"https://ohmyweekly.github.io/notes/2021-01-30-caesarean-substrings-with-raku-and-perl/"}],"name":"Raku","type":"feed","url":"https://ohmyweekly.github.io/categories/raku/"}