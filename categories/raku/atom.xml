<?xml version="1.0" encoding="utf-8"?> 
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-us">
    <generator uri="https://gohugo.io/" version="0.79.0">Hugo</generator><title type="html"><![CDATA[Raku on ç„‰çŸ¥éé±¼]]></title>
    
        <subtitle type="html"><![CDATA[rakulang, dartlang, nimlang, golang, rustlang, lang lang no see]]></subtitle>
    
    
    
            <link href="https://ohmyweekly.github.io/categories/raku/" rel="alternate" type="text/html" title="HTML" />
            <link href="https://ohmyweekly.github.io/categories/raku/index.xml" rel="alternate" type="application/rss+xml" title="RSS" />
            <link href="https://ohmyweekly.github.io/categories/raku/atom.xml" rel="self" type="application/atom+xml" title="Atom" />
            <link href="https://ohmyweekly.github.io/categories/raku/jf2feed.json" rel="alternate" type="application/jf2feed+json" title="jf2feed" />
    <updated>2021-04-13T22:37:30+08:00</updated>
    
    
    
    
        <id>https://ohmyweekly.github.io/categories/raku/</id>
    
        
        <entry>
            <title type="html"><![CDATA[BUILD å’Œ TWEAK çš„åŒºåˆ«]]></title>
            <link href="https://ohmyweekly.github.io/notes/2021-03-07-difference-between-build-and-tweak-in-raku/?utm_source=atom_feed" rel="alternate" type="text/html" />
            
                <link href="https://ohmyweekly.github.io/notes/2021-03-01-how-to-type-unicode-in-raku/?utm_source=atom_feed" rel="related" type="text/html" title="å¦‚ä½•åœ¨ Raku ä¸­è¾“å…¥ Unicode" />
                <link href="https://ohmyweekly.github.io/notes/2021-02-17-method-isd/?utm_source=atom_feed" rel="related" type="text/html" title="Method-ish" />
                <link href="https://ohmyweekly.github.io/notes/2021-02-28-pattern-dispatch/?utm_source=atom_feed" rel="related" type="text/html" title="æ¨¡å¼åˆ†æ´¾" />
                <link href="https://ohmyweekly.github.io/notes/2021-02-28-custom-when/?utm_source=atom_feed" rel="related" type="text/html" title="è‡ªå®šä¹‰ when" />
                <link href="https://ohmyweekly.github.io/notes/2021-02-16-contributing-to-raku/?utm_source=atom_feed" rel="related" type="text/html" title="ä¸ºæœ€å¹´è½»çš„ Raku è´¡çŒ®åŠ›é‡" />
            
                <id>https://ohmyweekly.github.io/notes/2021-03-07-difference-between-build-and-tweak-in-raku/</id>
            
            
                    <author>
                        <name>ç„‰çŸ¥éé±¼</name>
                    </author>
            <published>2021-03-07T00:00:00+08:00</published>
            <updated>2021-03-07T00:00:00+08:00</updated>
            
            
            <content type="html"><![CDATA[<blockquote>Difference Between Build and Tweak in Raku</blockquote><pre><code class="language-raku" data-lang="raku">class Student {
    has $.name;
    has $.sex;
    has $!age;

    method BUILD(:$!name) {

    }
}

my $stu = Student.new(:name('èµµä»Šéº¦'), :sex('å¥³'));
dd $stu;
# Student $stu = Student.new(name =&gt; &quot;èµµä»Šéº¦&quot;, sex =&gt; Any)
</code></pre><p>å¦‚æœä½ åŠ ä¸Š <code>BUILD</code> æ–¹æ³•, ä½ å¿…é¡»è‡ªå·±å…¨æƒè´Ÿè´£è®¾ç½®æ‰€æœ‰çš„ä¸œè¥¿ã€‚ä¹Ÿå°±æ˜¯æ—¢åŒ…æ‹¬å…¬å…±å±æ€§, ä¹ŸåŒ…æ‹¬ç§æœ‰å±æ€§ã€‚</p>
<p>ä½†ä½ å¯ä»¥é€šè¿‡å·§å¦™åœ°å‘½åå‚æ•°æ¥è®©ä½ çš„ç”Ÿæ´»æ›´è½»æ¾ã€‚</p>
<pre><code class="language-raku" data-lang="raku">method BUILD (:$!name, :$!sex, :$!age) { }
</code></pre><p><code>BUILD</code> æ–¹æ³•å¯ä»¥åˆå§‹åŒ–ç§æœ‰å±æ€§:</p>
<pre><code class="language-raku" data-lang="raku">class Student {
    has $.name;
    has $.sex;
    has $!age;

    method BUILD(:$name, :$sex, :$age) {
        $!name = $name;
        $!sex = $sex;
        $!age = $age;
    }

    method heart() { return 'â™¥ ' ~ $!age }
}

my $stu = Student.new(:name('èµµä»Šéº¦'), :sex('å¥³'), :age(18));
dd $stu;
say $stu;
say $stu.heart(); 
</code></pre><p>ä¹Ÿå¯ä»¥åœ¨ TWEAK æ–¹æ³•ä¸­åˆå§‹åŒ–ç§æœ‰å±æ€§:</p>
<pre><code class="language-raku" data-lang="raku">class Student {
    has $.name;
    has $.sex;
    has $!age;

    method TWEAK(:$name, :$sex, :$age) {
        $!age = $age + 1;
    }

    method heart() { return 'â™¥' ~ $!age }
}

my $stu = Student.new(:name('èµµä»Šéº¦'), :sex('å¥³'), :age(18));
dd $stu;
say $stu;
say $stu.heart(); 
</code></pre><p>ä½¿ç”¨ <code>TWEAK</code>ï¼Œä½ ä¼šå¾—åˆ°ä¸ <code>BUILD</code> ç›¸åŒçš„å‚æ•°ï¼Œä½†æ‰€æœ‰çš„åˆå§‹è®¾ç½®éƒ½å·²ç»å®Œæˆäº†ï¼ˆ<code>BUILD</code> æˆ–å…¬å…±å±æ€§çš„è‡ªåŠ¨ç»‘å®šï¼Œä»¥åŠæ‰€æœ‰çš„é»˜è®¤å€¼ï¼Œå†åŠ ä¸Šä¿è¯æ‰€éœ€å€¼çš„å­˜åœ¨ï¼‰ã€‚ä½ åªæ˜¯æœ‰æœºä¼šåšä¸€äº›æœ€åçš„è°ƒæ•´ã€‚</p>
]]></content>
            
                 
                    
                         
                        
                            
                             
                                <category scheme="https://ohmyweekly.github.io/categories/raku" term="raku" label="Raku" />
                            
                        
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://ohmyweekly.github.io/tags/raku" term="raku" label="Raku" />
                             
                                <category scheme="https://ohmyweekly.github.io/tags/build" term="build" label="BUILD" />
                             
                                <category scheme="https://ohmyweekly.github.io/tags/tweak" term="tweak" label="TWEAK" />
                             
                                <category scheme="https://ohmyweekly.github.io/tags/object" term="object" label="Object" />
                            
                        
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[å¦‚ä½•åœ¨ Raku ä¸­è¾“å…¥ Unicode]]></title>
            <link href="https://ohmyweekly.github.io/notes/2021-03-01-how-to-type-unicode-in-raku/?utm_source=atom_feed" rel="alternate" type="text/html" />
            
                <link href="https://ohmyweekly.github.io/notes/2021-02-17-method-isd/?utm_source=atom_feed" rel="related" type="text/html" title="Method-ish" />
                <link href="https://ohmyweekly.github.io/notes/2021-02-28-pattern-dispatch/?utm_source=atom_feed" rel="related" type="text/html" title="æ¨¡å¼åˆ†æ´¾" />
                <link href="https://ohmyweekly.github.io/notes/2021-02-28-custom-when/?utm_source=atom_feed" rel="related" type="text/html" title="è‡ªå®šä¹‰ when" />
                <link href="https://ohmyweekly.github.io/notes/2021-02-16-contributing-to-raku/?utm_source=atom_feed" rel="related" type="text/html" title="ä¸ºæœ€å¹´è½»çš„ Raku è´¡çŒ®åŠ›é‡" />
                <link href="https://ohmyweekly.github.io/notes/2021-01-30-caesarean-substrings-with-raku-and-perl/?utm_source=atom_feed" rel="related" type="text/html" title="Caesarean Substrings With Raku and Perl" />
            
                <id>https://ohmyweekly.github.io/notes/2021-03-01-how-to-type-unicode-in-raku/</id>
            
            
                    <author>
                        <name>ç„‰çŸ¥éé±¼</name>
                    </author>
            <published>2021-03-01T00:00:00+08:00</published>
            <updated>2021-03-01T00:00:00+08:00</updated>
            
            
            <content type="html"><![CDATA[<blockquote>How to Type Unicode in Raku</blockquote><p>Raku æœ‰éå¸¸å¥½çš„ Unicode æ”¯æŒ, ä½†æ˜¯è¾“å…¥ Unicode ä¸€ç›´æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ã€‚åœ¨ REPL ä¸­, è¾“å…¥ Unicode éƒ½ä¸å¤ªæ–¹ä¾¿ã€‚ä¸‹é¢ä»‹ç»å‡ ç§æ–¹æ³•æ¥æ–¹ä¾¿åœ°è¾“å…¥ Unicodeã€‚</p>
<h1 id="comma">Comma</h1>
<p>æœ€æ–¹ä¾¿çš„æ˜¯ä½¿ç”¨ Raku è‡ªå·±çš„ IDE, <a href="http://commaide.com">Comma</a>ã€‚ä½†æ˜¯éœ€è¦åšä¸¤ä¸ªè®¾ç½®:</p>
<p>é¦–å…ˆ, åˆ‡æ¢åˆ° Comma IDE, ç‚¹å‡»å·¦ä¸Šè§’èœå•æ çš„ <strong>Comma</strong> é€‰é¡¹, åœ¨å¼¹å‡ºçš„ <strong>Preference</strong> çª—å£ä¸­, æ‰¾åˆ°å·¦ä¾§èœå•æ ä¸­çš„ <strong>Editor</strong> é€‰é¡¹, ç‚¹å‡» <strong>Code Style</strong> ä¸­çš„ <strong>Raku</strong>, åœ¨å³ä¾§çš„çª—å£çš„æœ€ä¸Šé¢, æ‰¾åˆ° <strong>Schema</strong> ä¸€è¡Œ, ç‚¹å‡»å€’ä¸‰è§’å›¾æ ‡, åœ¨ä¸‹æ‹‰èœå•ä¸­é€‰æ‹© <strong>Project</strong>ã€‚ç„¶ååœ¨ç¬¬äºŒè¡Œæ–‡å­—ä¸­æ‰¾åˆ° <strong>Editor Behavior</strong>, å‹¾é€‰ <strong>Convert operators to Unicode</strong>ã€‚å®Œæˆåç‚¹å‡»å³ä¸‹è§’çš„ <strong>Apply</strong>, ç„¶åç‚¹å‡» <strong>OK</strong>ã€‚</p>
<p>è¿™æ ·å½“ä½ åœ¨ Comma ä¸­é”®å…¥ <code>&gt;&gt;</code> è¿™æ ·çš„è¿ç®—ç¬¦å, Comma ä¼šè‡ªåŠ¨æŠŠå®ƒè½¬ä¸º Unicode å½¢å¼çš„ <code>Â»</code>ã€‚ç›®å‰å·²æ”¯æŒå¤§éƒ¨åˆ† Unicode è¿ç®—ç¬¦äº†ã€‚Comma æ˜¯è·¨å¹³å°çš„ Raku ç¼–è¾‘å™¨, æ”¯æŒ Windowsã€Linux å’Œ MacOS, æ‰€ä»¥ä½ æƒ³è·¨å¹³å°å¼€å‘çš„è¯, Comma å€¼å¾—ä¸€è¯•ã€‚</p>
<h1 id="kitty">Kitty</h1>
<p>å¦‚æœä½ æƒ³åœ¨ Vim ä¸­å¼€å‘ Raku, åˆä¸æƒ³å¤±å»è¾“å…¥ Unicode çš„ä¹è¶£, è¯·ä½¿ç”¨ <a href="https://github.com/kovidgoyal/kitty">Kitty</a> ç»ˆç«¯ã€‚ç‚¹å¼€ Kitty ç»ˆç«¯, ä½¿ç”¨å¿«æ·é”® Ctrl + Shift + U å³å¯è§¦å‘è¾“å…¥ Unnicode çš„ç•Œé¢(ä¹Ÿå¯ä»¥é”®å…¥å‘½ä»¤ kitty +kitten unicode_input æ¥è§¦å‘)ã€‚å†é€šè¿‡å¿«æ·é”®  F1ã€F2ã€F3 å’Œ F4 (æˆ–é€šè¿‡ Ctrl+[ å’Œ Ctrl+] åˆ‡æ¢æ ‡ç­¾)å¯ä»¥åˆ†åˆ«æŒ‰ä»£ç æœç´¢ Unicodeã€æŒ‰åå­—æœç´¢ Unicodeã€æŒ‰è¡¨æƒ…æœç´¢å’Œæ”¶è—ã€‚</p>
<p>ä¾‹å¦‚åœ¨ REPL ä¸­é”®å…¥ Unicode å­—ç¬¦:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ raku
Welcome to ğ‘ğšğ¤ğ®ğğ¨â„¢ v2021.02.
Implementing the ğ‘ğšğ¤ğ®â„¢ programming language v6.d.
Built on MoarVM version 2021.02.

To <span class="nb">exit</span> <span class="nb">type</span> <span class="s1">&#39;exit&#39;</span> or <span class="s1">&#39;^D&#39;</span>
&gt; my @a <span class="o">=</span> 1..5<span class="p">;</span>
&gt; @aÂ».sin
</code></pre></div><p>å€ŸåŠ© Kitty, æ•°ç»„ <code>@a</code> åé¢çš„ <code>Â»</code> å¯ä»¥è¿™æ ·è¾“å…¥, å…ˆè¾“å…¥ <code>@a</code>, ç„¶åä½¿ç”¨å¿«æ·é”® Shift + Ctrl + U è°ƒå‡º Kitty çš„ <strong>Unicode input</strong> ç•Œé¢, ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹æ³•, ç¬¬ä¸€ç§æ˜¯é€šè¿‡å¿«æ·é”® F1, ç„¶åè¾“å…¥å¯¹åº”çš„ Unicode ç¼–ç , å†å›è½¦ã€‚ç¬¬äºŒç§æ˜¯é€šè¿‡å¿«æ·é”® F2, é€šè¿‡åå­—æœç´¢, ä¾‹å¦‚è¾“å…¥å•è¯ quota, ä¼šå‡ºç°ä¸€å †å¼•å·ç¬¦å·ä¾›ä½ é€‰æ‹©, æŒ‰ä¸Šä¸‹æ–¹å‘é”®é€‰ä¸­ <code>Â»</code>, å†å›è½¦å³å¯ã€‚Vim ä¸­åŒç†ã€‚</p>
<h1 id="julia-repl">Julia REPL</h1>
<p>åœ¨ REPL ä¸­è¾“å…¥ <code>\â€² + å•è¯ + Tab, ä¾‹å¦‚è¾“å…¥ </code>\heartsuit` å†æŒ‰ Tab, å°±ä¼šè‡ªåŠ¨å˜æˆ â™¡</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">julia&gt; <span class="se">\h</span>eartsuit
</code></pre></div><h1 id="ipython">IPython</h1>
<p><code>\^</code> è¾“å…¥ä¸Šæ ‡, <code>\_p</code> è¾“å…¥ä¸‹æ ‡ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ipython
<span class="se">\^</span>a
<span class="se">\_</span>p
</code></pre></div><h1 id="vscode">VScode</h1>
<p><code>\\â€² + å®Œæ•´çš„å•è¯ + Tab, VsCode ä¼šè‡ªåŠ¨è½¬æ¢ä¸º Unicodeã€‚ ä¾‹å¦‚ </code>^a<code>å’Œ</code>_p`</p>
<h1 id="dmenu">dmenu</h1>
<div class="highlight"><pre class="chroma"><code class="language-perl" data-lang="perl"><span class="ch">#!/usr/bin/perl</span>

<span class="c1">#use strict;</span>
<span class="c1">#use warnings;</span>
<span class="c1">#use autodie;</span>
<span class="c1">#use utf8;</span>


<span class="nb">open</span> <span class="nv">$FH</span><span class="p">,</span> <span class="s">&#34; | dmenu -i -l 30 -fn &#39;-xos4-terminus-medium-r-*-*-10-*&#39; | sed &#39;s/^\\(.\\).*/\\1/&#39; | tr -d &#39;\n&#39; | { pbcopy; pbpaste; } &#34;</span><span class="p">;</span>

<span class="c1"># if you do not have the xos4-terminus font that makes characters a little bigger :</span>
<span class="c1"># uncoment this line and use the second here document</span>
<span class="c1">#open $FH, &#34; | dmenu -i -l 30 | sed &#39;s/^\\(.\\).*/\\1/&#39; | tr -d &#39;\n&#39; | { xsel -ib; xsel -ip; } &#34;;</span>

<span class="c1"># also you can compile dmenu from source and change the font size directly in the C done</span>
<span class="c1"># in the file config.h / config.def.h</span>

<span class="c1"># this heredoc is well aligned with the -xos4-terminus-medium-r-*-*-10-* font</span>

<span class="k">print</span> <span class="nv">$FH</span> <span class="s">&lt;&lt;&#39;</span><span class="dl">EOF</span><span class="s">&#39;
</span><span class="s">Â«         hyper operator
</span><span class="s">Â»         hyper operator
</span><span class="s">âˆˆ        membership
</span><span class="s">âˆ‰        non-membership
</span><span class="s">âˆª         set union
</span><span class="s">âˆ©         set intersection
</span><span class="s">âˆ–         set difference
</span><span class="s">â‰¡         set equality
</span><span class="s">â‰¢        set inequality
</span><span class="s">âŠ–        symmetric set difference
</span><span class="s">âŠ         baggy multiplication
</span><span class="s">âŠ         baggy addition
</span><span class="s">âˆ…        empty set
</span><span class="s">âŠ†        subset
</span><span class="s">âŠˆ         not a subset
</span><span class="s">âŠ‚        strict subset
</span><span class="s">âŠ„        not a strict subset
</span><span class="s">âˆ‹        reverse membership
</span><span class="s">âˆŒ          reverse non-membership
</span><span class="s">âŠ‡        superset
</span><span class="s">âŠ‰         not a superset
</span><span class="s">âŠƒ        strict superset
</span><span class="s">âŠ…        not a strict superset
</span><span class="s">âˆ         infinity
</span><span class="s">âš›        atomic operator
</span><span class="s">Ï€        pi
</span><span class="s">Ï„         tau
</span><span class="s">ğ‘’         Euler&#39;s number
</span><span class="s">âˆ˜         function composition
</span><span class="s">Ã—        multiplication 
</span><span class="s">Ã·        division
</span><span class="s">â‰¤         inferior or equal
</span><span class="s">â‰¥         greater or equal
</span><span class="s">â‰    	     inequality
</span><span class="s">âˆ’        substraction
</span><span class="s">â‰…       approximatively equal
</span><span class="s">â€¦      sequence operator
</span><span class="s">â€˜         left single quotation mark
</span><span class="s">â€™         right single quotation mark
</span><span class="s">â€š         single low-9 quotation mark 
</span><span class="s">â€         right double quotation mark
</span><span class="s">â€œ         left double quotation mark
</span><span class="s">â€         double low-9 quotation mark
</span><span class="s">ï½¢         halfwidth left corner bracket
</span><span class="s">ï½£         halfwidth right corner bracket
</span><span class="s">âº         plus superscript
</span><span class="s">â»         minus superscript
</span><span class="s">â°         0 superscript
</span><span class="s">Â¹         1 superscript 
</span><span class="s">Â²         2 superscript 
</span><span class="s">Â³         3 superscript 
</span><span class="s">â´         4 superscript 
</span><span class="s">âµ         5 superscript 
</span><span class="s">â¶         6 superscript 
</span><span class="s">â·         7 superscript 
</span><span class="s">â¸         8 superscript 
</span><span class="s">â¹         9 superscript 
</span><span class="s"></span><span class="dl">EOF</span>
<span class="p">;</span>

<span class="c1"># use this without -xos4-terminus-medium-r-*-*-10-* font</span>
<span class="c1"># the default font may change given which font packages are installed and given the font configurations</span>

<span class="c1">#print $FH &lt;&lt;&#39;EOF&#39;</span>
<span class="c1">#Â«         hyper operator</span>
<span class="c1">#Â»         hyper operator</span>
<span class="c1">#âˆˆ         membership</span>
<span class="c1">#âˆ‰         non-membership</span>
<span class="c1">#âˆª         set union</span>
<span class="c1">#âˆ©         set intersection</span>
<span class="c1">#âˆ–         set difference</span>
<span class="c1">#â‰¡         set equality</span>
<span class="c1">#â‰¢         set inequality</span>
<span class="c1">#âŠ–         symmetric set difference</span>
<span class="c1">#âŠ         baggy multiplication</span>
<span class="c1">#âŠ         baggy addition</span>
<span class="c1">#âˆ…         empty set</span>
<span class="c1">#âŠ†         subset</span>
<span class="c1">#âŠˆ         not a subset</span>
<span class="c1">#âŠ‚         strict subset</span>
<span class="c1">#âŠ„         not a strict subset</span>
<span class="c1">#âˆ‹         reverse membership</span>
<span class="c1">#âˆŒ         reverse non-membership</span>
<span class="c1">#âŠ‡         superset</span>
<span class="c1">#âŠ‰         not a superset</span>
<span class="c1">#âŠƒ         strict superset</span>
<span class="c1">#âŠ…         not a strict superset</span>
<span class="c1">#âˆ         infinity</span>
<span class="c1">#âš›         atomic operator</span>
<span class="c1">#Ï€         pi</span>
<span class="c1">#Ï„         tau</span>
<span class="c1">#ğ‘’         Euler&#39;s number</span>
<span class="c1">#âˆ˜         function composition</span>
<span class="c1">#Ã—         multiplication </span>
<span class="c1">#Ã·         division</span>
<span class="c1">#â‰¤         inferior or equal</span>
<span class="c1">#â‰¥         greater or equal</span>
<span class="c1">#â‰          inequality</span>
<span class="c1">#âˆ’         substraction</span>
<span class="c1">#â‰…         approximatively equal</span>
<span class="c1">#â€¦         sequence operator</span>
<span class="c1">#â€˜         left single quotation mark</span>
<span class="c1">#â€™         right single quotation mark</span>
<span class="c1">#â€š         single low-9 quotation mark </span>
<span class="c1">#â€         right double quotation mark</span>
<span class="c1">#â€œ         left double quotation mark</span>
<span class="c1">#â€         double low-9 quotation mark</span>
<span class="c1">#ï½¢         halfwidth left corner bracket</span>
<span class="c1">#ï½£         halfwidth right corner bracket</span>
<span class="c1">#âº         plus superscript</span>
<span class="c1">#â»         minus superscript</span>
<span class="c1">#â°         0 superscript</span>
<span class="c1">#Â¹         1 superscript </span>
<span class="c1">#Â²         2 superscript </span>
<span class="c1">#Â³         3 superscript </span>
<span class="c1">#â´         4 superscript </span>
<span class="c1">#âµ         5 superscript </span>
<span class="c1">#â¶         6 superscript </span>
<span class="c1">#â·         7 superscript </span>
<span class="c1">#â¸         8 superscript </span>
<span class="c1">#â¹         9 superscript </span>
<span class="c1">#EOF</span>
<span class="c1">#;</span>



<span class="nb">close</span> <span class="nv">$FH</span><span class="p">;</span>



<span class="cp">__END__
</span><span class="cp">
</span><span class="cp">
</span><span class="cp">=pod 
</span><span class="cp">
</span><span class="cp">=head1 NAME
</span><span class="cp">
</span><span class="cp">lazy_raku_unicode.pl
</span><span class="cp">
</span><span class="cp">=head1 SYNOPSIS
</span><span class="cp">
</span><span class="cp">This script allows you to select a Unicode symbol from a drop-down menu that you can simply paste into your text editor, terminal or IDE.
</span><span class="cp">
</span><span class="cp">All it does is send a heredoc through a pipe to dmenu, and copy to the clipboard the character that you selected.
</span><span class="cp">
</span><span class="cp">Dmenu is a program that reads lines from stdin, display them in a menu, and write to stdout the lines selected.
</span><span class="cp">
</span><span class="cp">It is not practical to execute this script from a terminal each time you want a character though. This is why it should be executed by sxhkd.
</span><span class="cp">
</span><span class="cp">Sxhkd is the program that will call this script each time you press the right key combination.
</span><span class="cp">
</span><span class="cp">Only the most useful Unicode characters are present to not make dmenu get too slow. (It is usually very fast when there is only ascii text.)
</span><span class="cp">
</span><span class="cp">This include most of the Raku operators that have a Unicode version, plus some quoting characters, superscripts, and mathematical constants.
</span><span class="cp">
</span><span class="cp">=head1 MANUAL INSTALLATION STEPS
</span><span class="cp">
</span><span class="cp">
</span><span class="cp">=head2 INSTALLING DMENU
</span><span class="cp">
</span><span class="cp">B&lt;On Debian or Ubuntu :&gt;
</span><span class="cp">
</span><span class="cp">	sudo apt install suckless-tools
</span><span class="cp">
</span><span class="cp">B&lt;On Archlinux :&gt;
</span><span class="cp">
</span><span class="cp">	sudo pacman -Sy dmenu
</span><span class="cp">
</span><span class="cp">B&lt;Compile it from source :&gt;
</span><span class="cp">
</span><span class="cp">	https://tools.suckless.org/dmenu/
</span><span class="cp">
</span><span class="cp">=head2 CHANGING DMENU FONT SIZE (OPTIIONAL)
</span><span class="cp">
</span><span class="cp">You have only two ways of changing the font size :
</span><span class="cp">
</span><span class="cp">Change the default font with the B&lt;-fn&gt; flag (See dmenu(1) for the specifics).
</span><span class="cp">	
</span><span class="cp">	dmenu -l 30 -fn &#39;-xos4-terminus-medium-r-*-*-10-*&#39;
</span><span class="cp">
</span><span class="cp">
</span><span class="cp">Modify directly the C source code of dmenu. Only the files B&lt;config.h / config.def.h&gt;.
</span><span class="cp">
</span><span class="cp">Simply edit this line and change 10 by 14 for example.
</span><span class="cp">
</span><span class="cp">	static const char *fonts[] = {
</span><span class="cp">		&#34;monospace:size=10&#34;
</span><span class="cp">	};
</span><span class="cp">
</span><span class="cp">Then execute sudo make install and you&#39;re ready to go.
</span><span class="cp">
</span><span class="cp">=head2 INSTALLING SXHKD
</span><span class="cp">
</span><span class="cp">
</span><span class="cp">B&lt;On Debian or Ubuntu :&gt;
</span><span class="cp">
</span><span class="cp">	sudo apt install sxhkd
</span><span class="cp">
</span><span class="cp">B&lt;On Archlinux :&gt;
</span><span class="cp">
</span><span class="cp">	sudo pacman -Sy sxhkd
</span><span class="cp">
</span><span class="cp">
</span><span class="cp">=head2 CONFIGURING SXHKD
</span><span class="cp">
</span><span class="cp">B&lt;Autostarting sxhkd at startup :&gt;
</span><span class="cp">
</span><span class="cp">simply put this line in B&lt;~/.xprofile&gt; :
</span><span class="cp">
</span><span class="cp">	sxhkd &amp;
</span><span class="cp">
</span><span class="cp">
</span><span class="cp">B&lt;Setting the keybinding :&gt;
</span><span class="cp">	
</span><span class="cp">
</span><span class="cp">Add these two lines in B&lt;~/.config/sxhkd/sxhkdrc&gt;
</span><span class="cp">
</span><span class="cp">	ctrl + apostrophe
</span><span class="cp">		/path/to/lazy_raku_unicode.pl
</span><span class="cp">
</span><span class="cp">The keybinding have to start at the beginning of a line, and the command has to follow on the next line and be preceded by a tabulation.
</span><span class="cp">
</span><span class="cp">To make sxhkd reload the config file, either kill it and relaunch it, or send a SIGUSR1 signal. This command can do it :
</span><span class="cp">
</span><span class="cp">	pidof sxhkd | kill -SIGUSR1 $(cat /dev/stdin)
</span><span class="cp">
</span><span class="cp">If you want to use a different keybinding, please see sxhkd(1) and use xev(1) to find the name of keys.
</span><span class="cp">
</span><span class="cp">Here the name of some of the keys : ctrl, super, alt, Return .
</span><span class="cp">
</span><span class="cp">=head1 SEE ALSO
</span><span class="cp">
</span><span class="cp">dmenu(1), sxhkd(1), xev(1)
</span><span class="cp">
</span><span class="cp">
</span><span class="cp">=cut
</span></code></pre></div><p>å‚è€ƒé“¾æ¥: <a href="https://docs.raku.org/language/unicode_entry">https://docs.raku.org/language/unicode_entry</a></p>
]]></content>
            
                 
                    
                         
                        
                            
                             
                                <category scheme="https://ohmyweekly.github.io/categories/raku" term="raku" label="Raku" />
                            
                        
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://ohmyweekly.github.io/tags/raku" term="raku" label="Raku" />
                             
                                <category scheme="https://ohmyweekly.github.io/tags/unicode" term="unicode" label="Unicode" />
                            
                        
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[Method-ish]]></title>
            <link href="https://ohmyweekly.github.io/notes/2021-02-17-method-isd/?utm_source=atom_feed" rel="alternate" type="text/html" />
            
                <link href="https://ohmyweekly.github.io/notes/2021-02-28-pattern-dispatch/?utm_source=atom_feed" rel="related" type="text/html" title="æ¨¡å¼åˆ†æ´¾" />
                <link href="https://ohmyweekly.github.io/notes/2021-02-28-custom-when/?utm_source=atom_feed" rel="related" type="text/html" title="è‡ªå®šä¹‰ when" />
                <link href="https://ohmyweekly.github.io/notes/2021-02-16-contributing-to-raku/?utm_source=atom_feed" rel="related" type="text/html" title="ä¸ºæœ€å¹´è½»çš„ Raku è´¡çŒ®åŠ›é‡" />
                <link href="https://ohmyweekly.github.io/notes/2021-01-30-caesarean-substrings-with-raku-and-perl/?utm_source=atom_feed" rel="related" type="text/html" title="Caesarean Substrings With Raku and Perl" />
                <link href="https://ohmyweekly.github.io/notes/2021-02-07-if-sets-would-dwim/?utm_source=atom_feed" rel="related" type="text/html" title="å¦‚æœé›†åˆå¦‚æˆ‘æ‰€æƒ³" />
            
                <id>https://ohmyweekly.github.io/notes/2021-02-17-method-isd/</id>
            
            
                    <author>
                        <name>ç„‰çŸ¥éé±¼</name>
                    </author>
            <published>2021-02-28T00:00:00+08:00</published>
            <updated>2021-02-28T00:00:00+08:00</updated>
            
            
            <content type="html"><![CDATA[<blockquote>Method-ish</blockquote><p>åœ¨æˆ‘çš„ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘åˆä¸€æ¬¡ä¸ºä» CORE ä¸­å¢å¼ºç±»çš„æ–¹æ³•è€Œè‹¦æ¼ã€‚è¿™ç§æŒ£æ‰å®Œå…¨æ²¡æœ‰å¿…è¦ï¼Œå› ä¸ºæˆ‘å¹¶æ²¡æœ‰ç”¨å¢åŠ çš„æ–¹æ³•æ”¹å˜å¯¹è±¡çš„çŠ¶æ€ã€‚å¯¹äºåšæ›´é«˜çº§çš„ä¸œè¥¿ï¼Œæˆ‘å¯èƒ½ä¸å¾—ä¸è¿™æ ·åšã€‚æŠŠæ‰‹ä¼¸è¿› Raku çš„å†…éƒ¨è¿™ä¹ˆæ·±ï¼Œæˆ‘å¯èƒ½ä¼šæŠŠè‡ªå·±çƒ«ä¼¤ã€‚æ—¢ç„¶æˆ‘æƒ³åšçš„æ˜¯æŠŠæˆ‘çš„ä»£ç ç»‘åœ¨ç¼–è¯‘å™¨çš„å˜åŒ–ä¸Šï¼Œåæ­£æˆ‘å¯èƒ½ä¼šå…¨èº«å¿ƒåœ°æŠ•å…¥åˆ° nqp-land ä¸­å»ã€‚</p>
<pre><code class="language-raku" data-lang="raku">my \j = 1 | 2 | 3;
dd j;
use nqp;
.say for nqp::getattr(j, Junction, '$!eigenstates');
# OUTPUT: any(1, 2, 3)
          1
          2
          3
</code></pre><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ nqp æ¥è·å–ç§æœ‰å±æ€§ï¼Œè€Œä¸éœ€è¦æ·»åŠ ä»»ä½•æ–¹æ³•ã€‚è¿™å°±æœ‰ç‚¹å„¿ä¸ä¼¦ä¸ç±»äº†ã€‚æ‰€ä»¥ï¼Œè®©æˆ‘ä»¬ç”¨ä¸€ä¸ªä¼ªæ–¹æ³•æ¥åšä¸€äº› deboilerplatingã€‚</p>
<pre><code class="language-raku" data-lang="raku">sub pry(Mu $the-object is raw) {
    use InterceptAllMethods;

    class Interceptor {
        has Mu $!the-object;
        method ^find_method(Mu \type, Str $name) {
            my method (Mu \SELF:) is raw {
                use nqp;
                my $the-object := nqp::getattr(SELF, Interceptor, '$!the-object');
                nqp::getattr($the-object, $the-object.WHAT, '$!' ~ $name)
            }
        }
    }

    use nqp;
    nqp::p6bindattrinvres(nqp::create(Interceptor), Interceptor, '$!the-object', $the-object);
}

.say for j.&amp;pry.eigenstates;
# OUTPUT: 1
          2
          3
</code></pre><p>é€šè¿‡ InterceptAllMethodsï¼Œlizmat æ”¹å˜äº†ç±»å…³é”®å­—çš„è¡Œä¸ºï¼Œå…è®¸æˆ‘ä»¬æä¾›ä¸€ä¸ª FALLBACK-method æ¥æ•è·ä»»ä½•æ–¹æ³•ï¼ŒåŒ…æ‹¬ä» Mu ç»§æ‰¿çš„æ–¹æ³•ã€‚è¿™åè¿‡æ¥åˆå…è®¸ pry è¿”å›çš„å¯¹è±¡å°†ä»»ä½•æ–¹æ³•è°ƒç”¨è½¬ç§»åˆ°ä¸€ä¸ªè‡ªå®šä¹‰çš„æ–¹æ³•ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ <code>.&amp;pry</code> è¢«è°ƒç”¨çš„å¯¹è±¡åšä»»ä½•æˆ‘ä»¬æƒ³åšçš„äº‹æƒ…ã€‚</p>
<p>ç”±äºæˆ‘ä»¬çš„ç‰¹æ®Šå¯¹è±¡ä¼šæ‹¦æˆªä»»ä½•è°ƒç”¨ï¼Œç”šè‡³æ˜¯ Mu çš„è°ƒç”¨ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°å¦ä¸€ç§æ–¹æ³•æ¥è°ƒç”¨ <code>.new</code>ã€‚ç”±äº <code>.^</code> ä¸æ˜¯ <code>.</code> çš„ç‰¹æ®Šå½¢å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥è·å¾—å¯¹ç±»æ–¹æ³•çš„è®¿é—®ã€‚</p>
<pre><code class="language-raku" data-lang="raku">sub interceptor(Method $the-method){
    use InterceptAllMethods;
    use nqp;

    sub (Mu $the-object is raw) {
        my class Interceptor {
            has Mu $!the-object;
            has Code $!the-method;

            method ^find_method(Mu \type, Mu:D $name) {
                my method (Mu \SELF: |c) is raw {
                    $!the-method.($!the-object, $name, |c)
                }
            }
            method ^introspect(Mu \type, Mu \obj) {
                my method call-it() is raw {
                    $!the-object
                }
                obj.&amp;call-it;
            }
            method ^new(Mu \type, $the-object!, $the-method) {
                nqp::p6bindattrinvres(
                        nqp::p6bindattrinvres(nqp::create(Interceptor), Interceptor, '$!the-object', $the-object),
                        Interceptor, '$!the-method', $the-method)
            }
        }

            # nqp::p6bindattrinvres(
                #     nqp::p6bindattrinvres(nqp::create(Interceptor), Interceptor, '$!the-object', $the-object),
                #   Interceptor, '$!the-method', $the-method);
        Interceptor.^new($the-object, $the-method)
    }
}

my &amp;first-defined = interceptor(
    my method (Positional \SELF: $name) {
        for SELF.flat -&gt; $e {
            with $e.&quot;$name&quot;(|%_) {
                .return
            }
        }
        Nil
    }
);

my $file = &lt;file1.txt file2.txt file3.txt nohup.out&gt;Â».IO.&amp;first-defined.open(:r);
dd $file;
# OUTPUT: Handle $file = IO::Handle.new(path =&gt; IO::Path.new(&quot;nohup.out&quot;, :SPEC(IO::Spec::Unix), :CWD(&quot;/home/dex/projects/raku/tmp&quot;)), chomp =&gt; Bool::True, nl-in =&gt; $[&quot;\n&quot;, &quot;\r\n&quot;], nl-out =&gt; &quot;\n&quot;, encoding =&gt; &quot;utf8&quot;)
</code></pre><p>sub <code>interceptor</code> æ¥å—ä¸€ä¸ªæ–¹æ³•å¹¶è¿”å›ä¸€ä¸ª subã€‚å¦‚æœè¿™ä¸ª sub åƒæ–¹æ³•ä¸€æ ·è¢«è°ƒç”¨ï¼Œå®ƒå°†æŠŠè¦è¢«è°ƒç”¨çš„æ–¹æ³•çš„åç§°å’Œè°ƒç”¨è€…è½¬å‘ç»™ä¸€ä¸ªè‡ªå®šä¹‰æ–¹æ³•ã€‚å½“ <code>.&amp;first-defined</code> è¢«è°ƒç”¨æ—¶ï¼Œä¼šè¿”å›ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒæ˜¯ä»€ä¹ˆã€‚</p>
<pre><code class="language-raku" data-lang="raku">my \uhhh-special = &lt;a b c&gt;.&amp;first-defined;
dd uhhh-special.^introspect(uhhh-special);
# OUTPUT: ($(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;), method &lt;anon&gt; (Positional \SELF: $name, *%_) { #`(Method|93927752146784) ... })
</code></pre><p>æˆ‘ä»¬å¿…é¡»ç»™ <code>.^introspect</code> ä¸€ä¸ªæˆ‘ä»¬æƒ³çœ‹çš„å¯¹è±¡ï¼Œå› ä¸ºå®ƒçš„è°ƒç”¨è€…æ˜¯ç±» Interceptor çš„ç±»å‹å¯¹è±¡ã€‚</p>
<p>ç›®å‰ï¼Œæˆ‘è¿˜ä¸çŸ¥é“æœ‰ä»€ä¹ˆåŠæ³•ï¼ˆæ¯•ç«Ÿï¼Œæˆ‘çŸ¥é“çš„åªæ˜¯è¶³å¤Ÿå¤šçš„ä¸œè¥¿ï¼ŒçœŸçš„å¾ˆå±é™©ã€‚è¿™æ˜¯ä¸å¹¸çš„ï¼Œå› ä¸º lizmat å†³å®šé‡è½½å…³é”®å­— <code>class</code>ï¼Œè€Œä¸æ˜¯ç”¨ä¸åŒçš„åå­—å¯¼å‡ºç‰¹æ®Šçš„ <code>Metamodel::ClassHOW</code>ã€‚å¦‚æœæˆ‘ä»¬ä¸æƒ³æˆ–ä¸èƒ½æœ‰å¤–éƒ¨ä¾èµ–ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ MOP æ¥åˆ›å»ºæˆ‘ä»¬çš„ç±»å‹å¯¹è±¡ã€‚</p>
<pre><code class="language-raku" data-lang="raku">class InterceptHOW is Metamodel::ClassHOW {
    method publish_method_cache(|) { }
}

sub ipry(Mu $the-object is raw) {
    my \Interceptor = InterceptHOW.new_type(:name&lt;Interceptor&gt;);
    Interceptor.^add_attribute(Attribute.new(:name&lt;$!the-object&gt;, :type(Mu), :package(Interceptor)));
    Interceptor.^add_meta_method('find_method',
        my method find_method(Mu \type, Str $name) {
            # say â€looking for $nameâ€œ;
            my method (Mu \SELF:) is raw {
                use nqp;
                my $the-object := nqp::getattr(SELF, Interceptor, '$!the-object');
                nqp::getattr($the-object, $the-object.WHAT, '$!' ~ $name)
            }
    });
    Interceptor.^compose;

    use nqp;
    nqp::p6bindattrinvres(nqp::create(Interceptor), Interceptor, '$!the-object', $the-object);
}
</code></pre><p>å½“æˆ‘å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œæˆ‘å‘ç° <code>.^add_meta_method</code> åªæœ‰åœ¨æä¾›ç»™å®ƒçš„æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°çš„åå­—å’Œ <code>Str</code> ç›¸åŒçš„æ—¶å€™æ‰ä¼šå·¥ä½œã€‚èµ·åˆï¼Œæˆ‘å°è¯•äº†ä¸€ä¸ªåŒ¿åæ–¹æ³•ï¼Œå®ƒæœ€ç»ˆå‡ºç°åœ¨ <code>.^meta_method_table</code> ä¸­ï¼Œä½†ä»æœªè¢«è°ƒç”¨ã€‚æˆ‘æƒ³è¿™ä¸ª bug å…¶å®å¹¶ä¸é‡è¦ï¼Œå› ä¸ºè¿™ä¸ªå…ƒæ–¹æ³•æ ¹æœ¬æ²¡æœ‰è¢«è®°å½•ä¸‹æ¥ã€‚å¦‚æœæˆ‘ç©ç«ï¼Œæˆ‘æ²¡æœ‰æƒåˆ©æŠ±æ€¨çƒ§ä¼¤ã€‚ä½ ä¼šåœ¨é‡å¤–çš„ <code>Actions.nqp</code> ä¸­å‘ç°è¿™ä¸ªæ–¹æ³•ã€‚Class å…³é”®å­—å¹¶æ²¡æœ‰ä»€ä¹ˆç¥å¥‡çš„ä½œç”¨ã€‚Rakudo åªæ˜¯ä½¿ç”¨ MOP æ¥æ„é€ ç±»å‹å¯¹è±¡ã€‚</p>
<p>æˆ‘ä»¬ä¸èƒ½åœ¨ Raku ä¸­é‡è½½èµ‹å€¼æ“ä½œç¬¦ã€‚è¿™å…¶å®å¹¶ä¸éœ€è¦ï¼Œå› ä¸ºèµ‹å€¼æ˜¯é€šè¿‡è°ƒç”¨ä¸€ä¸ªåä¸º STORE çš„æ–¹æ³•æ¥å®ç°çš„ã€‚ç”±äºæˆ‘ä»¬å¾—åˆ°äº†å¯¹ dispatch çš„å®Œå…¨æ§åˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥æ‹¦æˆªä»»ä½•æ–¹æ³•è°ƒç”¨ï¼ŒåŒ…æ‹¬ä¸€è¿ä¸²çš„æ–¹æ³•è°ƒç”¨ã€‚</p>
<pre><code class="language-raku" data-lang="raku">multi sub methodify(%h, :$deeply!) {
    sub interceptor(%h, $parent = Nil){
        use InterceptAllMethods;
        use nqp;

        class Interceptor is Callable {
            has Mu $!the-object;
            has Mu @!stack;

            method ^find_method(Mu \type, Mu:D $name) {
                my method (Mu \SELF: |c) is raw {
                    my @new-stack = @!stack;
                    my $the-object = $!the-object;

                    if $name eq 'STORE' {
                        # workaround for rakudobug#4203
                        $the-object{||@new-stack.head(*-1)}:delete if $the-object{||@new-stack.head(*-1)}:exists;

                        $the-object{||@new-stack} = c;
                        return-rw c
                    } else {
                        @new-stack.push: $name;
                        my \nextlevel = SELF.^new($!the-object, @new-stack, $name);
                        nextlevel
                    }
                }
            }
            method ^introspect(Mu \type, Mu \obj) {
                my method call-it() is raw {
                    $!the-object, @!stack
                }
                obj.&amp;call-it;
            }
            method ^new(Mu \type, $the-object!, @new-stack?, $name?) {
                $name
                    ?? nqp::p6bindattrinvres(
                        nqp::p6bindattrinvres(nqp::create(Interceptor), Interceptor, '$!the-object', $the-object),
                        Interceptor, '@!stack', @new-stack)
                    !! nqp::p6bindattrinvres(nqp::create(Interceptor), Interceptor, '$!the-object', $the-object)
                }
        }

        Interceptor.^new(%h)
    }

    interceptor(%h)
}

my %h2;
my $o2 = methodify(%h2, :deeply);
$o2.a.b = 42;
dd %h2;
$o2.a.b.c = &lt;answer&gt;;
dd %h2;
say $o2.a.b.c;
# OUTPUT: Hash %h2 = {:a(${:b(\(42))})}
          Hash %h2 = {:a(${:b(${:c(\(&quot;answer&quot;))})})}
          This type cannot unbox to a native string: P6opaque, Interceptor
            in block &lt;unit&gt; at /home/dex/projects/raku/any-chain.raku line 310
</code></pre><p>æ¯å½“æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ Interceptor å®ä¾‹ï¼Œå®ƒå­˜å‚¨äº†å‰ä¸€ä¸ªæ–¹æ³•çš„åç§°ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ²¿ç€æ–¹æ³•è°ƒç”¨é“¾ç§»åŠ¨ã€‚ç”±äºèµ‹å€¼è°ƒç”¨ STOREï¼Œæˆ‘ä»¬å¯ä»¥å°†èµ‹å€¼è½¬ç§»åˆ°æˆ‘ä»¬ç”¨ä½œå®é™…æ•°æ®ç»“æ„çš„ Hash ä¸­ã€‚å”‰ï¼Œæ£€ç´¢å€¼å°±ä¸ä¸€æ ·äº†ï¼Œå› ä¸º Raku ä¸åŒºåˆ†æ–¹æ³•è°ƒç”¨å’Œ FETCHã€‚åœ¨è¿™é‡Œï¼Œé¾™æ¯”æˆ‘å¼ºã€‚æˆ‘è¿˜æ˜¯åŒ…å«äº†è¿™ä¸ªä¸€åŠå¤±è´¥çš„å°è¯•ï¼Œå› ä¸ºæˆ‘å¯¹ slippy åŠåˆ—è¡¨æœ‰å¾ˆå¥½çš„åˆ©ç”¨ã€‚è¿™éœ€è¦ä½¿ç”¨ <code>v6.e.preview</code>ï¼Œè®©æˆ‘è¸©åˆ°äº†ä¸€ä¸ª bugã€‚å¯èƒ½è¿˜æœ‰æ›´å¤šè¿™æ ·çš„æƒ…å†µã€‚æ‰€ä»¥è¯·ä½¿ç”¨åŒæ ·çš„ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ <code>.e</code> å‘å¸ƒåˆ°é‡å¤–ä¹‹å‰ï¼ŒæŠŠæ‰€æœ‰çš„é‡å…½éƒ½æ€æ‰ã€‚</p>
<p>èƒ½å¤Ÿå®Œå…¨æ§åˆ¶æ–¹æ³•è°ƒç”¨é“¾å°†æ˜¯ä¸€ä»¶å¥½äº‹ã€‚ä¹Ÿè®¸æˆ‘ä»¬å¯ä»¥ç”¨ RakuAST æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚</p>
<p>æœ‰äº†è¿™äº›å·²ç»å¯ä»¥å·¥ä½œçš„ä¸œè¥¿ï¼Œæˆ‘ä»¬å¯ä»¥åšä¸€äº›æœ‰è¶£çš„äº‹æƒ…ã€‚é‚£äº›çƒ¦äººçš„å¼‚å¸¸æ€»æ˜¯åœ¨æ‹–æˆ‘ä»¬çš„åè…¿ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ <code>try</code> æ¥åŒ–è§£å®ƒä»¬ï¼Œä½†é‚£ä¼šç ´åä¸€ä¸ªæ–¹æ³•è°ƒç”¨é“¾ã€‚</p>
<pre><code class="language-raku" data-lang="raku">constant no-argument-given = Mu.new;
sub try(Mu $obj is raw, Mu $alternate-value = no-argument-given) {
    interceptor(my method (Mu \SELF: $name, |c) {
        my $o = SELF;
        my \m = $o.^lookup($name) orelse {
            my $bt = Backtrace.new;
            my $idx = $bt.next-interesting-index($bt.next-interesting-index + 1);
            (X::Method::NotFound.new(:method($name), :typename($o.^name)) but role :: { method vault-backtrace { False }}).throw(Backtrace.new($idx + 1));
        }

        try {
            $o = $o.&quot;$name&quot;(|c);
        }
 
        $! ~~ Exception
            ?? $alternate-value.WHICH eqv no-argument-given.WHICH
                ?? $o
                !! $alternate-value
            !! $o
    }).($obj)
}

class C {
    has $.greeting;
    method might-throw { die &quot;Not today love!&quot; }
    method greet { say $.greeting }
}

C.new(greeting =&gt; â€šLet's make love!â€˜).&amp;try.might-throw.greet;
# OUTPUT: Let's make love!
</code></pre><p>ä¼ªæ–¹æ³• try å°†ä¼šåŒ–è§£ä»»ä½•å¼‚å¸¸ï¼Œå¹¶å…è®¸ç»§ç»­è°ƒç”¨ C è¯­è¨€çš„æ–¹æ³•ã€‚æˆ‘å¿…é¡»ç”¨ä¸€ä¸ªç‰¹æ®Šçš„å€¼æ¥æ ‡è®°æ²¡æœ‰å¯é€‰çš„å‚æ•° <code>$alternate-value</code>ï¼Œå› ä¸ºå®ƒå®é™…ä¸Šå¯èƒ½ä¼šæŠŠå¼‚å¸¸å¯¹è±¡å˜æˆ <code>Nil</code>ã€‚</p>
<p>æˆ‘å¾ˆè‚¯å®šè¿˜æœ‰å¾ˆå¤šè¿™æ ·çš„å°å¸®æ‰‹åœ¨ç­‰ç€æˆ‘ä»¬å»å‘ç°ã€‚æœªæ¥å¯èƒ½ä¼šæœ‰ä¸€ä¸ªæ¨¡å—ï¼Œå¸Œæœ›èƒ½å¸®åŠ© Raku æˆä¸ºä¸€ä¸ªå¥½çš„<a href="https://ftp.fau.de/fosdem/2021/D.perl/programming_lang_for_free_software.webm">ç¼–ç¨‹è¯­è¨€</a>ã€‚</p>
<p>åŸæ–‡é“¾æ¥: <a href="https://gfldex.wordpress.com/2021/02/17/method-ish/">https://gfldex.wordpress.com/2021/02/17/method-ish/</a></p>
]]></content>
            
                 
                    
                         
                        
                            
                             
                                <category scheme="https://ohmyweekly.github.io/categories/raku" term="raku" label="Raku" />
                            
                        
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://ohmyweekly.github.io/tags/raku" term="raku" label="Raku" />
                             
                                <category scheme="https://ohmyweekly.github.io/tags/raku-%E5%8D%9A%E5%AE%A2" term="raku-%E5%8D%9A%E5%AE%A2" label="Raku åšå®¢" />
                            
                        
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[æ¨¡å¼åˆ†æ´¾]]></title>
            <link href="https://ohmyweekly.github.io/notes/2021-02-28-pattern-dispatch/?utm_source=atom_feed" rel="alternate" type="text/html" />
            
                <link href="https://ohmyweekly.github.io/notes/2021-02-17-method-isd/?utm_source=atom_feed" rel="related" type="text/html" title="Method-ish" />
                <link href="https://ohmyweekly.github.io/notes/2021-02-28-custom-when/?utm_source=atom_feed" rel="related" type="text/html" title="è‡ªå®šä¹‰ when" />
                <link href="https://ohmyweekly.github.io/notes/2021-02-16-contributing-to-raku/?utm_source=atom_feed" rel="related" type="text/html" title="ä¸ºæœ€å¹´è½»çš„ Raku è´¡çŒ®åŠ›é‡" />
                <link href="https://ohmyweekly.github.io/notes/2021-01-30-caesarean-substrings-with-raku-and-perl/?utm_source=atom_feed" rel="related" type="text/html" title="Caesarean Substrings With Raku and Perl" />
                <link href="https://ohmyweekly.github.io/notes/2021-02-07-if-sets-would-dwim/?utm_source=atom_feed" rel="related" type="text/html" title="å¦‚æœé›†åˆå¦‚æˆ‘æ‰€æƒ³" />
            
                <id>https://ohmyweekly.github.io/notes/2021-02-28-pattern-dispatch/</id>
            
            
                    <author>
                        <name>ç„‰çŸ¥éé±¼</name>
                    </author>
            <published>2021-02-28T00:00:00+08:00</published>
            <updated>2021-02-28T00:00:00+08:00</updated>
            
            
            <content type="html"><![CDATA[<blockquote>Pattern Dispatch</blockquote><p>ä¸€ç›´ä»¥æ¥ä¹äºåŠ©äººçš„ <a href="https://stackoverflow.com/users/1077672/raiph">raiph</a> åœ¨å›ç­”ä¸€ä¸ªå…³äºæ¨¡å¼åŒ¹é…çš„<a href="https://stackoverflow.com/questions/66233465/haskell-like-pattern-matching-in-raku">é—®é¢˜</a>æ—¶å¸Œæœ›å¾—åˆ° RakuASTï¼Œå°±åƒåœ¨ Haskell ä¸­ä¸€æ ·ã€‚æœ‰äººæå‡ºç”¨ MMD æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è¿™æ ·åšï¼Œå¾—åˆ°ä¸€ä¸ªè´¯ç©¿çš„é»˜è®¤è·¯å¾„æ˜¯æ— è§£çš„ã€‚ç”±äº dispatch ç®€å•æ¥è¯´å°±æ˜¯æ¨¡å¼åŒ¹é…ï¼Œæˆ‘ä»¬åªéœ€è¦åšä¸€äº›é¢å¤–çš„å·¥ä½œã€‚ç®€è€Œè¨€ä¹‹ï¼Œdispatcher å¾—åˆ°ä¸€ä¸ªå‡½æ•°åˆ—è¡¨å’Œä¸€ä¸ªå¸¦å‚æ•°çš„åˆ—è¡¨ã€‚ç¬¬ä¸€ä¸ªæ¥å—æ‰€æœ‰å‚æ•°çš„å‡½æ•°è·èƒœã€‚</p>
<pre><code class="language-raku" data-lang="raku">class Hold { has $.key; }
class Press { has $.key; }
class Err { has $.msg; }

sub else(&amp;code) { &amp;code }

sub match($needle, *@tests) {
    for @tests.head(*-1) -&gt; &amp;f {
        if &amp;f.cando(\($needle)) {
            return f($needle);
        }
    }
    @tests.tail.();
}

match Hold.new(:key&lt;a&gt;),
    -&gt; Hold (:$key) { put â€holding $keyâ€œ; },
    -&gt; Press (:$key) { put â€pressing $keyâ€œ; },
    -&gt; Err (:$msg) { warn â€ERR: $msgâ€œ },
    else { fail â€šunsopportedâ€˜ };
</code></pre><p>æ–¹æ³• <code>.cando</code> éœ€è¦ä¸€ä¸ª <a href="https://docs.raku.org/type/Capture">Capture</a> æ¥å‘Šè¯‰æˆ‘ä»¬ä¸€ä¸ª Routine æ˜¯å¦å¯ä»¥ç”¨ä¸€ä¸ªç»™å®šçš„å‚æ•°åˆ—è¡¨æ¥è°ƒç”¨ã€‚ä¸ºäº†åˆ›å»ºè¿™æ ·ä¸€ä¸ªæ•è·ï¼Œæˆ‘ä»¬ä½¿ç”¨å­—é¢çš„ <code>\($arguments, $go, $here)</code>ã€‚æˆ‘ä»¬ä¸åœ¨æœ€åæµ‹è¯•é»˜è®¤å€¼ã€‚ç›¸åï¼Œå½“æ²¡æœ‰å…¶ä»–å‡½æ•°åŒ¹é…æ—¶ï¼Œæˆ‘ä»¬ä¼šè°ƒç”¨è¯¥å‡½æ•°ã€‚å£°æ˜ sub <code>else</code> åªæ˜¯ä¸ºäº†ç¾åŒ–ã€‚</p>
<p>ç”±äºæˆ‘ä»¬æ˜¯åœ¨å‡½æ•°å¼çš„åœŸåœ°ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Raku æä¾›ç»™æˆ‘ä»¬çš„æ‰€æœ‰æ–¹ä¾¿çš„åŠŸèƒ½ã€‚</p>
<pre><code class="language-raku" data-lang="raku">my &amp;key-matcher = &amp;match.assuming(*,[
        -&gt; Hold (:$key) { put â€holding $keyâ€œ; },
        -&gt; Press (:$key) { put â€pressing $keyâ€œ; },
        -&gt; Err (:$msg) { warn â€ERR: $msgâ€œ },
        else { fail â€šunsopportedâ€˜ };
]);

sub key-source {
    gather loop {
        sleep 1;
        take (Hold.new(:key&lt;a&gt;), Press.new(:key&lt;b&gt;), Err.new(:msg&lt;WELP!&gt;), 'unsupported').pick;
    }
}

.&amp;key-matcher for key-source;
</code></pre><p>æˆ‘ä»¬è¦å¸®åŠ© <code>.assuming</code> æœ‰ç‚¹ç†è§£ slurpiesï¼ŒæŠŠå‡½æ•°åˆ—è¡¨æ”¾åœ¨ä¸€ä¸ªæ˜¾å¼ Array ä¸­ã€‚</p>
<p>æ€»æœ‰ä¸€ç§å‡½æ•°å¼çš„æ–¹æ³•æ¥è§£å†³ä¸€ä¸ªé—®é¢˜ã€‚æœ‰æ—¶æˆ‘ä»¬ç”šè‡³å¯ä»¥ä»ä¸­å¾—åˆ°ä¸€ä¸ªæ•´é½çš„è¯­æ³•ã€‚</p>
<p>åŸæ–‡é“¾æ¥: <a href="https://gfldex.wordpress.com/2021/02/24/pattern-dispatch/">https://gfldex.wordpress.com/2021/02/24/pattern-dispatch/</a></p>
]]></content>
            
                 
                    
                         
                        
                            
                             
                                <category scheme="https://ohmyweekly.github.io/categories/raku" term="raku" label="Raku" />
                            
                        
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://ohmyweekly.github.io/tags/raku" term="raku" label="Raku" />
                             
                                <category scheme="https://ohmyweekly.github.io/tags/raku-%E5%8D%9A%E5%AE%A2" term="raku-%E5%8D%9A%E5%AE%A2" label="Raku åšå®¢" />
                            
                        
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[è‡ªå®šä¹‰ when]]></title>
            <link href="https://ohmyweekly.github.io/notes/2021-02-28-custom-when/?utm_source=atom_feed" rel="alternate" type="text/html" />
            
                <link href="https://ohmyweekly.github.io/notes/2021-02-16-contributing-to-raku/?utm_source=atom_feed" rel="related" type="text/html" title="ä¸ºæœ€å¹´è½»çš„ Raku è´¡çŒ®åŠ›é‡" />
                <link href="https://ohmyweekly.github.io/notes/2021-01-30-caesarean-substrings-with-raku-and-perl/?utm_source=atom_feed" rel="related" type="text/html" title="Caesarean Substrings With Raku and Perl" />
                <link href="https://ohmyweekly.github.io/notes/2021-02-07-if-sets-would-dwim/?utm_source=atom_feed" rel="related" type="text/html" title="å¦‚æœé›†åˆå¦‚æˆ‘æ‰€æƒ³" />
                <link href="https://ohmyweekly.github.io/notes/2021-02-17-method-isd/?utm_source=atom_feed" rel="related" type="text/html" title="Method-ish" />
                <link href="https://ohmyweekly.github.io/notes/2021-02-28-pattern-dispatch/?utm_source=atom_feed" rel="related" type="text/html" title="æ¨¡å¼åˆ†æ´¾" />
            
                <id>https://ohmyweekly.github.io/notes/2021-02-28-custom-when/</id>
            
            
                    <author>
                        <name>ç„‰çŸ¥éé±¼</name>
                    </author>
            <published>2021-02-28T00:00:00+08:00</published>
            <updated>2021-02-28T00:00:00+08:00</updated>
            
            
            <content type="html"><![CDATA[<blockquote>Custom When</blockquote><p>æˆ‘ä¸å¤ªå–œæ¬¢ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ä½¿ç”¨åŒ¹é…çš„è¯­æ³•ã€‚å®ƒçš„å‚æ•°åˆ—è¡¨ä¸­çš„é€—å·çœ‹èµ·æ¥å¾ˆå¥‡æ€ªï¼Œä¸åˆé€‚ã€‚ä¹Ÿè®¸æ˜¯å› ä¸ºæˆ‘çš„çœ¼ç›ä¹ æƒ¯äº†ç»™å®šçš„å—ã€‚ç¡ä¸€è§‰å°±å¥½äº†ã€‚</p>
<pre><code class="language-raku" data-lang="raku">sub accord(&amp;c) { (c(CALLER::&lt;$_&gt;); succeed) if &amp;c.cando(\(CALLER::&lt;$_&gt;)) }

given Err.new(:msg&lt;a&gt;) {
    accord -&gt; Hold (:$key) { put â€holding $keyâ€œ; }
    accord -&gt; Err (:$msg) { warn â€ERR: $msgâ€œ }
    default { fail â€šunsupportedâ€˜ }
}
</code></pre><p>è¿™æ˜¯å› ä¸º <code>accord</code> æ¨¡ä»¿äº† <code>when</code> çš„å·¥ä½œã€‚å®ƒåšäº†ä¸€äº›åŒ¹é…ï¼Œå½“ True æ—¶è°ƒç”¨ä¸€ä¸ªå—ï¼Œå¹¶åœ¨æ¯ä¸ªå—çš„ç»“å°¾æ·»åŠ ä¸€ä¸ª successï¼ˆé€šè¿‡æŠ›å‡ºä¸€ä¸ªæ§åˆ¶å¼‚å¸¸ï¼‰ã€‚given æ‰€åšçš„åªæ˜¯è®¾ç½®ä¸»é¢˜ã€‚å®ƒè¿˜å……å½“äº† caller çš„è§’è‰²ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªä¼ªåŒ…æ¥è®¿é—®å®ƒçš„ <code>$_</code>ã€‚åˆ©ç”¨ pointy çš„ç­¾åæ¥åš<a href="https://docs.raku.org/type/Signature#Destructuring_arguments">è§£æ„</a>æ˜¯ç›¸å½“å¼ºå¤§çš„ã€‚æŠŠè¿™ä¸ªæ·»åŠ åˆ° CORE ä¸­å¯èƒ½æ˜¯ä¸ªå¥½ä¸»æ„ã€‚</p>
<p>æˆ‘ä»¬å¯èƒ½è¦æŠŠ Raku çš„å®šä¹‰æ”¹æˆ: &ldquo;Raku æ˜¯ä¸€ç§é«˜åº¦å¯ç»„åˆçš„ç¼–ç¨‹è¯­è¨€&rdquo;, åœ¨è¿™é‡Œï¼Œæ‰€æœ‰çš„ä¸œè¥¿éƒ½ä¼šè½åˆ°å®å¤„ã€‚&quot;</p>
<p>æ›´æ–°ä¸€ä¸‹ã€‚</p>
<p>æœ‰äº›æƒ…å†µä¸‹ï¼Œ<code>$_</code> ä¸æ˜¯åŠ¨æ€çš„ã€‚å¦å¤–ï¼Œsuccess æ­£åœ¨æŠ›å‡ºä¸€ä¸ªæ§åˆ¶å¼‚å¸¸ï¼Œè€Œè¿™äº›çš„å¤„ç†ç¨‹åºæ˜¯ç”± when æˆ–é»˜è®¤æ·»åŠ çš„ã€‚è¿™ç§æƒ…å†µæ˜¯åœ¨ç¼–è¯‘æ—¶å‘ç”Ÿçš„ï¼Œç›®å‰ä¸èƒ½ç”¨å®æ¥è§£å†³ã€‚ç¬¬ä¸€ä¸ªé—®é¢˜å¯ä»¥ç”¨é»‘é­”æ³•è§£å†³ã€‚åä¸€ä¸ªé—®é¢˜éœ€è¦ç”¨é»˜è®¤å—ã€‚æˆ‘æ²¡æœ‰æ‰¾åˆ°ä¸€ç§æ–¹æ³•æ¥æä¾›ä¸€ä¸ªåˆç†çš„é”™è¯¯ä¿¡æ¯ï¼Œå¦‚æœç¼ºå°‘è¿™ä¸ªå—ã€‚</p>
<pre><code class="language-raku" data-lang="raku">multi sub accord(&amp;c) {
    use nqp;
    $_ := nqp::getlexcaller('$_');
    (c($_); succeed) if &amp;c.cando(\($_))
}

for @possibilities.roll(1) -&gt; $needle {
    given $needle {
        accord -&gt; Hold (:$key) { put â€holding $keyâ€œ; }
        accord -&gt; Err (:$msg) { warn â€ERR: $msgâ€œ }
        default { warn â€šunsopportedâ€˜ }
    }
}
</code></pre><p>åŸæ–‡é“¾æ¥: <a href="https://gfldex.wordpress.com/2021/02/25/custom-when/">https://gfldex.wordpress.com/2021/02/25/custom-when/</a></p>
]]></content>
            
                 
                    
                         
                        
                            
                             
                                <category scheme="https://ohmyweekly.github.io/categories/raku" term="raku" label="Raku" />
                            
                        
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://ohmyweekly.github.io/tags/raku" term="raku" label="Raku" />
                             
                                <category scheme="https://ohmyweekly.github.io/tags/rakulang" term="rakulang" label="Rakulang" />
                            
                        
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[Caesarean Substrings With Raku and Perl]]></title>
            <link href="https://ohmyweekly.github.io/notes/2021-01-30-caesarean-substrings-with-raku-and-perl/?utm_source=atom_feed" rel="alternate" type="text/html" />
            
                <link href="https://ohmyweekly.github.io/notes/2021-02-07-if-sets-would-dwim/?utm_source=atom_feed" rel="related" type="text/html" title="å¦‚æœé›†åˆå¦‚æˆ‘æ‰€æƒ³" />
                <link href="https://ohmyweekly.github.io/notes/2020-10-04-the-strange-case-of-the-greedy-junction/?utm_source=atom_feed" rel="related" type="text/html" title="è´ªå©ª Junction çš„å¥‡é—»å¼‚äº‹" />
                <link href="https://ohmyweekly.github.io/notes/2020-10-04-reconstructing-raku-junctions/?utm_source=atom_feed" rel="related" type="text/html" title="é‡æ„ Raku çš„ Junction" />
            
                <id>https://ohmyweekly.github.io/notes/2021-01-30-caesarean-substrings-with-raku-and-perl/</id>
            
            
                    <author>
                        <name>ç„‰çŸ¥éé±¼</name>
                    </author>
            <published>2021-02-07T00:00:00+08:00</published>
            <updated>2021-02-07T00:00:00+08:00</updated>
            
            
            <content type="html"><![CDATA[<blockquote>Caesarean Substrings With Raku and Perl</blockquote><p>[113] å‘è¡¨äº2021å¹´1æœˆ30æ—¥ã€‚
è¿™æ˜¯æˆ‘å¯¹ <a href="https://perlweeklychallenge.org/blog/perl-weekly-challenge-097/">Perl æ¯å‘¨æŒ‘æˆ˜#097</a> çš„å›åº”ã€‚</p>
<h2 id="æŒ‘æˆ˜-0971-å‡¯æ’’å¯†ç ">æŒ‘æˆ˜ #097.1: å‡¯æ’’å¯†ç </h2>
<p>ç»™ä½ ä¸€ä¸ªåªåŒ…å«å­—æ¯ <code>A..Z</code> çš„å­—ç¬¦ä¸² <code>$S</code> å’Œä¸€ä¸ªæ•°å­— <code>$N</code>ã€‚
å†™ä¸€ä¸ªè„šæœ¬ï¼Œç”¨<a href="https://en.wikipedia.org/wiki/Caesar_cipher">å‡¯æ’’å¯†ç </a>å¯¹ç»™å®šçš„å­—ç¬¦ä¸² <code>$S</code> è¿›è¡ŒåŠ å¯†ï¼Œå·¦ç§»å¤§å°ä¸º <code>$N</code>ã€‚</p>
<p>ä¾‹å­:
è¾“å…¥: $S = &ldquo;THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG&rdquo;, $N = 3
è¾“å‡º: &ldquo;QEB NRFZH YOLTK CLU GRJMP LSBO QEB IXWV ALD&rdquo;</p>
<p>Plain:    ABCDEFGHIJKLMNOPQRSTUVWXYZ
Cipher:   XYZABCDEFGHIJKLMNOPQRSTUVW</p>
<p>Plaintext:  THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG
Ciphertext: QEB NRFZH YOLTK CLU GRJMP LSBO QEB IXWV ALD</p>
<p>&ldquo;åªç”¨å­—æ¯ <code>A...Z</code>&rdquo; çš„è¡¨è¿°æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºä¾‹å­ä¸­ä¹Ÿæœ‰å‡ ä¸ªç©ºæ ¼ã€‚å› æ­¤ï¼Œåº”è¯¥å…è®¸è¿™äº›ç©ºæ ¼ã€‚</p>
<p>æ–‡ä»¶: caesar-cipher</p>
<pre><code class="language-raku" data-lang="raku">#! /usr/bin/env raku

subset AZ-space of Str where /^ &lt;[ A .. Z \s ]&gt;+ $/;   # [1]
subset PosInt of Int where -25 &lt;= $_ &lt;= 25;            # [2]

unit sub MAIN (AZ-space $S = 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG',
               PosInt $N = 3);                         # [3]

say $S.comb.map({ caesar($_, $N) }).join;              # [4]

sub caesar ($char, $shift)
{
  return $char if $char eq &quot; &quot;;                        # [5]

  my $code = $char.ord;                                # [6]

  $code -= $shift;                                     # [7]

  $code += 26 if $code &lt; 65;  # 'A'                    # [8]
  $code -= 26 if $code &gt; 90;  # 'Z'                    # [8a]

  return $code.chr;                                    # [9]
}
</code></pre><p>[1] æ‰€å…è®¸çš„å­—ç¬¦ (æˆ– Â«ç‰¹å®šé¢†åŸŸå­—æ¯Â»).</p>
<p>[2] æŒ‘æˆ˜è¯´å·¦ç§»å€¼æ˜¯ä¸€ä¸ªæ•°å­—ã€‚å…è®¸é™¤æ•´æ•°ä»¥å¤–çš„ä»»ä½•ä¸œè¥¿æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œæ‰€ä»¥æˆ‘æŠŠå€¼é™åˆ¶åœ¨è¿™ä¸ªç±»å‹ã€‚è´Ÿå€¼åº”è¯¥æ˜¯å¯ä»¥çš„ï¼Œå®ƒä»¬æ„å‘³ç€å³ç§»å€¼ï¼ˆè€Œä¸æ˜¯å·¦ç§»ï¼‰ã€‚</p>
<p>[3] å‚æ•°ï¼Œé»˜è®¤å€¼ä¸ºæŒ‘æˆ˜ä¸­ç»™å‡ºçš„å€¼ã€‚</p>
<p>[4] å°†å­—ç¬¦ä¸²åˆ†å‰²æˆå•ä¸ªå­—ç¬¦ï¼ˆç”¨æ¢³å­(comb)ï¼Œåœ¨æ¯ä¸ªå­—ç¬¦ä¸Šåº”ç”¨ &ldquo;caesar&rdquo; å‡½æ•°ï¼ˆç”¨mapï¼‰ï¼Œå†æ¬¡å°†å­—ç¬¦è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆç”¨joinï¼‰ï¼Œç„¶åæ‰“å°å‡ºæ¥ã€‚</p>
<p>[5] ä¸ç§»åŠ¨ç©ºæ ¼ã€‚</p>
<p>[6] è·å–å­—ç¬¦çš„ä»£ç ç‚¹ã€‚</p>
<p>[7] å‡å»ç§»ä½å€¼ï¼ˆå½“æˆ‘ä»¬å‘å·¦ç§»ä½æ—¶ï¼Œæˆ–åœ¨å­—æ¯è¡¨ä¸­é™ä½ç§»ä½å€¼ï¼‰ã€‚</p>
<p>[8] ç»•å›, å¦‚æœæˆ‘ä»¬ç§»å‡ºA-ZèŒƒå›´ï¼Œè¿™é‡Œä¸ºæ›´ä½ - æˆ–æ›´é«˜çš„ [8b]ã€‚</p>
<p>[9] è·å–æŒ‡å®šä»£ç ç‚¹çš„å­—ç¬¦ã€‚</p>
<p>æŸ¥çœ‹ docs.raku.org/routine/ord è·å–æ›´å¤šå…³äº ord çš„ä¿¡æ¯ã€‚</p>
<p>æŸ¥çœ‹ docs.raku.org/routine/chr è·å–æ›´å¤šå…³äº chr çš„ä¿¡æ¯ã€‚</p>
<p>è¿è¡Œå®ƒ:</p>
<pre><code>$ ./caesar-cipher 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' 3
QEB NRFZH YOLTK CLU GRJMP LSBO QEB IXWV ALD

$ ./caesar-cipher 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' -3
WKH TXLFN EURZQ IRA MXPSV RYHU WKH ODCB GRJ

$ ./caesar-cipher 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' 13
GUR DHVPX OEBJA SBK WHZCF BIRE GUR YNML QBT

$ ./caesar-cipher 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' -13
GUR DHVPX OEBJA SBK WHZCF BIRE GUR YNML QBT
</code></pre><p>Raku æœ‰ä¸€ä¸ª ords å˜ä½“ï¼Œå®ƒæ¥æ”¶ä¸€æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä½œä¸º ordã€‚è¿˜æœ‰ chrsï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªä»£ç ç‚¹æ•°ç»„ï¼Œå¹¶å°†å®ƒä»¬å˜æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯åƒ chr é‚£æ ·æ¥æ”¶ä¸€ä¸ªå­—ç¬¦çš„ä»£ç ç‚¹ã€‚è®©æˆ‘ä»¬ç”¨å®ƒä»¬æ¥å†™ä¸€ä¸ªæ›´çŸ­çš„ç¨‹åºã€‚</p>
<p>æ–‡ä»¶: caesar-cipher-map</p>
<pre><code class="language-raku" data-lang="raku">#! /usr/bin/env raku

subset AZ-space of Str where /^ &lt;[ A .. Z \s ]&gt;+ $/;
subset PosInt of Int where -25 &lt;= $_ &lt;= 25;

unit sub MAIN (AZ-space $S = 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG',
               PosInt $N = 3);

say caesar($S, $N);

sub caesar ($string, $shift)
{
  return $string.ords.map({$_ == 32 ?? 32 !! (($_ - $shift - 65) % 26 ) + 65}).chrs;
    # #################### # 1a ############# ############ # 1b  # 1c ## 1d
}
</code></pre><p>[1] æˆ‘ä»¬ä½¿ç”¨mapæ¥æ”¹å˜å„ä¸ªä»£ç ç‚¹ã€‚æˆ‘ä»¬è®©ä»£ç ç‚¹ä¸º32çš„ç©ºé—´å•ç‹¬å­˜åœ¨[1a]ã€‚æ¯ä¸€ä¸ªå…¶ä»–çš„å€¼æˆ‘ä»¬éƒ½è¿˜åŸæˆ0åˆ°25ä¹‹é—´çš„æ•°å­—ï¼ˆé€šè¿‡å‡å»ç¬¬ä¸€ä¸ªå­—æ¯çš„ä»£ç ç‚¹ï¼ˆAï¼š65ï¼‰å’Œç§»ä½å€¼[1b]ï¼‰ã€‚æ¨¡æ•°è¿ç®—ç¬¦ (%) ä¸ºæˆ‘ä»¬å¤„ç†è´Ÿå€¼ï¼Œåšæ­£ç¡®çš„äº‹æƒ…ã€‚ä¾‹å¦‚ï¼š-2 % 26 -&gt; 24 [1c]ã€‚ç„¶åæˆ‘ä»¬æ·»åŠ è°ƒæ•´å€¼åˆ°å®ƒä»¬åº”è¯¥åœ¨çš„ä½ç½®(ä»Aåˆ°Z)[1d]ï¼Œç„¶åæˆ‘ä»¬å°†æ•´ä¸ªæ•°ç»„çš„ä»£ç ç‚¹å˜æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p>
<p>æŸ¥çœ‹ docs.raku.org/routine/ords è·å–æ›´å¤šå…³äº ords çš„ä¿¡æ¯ã€‚</p>
<p>æŸ¥çœ‹ docs.raku.org/routine/chrs è·å–æ›´å¤šå…³äº chrs çš„ä¿¡æ¯ã€‚</p>
<p>è¿è¡Œå®ƒçš„ç»“æœå’Œä¹‹å‰ä¸€æ ·ã€‚</p>
<pre><code>$ ./caesar-cipher-map 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' 3
QEB NRFZH YOLTK CLU GRJMP LSBO QEB IXWV ALD

$ ./caesar-cipher-map 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' -3
WKH TXLFN EURZQ IRA MXPSV RYHU WKH ODCB GRJ

$ ./caesar-cipher-map 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' 13
GUR DHVPX OEBJA SBK WHZCF BIRE GUR YNML QBT

$ ./caesar-cipher-map 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' -13
GUR DHVPX OEBJA SBK WHZCF BIRE GUR YNML QBT
</code></pre><h2 id="perl-ç‰ˆæœ¬">Perl ç‰ˆæœ¬</h2>
<p>è¿™æ˜¯å¯¹ç¬¬ä¸€ä¸ª Raku ç‰ˆçš„ç›´æ¥ç¿»è¯‘ã€‚</p>
<p>File: caesar-cipher-perl</p>
<div class="highlight"><pre class="chroma"><code class="language-perl" data-lang="perl"><span class="ch">#! /usr/bin/env perl</span>

<span class="k">use</span> <span class="nn">strict</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">warnings</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">feature</span> <span class="s">&#39;say&#39;</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">feature</span> <span class="s">&#39;signatures&#39;</span><span class="p">;</span>

<span class="k">no</span> <span class="nn">warnings</span> <span class="s">&#34;experimental::signatures&#34;</span><span class="p">;</span>

<span class="k">my</span> <span class="nv">$S</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">(</span><span class="nv">@ARGV</span><span class="p">)</span> <span class="sr">//</span> <span class="s">&#39;THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG&#39;</span><span class="p">;</span>

<span class="nb">die</span> <span class="s">&#34;Illegal characters&#34;</span> <span class="k">unless</span> <span class="nv">$S</span> <span class="o">=~</span><span class="sr"> /^[A-Z\s]+$/</span><span class="p">;</span>

<span class="k">my</span> <span class="nv">$N</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">(</span><span class="nv">@ARGV</span><span class="p">)</span> <span class="sr">//</span> <span class="mi">3</span><span class="p">;</span>

<span class="nb">die</span> <span class="s">&#34;Illegal shift $N&#34;</span> <span class="k">if</span> <span class="nv">$N</span> <span class="o">!~</span> <span class="sr">/^\-?\d+$/</span> <span class="o">||</span> <span class="nv">$N</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">25</span> <span class="o">||</span> <span class="nv">$N</span> <span class="o">&gt;</span> <span class="mi">25</span><span class="p">;</span>

<span class="n">say</span> <span class="nb">join</span><span class="p">(</span><span class="s">&#34;&#34;</span><span class="p">,</span> <span class="nb">map</span> <span class="p">{</span> <span class="n">caesar</span><span class="p">(</span><span class="nv">$_</span><span class="p">,</span> <span class="nv">$N</span><span class="p">)</span> <span class="p">}</span> <span class="nb">split</span><span class="p">(</span><span class="sr">//</span><span class="p">,</span> <span class="nv">$S</span><span class="p">));</span>

<span class="k">sub</span> <span class="nf">caesar</span> <span class="p">($char, $shift)
</span><span class="p">{</span>
  <span class="k">return</span> <span class="nv">$char</span> <span class="k">if</span> <span class="nv">$char</span> <span class="ow">eq</span> <span class="s">&#34; &#34;</span><span class="p">;</span>

  <span class="k">my</span> <span class="nv">$code</span> <span class="o">=</span> <span class="nb">ord</span><span class="p">(</span><span class="nv">$char</span><span class="p">);</span>

  <span class="nv">$code</span> <span class="o">-=</span> <span class="nv">$shift</span><span class="p">;</span>

  <span class="nv">$code</span> <span class="o">+=</span> <span class="mi">26</span> <span class="k">if</span> <span class="nv">$code</span> <span class="o">&lt;</span> <span class="mi">65</span><span class="p">;</span>  <span class="c1"># &#39;A&#39;</span>
  <span class="nv">$code</span> <span class="o">-=</span> <span class="mi">26</span> <span class="k">if</span> <span class="nv">$code</span> <span class="o">&gt;</span> <span class="mi">90</span><span class="p">;</span>  <span class="c1"># &#39;Z&#39;</span>

  <span class="k">return</span> <span class="nb">chr</span><span class="p">(</span><span class="nv">$code</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><p>è¿è¡Œå®ƒçš„ç»“æœå’Œ Raku ç‰ˆä¸€æ ·ã€‚</p>
<pre><code>$ ./caesar-cipher-perl 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' 3
QEB NRFZH YOLTK CLU GRJMP LSBO QEB IXWV ALD

$ ./caesar-cipher-perl 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' -3
WKH TXLFN EURZQ IRA MXPSV RYHU WKH ODCB GRJ

$ ./caesar-cipher-perl 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' 13
GUR DHVPX OEBJA SBK WHZCF BIRE GUR YNML QBT

$ ./caesar-cipher-perl 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG' -13
GUR DHVPX OEBJA SBK WHZCF BIRE GUR YNML QBT
</code></pre><h2 id="æŒ‘æˆ˜-0972äºŒè¿›åˆ¶å­å­—ç¬¦ä¸²binary-substrings">æŒ‘æˆ˜ #097.2ï¼šäºŒè¿›åˆ¶å­å­—ç¬¦ä¸²(Binary Substrings)</h2>
<p>ç»™ä½ ä¸€ä¸ªäºŒè¿›åˆ¶å­—ç¬¦ä¸² <code>$B</code> å’Œä¸€ä¸ªæ•´æ•° <code>$S</code>ã€‚</p>
<p>å†™ä¸€ä¸ªè„šæœ¬æ¥æ‹†åˆ†å¤§å°ä¸º <code>$S</code> çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸² <code>$B</code>ï¼Œç„¶åæ‰¾å‡ºä½¿å…¶ç›¸åŒçš„æœ€å°ç¿»è½¬æ¬¡æ•°ã€‚</p>
<p>ä¾‹ 1:
è¾“å…¥: $B = â€œ101100101â€, $S = 3
è¾“å‡º: 1</p>
<p>äºŒè¿›åˆ¶å­å­—ç¬¦ä¸²:
&ldquo;101&rdquo;: 0 flip
&ldquo;100&rdquo;: 1 flip to make it &ldquo;101&rdquo;
&ldquo;101&rdquo;: 0 flip</p>
<p>ä¾‹ 2:
è¾“å…¥ $B = â€œ10110111â€, $S = 4
è¾“å‡º: 2</p>
<p>äºŒè¿›åˆ¶å­å­—ç¬¦ä¸²:
&ldquo;1011&rdquo;: 0 flip
&ldquo;0111&rdquo;: 2 flips to make it &ldquo;1011&rdquo;</p>
<p>æˆ‘ä»¬å…ˆä»ç¬¬ä¸€ä¸ªä¾‹å­ä¸­çš„äºŒè¿›åˆ¶å­å­—ç¬¦ä¸²ä¸­ç æ‰3ä¸ªå­—ç¬¦å—ã€‚</p>
<pre><code>&gt; say &quot;101100101&quot;.comb(3);   # -&gt; (101 100 101)
&gt; say &quot;1011001010&quot;.comb(3);  # -&gt; (101 100 101 0)
</code></pre><p>ç¬¬äºŒè¡Œæ˜¾ç¤ºäº†å¦‚æœé•¿åº¦ä¸åŒ¹é…ä¼šå‘ç”Ÿä»€ä¹ˆã€‚è¿™å°±ç»™äº†æˆ‘ä»¬ä¸€ä¸ªéæ³•çš„å€¼ï¼Œå› ä¸ºæˆ‘ä»¬ä¸èƒ½å°†ä¸€ä½æ•°ç¿»è½¬ä¸ºä¸‰ä½æ•°çš„å€¼ã€‚æ‰€ä»¥æˆ‘ä»¬å¿…é¡»æ·»åŠ ä¸€ä¸ªæ£€æŸ¥ã€‚</p>
<p>ç„¶åæˆ‘ä»¬å°†ç¬¬ä¸€ä¸ªå­ä¸²ä¸å…¶ä½™çš„å­ä¸²è¿›è¡Œæ¯”è¾ƒï¼Œä¸€æ¬¡ä¸€ä¸ªã€‚åœ¨è¿™é‡Œä½¿ç”¨bitwise XORï¼ˆExclusive ORï¼‰è¿ç®—ç¬¦æ˜¯ä¸€ä¸ªåˆç†çš„é€‰æ‹©ã€‚è¿™ç»™äº†æˆ‘ä»¬ä¸€ä¸ªäºŒè¿›åˆ¶å€¼ï¼Œå…¶ä¸­1çš„æ•°é‡å°±æ˜¯è¯¥å­ä¸²çš„ç¿»è½¬æ¬¡æ•°ã€‚Rakuç¡®å®æœ‰ä¸€ä¸ªXORè¿ç®—ç¬¦ã€‚+^. ä½†æ˜¯å®ƒ &ldquo;å°†ä¸¤ä¸ªå‚æ•°éƒ½å¼ºåˆ¶ä¸ºIntï¼Œå¹¶è¿›è¡Œä½æ™ºXORæ“ä½œ&rdquo;(æ ¹æ®æ–‡æ¡£&quot;ï¼›å‚è§docs.raku.org/language/operators#infix_+^)ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨è¿›è¡ŒXORæ“ä½œä¹‹å‰ï¼Œå°†äºŒè¿›åˆ¶å€¼è½¬æ¢ä¸ºåè¿›åˆ¶å€¼ã€‚è®©æˆ‘ä»¬è¯•è¯•ã€‚</p>
<p>è·å–ç¿»è½¬çš„æ¬¡æ•°ã€‚</p>
<pre><code>&gt; say (&quot;10101&quot;.parse-base(2) +^ &quot;10111&quot;.parse-base(2)).base(2).comb.sum;  # -&gt; 1
&gt; say (&quot;11101&quot;.parse-base(2) +^ &quot;10111&quot;.parse-base(2)).base(2).comb.sum;  # -&gt; 2
</code></pre><p>è¿™å½“ç„¶å¯è¡Œï¼Œä½†éœ€è¦å¤§é‡çš„ä»£ç ã€‚æ‰€ä»¥æˆ‘å°†ä½¿ç”¨ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³• - é€ä¸ªæ¯”è¾ƒæ¯ä¸ªæ•°å­—ã€‚</p>
<p>File: binary-substring</p>
<pre><code class="language-raku" data-lang="raku">#! /usr/bin/env raku

subset BinaryString where /^ &lt;[01]&gt;+ $/;                    # [1]
subset PosInt of Int where * &gt; 0;                           # [2]

unit sub MAIN (BinaryString $B = '101100101',               # [1]
               PosInt $S where $B.chars %% $S = 3,          # [2]
	       :v(:$verbose));

my @B     = $B.comb($S.Int);                                # [3]
my $first = @B.shift;                                       # [4]
my $total = 0;                                              # [5]

for @B -&gt; $current                                          # [6]
{
  my $flip = bit-diff($first, $current);                    # [7]
  $total += $flip;                                          # [8]
  say &quot;: $first -&gt; $current -&gt; Flip: $flip&quot; if $verbose;
}

say $total;                                                 # [9]

sub bit-diff ($a, $b)                                       # [7]
{
  my $flip = 0;                                             # [10]

  for ^$a.chars -&gt; $index                                   # [11]
  {
    $flip++ if $a.substr($index,1) ne $b.substr($index,1);  # [12]
  }

  return $flip;
}
</code></pre><p>[1] ç¡®ä¿äºŒè¿›åˆ¶å­—ç¬¦ä¸²æ˜¯åˆæ³•çš„ï¼ˆåªåŒ…å« &ldquo;0 &ldquo;å’Œ &ldquo;1&rdquo;ï¼‰ã€‚</p>
<p>[2] ç¡®ä¿æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼ŒåŒæ—¶ç¡®ä¿å­—ç¬¦ä¸²æ˜¯è¢«å®ƒå¶æ•°åˆ†å‰²çš„ã€‚(ä¾‹å¦‚ï¼Œ&ldquo;4 &ldquo;ç»™æˆ‘ä»¬æä¾›äº†é•¿åº¦ä¸º4çš„å­ä¸²ï¼Œå¦‚æœæœ€åä¸€ä¸ªè¾ƒçŸ­ï¼Œç¨‹åºå°†ä¸­æ­¢ã€‚)</p>
<p>[3] æ¢³å­é€šå¸¸ç”¨äºå°†ä¸€ä¸ªå­—ç¬¦ä¸²åˆ†å‰²æˆå•ä¸ªå­—ç¬¦ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡æŒ‡å®šé•¿åº¦æ¥è·å¾—æ¯ä¸ªå­å­—ç¬¦ä¸²ä¸­çš„å¤šä¸ªå­—ç¬¦ï¼Œæ¯”å¦‚è¿™æ ·ã€‚</p>
<p>[4] ä¾‹å­é¦–å…ˆå°†ç¬¬ä¸€ä¸ªå­ä¸²ä¸è‡ªå·±è¿›è¡Œæ¯”è¾ƒï¼Œç»™å‡ºé›¶ç¿»è½¬ã€‚è¿™æ˜¯æ„šè ¢çš„(ish)ï¼Œæ‰€ä»¥æˆ‘è·³è¿‡è¿™ä¸€ç‚¹ï¼ŒæŠŠç¬¬ä¸€ä¸ªå­ä¸²ç§»å‡ºã€‚</p>
<p>[5] ç»“æœä¼šåˆ°è¿™é‡Œã€‚</p>
<p>[6] å¯¹äºæ¯ä¸€ä¸ªå­ä¸²ï¼ˆé™¤äº†ç¬¬ä¸€ä¸ªï¼Œè§[4]ï¼‰ã€‚</p>
<p>[7] è·å–æ¯ä¸ªå­ä¸²çš„ç¿»è½¬æ¬¡æ•°ã€‚</p>
<p>[8] å¹¶å°†å…¶æ·»åŠ åˆ°æ€»æ•°ä¸­ã€‚</p>
<p>[9] æ‰“å°å®ƒã€‚</p>
<p>[10] ç¿»è½¬çš„æ•°é‡ä¼šåœ¨è¿™é‡Œã€‚</p>
<p>[11] å¯¹äºä¸¤ä¸ªå­ä¸²ä¸­çš„æ¯ä¸ªç´¢å¼•ï¼ˆå…·æœ‰ç›¸åŒçš„é•¿åº¦ï¼‰ã€‚</p>
<p>[12] - å¦‚æœç»™å®šä½ç½®ä¸Šçš„å­—ç¬¦ä¸åŒï¼Œåˆ™åœ¨æ€»æ•°çš„åŸºç¡€ä¸ŠåŠ 1ï¼Œæ„å‘³ç€ç§»åŠ¨ã€‚</p>
<p>See docs.raku.org/routine/comb for more information about comb.</p>
<p>è¿è¡Œå®ƒã€‚</p>
<pre><code>$ ./binary-substring &quot;101100101&quot; 3
 1

$ ./binary-substring -v &quot;101100101&quot; 3
: 101 -&gt; 100 -&gt; Flip: 1
: 101 -&gt; 101 -&gt; Flip: 0
1

$ ./binary-substring &quot;10110111&quot; 4
2

$ ./binary-substring -v &quot;10110111&quot; 4
: 1011 -&gt; 0111 -&gt; Flip: 2
2
</code></pre><p>çœ‹èµ·æ¥ä¸é”™ã€‚</p>
<h2 id="perl">Perl</h2>
<p>è¿™æ˜¯å¯¹ Raku ç‰ˆæœ¬çš„ç›´æ¥ç¿»è¯‘ï¼Œåªæ˜¯æˆ‘å¿…é¡»å®ç° &ldquo;comb&rdquo;ã€‚</p>
<p>æ–‡ä»¶ï¼š binary-substring-perl</p>
<pre><code class="language-raku" data-lang="raku">#! /usr/bin/env perl

use strict;
use warnings;
use feature 'say';
use feature 'signatures';
use Getopt::Long;

no warnings &quot;experimental::signatures&quot;;

my $verbose = 0;

GetOptions(&quot;verbose&quot;  =&gt; \$verbose);

my $B = shift(@ARGV) // '101100101';

die &quot;Not a binary number&quot; unless $B =~ /^[01]+$/;

my $S = shift(@ARGV) // 3;

die &quot;Not an integer&quot; unless $S =~ /^[1-9][0-9]*$/;
die &quot;Not a legal length&quot; if length($B) % $S;

my @B     =  comb($B, $S);
my $first = shift(@B);
my $total = 0;

for my $current (@B)
{
  my $flip = bit_diff($first, $current);
  $total += $flip;
  say &quot;: $first -&gt; $current -&gt; Flip: $flip&quot; if $verbose;
}

say $total;

sub bit_diff ($a, $b)
{
  my $flip = 0;

  for my $index (0 .. length($a))
  {
    $flip++ if substr($a, $index,1) ne substr($b, $index,1);
  }

  return $flip;
}

sub comb ($string, $length = 1)  # [1]
{
  my @result;

  while ($string)
  {
    push(@result, substr($string, 0, $length));
    $string = substr($string, $length);
  }
  return @result;
}
</code></pre><p>[1] ç¼ºå¤±çš„ Raku ä¾‹ç¨‹ &ldquo;comb&rdquo;ã€‚å¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šäº†å®ƒæ‰€è¿”å›çš„æ¯ä¸ªå­ä¸²ä¸­æ‰€åŒ…å«çš„ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°çš„ï¼‰å­ä¸²é•¿åº¦ã€‚</p>
<p>è¿è¡Œå®ƒçš„ç»“æœä¸ Raku ç‰ˆæœ¬ç›¸åŒã€‚</p>
<pre><code>$ ./binary-substring-perl &quot;101100101&quot; 3
1

$ ./binary-substring-perl -v &quot;101100101&quot; 3
: 101 -&gt; 100 -&gt; Flip: 1
: 101 -&gt; 101 -&gt; Flip: 0
1

$ ./binary-substring-perl &quot;101100111&quot; 3
2

$ ./binary-substring-perl -v &quot;101100111&quot; 3
: 101 -&gt; 100 -&gt; Flip: 1
: 101 -&gt; 111 -&gt; Flip: 1
2
</code></pre><p>å°±æ˜¯è¿™æ ·ã€‚</p>
]]></content>
            
                 
                    
                         
                        
                            
                             
                                <category scheme="https://ohmyweekly.github.io/categories/raku" term="raku" label="Raku" />
                            
                        
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://ohmyweekly.github.io/tags/raku" term="raku" label="Raku" />
                             
                                <category scheme="https://ohmyweekly.github.io/tags/rakulang" term="rakulang" label="Rakulang" />
                            
                        
                    
                
            
        </entry>
    
</feed>
