<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">

    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
    
    
    

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5">

    
    <meta name="referrer" content="no-referrer">

    <title>
        
            Raku Other Impl ❚ 焉知非鱼
        
    </title>

    
    


    
    
    
    

    
    
    
    

    
    
    

    
    
    
    <style>
     
     
     :root {
         --theme-color: #ac4142;
         --theme-color-light: rgba(172, 65, 66, 0.2);
     }
     
     html {
         line-height: 1.5;
     }
    </style>

    
    

    
    
    
    
    <link rel="stylesheet" href="/css/refined.min.7f6d3ee611034e4ebcbc063f1db3bc042fecdc8901afbedad80ff02bae409204.css">
    
    <link rel="preload" href="/css/refined.min.7f6d3ee611034e4ebcbc063f1db3bc042fecdc8901afbedad80ff02bae409204.css" as="style">

    



    
        <style>
         
         /* Background */ .chroma { background-color: #ffffff }
/* Error */ .chroma .err { color: #a61717; background-color: #e3d2d2 }
/* LineTableTD */ .chroma .lntd { vertical-align: top; padding: 0; margin: 0; border: 0; }
/* LineTable */ .chroma .lntable { border-spacing: 0; padding: 0; margin: 0; border: 0; width: auto; overflow: auto; display: block; }
/* LineHighlight */ .chroma .hl { display: block; width: 100%;background-color: #ffffcc }
/* LineNumbersTable */ .chroma .lnt { margin-right: 0.4em; padding: 0 0.4em 0 0.4em; }
/* LineNumbers */ .chroma .ln { margin-right: 0.4em; padding: 0 0.4em 0 0.4em; }
/* Keyword */ .chroma .k { color: #000000; font-weight: bold }
/* KeywordConstant */ .chroma .kc { color: #000000; font-weight: bold }
/* KeywordDeclaration */ .chroma .kd { color: #000000; font-weight: bold }
/* KeywordNamespace */ .chroma .kn { color: #000000; font-weight: bold }
/* KeywordPseudo */ .chroma .kp { color: #000000; font-weight: bold }
/* KeywordReserved */ .chroma .kr { color: #000000; font-weight: bold }
/* KeywordType */ .chroma .kt { color: #445588; font-weight: bold }
/* NameAttribute */ .chroma .na { color: #008080 }
/* NameBuiltin */ .chroma .nb { color: #0086b3 }
/* NameBuiltinPseudo */ .chroma .bp { color: #999999 }
/* NameClass */ .chroma .nc { color: #445588; font-weight: bold }
/* NameConstant */ .chroma .no { color: #008080 }
/* NameDecorator */ .chroma .nd { color: #3c5d5d; font-weight: bold }
/* NameEntity */ .chroma .ni { color: #800080 }
/* NameException */ .chroma .ne { color: #990000; font-weight: bold }
/* NameFunction */ .chroma .nf { color: #990000; font-weight: bold }
/* NameLabel */ .chroma .nl { color: #990000; font-weight: bold }
/* NameNamespace */ .chroma .nn { color: #555555 }
/* NameTag */ .chroma .nt { color: #000080 }
/* NameVariable */ .chroma .nv { color: #008080 }
/* NameVariableClass */ .chroma .vc { color: #008080 }
/* NameVariableGlobal */ .chroma .vg { color: #008080 }
/* NameVariableInstance */ .chroma .vi { color: #008080 }
/* LiteralString */ .chroma .s { color: #dd1144 }
/* LiteralStringAffix */ .chroma .sa { color: #dd1144 }
/* LiteralStringBacktick */ .chroma .sb { color: #dd1144 }
/* LiteralStringChar */ .chroma .sc { color: #dd1144 }
/* LiteralStringDelimiter */ .chroma .dl { color: #dd1144 }
/* LiteralStringDoc */ .chroma .sd { color: #dd1144 }
/* LiteralStringDouble */ .chroma .s2 { color: #dd1144 }
/* LiteralStringEscape */ .chroma .se { color: #dd1144 }
/* LiteralStringHeredoc */ .chroma .sh { color: #dd1144 }
/* LiteralStringInterpol */ .chroma .si { color: #dd1144 }
/* LiteralStringOther */ .chroma .sx { color: #dd1144 }
/* LiteralStringRegex */ .chroma .sr { color: #009926 }
/* LiteralStringSingle */ .chroma .s1 { color: #dd1144 }
/* LiteralStringSymbol */ .chroma .ss { color: #990073 }
/* LiteralNumber */ .chroma .m { color: #009999 }
/* LiteralNumberBin */ .chroma .mb { color: #009999 }
/* LiteralNumberFloat */ .chroma .mf { color: #009999 }
/* LiteralNumberHex */ .chroma .mh { color: #009999 }
/* LiteralNumberInteger */ .chroma .mi { color: #009999 }
/* LiteralNumberIntegerLong */ .chroma .il { color: #009999 }
/* LiteralNumberOct */ .chroma .mo { color: #009999 }
/* Operator */ .chroma .o { color: #000000; font-weight: bold }
/* OperatorWord */ .chroma .ow { color: #000000; font-weight: bold }
/* Comment */ .chroma .c { color: #999988; font-style: italic }
/* CommentHashbang */ .chroma .ch { color: #999988; font-style: italic }
/* CommentMultiline */ .chroma .cm { color: #999988; font-style: italic }
/* CommentSingle */ .chroma .c1 { color: #999988; font-style: italic }
/* CommentSpecial */ .chroma .cs { color: #999999; font-weight: bold; font-style: italic }
/* CommentPreproc */ .chroma .cp { color: #999999; font-weight: bold; font-style: italic }
/* CommentPreprocFile */ .chroma .cpf { color: #999999; font-weight: bold; font-style: italic }
/* GenericDeleted */ .chroma .gd { color: #000000; background-color: #ffdddd }
/* GenericEmph */ .chroma .ge { color: #000000; font-style: italic }
/* GenericError */ .chroma .gr { color: #aa0000 }
/* GenericHeading */ .chroma .gh { color: #999999 }
/* GenericInserted */ .chroma .gi { color: #000000; background-color: #ddffdd }
/* GenericOutput */ .chroma .go { color: #888888 }
/* GenericPrompt */ .chroma .gp { color: #555555 }
/* GenericStrong */ .chroma .gs { font-weight: bold }
/* GenericSubheading */ .chroma .gu { color: #aaaaaa }
/* GenericTraceback */ .chroma .gt { color: #aa0000 }
/* GenericUnderline */ .chroma .gl { text-decoration: underline }
/* TextWhitespace */ .chroma .w { color: #bbbbbb }

         
         /* Overrides on top of the theme and Chroma CSS */
/* Chroma-based lines highlighting in code blocks */
.chroma .hl {
    background-color: #e8e8e8;
    /* Extend highlight up to 100 characters (assuming that the code blocks never have more than 100 characters in a line) */
    min-width: 100ch;
}
/* GenericHeading */ .chroma .gh { color: #999999; font-weight: bold }
/* GenericSubheading */ .chroma .gu { color: #aaaaaa; font-weight: bold }

         
        </style>
    

    

    
    
    

    
    <script src="/js/responsive-nav-orig.min.e2b5f2a956b488f466da513820636134defdc38b90ed566248960593f2bb4ba5.js"></script>
    
    <link rel="preload" href="/js/responsive-nav-orig.min.e2b5f2a956b488f466da513820636134defdc38b90ed566248960593f2bb4ba5.js" as="script">

    
    
    <script defer src="/js/libs/fa/fontawesome-all.min.08916ac0fd078adfb58edc890460e2c8990729aee02bca7586404b56805f5219.js"></script>
    
    <link rel="preload" href="/js/libs/fa/fontawesome-all.min.08916ac0fd078adfb58edc890460e2c8990729aee02bca7586404b56805f5219.js" as="script">

    

    

    
    
    

    
    
<!-- rel="me" links for IndieAuth -->







    
 
<meta property="og:title" content="Raku Other Impl" />
<meta property="og:description"
      content="Raku Other Impl" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ohmycloud.github.io/posts/2021-08-31-raku-other-impl/" />


    
        <meta property="article:published_time" content="2021-08-30T00:00:00&#43;00:00"/>
    
    
        <meta property="article:modified_time" content="2021-08-30T00:00:00&#43;00:00"/>
    









    




     <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Raku Other Impl"/>
<meta name="twitter:description" content="Raku Other Impl"/>


    
    
    <link rel="alternate" type="application/jf2post+json" href="https://ohmycloud.github.io/posts/2021-08-31-raku-other-impl/jf2post.json" title="Jf2post for 焉知非鱼" />
    
     



    
    
    
        
    


     
        
        <meta name="DC.Creator" content="焉知非鱼"/>
    



    
    
    
    <meta name="hugo-build-date" content="2024-03-01T16:16:06Z"/>
    <meta name="hugo-commit-hash" content="312735366b20d64bd61bff8627f593749f86c964"/>
    <meta name="generator" content="Hugo 0.123.7">
</head>


    
        <body lang="en">
    

        
        <div class="border" id="home"></div>

        <div class="wrapper">   
            
<nav id="nav" class="nav-collapse opened" aria-hidden="false">
    <ul class="navbar">
        <li><a class="" href="/">Home</a></li>
        
            
                <li><a class="" href="https://ohmycloud.github.io/posts/">Posts</a></li>
            
        
            
                <li><a class="" href="https://ohmycloud.github.io/notes/">Notes</a></li>
            
        
        
            <li><a class="" href="https://ohmycloud.github.io/search/">Search</a></li>
        
    </ul>
</nav>

            <div class="container">
                <header class="masthead">
                    <div class="masthead-title no-text-decoration">
                        <a href="/">焉知非鱼</a> <span class="blinking-cursor">❚</span>
                    </div>
                    <div class="masthead-tagline">
                        Wait the light to fall
                    </div>
                </header>

                








<article class="post h-entry posts">
    <header>
        <div class="center">
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>

</div>

        <h1 class="post-title p-name">Raku Other Impl</h1>

        
        <data class="u-url" value="https://ohmycloud.github.io/posts/2021-08-31-raku-other-impl/"></data>

        <div class="date-syndication">
            


    
    
    <div class="post-date">
        
        <time datetime="2021-08-30T00:00:00+0000" class="dt-published">Mon Aug 30, 2021</time>
        
        
    </div>


            




        </div>
         



    
    
    
        
    


    
        
        <span class="hide">
            &mdash; <a href="https://ohmycloud.github.io/" class="u-author">焉知非鱼</a>
        </span>
    


    </header>

    <div class="content">
        
    <div class="description p-summary">
        
        
        
        
        
            
            
        
        <p>Raku Other Impl</p>
    </div>



        





                       


        <div class="e-content">
            




<p>(这是同一作者的法语文章 <a href="https://linuxfr.org/news/raku-en-2020">Raku en 2020</a> 的翻译/改进版。)</p>
<p>感谢 Elizabeth Mattijsen 帮助校对和提供建议。</p>
<h2 id="table-of-contents">Table Of Contents&nbsp;<a class="headline-hash no-text-decoration" href="#table-of-contents">#</a> </h2>
<ul>
<li><a href="https://dev.to/thibaultduponchelle/raku-other-implementations-archeology-and-glorious-details-c3b#raku-birth">Birth</a></li>
<li><a href="https://dev.to/thibaultduponchelle/raku-other-implementations-archeology-and-glorious-details-c3b#renaming-perl6-to-raku">Renaming process from Perl 6 to Raku</a></li>
<li><a href="https://dev.to/thibaultduponchelle/raku-other-implementations-archeology-and-glorious-details-c3b#parrot-implementation">Implementations based on Parrot</a></li>
<li>Implementations based on Pugs
<ul>
<li><a href="https://dev.to/thibaultduponchelle/raku-other-implementations-archeology-and-glorious-details-c3b#pugs">Pugs</a></li>
<li><a href="https://dev.to/thibaultduponchelle/raku-other-implementations-archeology-and-glorious-details-c3b#v6">v6</a></li>
<li><a href="https://dev.to/thibaultduponchelle/raku-other-implementations-archeology-and-glorious-details-c3b#perlito">Perlito</a></li>
</ul>
</li>
<li>Other implementations
<ul>
<li><a href="https://dev.to/thibaultduponchelle/raku-other-implementations-archeology-and-glorious-details-c3b#std-viv">STD VIV</a></li>
<li><a href="https://dev.to/thibaultduponchelle/raku-other-implementations-archeology-and-glorious-details-c3b#smop">SMOP</a></li>
<li><a href="https://dev.to/thibaultduponchelle/raku-other-implementations-archeology-and-glorious-details-c3b#mildew">Mildew</a></li>
<li><a href="https://dev.to/thibaultduponchelle/raku-other-implementations-archeology-and-glorious-details-c3b#elf">Elf</a></li>
<li><a href="https://dev.to/thibaultduponchelle/raku-other-implementations-archeology-and-glorious-details-c3b#ponie">Ponie</a></li>
<li><a href="https://dev.to/thibaultduponchelle/raku-other-implementations-archeology-and-glorious-details-c3b#punie">Punie</a></li>
<li><a href="https://dev.to/thibaultduponchelle/raku-other-implementations-archeology-and-glorious-details-c3b#yapsi">Yapsi</a></li>
<li><a href="https://dev.to/thibaultduponchelle/raku-other-implementations-archeology-and-glorious-details-c3b#niecza">Niecza</a></li>
<li><a href="https://dev.to/thibaultduponchelle/raku-other-implementations-archeology-and-glorious-details-c3b#topaz">Topaz</a></li>
<li><a href="https://dev.to/thibaultduponchelle/raku-other-implementations-archeology-and-glorious-details-c3b#sapphire">Sapphire</a></li>
</ul>
</li>
<li><a href="https://dev.to/thibaultduponchelle/raku-other-implementations-archeology-and-glorious-details-c3b#conclusion">Conclusion</a></li>
</ul>
<h1 id="raku-的历史">Raku 的历史</h1>
<p>Raku 解释器和虚拟机的历史真的不简单&hellip;如果你听说过 &ldquo;Parrot&rdquo;、&ldquo;PIR&rdquo;、&ldquo;PASM&rdquo;、&ldquo;Pugs&rdquo;、&ldquo;Rakudo&rdquo;、&ldquo;MoarVM&rdquo;、&ldquo;NQP&rdquo;、&ldquo;Rakudo on JVM&rdquo;、&ldquo;Rakudo on Parrot&rdquo;、&ldquo;Mildew&rdquo;、&ldquo;Ponie&rdquo;，但你对所有这些实现感到困惑，那么这篇博文就是为你准备的。</p>
<p>我做了一些研究，以澄清所有的历史和技术细节，并将所有的结果收集在这里，加上几个自制的原始草图，使其对你来说非常清晰。</p>
<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Gd9f_UbE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/es4fa2fm2gkc9w278leq.png"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Gd9f_UbE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/es4fa2fm2gkc9w278leq.png" alt="Lot of original sketches"></a></p>
<h2 id="raku-的诞生">Raku 的诞生&nbsp;<a class="headline-hash no-text-decoration" href="#raku-的诞生">#</a> </h2>
<p>Raku 诞生于 2000年7月18日，源于一个著名的事件：<a href="http://strangelyconsistent.org/blog/happy-10th-anniversary-perl-6">约翰-欧文特在一次会议上把咖啡杯扔到墙上</a>。</p>
<h2 id="改名字的过程-perl6--raku">改名字的过程: Perl 6 → Raku&nbsp;<a class="headline-hash no-text-decoration" href="#改名字的过程-perl6--raku">#</a> </h2>
<p>一种改变其名称的编程语言&hellip;这并不经常发生！&quot;。</p>
<p>最近，Raku 庆祝了它的第二年(或21年)。以下是改名过程。</p>
<ol>
<li>很久以前(大约 2005 年)，人们讨论过一个别名，但后来不了了之。</li>
<li>在回答一个问题时，Larry Wall <a href="https://www.youtube.com/watch?v=E5t8qaAGw9w&amp;t=4885s">提出了一个别名</a></li>
<li><a href="http://blogs.perl.org/users/zoffix_znet/2018/10/a-request-to-larry-wall-to-create-a-language-name-alias-for-perl-6.html">Perl 6 社区的一些人</a>要求使用这个别名</li>
<li>并由 <a href="https://twitter.com/zoffix/status/1058796898235105280">Larry 验证</a></li>
<li>后来，核心团队的一个成员(Elizabeth Mattijsen)在 Raku 的官方 GitHub 上开了一个&quot;问题&quot;，要求改名。</li>
</ol>
<p><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--64r_Qk8t--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/lo68b480gqv0fdl60424.png" alt="Issue from Elizabeth"></p>
<ol start="6">
<li>然后，Elizabeth 向 Raku 的 Git 官方仓库提出了一个合并请求(要求维护者投票)。</li>
</ol>
<p><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--YA5XOLk2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/3p74u1yg15i9ojub2re0.png" alt="Pull Request from Elizabeth"></p>
<ol start="7">
<li>人们投票支持(或弃权)，然后是 Larry Wall 的&quot;祝福&quot;。</li>
</ol>
<p><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--obNsXq6I--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/dy40d146w352sduho8fn.png" alt="Comment from Larry Wall"></p>
<ol start="8">
<li>改名完毕，请欢迎 Raku!</li>
</ol>
<p>下面是改名过程中的有关链接:</p>
<ul>
<li>August 2017: <em><a href="https://www.youtube.com/watch?v=E5t8qaAGw9w&amp;t=4885s">Original idea for Perl 6 Alias</a></em> </li>
<li>October 2018: <em><a href="https://perl6.party/post/A-Request-to-Larry-Wall-to-Create-a-Language-Name-Alias-for-Perl-6">A request to Larry Wall for an alias</a></em> </li>
<li>November 2018: <em><a href="https://liztormato.wordpress.com/2018/11/06/on-raku/">On Raku</a></em> </li>
<li>August 2019: <em><a href="https://github.com/Raku/problem-solving/issues/81">Liz issue — Perl in the name is confusing</a></em> </li>
<li>August 2019: <em><a href="https://github.com/Raku/problem-solving/pull/89">Liz PR — Path to Raku</a></em> </li>
<li>September 2019: <em><a href="https://andrewshitov.com/2019/09/24/on-renaming-perl-6/">On renaming Perl 6</a></em> </li>
<li>October 2019: <em><a href="https://github.com/Raku/problem-solving/pull/89#pullrequestreview-300789072">Blessing of Larry then renaming</a></em></li>
</ul>
<h1 id="编译器框架和虚拟机">编译器、框架和虚拟机</h1>
<p>在这第二部分中，我将详细介绍 Raku 语言过去的实现情况。准备好了，首字母缩写词就要来了!</p>
<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--NWxTuO-Y--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/9rxfpytoflzo0fn51h52.jpg"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--NWxTuO-Y--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/9rxfpytoflzo0fn51h52.jpg" alt="Scrabble letter"></a></p>
<h2 id="哪种是官方实现">哪种是&quot;官方&quot;实现？&nbsp;<a class="headline-hash no-text-decoration" href="#哪种是官方实现">#</a> </h2>
<p>简短的回答。Rakudo 和 MoarVM。</p>
<p>(关于 Rakudo/MoarVM 的细节在本系列的前一篇博文中)</p>
<p>最初的决定是，没有任何实现会被定义为 Raku 的&quot;官方&quot;实现，而是说 &ldquo;Raku 是通过<a href="https://github.com/Raku/roast">官方测试套件</a>的东西&rdquo;。事实上，自2012年以来，有一个事实上的官方实现，即 Rakudo + MoarVM。</p>
<p>在此之前，有 Parrot 框架(2002-2012)以及 Pugs(2005-2007)和其他各种编译器和运行时环境(Mildew、Niecza、Yapsi&hellip;)。这个技术和历史部分将在本文的最后讨论。但让我们回过头来谈一谈开始。</p>
<p>最早宣布创建 Raku 的时间可以追溯到 2000年7月19日。Larry Wall 的想法是使其成为一个超社区项目，直到语言设计，所以他将从要求对规范做出贡献开始。这导致了 361 个 <a href="https://raku.org/archive/rfc/">RFC</a>，Larry Wall 从中产生了<a href="https://raku.org/archive/doc/apocalypse.html">启示录</a>，然后由 Damian Conway 在<a href="https://raku.org/archive/doc/exegesis.html">诠释</a>中解释，后来又在<a href="https://design.raku.org/">提要</a>中进一步详细说明。</p>
<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--uOvX-PGP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/2yd8k3zak4omzmlntgce.png"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--uOvX-PGP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/2yd8k3zak4omzmlntgce.png" alt="RFC Apocalypses Synopses"></a></p>
<p>为历史学家或好奇心强的人提供的链接:</p>
<ul>
<li>2000-1018: the <a href="https://github.com/Raku/museum-items">Raku museum repository</a> partially saves &ldquo;events&rdquo; that are part of Raku&rsquo;s history</li>
<li>2000: <a href="https://www.perl.com/pub/2000/11/perl6rfc.html/">Old blog post criticizing the RFC process (early)</a></li>
<li>2005: <a href="https://www.perlmonks.org/?node_id=455979">Get involved in Pugs</a></li>
<li>2006: <a href="https://www.perlmonks.org/?node_id=628746">Get involved in Perl6</a></li>
<li>2008: <a href="https://www.perlmonks.org/?node_id=690945">Get involved in Perl6</a></li>
<li>2009: <a href="https://www.perlmonks.org/?node_id=771635">Get involved in Perl6</a></li>
<li>2010: <a href="http://strangelyconsistent.org/blog/happy-10th-anniversary-perl-6">Happy 10th anniversary Perl 6</a> (必读 ⚠️)</li>
<li>2015: <a href="https://andrewshitov.com/2015/05/15/interview-with-flavio-glock/">Flavio Glock interview</a></li>
</ul>
<h1 id="parrot">Parrot</h1>
<p>创建于 <a href="https://github.com/parrot/parrot/blob/master/docs/parrothist.pod">2002</a> 年，该框架和 [Parrot 虚拟机](<a href="http://docs.parrot.org/parrot">http://docs.parrot.org/parrot</a> / latest / html)长期以来一直是 Raku 实现的核心(今天已经不是这样了)。Parrot 诞生于一个愚人节，宣布 Perl 和 Python 的统一，甚至即将发行一本关于这个主题的书。</p>
<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--cuqX-GiM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/t2reah7ce74l48neyy0i.gif"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--cuqX-GiM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/t2reah7ce74l48neyy0i.gif" alt="Announcement of the unification of Perl and Python"></a></p>
<p>为什么要建立一个新的虚拟机？</p>
<p>2001 年对 JVM 进行了研究，但认为它不适合动态语言(2010 年仍然不适合，更别提 2021 年了)</p>
<h2 id="编译">编译&nbsp;<a class="headline-hash no-text-decoration" href="#编译">#</a> </h2>
<p>Parrot 提供的不仅仅是一个虚拟机，Parrot 是一个语言创建、编译和执行框架。这个框架使建立高级语言(HLL)成为可能，而且很容易和快速。它已经被 Rakudo 实践了很长时间。</p>
<h3 id="pct">PCT&nbsp;<a class="headline-hash no-text-decoration" href="#pct">#</a> </h3>
<p>PCT 是 Parrot Compiler Tools 的缩写。它的目的是能够创建一个编译器和一个高级语言执行环境(HLL)。</p>
<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--zqBnQr_d--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/11s6q12bt485mx8pp49e.png"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--zqBnQr_d--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/11s6q12bt485mx8pp49e.png" alt="PCT"></a></p>
<p>PCT 是用 PIR 写的 (请看下面的汇编部分).</p>
<h3 id="past">PAST&nbsp;<a class="headline-hash no-text-decoration" href="#past">#</a> </h3>
<p>PAST 是 Parrot Abstract Syntax Tree 的缩写：语法树的内部表示法。</p>
<h3 id="hll">HLL&nbsp;<a class="headline-hash no-text-decoration" href="#hll">#</a> </h3>
<p>HLL 是 <em>High Level Language</em> 的缩写。</p>
<h3 id="pge">PGE&nbsp;<a class="headline-hash no-text-decoration" href="#pge">#</a> </h3>
<p>PGE 原名为 P6GE，<strong>PGE</strong> 是 <em>Perl Grammar Engine</em> 的缩写。以 <strong>HLLCompiler</strong> 为基础。一个 PGE 规则看起来像这样。</p>
<pre tabindex="0"><code>rule term   { &lt;number&gt; | \( &lt;expr&gt; \) }
rule number { \d+ }
rule expr   { &lt;term&gt; ( &#39;+&#39; &lt;term&gt; )* }
</code></pre><p>PGE 被另一个 Raku 编译器 Pugs 所使用(见下文)。</p>
<h3 id="tge">TGE&nbsp;<a class="headline-hash no-text-decoration" href="#tge">#</a> </h3>
<p>TGE 是 <em>Tree Grammar Engine</em> 的缩写。</p>
<h3 id="pact">PACT&nbsp;<a class="headline-hash no-text-decoration" href="#pact">#</a> </h3>
<p><a href="https://github.com/parrot/PACT">PACT</a> 是 <em>Parrot Alternate Compiler Toolkit</em> 的缩写。 PACT 是 PCT 的替代方案，因为 PCT 被认为太有限。</p>
<h2 id="汇编">汇编&nbsp;<a class="headline-hash no-text-decoration" href="#汇编">#</a> </h2>
<h3 id="pasm">PASM&nbsp;<a class="headline-hash no-text-decoration" href="#pasm">#</a> </h3>
<p>PASM 是 <em>Parrot assembly language</em> (PASM) 的缩写。低级别的代码已准备好由 Parrot VM 转换和执行。PASM 代码看起来像这样。</p>
<pre tabindex="0"><code>  set     I1, 1
REDO:
  gt      I1, 10, END
  print   I1
  print   &#34; &#34;
  inc     I1
  branch  REDO
END:
  print &#34;\n&#34;
  end
</code></pre><p>参考:</p>
<ul>
<li><a href="http://www.parrot.org/dev/examples/pasm">PASM code examples</a></li>
<li><a href="https://connect.ed-diamond.com/gnu-linux-magazine">LinuxMag</a> articles from <a href="http://www.mongueurs.net/">french mongueurs</a> on Parrot assembler writing: <a href="http://articles.mongueurs.net/magazines/linuxmag97.html">1</a>, [2](<a href="http://articles.mongueurs.net/">http://articles.mongueurs.net/</a> magazines / linuxmag98.html)and <a href="http://articles.mongueurs.net/magazines/linuxmag99.html">3</a>.</li>
</ul>
<h3 id="imcc">IMCC&nbsp;<a class="headline-hash no-text-decoration" href="#imcc">#</a> </h3>
<p>IMCC 是 <em>Intermediate Code Compiler</em> 的缩写。  它是一个创建和运行 Parrot 字节码的替代工具</p>
<p>IMCC 带来了自己的语言，通常被称为 Parrot 中间语言(PIR)。IMCC 嵌入了 Parrot 的运行环境，因此 IMCC 可以从 PIR 编译到 PASM，然后从 PASM 编译到 PBC，然后执行这个字节码。IMCC 还可以进行优化，尽管它默认不进行优化。</p>
<h3 id="pir">PIR&nbsp;<a class="headline-hash no-text-decoration" href="#pir">#</a> </h3>
<p><a href="http://docs.parrot.org/parrot/latest/html/docs/user/pir/intro.pod.html">PIR</a> 最初被称为 IMC，它是 PASM 的一种叠加，而不是一种高级语言。包含 PIR 代码的文件的后缀为 &ldquo;.imc&rdquo;</p>
<p>这就是 PIR 的样子。</p>
<pre tabindex="0"><code>.sub loopy
        .local int counter
        counter = 0
LOOP:   if counter &gt; 10 goto DONE
        print counter
        print &#34; &#34;
        inc counter
        goto LOOP
DONE:
        print &#34;\n&#34;
        end
.end
</code></pre><p>你可以从这个 <a href="https://www.oreilly.com/library/view/perl-6-essentials/0596004990/ch07.html">IMCC 介绍</a>或这篇关于如何<a href="http://docs.parrot.org/parrot/latest/html/docs/user/pir/intro.pod.html">编写 PIR</a> 的文章中了解更多。请看这里的 <a href="http://www.parrot.org/dev/examples/pir">PIR 例子</a>或甚至 [FR mongueurs 关于 PIR 的详细文档](<a href="http://articles.mongueurs.net/magazines/linuxmag122">http://articles.mongueurs.net/magazines/linuxmag122</a> .html)。</p>
<h2 id="execution">Execution&nbsp;<a class="headline-hash no-text-decoration" href="#execution">#</a> </h2>
<h3 id="nci">NCI&nbsp;<a class="headline-hash no-text-decoration" href="#nci">#</a> </h3>
<p>NCI 是 <em>Native Call Interface</em> 的缩写。</p>
<h3 id="pmc">PMC&nbsp;<a class="headline-hash no-text-decoration" href="#pmc">#</a> </h3>
<p>PMC  是 <em>PolyMorphic Container</em>  或 <em>Parrot Magic Cookies</em> (在虚拟机中表示数据的方式) 的缩写。</p>
<h3 id="pbc">PBC&nbsp;<a class="headline-hash no-text-decoration" href="#pbc">#</a> </h3>
<p>PBC 是 <em>Parrot Byte Code</em> 的缩写。</p>
<h2 id="parrot-虚拟机">Parrot 虚拟机&nbsp;<a class="headline-hash no-text-decoration" href="#parrot-虚拟机">#</a> </h2>
<p>Parrot 虚拟机是一个基于注册表的虚拟机，它不是&quot;标准&quot;(如JVM)。</p>
<p>以下是 Parrot 虚拟机的一些特点。</p>
<ul>
<li>能够管理静态和动态语言</li>
<li>写时复制</li>
<li>管理连续性和封闭性</li>
<li>可以嵌入到 C 代码中</li>
<li>多态容器(灵活的类型存储)</li>
</ul>
<p>很容易将 Parrot 包含在 C 代码中或在 Parrot 中调用 C([原生调用接口](<a href="http://docs.parrot.org/parrot/latest/html/docs/pdds/draft/pdd16_native_call">http://docs.parrot.org/parrot/latest/html/docs/pdds/draft/pdd16_native_call</a> .pod.html))。</p>
<h2 id="基于-parrot-的-raku-实现2002-2012">基于 Parrot 的 Raku 实现(2002-2012)&nbsp;<a class="headline-hash no-text-decoration" href="#基于-parrot-的-raku-实现2002-2012">#</a> </h2>
<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--sJIbzGPC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/0f8hhhiuvjdp1qchkk85.png"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--sJIbzGPC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/0f8hhhiuvjdp1qchkk85.png" alt="PCT IMCC Parrot VM"></a></p>
<p>或者用一个合并的 IMCC 和 Parrot 阶段(后来因为 IMCC 包含 Parrot)。</p>
<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--eLpS76DE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/gz0rr0dmg0qd4qi1hjim.png"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--eLpS76DE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/gz0rr0dmg0qd4qi1hjim.png" alt="PCT IMCC"></a></p>
<p>下面是一个更详细的/技术图表(取自 Parrot 文档)。
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--YTgLgxoq--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/zus5lqpqj0h62i0ys1ri.png"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--YTgLgxoq--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/zus5lqpqj0h62i0ys1ri.png" alt="How Parrot works"></a></p>
<p>许多细节可在 <a href="http://docs.parrot.org/parrot/latest/html/pdds.html">Parrot 设计文档</a>中找到。</p>
<h2 id="parrot-的问题">Parrot 的问题&nbsp;<a class="headline-hash no-text-decoration" href="#parrot-的问题">#</a> </h2>
<p>如果说 Parrot 最初处于 Raku 的中心，那么随着时间的推移，这种情况已经发生了变化。</p>
<ul>
<li>2008: &ldquo;虽然 Parrot 是长期部署 Perl 6 的最可靠的解决方案，但另一方面，事实证明 Parrot 所接受的挑战比之前预期的要消耗更多的时间和资源。&rdquo; (<a href="https://news.perlfoundation.org/post/2008q2_grant_proposal_smop_sim">Perl 基金会新闻</a>)</li>
<li>2013: &ldquo;最新的消息是，Parrot 虚拟机不再是唯一一个享受 Rakudo 独家服务的人了。&rdquo; ([关于 Perl 6 的一切](<a href="http://www.josetteorama.com/all-about-perl-6">http://www.josetteorama.com/all-about-perl-6</a> -interview-of-jonathan-worthington-part-1-of-3 /))</li>
<li>沟通问题</li>
<li>Parrot 逐渐远离了Perl 6(通过变得更加通用)。</li>
</ul>
<p>渐渐地，Rakudo 编译器已经从 Parrot 中解放出来，现在正瞄准新的虚拟机。</p>
<h1 id="pugs-2005-2007">Pugs (2005-2007)</h1>
<p>从这里我们开始考古，真正的考古。</p>
<p>在他短暂的存在中，Pugs 探索了许多架构选择。Pugs 指的是解释器、编译器、运行时环境和测试套件。编译器可以编译成 Haskell、JavaScript、Perl 5 或 PIR(代表 Parrot，如果你记得的话)。</p>
<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--e-N5XaWT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/fs49aubnqum8n29kykix.png"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--e-N5XaWT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/fs49aubnqum8n29kykix.png" alt="Pugs compilation flow"></a></p>
<p>Pugs 是用 Haskell 编写的，在 2007 年后陷入了休眠状态。</p>
<h2 id="编译-1">编译&nbsp;<a class="headline-hash no-text-decoration" href="#编译-1">#</a> </h2>
<p>下面是围绕 Pugs 实现构建的概念。</p>
<h3 id="pcr">PCR&nbsp;<a class="headline-hash no-text-decoration" href="#pcr">#</a> </h3>
<p>PCR  是 <em>Pugs Compiler Rules</em> 的缩写。这是 Raku 的正则表达式引擎的 Perl 5 实现。PCR 在 Pugs 中取代了 PGE。</p>
<h3 id="lrep">LREP&nbsp;<a class="headline-hash no-text-decoration" href="#lrep">#</a> </h3>
<p>LREP 演变成 <em>Pugs::Compiler</em>，后来又演变成 <em>MiniPerl6</em>。</p>
<h3 id="pugscompiler">Pugs::Compiler&nbsp;<a class="headline-hash no-text-decoration" href="#pugscompiler">#</a> </h3>
<p><em>Pugs::Compiler</em> 是一套用于编译 Raku 的 Perl 5 模块。</p>
<h3 id="miniperl6">MiniPerl6&nbsp;<a class="headline-hash no-text-decoration" href="#miniperl6">#</a> </h3>
<p>曾是 Pugs 的一部分，但在一个单独的目录中。<strong>MiniPerl6</strong> 变成了 <strong>KindaPerl6</strong>，然后是 <strong>Perlito6</strong>。</p>
<h3 id="kindaperl6">KindaPerl6&nbsp;<a class="headline-hash no-text-decoration" href="#kindaperl6">#</a> </h3>
<p>KindaPerl6 或 KP6 是一个 Raku grammar 的 Raku 实现，在 Perl 5 中具有引导功能。KindaPerl6 是由 MiniPerl6 构建的。</p>
<h2 id="execution-1">Execution&nbsp;<a class="headline-hash no-text-decoration" href="#execution-1">#</a> </h2>
<h3 id="pil">PIL&nbsp;<a class="headline-hash no-text-decoration" href="#pil">#</a> </h3>
<p>PIL 是 <em>Pugs Intermediate Language</em> 的缩写。PIL 不是人类可读的格式，而是 Pugs 内部的一个抽象的语法树。</p>
<h3 id="pil-run">PIL-Run&nbsp;<a class="headline-hash no-text-decoration" href="#pil-run">#</a> </h3>
<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--foB_sJAc--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/520c6p3qmy2s80i7jl7y.png"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--foB_sJAc--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/520c6p3qmy2s80i7jl7y.png" alt="Pugs PIL Perl"></a></p>
<p>PIL-Run 是建立在一组读取和运行 PIL 的 Perl 5 模块之上的。PIL-Run 是 Pugs 在 Perl 5 中的后端&hellip;在开始时。</p>
<h2 id="基于-pugs-的实现">基于 Pugs 的实现&nbsp;<a class="headline-hash no-text-decoration" href="#基于-pugs-的实现">#</a> </h2>
<h3 id="pugs--各种后端">Pugs + 各种后端&nbsp;<a class="headline-hash no-text-decoration" href="#pugs--各种后端">#</a> </h3>
<p>&ldquo;Pugs compiles and executes&rdquo;
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--3Syq4XgI--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/zr81m45yvcjmgir1579n.png"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--3Syq4XgI--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/zr81m45yvcjmgir1579n.png" alt="Pugs compile and run"></a></p>
<p>&ldquo;Pugs compiles for Parrot (PIR)&rdquo;
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--V98w-PyM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/o68g2x2r9fm3n72i15ac.png"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--V98w-PyM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/o68g2x2r9fm3n72i15ac.png" alt="Pugs PIR"></a></p>
<p>对PIR的编译是分两个阶段进行的，小编把它放大。
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--yLUdJxM5--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/rmjpp55vf46q2tu7esup.png"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--yLUdJxM5--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/rmjpp55vf46q2tu7esup.png" alt="Pugs PIL PIR"></a></p>
<p>&ldquo;Pugs compiles (transpiles?) To JavaScript&rdquo;
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--vn2a61Uf--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/vlh3eqj99kstiw4owk9u.png"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--vn2a61Uf--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/vlh3eqj99kstiw4owk9u.png" alt="Pugs JS"></a></p>
<p>&ldquo;Perl compiles (transpiles?) To Perl 5&rdquo;
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--on5n8_WJ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7y702czqjfsnoty5cr17.png"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--on5n8_WJ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7y702czqjfsnoty5cr17.png" alt="Pugs Perl 5"></a></p>
<h3 id="v6">v6&nbsp;<a class="headline-hash no-text-decoration" href="#v6">#</a> </h3>
<p><strong>v6-pugs</strong> 然后是 <strong>v6-alpha</strong> 和现在的 <a href="https://metacpan.org/pod/v6">v6.pm</a>) 是对 Pugs 的完全重写，使用了 Raku(Pugs::Compiler 和相关模块)和 Perl 5 的混合。它重用了 PIL-Run 的运行环境和&quot;CPAN 的一半&quot;的代码：grining。</p>
<p>现在 v6 在 Perlito6 中发布。<strong>v6.pm</strong> 是 Perlito 和 Pugs 在 Perl 5 中的前端。</p>
<h3 id="perlito">Perlito&nbsp;<a class="headline-hash no-text-decoration" href="#perlito">#</a> </h3>
<p><a href="https://github.com/fglock/Perlito">Perlito 项目</a>是由 <a href="https://github.com/fglock">Flavio S. Glock</a> 领导的。Perlito 项目实际上包含了多种语言的多个编译器，针对各种后端。</p>
<ul>
<li>将 Perl 5 编译成 Java 源代码</li>
<li>在 JVM 中直接运行 Perl 5</li>
<li>将 Perl 5 编译成 JavaScript 源代码，直接在浏览器或 Node.js 中运行 Perl 5</li>
<li>将 Raku 编译为 JavaScript 源代码，直接在浏览器或 Node.js 中运行 Perl6</li>
<li>从 Perl 5 编译到 Perl 5</li>
<li>从 Raku 编译到 Perl 5</li>
<li>从 Raku 编译到 Python 2.6</li>
<li>从 Perl 5 编译到 Perl 6 (正在进行中)</li>
<li>从 Raku 编译到 Ruby 1.9 (正在进行中)</li>
<li>从 Raku 编译到 Go (正在进行中)</li>
<li>从 Raku 编译到 Common Lisp (SBCL) (正在进行中)</li>
</ul>
<p>他不能做的一件事是把 Perl 5 翻译成 Raku。</p>
<p>MiniPerl6 和 KindaPerl6 组成了 Perlito6。Perlito5 是 Perlito6 到 Perl 5 的一个移植。它是 &ldquo;用 Perl 5 实现的 Perl 5&rdquo;。Perlito5 本身是用 Perl 写的。另一方面，Perlito6 是用 Raku 编写的。</p>
<p>Perlito 只实现了 Raku 的一个子集，称为&quot;有用的子集&quot;，它:</p>
<ul>
<li>没有列表上下文</li>
<li>没有继承</li>
<li>没有 laziness</li>
<li>有闭包，但没有协程或连续过程</li>
<li>没有 multis</li>
</ul>
<p>这个&quot;有用的子集&quot;有点类似于 <strong>NQP</strong>(关于 NQP 的细节，请看之前的博文)。</p>
<h1 id="其它编译器运行时环境和虚拟机">其它编译器、运行时环境和虚拟机</h1>
<p>在这一部分，我将继续我对围绕编译器、运行时环境和传统虚拟机的倡议的巡视。</p>
<h2 id="std-和-viv">STD 和 viv&nbsp;<a class="headline-hash no-text-decoration" href="#std-和-viv">#</a> </h2>
<p><a href="https://raku.org/compilers/std-viv">STD 和 viv</a> 是 Larry Wall 的作品。</p>
<p>我们在 <a href="https://github.com/perl6/std/blob/master/STD.pm6">STD</a> 中发现了 Raku 的 grammar&hellip;用 Raku 写的(当时还没有编译器！)。😏 这是引导问题的开始 😀</p>
<p><a href="https://github.com/perl6/std/blob/master/viv">VIV</a> 或字面上的罗马数字 &ldquo;VI → V&rdquo;(因此是 &ldquo;6到5&rdquo;)是一个能够从 Perl 6 转换到 Perl 5 的模块。</p>
<h2 id="smop">SMOP&nbsp;<a class="headline-hash no-text-decoration" href="#smop">#</a> </h2>
<p>最初称为 YAP6，<strong>SMOP</strong> 代表简单元对象编程</p>
<p>SMOP 是用 C 语言为 Raku 编写的编译器和运行时环境，但我们有时说 SMOP 只指运行时环境(它可能是其他编译器的目标)。</p>
<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--bGEbFXPj--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/duyi0u0q1no2uulkav3g.png"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--bGEbFXPj--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/duyi0u0q1no2uulkav3g.png" alt="SMOP YAP6"></a></p>
<p>SMOP 不是一个虚拟机，而是一个类似于 Perl 5 的运行环境，同时具有管理 Raku 的功能。</p>
<h2 id="mildew">Mildew&nbsp;<a class="headline-hash no-text-decoration" href="#mildew">#</a> </h2>
<p>Mildew 是一个 STD 到 SMOP 的编译器。</p>
<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--ZrubIwZ_--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/m37lmxax10b3ri06l67e.png"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--ZrubIwZ_--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/m37lmxax10b3ri06l67e.png" alt="Mildew SMOP"></a></p>
<p>它直接使用了 STD grammar。</p>
<h2 id="elf">Elf&nbsp;<a class="headline-hash no-text-decoration" href="#elf">#</a> </h2>
<p>Elf 是一个用 Raku 编写的编译器，具有 Ruby 语法。它可以发行 Perl 5 或 Lisp。它从未完成。人们期望 Elf 能够针对 SMOP。</p>
<h2 id="ponie">Ponie&nbsp;<a class="headline-hash no-text-decoration" href="#ponie">#</a> </h2>
<p><a href="http://www.poniecode.org/">Ponie</a> 是 Perl On a New Internal Engine 的缩写。这涉及到在 Parrot 虚拟机中运行 Perl 5。在 2006 年停止了。</p>
<p><a href="https://www.nntp.perl.org/group/perl.ponie.dev/2006/08/msg487.html">公告 Jesse Vincent</a></p>
<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--kIDY4Xkw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7df6hvy7bk4dtm3usf9a.png"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--kIDY4Xkw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7df6hvy7bk4dtm3usf9a.png" alt="Ponie"></a></p>
<h2 id="punie">Punie&nbsp;<a class="headline-hash no-text-decoration" href="#punie">#</a> </h2>
<p><a href="https://en.wikipedia.org/wiki/Punie">Punie</a>(直接引用了 Ponie)是 Parrot 的一个 Perl 1 编译器。</p>
<h2 id="yapsi">Yapsi&nbsp;<a class="headline-hash no-text-decoration" href="#yapsi">#</a> </h2>
<p><a href="https://github.com/masak/yapsi">Yapsi</a> 是 Yet Another Perl Six Implementation 的缩写。它是对编译器及其 Raku 运行环境和 Raku 虚拟机的实现。</p>
<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--qsUF5tdY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/l02832y9zhv3ipojelao.png"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--qsUF5tdY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/l02832y9zhv3ipojelao.png" alt="Yapsi"></a></p>
<p><strong>SIC</strong> means <em>(S??) Instruction Code</em>, 这是 Yapsi 自己的字节码。</p>
<h2 id="niecza">Niecza&nbsp;<a class="headline-hash no-text-decoration" href="#niecza">#</a> </h2>
<p><a href="https://github.com/sorear/niecza">Niecza</a> 是一个用 C# 编写的针对 CLR(<a href="https://wiki.winehq.org/Mono">Mono</a>)的 Raku 编译器。</p>
<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--pT99Zehj--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/883yjl1p5f6ql50layt9.png"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--pT99Zehj--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/883yjl1p5f6ql50layt9.png" alt="Niecza Mono"></a></p>
<h2 id="topaz">Topaz&nbsp;<a class="headline-hash no-text-decoration" href="#topaz">#</a> </h2>
<p><a href="http://topaz.sourceforge.net/">Topaz</a> 是在 Perl 6 之前开始用 C++ 重写 Perl 5 的核心，最后放弃了。</p>
<h2 id="sapphire">Sapphire&nbsp;<a class="headline-hash no-text-decoration" href="#sapphire">#</a> </h2>
<p><a href="https://www.perl.com/pub/2000/09/sapphire.html/">Sapphire</a>是 2000年9月对 Perl 5 内部结构的另一次重写，在 Perl 6 公布后不久。更多的是实验，而不是其他的东西。</p>
<p>吁！这是最后一个了。我们完成了。 😀</p>
<h1 id="结论">结论</h1>
<p>在 Raku 以及它的历史和它的实现的历史中可以找到许多有趣的概念(尽管它们中的大多数都已经是消失的世界的一部分了，但它们很值得我们仔细研究)。</p>
<p>我希望这篇冗长的博文能够拨开 Raku 实现的曲折迷雾，了解它的历史，并突出该语言的概念。</p>


        </div>
    </div>
</article>



                <footer>
                    




<div class="no-text-decoration">
    <div class="jump top"><a href="#" title="Top of this page">⮉</a></div>
    <div class="jump bottom"><a href="#bottom" title="Bottom of this page">⮋</a></div>
</div>


 
    
        <div class="hugotoc no-text-decoration">
            <nav id="TableOfContents">
  <ul>
    <li><a href="#table-of-contents">Table Of Contents</a></li>
  </ul>

  <ul>
    <li><a href="#raku-的诞生">Raku 的诞生</a></li>
    <li><a href="#改名字的过程-perl6--raku">改名字的过程: Perl 6 → Raku</a></li>
  </ul>

  <ul>
    <li><a href="#哪种是官方实现">哪种是&quot;官方&quot;实现？</a></li>
  </ul>

  <ul>
    <li><a href="#编译">编译</a>
      <ul>
        <li><a href="#pct">PCT</a></li>
        <li><a href="#past">PAST</a></li>
        <li><a href="#hll">HLL</a></li>
        <li><a href="#pge">PGE</a></li>
        <li><a href="#tge">TGE</a></li>
        <li><a href="#pact">PACT</a></li>
      </ul>
    </li>
    <li><a href="#汇编">汇编</a>
      <ul>
        <li><a href="#pasm">PASM</a></li>
        <li><a href="#imcc">IMCC</a></li>
        <li><a href="#pir">PIR</a></li>
      </ul>
    </li>
    <li><a href="#execution">Execution</a>
      <ul>
        <li><a href="#nci">NCI</a></li>
        <li><a href="#pmc">PMC</a></li>
        <li><a href="#pbc">PBC</a></li>
      </ul>
    </li>
    <li><a href="#parrot-虚拟机">Parrot 虚拟机</a></li>
    <li><a href="#基于-parrot-的-raku-实现2002-2012">基于 Parrot 的 Raku 实现(2002-2012)</a></li>
    <li><a href="#parrot-的问题">Parrot 的问题</a></li>
  </ul>

  <ul>
    <li><a href="#编译-1">编译</a>
      <ul>
        <li><a href="#pcr">PCR</a></li>
        <li><a href="#lrep">LREP</a></li>
        <li><a href="#pugscompiler">Pugs::Compiler</a></li>
        <li><a href="#miniperl6">MiniPerl6</a></li>
        <li><a href="#kindaperl6">KindaPerl6</a></li>
      </ul>
    </li>
    <li><a href="#execution-1">Execution</a>
      <ul>
        <li><a href="#pil">PIL</a></li>
        <li><a href="#pil-run">PIL-Run</a></li>
      </ul>
    </li>
    <li><a href="#基于-pugs-的实现">基于 Pugs 的实现</a>
      <ul>
        <li><a href="#pugs--各种后端">Pugs + 各种后端</a></li>
        <li><a href="#v6">v6</a></li>
        <li><a href="#perlito">Perlito</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#std-和-viv">STD 和 viv</a></li>
    <li><a href="#smop">SMOP</a></li>
    <li><a href="#mildew">Mildew</a></li>
    <li><a href="#elf">Elf</a></li>
    <li><a href="#ponie">Ponie</a></li>
    <li><a href="#punie">Punie</a></li>
    <li><a href="#yapsi">Yapsi</a></li>
    <li><a href="#niecza">Niecza</a></li>
    <li><a href="#topaz">Topaz</a></li>
    <li><a href="#sapphire">Sapphire</a></li>
  </ul>
</nav>
            <a href="#" class="back-to-top">Back to top</a>
        </div>
    
    
<script src="/js/libs/jquery/3.3.1/jquery.slim.min.min.22ee3db0c0e99fd0fbce3aee19672bd53d25469daf734bd4c165649f6eaf7d7f.js"></script>

<link rel="preload" href="/js/libs/jquery/3.3.1/jquery.slim.min.min.22ee3db0c0e99fd0fbce3aee19672bd53d25469daf734bd4c165649f6eaf7d7f.js" as="script">

<script type="application/javascript">(function() {
     var $window = $(window);
     if ($window.width() >= 1400) { 
         var $toc = $('#TableOfContents');
         if ($toc.length > 0) {
             function onScroll(){
                 var currentScroll = $window.scrollTop();
                 var h = $('.content h1, .content h2, .content h3, .content h4, .content h5, .content h6, .h-feed h2');
                 var id = "";
                 h.each(function (i, e) {
                     e = $(e);
                     if (e.offset().top - 10 <= currentScroll) {
                         id = e.attr('id');
                     }
                 });
                 var current = $toc.find('a.current');
                 if (current.length == 1 && current.eq(0).attr('href') == '#' + id) return true;

                 current.each(function (i, e) {
                     $(e).removeClass('current').siblings('ul').hide();
                 });
                 $toc.find('a[href="#' + id + '"]').parentsUntil('#TableOfContents').each(function (i, e) {
                     $(e).children('a').addClass('current').siblings('ul').show();
                 });
             }
             $window.on('scroll', onScroll);
             $(document).ready(function() {
                 $toc.find('a').parent('li').find('ul').hide();
                 onScroll();
                 document.getElementsByClassName('hugotoc')[0].style.display = '';
             });}}})();</script>








<div class="backtotop center no-text-decoration">
    <a href="#">back to <span class="top">top</span></a>
</div>


<div class="right">
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>

</div>
<div class="clear-float"></div>



<div class="prev-next-navigator clear-float">
    
        <span class="prev-post left no-text-decoration">
            <a href="https://ohmycloud.github.io/posts/2021-08-30-raku-features/" class="nobr">« Raku Features</a>
        </span>
    
    
        <span class="next-post right no-text-decoration">
            <a href="https://ohmycloud.github.io/notes/2021-08-06-105-c-plus-plus-algorithms-in-one-line-of-raku/" class="nobr">105 C&#43;&#43; Algorithms in One Line of Raku »</a>
        </span>
    
</div>


<a id="bottom"></a>









                       







                    <ul class="no-bullets feed right inline">
    
        
        
    
</ul>
<div class="clear-float"></div>

                </footer>
                <hr />
            </div>               

            <footer> 
                

<ul class="social no-text-decoration">
    
</ul>










 
    
    



<p class="generated no-text-decoration">
    Generated using  <a href="https://gitlab.com/kaushalmodi/hugo-theme-refined"><code class="nobr">hugo-theme-refined</code></a> + <span class="nobr">Hugo <a href="https://github.com/gohugoio/hugo/commit/312735366b20d64bd61bff8627f593749f86c964">0.123.7</a></span>
</p>

<p>
    
</p>




<div class="badges no-text-decoration">
    
    

    
</div>




<script type="application/javascript">var nav=responsiveNav("#nav");</script>




<script defer src="/js/libs/fragmentions/wrapper.min.e8c468c89edc4f5dccaa8c720c6b220b3088a16cd7b1e4a1e3345985788260c9.js"></script>









            </footer>
        </div> 
    </body>
</html>
