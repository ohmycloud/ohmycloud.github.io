<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">

    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
    
    
    

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5">

    
    <meta name="referrer" content="no-referrer">

    <title>
        
            æ•°å€¼ âš ç„‰çŸ¥éé±¼
        
    </title>

    
    


    
    
    
    

    
    
    
    

    
    
    

    
    
    
    <style>
     
     
     :root {
         --theme-color: #ac4142;
         --theme-color-light: rgba(172, 65, 66, 0.2);
     }
     
     html {
         line-height: 1.5;
     }
    </style>

    
    

    
    
    
    
    <link rel="stylesheet" href="/css/refined.min.7f6d3ee611034e4ebcbc063f1db3bc042fecdc8901afbedad80ff02bae409204.css">
    
    <link rel="preload" href="/css/refined.min.7f6d3ee611034e4ebcbc063f1db3bc042fecdc8901afbedad80ff02bae409204.css" as="style">

    



    
        <style>
         
         /* Background */ .chroma { background-color: #ffffff }
/* Error */ .chroma .err { color: #a61717; background-color: #e3d2d2 }
/* LineTableTD */ .chroma .lntd { vertical-align: top; padding: 0; margin: 0; border: 0; }
/* LineTable */ .chroma .lntable { border-spacing: 0; padding: 0; margin: 0; border: 0; width: auto; overflow: auto; display: block; }
/* LineHighlight */ .chroma .hl { display: block; width: 100%;background-color: #ffffcc }
/* LineNumbersTable */ .chroma .lnt { margin-right: 0.4em; padding: 0 0.4em 0 0.4em; }
/* LineNumbers */ .chroma .ln { margin-right: 0.4em; padding: 0 0.4em 0 0.4em; }
/* Keyword */ .chroma .k { color: #000000; font-weight: bold }
/* KeywordConstant */ .chroma .kc { color: #000000; font-weight: bold }
/* KeywordDeclaration */ .chroma .kd { color: #000000; font-weight: bold }
/* KeywordNamespace */ .chroma .kn { color: #000000; font-weight: bold }
/* KeywordPseudo */ .chroma .kp { color: #000000; font-weight: bold }
/* KeywordReserved */ .chroma .kr { color: #000000; font-weight: bold }
/* KeywordType */ .chroma .kt { color: #445588; font-weight: bold }
/* NameAttribute */ .chroma .na { color: #008080 }
/* NameBuiltin */ .chroma .nb { color: #0086b3 }
/* NameBuiltinPseudo */ .chroma .bp { color: #999999 }
/* NameClass */ .chroma .nc { color: #445588; font-weight: bold }
/* NameConstant */ .chroma .no { color: #008080 }
/* NameDecorator */ .chroma .nd { color: #3c5d5d; font-weight: bold }
/* NameEntity */ .chroma .ni { color: #800080 }
/* NameException */ .chroma .ne { color: #990000; font-weight: bold }
/* NameFunction */ .chroma .nf { color: #990000; font-weight: bold }
/* NameLabel */ .chroma .nl { color: #990000; font-weight: bold }
/* NameNamespace */ .chroma .nn { color: #555555 }
/* NameTag */ .chroma .nt { color: #000080 }
/* NameVariable */ .chroma .nv { color: #008080 }
/* NameVariableClass */ .chroma .vc { color: #008080 }
/* NameVariableGlobal */ .chroma .vg { color: #008080 }
/* NameVariableInstance */ .chroma .vi { color: #008080 }
/* LiteralString */ .chroma .s { color: #dd1144 }
/* LiteralStringAffix */ .chroma .sa { color: #dd1144 }
/* LiteralStringBacktick */ .chroma .sb { color: #dd1144 }
/* LiteralStringChar */ .chroma .sc { color: #dd1144 }
/* LiteralStringDelimiter */ .chroma .dl { color: #dd1144 }
/* LiteralStringDoc */ .chroma .sd { color: #dd1144 }
/* LiteralStringDouble */ .chroma .s2 { color: #dd1144 }
/* LiteralStringEscape */ .chroma .se { color: #dd1144 }
/* LiteralStringHeredoc */ .chroma .sh { color: #dd1144 }
/* LiteralStringInterpol */ .chroma .si { color: #dd1144 }
/* LiteralStringOther */ .chroma .sx { color: #dd1144 }
/* LiteralStringRegex */ .chroma .sr { color: #009926 }
/* LiteralStringSingle */ .chroma .s1 { color: #dd1144 }
/* LiteralStringSymbol */ .chroma .ss { color: #990073 }
/* LiteralNumber */ .chroma .m { color: #009999 }
/* LiteralNumberBin */ .chroma .mb { color: #009999 }
/* LiteralNumberFloat */ .chroma .mf { color: #009999 }
/* LiteralNumberHex */ .chroma .mh { color: #009999 }
/* LiteralNumberInteger */ .chroma .mi { color: #009999 }
/* LiteralNumberIntegerLong */ .chroma .il { color: #009999 }
/* LiteralNumberOct */ .chroma .mo { color: #009999 }
/* Operator */ .chroma .o { color: #000000; font-weight: bold }
/* OperatorWord */ .chroma .ow { color: #000000; font-weight: bold }
/* Comment */ .chroma .c { color: #999988; font-style: italic }
/* CommentHashbang */ .chroma .ch { color: #999988; font-style: italic }
/* CommentMultiline */ .chroma .cm { color: #999988; font-style: italic }
/* CommentSingle */ .chroma .c1 { color: #999988; font-style: italic }
/* CommentSpecial */ .chroma .cs { color: #999999; font-weight: bold; font-style: italic }
/* CommentPreproc */ .chroma .cp { color: #999999; font-weight: bold; font-style: italic }
/* CommentPreprocFile */ .chroma .cpf { color: #999999; font-weight: bold; font-style: italic }
/* GenericDeleted */ .chroma .gd { color: #000000; background-color: #ffdddd }
/* GenericEmph */ .chroma .ge { color: #000000; font-style: italic }
/* GenericError */ .chroma .gr { color: #aa0000 }
/* GenericHeading */ .chroma .gh { color: #999999 }
/* GenericInserted */ .chroma .gi { color: #000000; background-color: #ddffdd }
/* GenericOutput */ .chroma .go { color: #888888 }
/* GenericPrompt */ .chroma .gp { color: #555555 }
/* GenericStrong */ .chroma .gs { font-weight: bold }
/* GenericSubheading */ .chroma .gu { color: #aaaaaa }
/* GenericTraceback */ .chroma .gt { color: #aa0000 }
/* GenericUnderline */ .chroma .gl { text-decoration: underline }
/* TextWhitespace */ .chroma .w { color: #bbbbbb }

         
         /* Overrides on top of the theme and Chroma CSS */
/* Chroma-based lines highlighting in code blocks */
.chroma .hl {
    background-color: #e8e8e8;
    /* Extend highlight up to 100 characters (assuming that the code blocks never have more than 100 characters in a line) */
    min-width: 100ch;
}
/* GenericHeading */ .chroma .gh { color: #999999; font-weight: bold }
/* GenericSubheading */ .chroma .gu { color: #aaaaaa; font-weight: bold }

         
        </style>
    

    

    
    
    

    
    <script src="/js/responsive-nav-orig.min.e2b5f2a956b488f466da513820636134defdc38b90ed566248960593f2bb4ba5.js"></script>
    
    <link rel="preload" href="/js/responsive-nav-orig.min.e2b5f2a956b488f466da513820636134defdc38b90ed566248960593f2bb4ba5.js" as="script">

    
    
    <script defer src="/js/libs/fa/fontawesome-all.min.08916ac0fd078adfb58edc890460e2c8990729aee02bca7586404b56805f5219.js"></script>
    
    <link rel="preload" href="/js/libs/fa/fontawesome-all.min.08916ac0fd078adfb58edc890460e2c8990729aee02bca7586404b56805f5219.js" as="script">

    

    

    
    
    

    
    
<!-- rel="me" links for IndieAuth -->







    
 
<meta property="og:title" content="æ•°å€¼" />
<meta property="og:description"
      content=" " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ohmycloud.github.io/posts/52.numerics/" />


    
        <meta property="article:published_time" content="2018-11-27T21:13:31&#43;08:00"/>
    
    
        <meta property="article:modified_time" content="2018-11-27T21:13:31&#43;08:00"/>
    









    




     <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="æ•°å€¼"/>
<meta name="twitter:description" content=" "/>


    
    
    <link rel="alternate" type="application/jf2post+json" href="https://ohmycloud.github.io/posts/52.numerics/jf2post.json" title="Jf2post for ç„‰çŸ¥éé±¼" />
    
     



    
    
    
        
    


     
        
        <meta name="DC.Creator" content="ç„‰çŸ¥éé±¼"/>
    



    
    
    
    <meta name="hugo-build-date" content="2024-03-01T16:16:06Z"/>
    <meta name="hugo-commit-hash" content="312735366b20d64bd61bff8627f593749f86c964"/>
    <meta name="generator" content="Hugo 0.123.7">
</head>


    
        <body lang="en">
    

        
        <div class="border" id="home"></div>

        <div class="wrapper">   
            
<nav id="nav" class="nav-collapse opened" aria-hidden="false">
    <ul class="navbar">
        <li><a class="" href="/">Home</a></li>
        
            
                <li><a class="" href="https://ohmycloud.github.io/posts/">Posts</a></li>
            
        
            
                <li><a class="" href="https://ohmycloud.github.io/notes/">Notes</a></li>
            
        
        
            <li><a class="" href="https://ohmycloud.github.io/search/">Search</a></li>
        
    </ul>
</nav>

            <div class="container">
                <header class="masthead">
                    <div class="masthead-title no-text-decoration">
                        <a href="/">ç„‰çŸ¥éé±¼</a> <span class="blinking-cursor">âš</span>
                    </div>
                    <div class="masthead-tagline">
                        Wait the light to fall
                    </div>
                </header>

                








<article class="post h-entry posts">
    <header>
        <div class="center">
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in â€˜rakulangâ€™"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with â€˜rakulangâ€™"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>

</div>

        <h1 class="post-title p-name">æ•°å€¼</h1>

        
        <data class="u-url" value="https://ohmycloud.github.io/posts/52.numerics/"></data>

        <div class="date-syndication">
            


    
    
    <div class="post-date">
        
        <time datetime="2018-11-27T21:13:31+0800" class="dt-published">Tue Nov 27, 2018</time>
        
        
    </div>


            




        </div>
         



    
    
    
        
    


    
        
        <span class="hide">
            &mdash; <a href="https://ohmycloud.github.io/" class="u-author">ç„‰çŸ¥éé±¼</a>
        </span>
    


    </header>

    <div class="content">
        


        





                       


        <div class="e-content">
            




<h1 id="int">Int</h1>
<p><code>Int</code> ç±»å‹æä¾›ä»»æ„å¤§å°çš„æ•´æ•°ã€‚å®ƒä»¬å¯ä»¥åƒè®¡ç®—æœºå†…å­˜å…è®¸çš„é‚£æ ·å¤§ï¼Œè™½ç„¶æœ‰äº›å®ç°åœ¨è¢«è¦æ±‚ç”ŸæˆçœŸæ­£æƒŠäººå¤§å°çš„æ•´æ•°æ—¶ä¼šé€‰æ‹©æŠ›å‡ºæ•°å­—æº¢å‡ºé”™è¯¯ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="mi">10</span><span class="o">**</span><span class="mi">600</span><span class="o">**</span><span class="mi">600</span>
</span></span><span class="line"><span class="cl"><span class="c1"># OUTPUT: Â«Numeric overflowÂ» </span>
</span></span></code></pre></div><p>ä¸æŸäº›è¯­è¨€ä¸åŒï¼Œå½“ä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯ <a href="https://docs.raku.org/type/Int">Int</a> ç±»å‹æ—¶ï¼Œä½¿ç”¨<a href="https://docs.raku.org/routine/$SOLIDUS"><code>/</code>è¿ç®—ç¬¦</a>æ‰§è¡Œé™¤æ³•å°†ç”Ÿæˆå°æ•°ï¼Œè€Œä¸æ‰§è¡Œä»»ä½•èˆå…¥ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="mi">4</span><span class="o">/</span><span class="mi">5</span><span class="p">;</span> <span class="c1"># OUTPUT: Â«0.8Â» </span>
</span></span></code></pre></div><p>è¿™ç§é™¤æ³•äº§ç”Ÿçš„ç±»å‹æ˜¯ <a href="https://docs.raku.org/type/Rat">Rat</a> æˆ– <a href="https://docs.raku.org/type/Num">Num</a> ç±»å‹ã€‚æ¢ç®—åï¼Œå¦‚æœåˆ†æ•°çš„åˆ†æ¯æ˜¯å°äº64ä½ï¼Œåˆ™äº§ç”Ÿ <a href="https://docs.raku.org/type/Rat">Rat</a>, å¦åˆ™äº§ç”Ÿ <a href="https://docs.raku.org/type/Num">Num</a> ç±»å‹ã€‚</p>
<p>å¦‚æœä½ æƒ³è½å¾— <a href="https://docs.raku.org/type/Int">Int</a> çš„ç»“æœï¼Œé‚£ä¹ˆ <a href="https://docs.raku.org/routine/div">div</a> å’Œ <a href="https://docs.raku.org/routine/narrow">narrow</a> ä¾‹ç¨‹å¯èƒ½ä¼šæœ‰å¸®åŠ©ï¼Œåªè¦æœ‰å¯èƒ½ã€‚<a href="https://docs.raku.org/routine/div">div</a>è¿ç®—ç¬¦æ‰§è¡Œæ•´é™¤ï¼Œä¸¢å¼ƒä½™æ•°ï¼Œè€Œ<a href="https://docs.raku.org/routine/narrow">narrow</a> ä¼šæŠŠæ•°æ‹Ÿåˆåˆ°å®ƒé€‚åˆçš„æœ€çª„ç±»å‹ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="mi">5</span> <span class="ow">div</span> <span class="mi">2</span><span class="p">;</span> <span class="c1"># OUTPUT: Â«2Â» </span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1"># Result `2` is narrow enough to be an Int: </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">(</span><span class="mi">4</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="nb">narrow</span><span class="p">;</span> <span class="c1"># OUTPUT: Â«2Â» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">(</span><span class="mi">4</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="nb">narrow</span><span class="o">.^</span><span class="nb">name</span><span class="p">;</span> <span class="c1"># OUTPUT: Â«IntÂ» </span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1"># But 2.5 has fractional part, so it ends up being a Rat type: </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">(</span><span class="mi">5</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="nb">narrow</span><span class="o">.^</span><span class="nb">name</span><span class="p">;</span> <span class="c1"># OUTPUT: Â«RatÂ» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">(</span><span class="mi">5</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="nb">narrow</span><span class="p">;</span>       <span class="c1"># OUTPUT: Â«2.5Â» </span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1"># Denominator is too big for a Rat, so a Num is produced: </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">10</span>â¹â¹<span class="p">;</span> <span class="c1"># OUTPUT: Â«1e-99Â» </span>
</span></span></code></pre></div><p>Raku å…·æœ‰ <a href="https://docs.raku.org/type/FatRat">FatRat</a> ç±»å‹ï¼Œå¯æä¾›ä»»æ„ç²¾åº¦çš„åˆ†æ•°ã€‚ä¸ºä»€ä¹ˆåœ¨ä¸Šä¸€ä¸ªä¾‹å­ä¸­ç”Ÿæˆäº†æœ‰é™ç²¾åº¦çš„ <a href="https://docs.raku.org/type/Num">Num</a> è€Œä¸æ˜¯ <a href="https://docs.raku.org/type/FatRat">FatRat</a> ç±»å‹ï¼ŸåŸå› æ˜¯ï¼šæ€§èƒ½ã€‚å¤§å¤šæ•°æ“ä½œéƒ½å¾ˆå¥½ï¼Œç²¾åº¦æŸå¤±å¾ˆå°‘ï¼Œå› æ­¤ä¸éœ€è¦ä½¿ç”¨æ›´æ˜‚è´µçš„ <a href="https://docs.raku.org/type/FatRat">FatRat</a> ç±»å‹ã€‚å¦‚æœæ‚¨å¸Œæœ›è·å¾—é¢å¤–çš„ç²¾åº¦ï¼Œåˆ™éœ€è¦è‡ªå·±å®ä¾‹åŒ–ä¸€ä¸ªã€‚</p>
<h1 id="numhttpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top"><code>Num</code></a></h1>
<p><a href="https://docs.raku.org/type/Num">Num</a> ç±»å‹æä¾› <a href="https://en.wikipedia.org/wiki/Double-precision_floating-point_format">åŒç²¾åº¦æµ®ç‚¹</a>åè¿›åˆ¶æ•°ï¼Œåœ¨å…¶ä»–è¯­è¨€ä¸­æœ‰æ—¶è¢«ç§°ä¸ºâ€œdoublesâ€ã€‚</p>
<p><a href="https://docs.raku.org/type/Num">Num</a> å­—é¢é‡çš„å†™æ³•æ˜¯ä½¿ç”¨å­—æ¯ <code>e</code> ä¸æŒ‡æ•°åˆ†å‰²å¼€ã€‚è¯·è®°ä½ï¼Œå³ä½¿æŒ‡æ•°ä¸ºé›¶ï¼Œå­—æ¯<code>e</code> <strong>ä¹Ÿæ˜¯å¿…éœ€çš„</strong>ï¼Œå¦åˆ™æ‚¨å°†å¾—åˆ°ä¸€ä¸ª<a href="https://docs.raku.org/type/Rat">Rat</a> æœ‰ç†æ•°å­—é¢é‡ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="mf">42e0</span><span class="o">.^</span><span class="nb">name</span><span class="p">;</span> <span class="c1"># OUTPUT: Â«NumÂ» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="mf">42.0</span><span class="o">.^</span><span class="nb">name</span><span class="p">;</span> <span class="c1"># OUTPUT: Â«RatÂ» </span>
</span></span></code></pre></div><p>åŒºåˆ†å¤§å°å†™çš„å•è¯ <a href="https://docs.raku.org/type/Num#Inf">Inf</a> å’Œ <a href="https://docs.raku.org/type/Num#NaN">NaN</a> åˆ†åˆ«è¡¨ç¤ºç‰¹æ®Šå€¼ infinity å’Œ not-a-numberã€‚å¯ä»¥ä½¿ç”¨ U+221E INFINITYï¼ˆ<code>âˆ</code>ï¼‰å­—ç¬¦ä»£æ›¿ <a href="https://docs.raku.org/type/Num#Inf">Inf</a>ï¼š</p>
<p>Raku  å°½å¯èƒ½éµå¾ª<a href="https://en.wikipedia.org/wiki/IEEE_754">IEEE 754-2008æµ®ç‚¹è¿ç®—æ ‡å‡†ï¼Œ</a>è®¡åˆ’åœ¨ä»¥åçš„è¯­è¨€ç‰ˆæœ¬ä¸­å®ç°æ›´å¤šçš„ä¸€è‡´æ€§ã€‚è¯¥è¯­è¨€ä¿è¯ä¸ºä»»ä½•ç»™å®šçš„ <a href="https://docs.raku.org/type/Num">Num</a> å­—é¢é‡é€‰æ‹©æœ€æ¥è¿‘çš„å¯è¡¨ç¤ºæ•°å­—ï¼Œå¹¶ä¸”ç¡®å®æ”¯æŒè´Ÿé›¶å’Œ<a href="https://en.wikipedia.org/wiki/Denormal_number">éæ­£è§„</a>ï¼ˆä¹Ÿç§°ä¸ºâ€œæ¬¡æ­£è§„â€ï¼‰ã€‚</p>
<p>è¯·è®°ä½ï¼Œåƒ <a href="https://docs.raku.org/routine/say">say</a> æˆ– <a href="https://docs.raku.org/routine/put">put</a> è¿™æ ·çš„è¾“å‡ºä¾‹ç¨‹ä¸ä¼šéå¸¸éš¾ä»¥åŒºåˆ†è¾“å‡º<a href="https://docs.raku.org/type/Numeric">æ•°å­—</a>ç±»å‹çš„æ–¹å¼ï¼Œå¹¶ä¸”å¯èƒ½é€‰æ‹©å°†<a href="https://docs.raku.org/type/Num">Num</a>æ˜¾ç¤ºä¸º<a href="https://docs.raku.org/type/Int">Int</a>æˆ–<a href="https://docs.raku.org/type/Rat">Rat</a>æ•°å­—ã€‚è¦è·å¾—æ›´æ˜ç¡®çš„è¾“å‡ºå­—ç¬¦ä¸²ï¼Œè¯·ä½¿ç”¨<a href="https://docs.raku.org/routine/perl">perl</a>æ–¹æ³•ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span>  <span class="mf">1e0</span><span class="p">;</span>      <span class="c1"># OUTPUT: Â«1Â» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="mf">.5e0</span><span class="p">;</span>      <span class="c1"># OUTPUT: Â«0.5Â» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span>  <span class="mf">1e0</span><span class="o">.</span><span class="nb">perl</span><span class="p">;</span> <span class="c1"># OUTPUT: Â«1e0Â» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="mf">.5e0</span><span class="o">.</span><span class="nb">perl</span><span class="p">;</span> <span class="c1"># OUTPUT: Â«0.5e0Â» </span>
</span></span></code></pre></div><h1 id="complexhttpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top"><code>Complex</code></a></h1>
<p><a href="https://en.wikipedia.org/wiki/Complex_plane">å¤å¹³é¢</a>çš„<a href="https://docs.raku.org/type/Complex">å¤æ•°</a>å‹æ•°å€¼ã€‚<a href="https://docs.raku.org/type/Complex">å¤æ•°</a>å¯¹è±¡åŒ…æ‹¬ä¸¤ä¸ª <a href="https://docs.raku.org/type/Num">Num</a> å¯¹è±¡ä»¥è¡¨ç¤ºå¤æ•°çš„<a href="https://docs.raku.org/routine/re">å®éƒ¨</a>å’Œ<a href="https://docs.raku.org/routine/im">è™šéƒ¨</a>ã€‚</p>
<p>è¦åˆ›å»º<a href="https://docs.raku.org/type/Complex">å¤æ•°</a>ï¼Œå¯ä»¥åœ¨ä»»ä½•å…¶ä»–éå¤æ•°ä¸Šä½¿ç”¨<a href="https://docs.raku.org/routine/i">åç¼€<code>i</code>è¿ç®—ç¬¦</a>ï¼Œå¯é€‰æ‹©ä½¿ç”¨åŠ æ³•è®¾ç½®å®éƒ¨ã€‚è¦ä½¿ç”¨<code>i</code>è¿ç®—ç¬¦ä½œç”¨åœ¨ <code>NaN</code> æˆ– <code>Inf</code> å­—é¢é‡ä¸Šï¼Œè¯·ä½¿ç”¨åæ–œæ å°†å…¶ä¸å®ƒä»¬åˆ†å¼€ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="mi">42</span><span class="no">i</span><span class="p">;</span>      <span class="c1"># OUTPUT: Â«0+42iÂ» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="mi">73</span><span class="o">+</span><span class="mi">42</span><span class="no">i</span><span class="p">;</span>   <span class="c1"># OUTPUT: Â«73+42iÂ» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="mi">73</span><span class="o">+</span><span class="no">Inf</span>\<span class="no">i</span><span class="p">;</span> <span class="c1"># OUTPUT: Â«73+Inf\iÂ» </span>
</span></span></code></pre></div><p>è¯·è®°ä½ï¼Œä¸Šé¢çš„è¯­æ³•åªæ˜¯ä¸€ä¸ªé™„åŠ è¡¨è¾¾å¼å’Œä¼˜å…ˆçº§è§„åˆ™é€‚ç”¨ã€‚å®ƒä¹Ÿä¸èƒ½ç”¨äºç¦æ­¢è¡¨è¾¾å¼çš„åœ°æ–¹ï¼Œä¾‹å¦‚å¸¸è§„å‚æ•°ä¸­çš„å­—é¢é‡ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="c1"># Precedence of `*` is higher than that of `+` </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">73</span><span class="o">+</span><span class="mi">10</span><span class="no">i</span><span class="p">;</span> <span class="c1"># OUTPUT: Â«146+10iÂ» </span>
</span></span></code></pre></div><p>ä¸ºäº†é¿å…è¿™äº›é—®é¢˜ï¼Œæ‚¨å¯ä»¥é€‰æ‹©ä½¿ç”¨<a href="https://docs.raku.org/type/Complex">å¤æ•°</a>å­—é¢é‡è¯­æ³•ï¼Œå…¶ä¸­åŒ…æ‹¬ä½¿ç”¨å°–æ‹¬å·åŒ…å›´å®éƒ¨å’Œè™šéƒ¨ï¼Œ<em>è€Œä¸åŒ…å«ä»»ä½•ç©ºæ ¼</em>ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">&lt;</span><span class="s">73+10i</span><span class="p">&gt;;</span> <span class="c1"># OUTPUT: Â«146+20iÂ» </span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">multi</span> <span class="nf">how-is-it</span> <span class="p">(&lt;</span><span class="s">2+4i</span><span class="p">&gt;)</span> <span class="p">{</span> <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">that&#39;s my favorite number!</span><span class="p">&#34;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">multi</span> <span class="nf">how-is-it</span> <span class="ow">(|)</span>      <span class="p">{</span> <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">meh</span><span class="p">&#34;</span>                        <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="n">how-is-it</span> <span class="mi">2</span><span class="o">+</span><span class="mi">4</span><span class="no">i</span><span class="p">;</span>  <span class="c1"># OUTPUT: Â«that&#39;s my favorite number!Â» </span>
</span></span><span class="line"><span class="cl"><span class="n">how-is-it</span> <span class="mi">3</span><span class="o">+</span><span class="mi">2</span><span class="no">i</span><span class="p">;</span>  <span class="c1"># OUTPUT: Â«mehÂ» </span>
</span></span></code></pre></div><h1 id="rationalhttpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top"><code>Rational</code></a></h1>
<p>æ‰§è¡Œ <a href="https://docs.raku.org/type/Rational">Rational</a> è§’è‰²çš„ç±»å‹æä¾›é«˜ç²¾åº¦å’Œä»»æ„ç²¾åº¦çš„åè¿›åˆ¶æ•°ã€‚ç”±äºç²¾åº¦è¶Šé«˜ï¼Œæ€§èƒ½æŸå¤±è¶Šå¤§ï¼Œ<a href="https://docs.raku.org/type/Rational">Rational</a> ç±»å‹æœ‰ä¸¤ç§å½¢å¼ï¼š<a href="https://docs.raku.org/type/Rat">Rat</a> å’Œ <a href="https://docs.raku.org/type/FatRat">FatRat</a>ã€‚<a href="https://docs.raku.org/type/Rat">Rat</a> æ˜¯æœ€å¸¸ç”¨çš„å˜ä½“, å…¶åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹é™çº§æˆ <a href="https://docs.raku.org/type/Num">Num</a>ï¼Œå½“å®ƒä¸å†èƒ½å®¹çº³æ‰€æœ‰çš„è¦æ±‚ç²¾åº¦æ—¶ã€‚<a href="https://docs.raku.org/type/FatRat">FatRat</a> æ˜¯ä¿æŒå¢é•¿æä¾›æ‰€æœ‰æ‰€éœ€çš„ç²¾åº¦ä»»æ„ç²¾åº¦çš„å˜ä½“ã€‚</p>
<h2 id="rathttpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top"><code>Rat</code></a>&nbsp;<a class="headline-hash no-text-decoration" href="#rathttpsdocsrakuorglanguagenumerics___top">#</a> </h2>
<p>æœ€å¸¸è§çš„ <a href="https://docs.raku.org/type/Rational">Rational</a> ç±»å‹ã€‚å®ƒæ”¯æŒæœ‰ 64 ä½åˆ†æ¯çš„æœ‰ç†æ•°ï¼ˆåœ¨å°†åˆ†æ•°æ¢ç®—åˆ°æœ€å°åˆ†æ¯ä¹‹åï¼‰ã€‚<code>Rat</code> å¯ä»¥ç›´æ¥åˆ›å»ºå…·æœ‰è¾ƒå¤§åˆ†æ¯çš„å¯¹è±¡ï¼Œä½†æ˜¯ï¼Œå½“å…·æœ‰è¿™æ ·çš„åˆ†æ¯çš„ <code>Rat</code> æ˜¯æ•°å­¦è¿ç®—çš„ç»“æœæ—¶ï¼Œå®ƒä»¬ä¼šé™çº§ä¸º <a href="https://docs.raku.org/type/Num">Num</a> å¯¹è±¡ã€‚</p>
<p>åœ¨è®¸å¤šå…¶ä»–è¯­è¨€ä¸­ <a href="https://docs.raku.org/type/Rat">Rat</a> å­—é¢é‡ä½¿ç”¨å’Œ <a href="https://docs.raku.org/type/Num">Num</a> å­—é¢é‡ç±»ä¼¼çš„è¯­æ³•ï¼Œä½¿ç”¨ç‚¹æ¥è¡¨ç¤ºæ•°å­—æ˜¯åè¿›åˆ¶ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="mf">.1</span> <span class="o">+</span> <span class="mf">.2</span> <span class="o">==</span> <span class="mf">.3</span><span class="p">;</span> <span class="c1"># OUTPUT: Â«TrueÂ» </span>
</span></span></code></pre></div><p>å¦‚æœä½ åœ¨è®¸å¤šå¸¸ç”¨è¯­è¨€ä¸­æ‰§è¡Œä¸ä¸Šè¿°ç±»ä¼¼çš„è¯­å¥, ç”±äºæµ®ç‚¹æ•°å­¦çš„ç²¾åº¦ï¼Œæ‚¨å°†å¾—åˆ° <code>False</code> ä½œä¸ºç­”æ¡ˆã€‚è¦åœ¨ Raku ä¸­è·å¾—ç›¸åŒçš„ç»“æœï¼Œä½ å¿…é¡»ä½¿ç”¨ <a href="https://docs.raku.org/type/Num">Num</a> å­—é¢é‡ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="mf">.1e0</span> <span class="o">+</span> <span class="mf">.2e0</span> <span class="o">==</span> <span class="mf">.3e0</span><span class="p">;</span> <span class="c1"># OUTPUT: Â«FalseÂ» </span>
</span></span></code></pre></div><p>You can also use <a href="https://docs.raku.org/routine/$SOLIDUS"><code>/</code> division operator</a> with <a href="https://docs.raku.org/type/Int">Int</a> or <a href="https://docs.raku.org/type/Rat">Rat</a> objects to produce a <a href="https://docs.raku.org/type/Rat">Rat</a>:</p>
<p>æ‚¨è¿˜å¯ä»¥ä½¿ç”¨å…·æœ‰ <a href="https://docs.raku.org/type/Int">Int</a> æˆ– <a href="https://docs.raku.org/type/Rat">Rat</a> å¯¹è±¡çš„<a href="https://docs.raku.org/routine/$SOLIDUS"><code>/</code>é™¤æ³•è¿ç®—ç¬¦</a>æ¥ç”Ÿæˆ <a href="https://docs.raku.org/type/Rat">Rat</a>ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">;</span>     <span class="c1"># OUTPUT: Â«0.75Â» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="mi">3</span><span class="o">/</span><span class="mf">4.2</span><span class="p">;</span>   <span class="c1"># OUTPUT: Â«0.714286Â» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="mf">1.1</span><span class="o">/</span><span class="mf">4.2</span><span class="p">;</span> <span class="c1"># OUTPUT: Â«0.261905Â» </span>
</span></span></code></pre></div><p>Keep in mind the above syntax is just a division expression and precedence rules apply. It also cannot be used in places that forbid expressions, such as literals in routine parameters.</p>
<p>è¯·è®°ä½ï¼Œä¸Šé¢çš„è¯­æ³•åªæ˜¯ä¸€ä¸ªåº”ç”¨äº†ä¼˜å…ˆçº§è§„åˆ™çš„é™¤æ³•è¡¨è¾¾å¼ã€‚å®ƒä¹Ÿä¸èƒ½ç”¨äºç¦æ­¢è¡¨è¾¾å¼çš„åœ°æ–¹ï¼Œä¾‹å¦‚ä¾‹ç¨‹å‚æ•°ä¸­çš„å­—é¢é‡ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="c1"># Precedence of power operators is higher than division </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="mi">3</span><span class="o">/</span><span class="mi">2</span>Â²<span class="p">;</span> <span class="c1"># OUTPUT: Â«0.75Â» </span>
</span></span></code></pre></div><p>ä¸ºäº†é¿å…è¿™äº›é—®é¢˜ï¼Œæ‚¨å¯ä»¥é€‰æ‹©ä½¿ç”¨ <a href="https://docs.raku.org/type/Rational">Rational</a> å­—é¢é‡è¯­æ³•ï¼Œå®ƒç”¨å°–æ‹¬å·æ‹¬èµ·åˆ†å­å’Œåˆ†æ¯ï¼Œ<em>ä¸å¸¦ä»»ä½•ç©ºæ ¼</em>ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&lt;</span><span class="s">3/2</span><span class="p">&gt;</span>Â²<span class="p">;</span> <span class="c1"># OUTPUT: Â«2.25Â» </span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">multi</span> <span class="nf">how-is-it</span> <span class="p">(&lt;</span><span class="s">3/2</span><span class="p">&gt;)</span> <span class="p">{</span> <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">that&#39;s my favorite number!</span><span class="p">&#34;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">multi</span> <span class="nf">how-is-it</span> <span class="ow">(|)</span>     <span class="p">{</span> <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">meh</span><span class="p">&#34;</span>                        <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="n">how-is-it</span> <span class="mi">3</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>  <span class="c1"># OUTPUT: Â«that&#39;s my favorite number!Â» </span>
</span></span><span class="line"><span class="cl"><span class="n">how-is-it</span> <span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">;</span>  <span class="c1"># OUTPUT: Â«mehÂ» </span>
</span></span></code></pre></div><p>æœ€åï¼Œä»»ä½•å…·æœ‰ <code>No</code> å±æ€§çš„è¡¨ç¤ºå°æ•°çš„ Unicode å­—ç¬¦éƒ½å¯ä»¥ç”¨ä½œ<a href="https://docs.raku.org/type/Rat">Rat</a> å­—é¢é‡ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> Â½ <span class="o">+</span> â…“ <span class="o">+</span> â… <span class="o">+</span> â…™<span class="p">;</span> <span class="c1"># OUTPUT: Â«1.625Â» </span>
</span></span></code></pre></div><h3 id="åˆ†è§£ä¸º-numhttpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">åˆ†è§£ä¸º <code>Num</code></a>&nbsp;<a class="headline-hash no-text-decoration" href="#åˆ†è§£ä¸º-numhttpsdocsrakuorglanguagenumerics___top">#</a> </h3>
<p>If a <em>mathematical operation</em> that produces a <a href="https://docs.raku.org/type/Rat">Rat</a> answer would produce a <a href="https://docs.raku.org/type/Rat">Rat</a> with denominator larger than 64 bits, that operation would instead return a <a href="https://docs.raku.org/type/Num">Num</a> object. When <em>constructing</em> a <a href="https://docs.raku.org/type/Rat">Rat</a> (i.e. when it is not a result of some mathematical expression), however, a larger denominator can be used:</p>
<p>å¦‚æœäº§ç”Ÿ <a href="https://docs.raku.org/type/Rat">Rat</a> ç­”æ¡ˆçš„<em>æ•°å­¦è¿ç®—</em>ä¼šäº§ç”Ÿåˆ†æ¯å¤§äº64ä½çš„ <a href="https://docs.raku.org/type/Rat">Rat</a>ï¼Œåˆ™è¯¥æ“ä½œå°†è¿”å› <a href="https://docs.raku.org/type/Num">Num</a> å¯¹è±¡ã€‚å½“<em>æ„å»º</em>ä¸€ä¸ª<a href="https://docs.raku.org/type/Rat">Rat</a>ï¼ˆå³ï¼Œå½“å®ƒä¸æ˜¯ä¸€äº›æ•°å­¦è¡¨è¾¾å¼çš„ç»“æœï¼‰æ—¶ï¼Œä½†æ˜¯ï¼Œæ›´å¤§çš„åˆ†æ¯å¯ä»¥ä½¿ç”¨ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$a</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span>â¶â´ <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">$a</span><span class="p">;</span>                   <span class="c1"># OUTPUT: Â«0.000000000000000000054Â» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">$a</span><span class="o">.^</span><span class="nb">name</span><span class="p">;</span>             <span class="c1"># OUTPUT: Â«RatÂ» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">$a</span><span class="o">.</span><span class="nb">nude</span><span class="p">;</span>              <span class="c1"># OUTPUT: Â«(1 18446744073709551615)Â» </span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$b</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">2</span>â¶â´<span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">$b</span><span class="p">;</span>                   <span class="c1"># OUTPUT: Â«5.421010862427522e-20Â» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">$b</span><span class="o">.^</span><span class="nb">name</span><span class="p">;</span>             <span class="c1"># OUTPUT: Â«NumÂ» </span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$c</span> <span class="o">=</span> <span class="kt">Rat</span><span class="o">.</span><span class="nb">new</span><span class="p">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span>â¶â´<span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">$c</span><span class="p">;</span>                   <span class="c1"># OUTPUT: Â«0.000000000000000000054Â» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">$c</span><span class="o">.^</span><span class="nb">name</span><span class="p">;</span>             <span class="c1"># OUTPUT: Â«RatÂ» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">$c</span><span class="o">.</span><span class="nb">nude</span><span class="p">;</span>              <span class="c1"># OUTPUT: Â«(1 18446744073709551616)Â» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">$c</span><span class="o">.</span><span class="kt">Num</span><span class="p">;</span>               <span class="c1"># OUTPUT: Â«5.421010862427522e-20Â» </span>
</span></span></code></pre></div><h2 id="fatrathttpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top"><code>FatRat</code></a>&nbsp;<a class="headline-hash no-text-decoration" href="#fatrathttpsdocsrakuorglanguagenumerics___top">#</a> </h2>
<p>æœ€åä¸€ä¸ª <a href="https://docs.raku.org/type/Rational">Rational</a> ç±»å‹ - <a href="https://docs.raku.org/type/FatRat">FatRat</a> - ä¿ç•™ä½ æ‰€è¦æ±‚çš„æ‰€æœ‰ç²¾åº¦ï¼Œå°†åˆ†å­å’Œåˆ†æ¯å­˜å‚¨ä¸ºä¸¤ä¸ª <a href="https://docs.raku.org/type/Int">Int</a> å¯¹è±¡ã€‚<a href="https://docs.raku.org/type/FatRat">FatRat</a> æ¯” <a href="https://docs.raku.org/type/Rat">Rat</a> æ›´å…·ä¼ æŸ“æ€§ï¼Œæœ‰è¿™ä¹ˆå¤šçš„ <a href="https://docs.raku.org/type/FatRat">FatRat</a> æ•°å­¦è¿ç®—ä¼šäº§ç”Ÿå¦ä¸€ä¸ª <a href="https://docs.raku.org/type/FatRat">FatRat</a>ï¼Œä¿ç•™æ‰€æœ‰å¯ç”¨çš„ç²¾åº¦ã€‚å½“ <a href="https://docs.raku.org/type/Rat">Rat</a> é€€åŒ–ä¸º <a href="https://docs.raku.org/type/Num">Num</a> æ—¶ï¼Œä½¿ç”¨ <a href="https://docs.raku.org/type/FatRat">FatRat </a> çš„æ•°å­¦è¿ç®—ä¼šæŒç»­ä¸æ–­ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">((</span><span class="mi">42</span> <span class="o">+</span> <span class="kt">Rat</span><span class="o">.</span><span class="nb">new</span><span class="p">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="p">))</span><span class="o">/</span><span class="mi">999999999999999999</span><span class="p">)</span><span class="o">.^</span><span class="nb">name</span><span class="p">;</span>         <span class="c1"># OUTPUT: Â«RatÂ» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">((</span><span class="mi">42</span> <span class="o">+</span> <span class="kt">Rat</span><span class="o">.</span><span class="nb">new</span><span class="p">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="p">))</span><span class="o">/</span><span class="mi">9999999999999999999</span><span class="p">)</span><span class="o">.^</span><span class="nb">name</span><span class="p">;</span>        <span class="c1"># OUTPUT: Â«NumÂ» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">((</span><span class="mi">42</span> <span class="o">+</span> <span class="kt">FatRat</span><span class="o">.</span><span class="nb">new</span><span class="p">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="p">))</span><span class="o">/</span><span class="mi">999999999999999999</span><span class="p">)</span><span class="o">.^</span><span class="nb">name</span><span class="p">;</span>      <span class="c1"># OUTPUT: Â«FatRatÂ» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">((</span><span class="mi">42</span> <span class="o">+</span> <span class="kt">FatRat</span><span class="o">.</span><span class="nb">new</span><span class="p">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="p">))</span><span class="o">/</span><span class="mi">99999999999999999999999</span><span class="p">)</span><span class="o">.^</span><span class="nb">name</span><span class="p">;</span> <span class="c1"># OUTPUT: Â«FatRatÂ» </span>
</span></span></code></pre></div><p>æ²¡æœ‰ç‰¹æ®Šçš„è¿ç®—ç¬¦æˆ–è¯­æ³•å¯ç”¨äºæ„é€  <a href="https://docs.raku.org/type/FatRat">FatRat</a> å¯¹è±¡ã€‚åªéœ€ä½¿ç”¨ <a href="https://docs.raku.org/type/FatRat#%28Rational%29_method_new"><code>FatRat.new</code></a> æ–¹æ³•ï¼Œå°†åˆ†å­ä½œä¸ºç¬¬ä¸€ä¸ªä½ç½®å‚æ•°ï¼Œå°†åˆ†æ¯ä½œä¸ºç¬¬äºŒä¸ªä½ç½®å‚æ•°ã€‚</p>
<p>å¦‚æœæ‚¨çš„ç¨‹åºéœ€è¦å¤§é‡çš„ <a href="https://docs.raku.org/type/FatRat">FatRat</a> åˆ›å»ºï¼Œæ‚¨å¯ä»¥åˆ›å»ºè‡ªå·±çš„è‡ªå®šä¹‰è¿ç®—ç¬¦ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">sub</span> <span class="nb">infix</span><span class="o">:</span><span class="p">&lt;</span><span class="s">ğŸ™¼</span><span class="p">&gt;</span> <span class="p">{</span> <span class="kt">FatRat</span><span class="o">.</span><span class="nb">new</span><span class="o">:</span> <span class="nv">$^a</span><span class="o">,</span> <span class="nv">$^b</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">(</span><span class="mi">1</span>ğŸ™¼<span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="nb">perl</span><span class="p">;</span> <span class="c1"># OUTPUT: Â«FatRat.new(1, 3)Â» </span>
</span></span></code></pre></div><h2 id="æ‰“å°-rationalshttpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">æ‰“å° rationals</a>&nbsp;<a class="headline-hash no-text-decoration" href="#æ‰“å°-rationalshttpsdocsrakuorglanguagenumerics___top">#</a> </h2>
<p>è¯·è®°ä½ï¼Œåƒ <a href="https://docs.raku.org/routine/say">say</a> æˆ– <a href="https://docs.raku.org/routine/put">put</a> è¿™æ ·çš„è¾“å‡ºä¾‹ç¨‹ä¸ä¼šåŠ›å›¾åŒºåˆ†<a href="https://docs.raku.org/type/Numeric">æ•°å­—</a>ç±»å‹å¦‚ä½•è¾“å‡ºï¼Œå¹¶ä¸”å¯èƒ½é€‰æ‹©å°† <a href="https://docs.raku.org/type/Num">Num</a> æ˜¾ç¤ºä¸º <a href="https://docs.raku.org/type/Int">Int</a> æˆ– <a href="https://docs.raku.org/type/Rat">Rat</a> æ•°å­—ã€‚è¦è·å¾—æ›´æ˜ç¡®çš„è¾“å‡ºå­—ç¬¦ä¸²ï¼Œè¯·ä½¿ç”¨ <a href="https://docs.raku.org/routine/perl">perl</a> æ–¹æ³•ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="mf">1.0</span><span class="p">;</span>        <span class="c1"># OUTPUT: Â«1Â» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> â…“<span class="p">;</span>          <span class="c1"># OUTPUT: Â«0.333333Â» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="mf">1.0</span><span class="o">.</span><span class="nb">perl</span><span class="p">;</span>   <span class="c1"># OUTPUT: Â«1.0Â» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> â…“<span class="o">.</span><span class="nb">perl</span><span class="p">;</span>     <span class="c1"># OUTPUT: Â«&lt;1/3&gt;Â» </span>
</span></span></code></pre></div><p>æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œæ‚¨å¯ä»¥é€‰æ‹©åœ¨ <a href="https://docs.raku.org/routine/nude">nude</a> ä¸­æŸ¥çœ‹ <a href="https://docs.raku.org/type/Rational">Rational</a> å¯¹è±¡ï¼Œæ˜¾ç¤ºå…¶åˆ†å­å’Œåˆ†æ¯ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> â…“<span class="p">;</span>          <span class="c1"># OUTPUT: Â«0.333333Â» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="mi">4</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>        <span class="c1"># OUTPUT: Â«2Â» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> â…“<span class="o">.</span><span class="nb">perl</span><span class="p">;</span>     <span class="c1"># OUTPUT: Â«&lt;1/3&gt;Â» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&lt;</span><span class="s">4/2</span><span class="p">&gt;</span><span class="o">.</span><span class="nb">nude</span><span class="p">;</span> <span class="c1"># OUTPUT: Â«(2 1)Â» </span>
</span></span></code></pre></div><h1 id="division-by-zerohttpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">Division by zero</a></h1>
<p>åœ¨è®¸å¤šè¯­è¨€ä¸­ï¼Œé™¤ä»¥é›¶ç«‹é©¬ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚åœ¨ Raku ä¸­ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå–å†³äºä½ è¦é™¤çš„ä¸œè¥¿ä»¥åŠä½ å¦‚ä½•ä½¿ç”¨ç»“æœã€‚</p>
<p>Raku éµå¾ª <a href="https://en.wikipedia.org/wiki/IEEE_754">IEEE 754-2008æµ®ç‚¹è¿ç®—æ ‡å‡†</a>ï¼Œä½†ç”±äºå†å²åŸå› ï¼Œ6.c å’Œ 6.d è¯­è¨€ç‰ˆæœ¬ä¸å®Œå…¨ç¬¦åˆã€‚<a href="https://docs.raku.org/type/Num">Num</a>è¢«é›¶é™¤äº§ç”Ÿ <a href="https://docs.raku.org/type/Failure">Failure</a>ï¼Œè€Œ<a href="https://docs.raku.org/type/Complex">å¤æ•°</a>è¢«é›¶é™¤äº§ç”Ÿ <code>NaN</code> éƒ¨ä»¶, æ— è®ºåˆ†å­æ˜¯ä»€ä¹ˆã€‚</p>
<p>ä» 6.e è¯­è¨€å¼€å§‹ï¼Œ<a href="https://docs.raku.org/type/Num">Num</a> å’Œ <a href="https://docs.raku.org/type/Complex">Complex</a> é™¤ä»¥é›¶å°†äº§ç”Ÿ<a href="https://docs.raku.org/type/Num#Inf">-Inf</a>ï¼Œ<code>+Inf</code> æˆ– <a href="https://docs.raku.org/type/Num#NaN">NaN</a>, è¿™å–å†³äºåˆ†å­åˆ†åˆ«æ˜¯è´Ÿæ•°ï¼Œæ­£æ•°è¿˜æ˜¯é›¶ï¼ˆå¯¹äº<a href="https://docs.raku.org/type/Complex">å¤æ•°</a>ï¼Œå®éƒ¨å’Œè™šéƒ¨æ˜¯ <a href="https://docs.raku.org/type/Num">Num</a> å¹¶ä¸”è¢«åˆ†åˆ«è€ƒè™‘ï¼‰ã€‚</p>
<p><a href="https://docs.raku.org/type/Int">Int</a> æ•°å­—çš„é™¤æ³•äº§ç”Ÿä¸€ä¸ª <a href="https://docs.raku.org/type/Rat">Rat</a> å¯¹è±¡ï¼ˆæˆ– <a href="https://docs.raku.org/type/Num">Num</a>ï¼Œå¦‚æœåœ¨æ¢ç®—ä¹‹ååˆ†æ¯å¤§äº64ä½ï¼Œå½“ä½ é™¤ä»¥é›¶æ—¶å°±ä¸æ˜¯è¿™ç§æƒ…å†µï¼‰ã€‚è¿™æ„å‘³ç€è¿™ç§é™¤æ³•æ°¸è¿œä¸ä¼šäº§ç”Ÿ<a href="https://docs.raku.org/type/Exception">å¼‚å¸¸</a>æˆ–<a href="https://docs.raku.org/type/Failure">å¤±è´¥</a>ã€‚ç»“æœæ˜¯é›¶åˆ†æ¯æœ‰ç†æ•°ï¼Œè¿™å¯èƒ½æ˜¯çˆ†ç‚¸æ€§çš„ã€‚</p>
<h2 id="zero-denominator-rationalshttpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">Zero-denominator rationals</a>&nbsp;<a class="headline-hash no-text-decoration" href="#zero-denominator-rationalshttpsdocsrakuorglanguagenumerics___top">#</a> </h2>
<p><a href="https://docs.raku.org/type/FatRat">é›¶åˆ†æ¯</a> æœ‰ç†æ•°æ˜¯ä¸€ä¸ªæ‰®æ¼” <a href="https://docs.raku.org/type/Rational">Rational</a> è§’è‰²çš„æ•°å­—ï¼Œå®ƒåœ¨æ ¸å¿ƒæ•°å­—ä¸­å°†æ˜¯ <a href="https://docs.raku.org/type/Rat">Rat</a> å’Œ <a href="https://docs.raku.org/type/FatRat">FatRat</a> å¯¹è±¡ï¼Œå…¶åˆ†æ¯ä¸ºé›¶ã€‚è¿™æ ·æ ¹æ®åŸå§‹åˆ†å­æ˜¯å¦ä¸ºè´Ÿï¼Œåˆ†åˆ«ä¸ºé›¶æˆ–æ­£æ•°, æœ‰ç†æ•°çš„åˆ†å­è¢«å½’ä¸€åŒ–åˆ°<code>-1</code>ï¼Œ<code>0</code>æˆ–<code>1</code>ã€‚</p>
<p>å¯ä»¥åœ¨ä¸éœ€è¦å®é™…é™¤æ³•çš„æƒ…å†µä¸‹æ‰§è¡Œçš„æ“ä½œæ˜¯éçˆ†ç‚¸æ€§çš„ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å•ç‹¬æ£€æŸ¥ <a href="https://docs.raku.org/routine/nude">nude</a> ä¸­çš„<a href="https://docs.raku.org/routine/numerator">åˆ†å­</a>å’Œ<a href="https://docs.raku.org/routine/denominator">åˆ†æ¯</a>ï¼Œæˆ–æ‰§è¡Œæ•°å­¦è¿ç®—ï¼Œè€Œä¸ä¼šå‡ºç°ä»»ä½•å¼‚å¸¸æˆ–å¤±è´¥ã€‚</p>
<p>è½¬æ¢é›¶åˆ†æ¯æœ‰ç†æ•°åˆ° <a href="https://docs.raku.org/type/Num">Num</a> éµå¾ª <a href="https://en.wikipedia.org/wiki/IEEE_754">IEEE</a> å…¬çº¦ï¼Œç»“æœæ˜¯<code>-Inf</code>ï¼Œ<code>Inf</code>ï¼Œæˆ– <code>NaN</code>ï¼Œè¿™å–å†³äºåˆ†å­æ˜¯å¦åˆ†åˆ«æ˜¯è´Ÿï¼Œæ­£ï¼Œæˆ–é›¶ã€‚ä»å¦ä¸€ä¸ªæ–¹é¢æ¥çœ‹ä¹Ÿæ˜¯å¦‚æ­¤ï¼šè½¬æ¢<code>Â±Inf</code>/ <code>NaN</code>åˆ°å…¶ä¸­ä¸€ä¸ª <a href="https://docs.raku.org/type/Rational">Rational</a> ç±»å‹å°†äº§ç”Ÿå…·æœ‰é€‚å½“åˆ†å­çš„é›¶åˆ†æ¯æœ‰ç†æ•°ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span>  <span class="p">&lt;</span><span class="s">1/0</span><span class="p">&gt;</span><span class="o">.</span><span class="kt">Num</span><span class="p">;</span>   <span class="c1"># OUTPUT: Â«InfÂ» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&lt;</span><span class="s">-1/0</span><span class="p">&gt;</span><span class="o">.</span><span class="kt">Num</span><span class="p">;</span>   <span class="c1"># OUTPUT: Â«-InfÂ» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span>  <span class="p">&lt;</span><span class="s">0/0</span><span class="p">&gt;</span><span class="o">.</span><span class="kt">Num</span><span class="p">;</span>   <span class="c1"># OUTPUT: Â«NaNÂ» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="no">Inf</span><span class="o">.</span><span class="kt">Rat</span><span class="o">.</span><span class="nb">nude</span><span class="p">;</span> <span class="c1"># OUTPUT: Â«(1 0)Â» </span>
</span></span></code></pre></div><p>è¦æ±‚é <a href="https://en.wikipedia.org/wiki/IEEE_754">IEEE</a> é™¤æ³•çš„åˆ†å­å’Œåˆ†æ¯çš„æ‰€æœ‰å…¶ä»–æ“ä½œå°†å¯¼è‡´æŠ›å‡ºå¼‚å¸¸ <code>X::Numeric::DivideByZero</code>ã€‚æœ€å¸¸è§çš„æ­¤ç±»æ“ä½œå¯èƒ½æ˜¯å°è¯•æ‰“å°æˆ–å­—ç¬¦ä¸²åŒ–é›¶åˆ†æ¯æœ‰ç†æ•°ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># OUTPUT: </span>
</span></span><span class="line"><span class="cl"><span class="c1"># Attempt to divide by zero using div </span>
</span></span><span class="line"><span class="cl"><span class="c1">#  in block &lt;unit&gt; at -e line 1 </span>
</span></span></code></pre></div><h1 id="åŒè´¨å¼‚å½¢httpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">åŒè´¨å¼‚å½¢</a></h1>
<p><a href="https://docs.raku.org/language/glossary#index-entry-Allomorph">Allomorphs</a> æ˜¯ä¸¤ç§ç±»å‹çš„å­ç±»ï¼Œå¯ä»¥è¡¨ç°ä¸ºå®ƒä»¬ä¸­çš„ä»»ä½•ä¸€ç§ã€‚ä¾‹å¦‚ï¼ŒåŒè´¨å¼‚å½¢ <a href="https://docs.raku.org/type/IntStr">IntStr</a> æ˜¯ <a href="https://docs.raku.org/type/Int">Int</a> å’Œ <a href="https://docs.raku.org/type/Str">Str</a> ç±»å‹çš„å­ç±»ï¼Œå¹¶ä¸”å°†è¢«éœ€è¦ <a href="https://docs.raku.org/type/Int">Int</a> æˆ– <a href="https://docs.raku.org/type/Str">Str</a> å¯¹è±¡çš„ä»»ä½•ç±»å‹çº¦æŸæ‰€æ¥å—ã€‚</p>
<p>åŒè´¨å¼‚å½¢å¯ä»¥ä½¿ç”¨<a href="https://docs.raku.org/language/quoting#Word_quoting%3A_%3C_%3E">å°–æ‹¬å·</a>åˆ›å»ºï¼Œå¯ä»¥å•ç‹¬ä½¿ç”¨æˆ–ä½œä¸ºæ•£åˆ—é”®æŸ¥æ‰¾çš„ä¸€éƒ¨åˆ†ä½¿ç”¨; ç›´æ¥ä½¿ç”¨æ–¹æ³•<code>.new</code>ï¼Œä¹Ÿç”±ä¸€äº›ç»“æ„æä¾›ï¼Œå¦‚ <a href="https://docs.raku.org/language/functions#sub_MAIN"><code>sub MAIN</code></a> çš„å‚æ•°ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&lt;</span><span class="s">42</span><span class="p">&gt;</span><span class="o">.^</span><span class="nb">name</span><span class="p">;</span>                 <span class="c1"># OUTPUT: Â«IntStrÂ» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&lt;</span><span class="s">42e0</span><span class="p">&gt;</span><span class="o">.^</span><span class="nb">name</span><span class="p">;</span>               <span class="c1"># OUTPUT: Â«NumStrÂ» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&lt;</span><span class="s"> 42+42i</span><span class="p">&gt;</span><span class="o">.^</span><span class="nb">name</span><span class="p">;</span>            <span class="c1"># OUTPUT: Â«ComplexStrÂ» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&lt;</span><span class="s"> 1/2</span><span class="p">&gt;</span><span class="o">.^</span><span class="nb">name</span><span class="p">;</span>               <span class="c1"># OUTPUT: Â«RatStrÂ» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&lt;</span><span class="s">0.5</span><span class="p">&gt;</span><span class="o">.^</span><span class="nb">name</span><span class="p">;</span>                <span class="c1"># OUTPUT: Â«RatStrÂ» </span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="vg">@*ARGS</span> <span class="o">=</span> <span class="p">&#34;</span><span class="s2">42</span><span class="p">&#34;;</span>
</span></span><span class="line"><span class="cl"><span class="k">sub</span> <span class="nb">MAIN</span><span class="p">(</span><span class="nv">$x</span><span class="p">)</span> <span class="p">{</span> <span class="nb">say</span> <span class="nv">$x</span><span class="o">.^</span><span class="nb">name</span> <span class="p">}</span>   <span class="c1"># OUTPUT: Â«IntStrÂ» </span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="kt">IntStr</span><span class="o">.</span><span class="nb">new</span><span class="p">(</span><span class="mi">42</span><span class="o">,</span> <span class="p">&#34;</span><span class="s2">42</span><span class="p">&#34;)</span><span class="o">.^</span><span class="nb">name</span><span class="p">;</span> <span class="c1"># OUTPUT: Â«IntStrÂ» </span>
</span></span></code></pre></div><p>ä¸Šé¢çš„å‡ ä¸ªç»“æ„åœ¨æ‰“å¼€è§’æ‹¬å·ä¹‹åæœ‰ä¸€ä¸ªç©ºæ ¼ã€‚é‚£ä¸ªç©ºæ ¼ä¸æ˜¯æ•…æ„çš„ã€‚é€šå¸¸ä½¿ç”¨è¿ç®—ç¬¦ç¼–å†™çš„æ•°å­—ï¼Œä¾‹å¦‚<code>1/2</code>ï¼ˆ<a href="https://docs.raku.org/type/Rat">Rat</a>ï¼Œé™¤æ³•è¿ç®—ç¬¦ï¼‰å’Œ<code>1+2i</code>ï¼ˆ<a href="https://docs.raku.org/type/Complex">å¤æ•°</a>ï¼ŒåŠ æ³•ï¼‰å¯ä»¥å†™æˆä¸æ¶‰åŠä½¿ç”¨è¿ç®—ç¬¦çš„å­—é¢å€¼ï¼šåœ¨å°–æ‹¬å·å’Œå°–æ‹¬å·é‡Œé¢çš„å­—ç¬¦ä¹‹é—´<em>æ²¡æœ‰</em>ä»»ä½•ç©ºæ ¼ã€‚é€šè¿‡åœ¨å°–æ‹¬å·ä¸­æ·»åŠ ç©ºæ ¼ï¼Œæˆ‘ä»¬å‘Šè¯‰ç¼–è¯‘å™¨æˆ‘ä»¬ä¸ä»…éœ€è¦ <a href="https://docs.raku.org/type/Rat">Rat</a> æˆ– <a href="https://docs.raku.org/type/Complex">Complex</a> å­—é¢é‡ï¼Œè€Œä¸”æˆ‘ä»¬è¿˜å¸Œæœ›å®ƒæ˜¯ä¸€ä¸ªallomorphï¼šåœ¨è¿™ç§æƒ…å†µä¸‹æ˜¯ <a href="https://docs.raku.org/type/RatStr">RatStr</a> æˆ– <a href="https://docs.raku.org/type/ComplexStr">ComplexStr</a>ã€‚</p>
<p>å¦‚æœæ•°å­—å­—é¢é‡ä¸ä½¿ç”¨ä»»ä½•è¿ç®—ç¬¦ï¼Œåˆ™å°†å…¶å†™å…¥å°–æ‹¬å·å†…ï¼Œå³ä½¿ä¸åŒ…å«ä»»ä½•ç©ºæ ¼ï¼Œä¹Ÿä¼šäº§ç”ŸåŒå½¢å¼‚å½¢ä½“ã€‚ï¼ˆé€»è¾‘ï¼šå¦‚æœä½ ä¸æƒ³è¦åŒè´¨å¼‚å½¢ï¼Œä½ å°±ä¸ä¼šä½¿ç”¨å°–æ‹¬å·ã€‚å¯¹äºä½¿ç”¨è¿ç®—ç¬¦çš„æ•°å­—ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå› ä¸ºæŸäº›ç»“æ„ï¼Œä¾‹å¦‚ç­¾åå­—é¢é‡ï¼Œä¸å…è®¸ä½ ä½¿ç”¨è¿ç®—ç¬¦ï¼Œæ‰€ä»¥ä½ ä¸èƒ½åªä¸ºè¿™äº›æ•°å­—å­—é¢é‡çœç•¥å°–æ‹¬å·ï¼‰ã€‚</p>
<h2 id="å¯ç”¨çš„åŒè´¨å¼‚å½¢httpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">å¯ç”¨çš„åŒè´¨å¼‚å½¢</a>&nbsp;<a class="headline-hash no-text-decoration" href="#å¯ç”¨çš„åŒè´¨å¼‚å½¢httpsdocsrakuorglanguagenumerics___top">#</a> </h2>
<p>æ ¸å¿ƒè¯­è¨€æä¾›ä»¥ä¸‹åŒè´¨å¼‚å½¢ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:left">Type</th>
<th style="text-align:left">Allomorph of</th>
<th style="text-align:left">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">IntStr</td>
<td style="text-align:left">Int and Str</td>
<td style="text-align:left">&lt;42&gt;</td>
</tr>
<tr>
<td style="text-align:left">NumStr</td>
<td style="text-align:left">Num and Str</td>
<td style="text-align:left">&lt;42e0&gt;</td>
</tr>
<tr>
<td style="text-align:left">ComplexStr</td>
<td style="text-align:left">Complex and Str</td>
<td style="text-align:left">&lt; 1+2i&gt;</td>
</tr>
<tr>
<td style="text-align:left">RatStr</td>
<td style="text-align:left">Rat and Str</td>
<td style="text-align:left">&lt;1.5&gt;</td>
</tr>
</tbody>
</table>
<p>æ³¨æ„ï¼šæ²¡æœ‰<code>FatRatStr</code>ç±»å‹ã€‚</p>
<h2 id="coercion-of-allomorphshttpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">Coercion of allomorphs</a>&nbsp;<a class="headline-hash no-text-decoration" href="#coercion-of-allomorphshttpsdocsrakuorglanguagenumerics___top">#</a> </h2>
<p>è¯·è®°ä½ï¼ŒåŒè´¨å¼‚å½¢åªæ˜¯å®ƒä»¬æ‰€ä»£è¡¨çš„ä¸¤ç§ï¼ˆæˆ–ä¸‰ç§ï¼‰ç±»å‹çš„å­ç±»ã€‚æ­£å¦‚å˜é‡æˆ–å‚æ•°ç±»å‹çº¦æŸä¸º<code>Foo</code>å¯ä»¥æ¥å—ä»»ä½• <code>Foo</code> å­ç±»ä¸€æ ·ï¼Œæ‰€ä»¥å˜é‡æˆ–å‚æ•°ç±»å‹çº¦æŸä¸º <a href="https://docs.raku.org/type/Int">Int</a> çš„å°†æ¥å— <a href="https://docs.raku.org/type/IntStr">IntStr</a> åŒè´¨å¼‚å½¢ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">sub</span> <span class="nf">foo</span><span class="p">(</span><span class="kt">Int</span> <span class="nv">$x</span><span class="p">)</span> <span class="p">{</span> <span class="nb">say</span> <span class="nv">$x</span><span class="o">.^</span><span class="nb">name</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="n">foo</span> <span class="p">&lt;</span><span class="s">42</span><span class="p">&gt;;</span>                          <span class="c1"># OUTPUT: Â«IntStrÂ» </span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="kt">Num</span> <span class="nv">$y</span> <span class="o">=</span> <span class="p">&lt;</span><span class="s">42e0</span><span class="p">&gt;;</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">$y</span><span class="o">.^</span><span class="nb">name</span><span class="p">;</span>                      <span class="c1"># OUTPUT: Â«NumStrÂ» </span>
</span></span></code></pre></div><p>å½“ç„¶ï¼Œè¿™ä¹Ÿé€‚ç”¨äºå‚æ•°<a href="https://docs.raku.org/type/Signature#Coercion_type">coercers</a>ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">sub</span> <span class="nf">foo</span><span class="p">(</span><span class="kt">Int</span><span class="p">(</span><span class="kt">Cool</span><span class="p">)</span> <span class="nv">$x</span><span class="p">)</span> <span class="p">{</span> <span class="nb">say</span> <span class="nv">$x</span><span class="o">.^</span><span class="nb">name</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="n">foo</span> <span class="p">&lt;</span><span class="s">42</span><span class="p">&gt;;</span>  <span class="c1"># OUTPUT: Â«IntStrÂ» </span>
</span></span></code></pre></div><p>ç»™å®šçš„åŒè´¨å¼‚å½¢<em>å·²ç»</em>æ˜¯ <a href="https://docs.raku.org/type/Int">Int</a> ç±»å‹çš„å¯¹è±¡ï¼Œå› æ­¤åœ¨è¿™ç§æƒ…å†µä¸‹å®ƒä¸ä¼šè½¬æ¢ä¸ºâ€œæ™®é€šçš„â€  <a href="https://docs.raku.org/type/Int">Int</a>ã€‚</p>
<p>å½“ç„¶ï¼Œå¦‚æœæ²¡æœ‰åŠæ³•å°†å®ƒä»¬â€œæŠ˜å â€åˆ°å…¶ä¸­ä¸€ä¸ªç»„ä»¶ï¼Œé‚£ä¹ˆåŒè´¨å¼‚å½¢ä½“çš„åŠ›é‡å°†ä¼šä¸¥é‡å‡å¼±ã€‚å› æ­¤ï¼Œå¦‚æœä½ ä½¿ç”¨æ‰€è¦å¼ºåˆ¶åˆ°çš„ç±»å‹çš„åå­—æ˜¾å¼è°ƒç”¨æ–¹æ³•ï¼Œé‚£ä¹ˆæ‚¨å°†è·å¾—è¯¥ç»„ä»¶ã€‚è¿™åŒæ ·é€‚ç”¨äºä»»ä½•ä»£ç†æ–¹æ³•ï¼Œä¾‹å¦‚è°ƒç”¨æ–¹æ³•<a href="https://docs.raku.org/routine/Numeric"><code>.Numeric</code></a>è€Œä¸æ˜¯<a href="https://docs.raku.org/routine/Int"><code>.Int</code></a>æˆ–ä½¿ç”¨<a href="https://docs.raku.org/routine/~"><code>prefix:&lt;~&gt; </code></a>è¿ç®—ç¬¦è€Œä¸æ˜¯<a href="https://docs.raku.org/routine/Str"><code>.Str</code></a>æ–¹æ³•è°ƒç”¨ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$al</span> <span class="o">:=</span> <span class="kt">IntStr</span><span class="o">.</span><span class="nb">new</span><span class="o">:</span> <span class="mi">42</span><span class="o">,</span> <span class="p">&#34;</span><span class="s2">forty two</span><span class="p">&#34;;</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">$al</span><span class="o">.</span><span class="kt">Str</span><span class="p">;</span>  <span class="c1"># OUTPUT: Â«forty twoÂ» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="o">+</span><span class="nv">$al</span><span class="p">;</span>     <span class="c1"># OUTPUT: Â«42Â» </span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&lt;</span><span class="s">1/99999999999999999999</span><span class="p">&gt;</span><span class="o">.</span><span class="kt">Rat</span><span class="o">.^</span><span class="nb">name</span><span class="p">;</span>    <span class="c1"># OUTPUT: Â«RatÂ» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&lt;</span><span class="s">1/99999999999999999999</span><span class="p">&gt;</span><span class="o">.</span><span class="kt">FatRat</span><span class="o">.^</span><span class="nb">name</span><span class="p">;</span> <span class="c1"># OUTPUT: Â«FatRatÂ» </span>
</span></span></code></pre></div><p>å¼ºåˆ¶æ•´ä¸ªåŒè´¨å¼‚å½¢ä½“åˆ—è¡¨çš„ä¸€ç§æ–¹ä¾¿æ–¹æ³•æ˜¯å°† <a href="https://docs.raku.org/language/operators#Hyper_operators">hyper</a> è¿ç®—ç¬¦åº”ç”¨äºé€‚å½“çš„å‰ç¼€ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="nb">map</span> <span class="o">*.^</span><span class="nb">name</span><span class="o">,</span>   <span class="p">&lt;</span><span class="s">42 50e0 100</span><span class="p">&gt;;</span>  <span class="c1"># OUTPUT: Â«(IntStr NumStr IntStr)Â» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nb">map</span> <span class="o">*.^</span><span class="nb">name</span><span class="o">,</span> <span class="o">+</span><span class="p">Â«</span><span class="s2">&lt;42 50e0 100&gt;;  # OUTPUT: Â«(Int Num Int)</span><span class="p">Â»</span> 
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nb">map</span> <span class="o">*.^</span><span class="nb">name</span><span class="o">,</span> <span class="o">~</span><span class="p">Â«</span><span class="s2">&lt;42 50e0 100&gt;;  # OUTPUT: Â«(Str Str Str)</span><span class="p">Â»</span> 
</span></span></code></pre></div><h2 id="object-identityhttpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">Object identity</a>&nbsp;<a class="headline-hash no-text-decoration" href="#object-identityhttpsdocsrakuorglanguagenumerics___top">#</a> </h2>
<p>å½“æˆ‘ä»¬è€ƒè™‘å¯¹è±¡ä¸€è‡´æ€§æ—¶ï¼Œä¸Šé¢å…³äºå¼ºåˆ¶åŒå½¢å¼‚å½¢çš„è®¨è®ºå˜å¾—æ›´åŠ é‡è¦ã€‚ä¸€äº›æ„é€ åˆ©ç”¨å®ƒæ¥ç¡®å®šä¸¤ä¸ªå¯¹è±¡æ˜¯å¦â€œç›¸åŒâ€ã€‚è€Œå¯¹äºäººç±»è€Œè¨€ï¼ŒåŒè´¨å¼‚å½¢<code>42</code>å’Œå¸¸è§„çš„<code>42</code>å¯èƒ½çœ‹èµ·æ¥â€œç›¸åŒâ€ï¼Œå¯¹äºé‚£äº›æ„é€ ï¼Œå®ƒä»¬æ˜¯å®Œå…¨ä¸åŒçš„å¯¹è±¡ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="c1"># &#34;42&#34; shows up twice in the result: 42 and &lt;42&gt; are different objects: </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nb">unique</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">42</span><span class="o">,</span> <span class="p">&lt;</span><span class="s">42</span><span class="p">&gt;;</span> <span class="c1"># OUTPUT: Â«(1 42 42)Â» </span>
</span></span><span class="line"><span class="cl"><span class="c1"># Use a different operator to `unique` with: </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nb">unique</span> <span class="p">:</span><span class="s">with</span><span class="p">(</span><span class="o">&amp;[==]</span><span class="p">)</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">42</span><span class="o">,</span> <span class="p">&lt;</span><span class="s">42</span><span class="p">&gt;;</span> <span class="c1"># OUTPUT: Â«(1 42)Â» </span>
</span></span><span class="line"><span class="cl"><span class="c1"># Or coerce the input instead (faster than using a different `unique` operator): </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nb">unique</span> <span class="p">:</span><span class="s">as</span><span class="p">(</span><span class="o">*.</span><span class="kt">Int</span><span class="p">)</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">42</span><span class="o">,</span> <span class="p">&lt;</span><span class="s">42</span><span class="p">&gt;;</span> <span class="c1"># OUTPUT: Â«(1 42)Â» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nb">unique</span> <span class="o">+</span><span class="p">Â«</span><span class="s2">(1, 1, 1, 42, &lt;42&gt;);         # OUTPUT: Â«(1 42)</span><span class="p">Â»</span> 
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1"># Parameterized Hash with `Any` keys does not stringify them; our key is of type `Int`: </span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">%h</span><span class="p">{</span><span class="kt">Any</span><span class="p">}</span> <span class="o">=</span> <span class="mi">42</span> <span class="o">=&gt;</span> <span class="p">&#34;</span><span class="s2">foo</span><span class="p">&#34;;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># But we use the allomorphic key of type `IntStr`, which is not in the Hash: </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">%h</span><span class="p">&lt;</span><span class="s">42</span><span class="p">&gt;:</span><span class="s">exists</span><span class="p">;</span>           <span class="c1"># OUTPUT: Â«FalseÂ» </span>
</span></span><span class="line"><span class="cl"><span class="c1"># Must use curly braces to avoid the allomorph: </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">%h</span><span class="p">{</span><span class="mi">42</span><span class="p">}:</span><span class="s">exists</span><span class="p">;</span>           <span class="c1"># OUTPUT: Â«TrueÂ» </span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1"># We are using a set operator to look up an `Int` object in a list of `IntStr` objects: </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="mi">42</span> <span class="o">âˆˆ</span> <span class="p">&lt;</span><span class="s">42 100 200</span><span class="p">&gt;;</span> <span class="c1"># OUTPUT: Â«FalseÂ» </span>
</span></span><span class="line"><span class="cl"><span class="c1"># Convert it to an allomorph: </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&lt;</span><span class="s">42</span><span class="p">&gt;</span> <span class="o">âˆˆ</span> <span class="p">&lt;</span><span class="s">42 100 200</span><span class="p">&gt;;</span> <span class="c1"># OUTPUT: Â«TrueÂ» </span>
</span></span><span class="line"><span class="cl"><span class="c1"># Or convert the items in the list to plain `Int` objects: </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="mi">42</span> <span class="o">âˆˆ</span> <span class="o">+</span><span class="p">Â«</span><span class="s2">&lt;42 100 200&gt;; # OUTPUT: Â«True</span><span class="p">Â»</span> 
</span></span></code></pre></div><p>æ³¨æ„è¿™äº›å¯¹è±¡ä¸€è‡´æ€§çš„å·®å¼‚ï¼Œå¹¶æ ¹æ®éœ€è¦å¼ºåˆ¶ä½ çš„åŒå½¢å¼‚å½¢ä½“ã€‚</p>
<h1 id="åŸç”Ÿæ•°å­—httpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">åŸç”Ÿæ•°å­—</a></h1>
<p>é¡¾åæ€ä¹‰ï¼ŒåŸç”Ÿæ•°å­—å¯ä»¥è®¿é—®åŸç”Ÿæ•°å­— - å³ç”±ç¡¬ä»¶ç›´æ¥æä¾›çš„æ•°å­—ã€‚è¿™åè¿‡æ¥åˆæä¾›ä¸¤ä¸ªåŠŸèƒ½ï¼šæº¢å‡º/ä¸‹æº¢å’Œæ›´å¥½çš„æ€§èƒ½ã€‚</p>
<p>**æ³¨æ„ï¼š**åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼ˆ2018.05ï¼‰ï¼ŒæŸäº›å®ç°ï¼ˆä¾‹å¦‚ Rakudoï¼‰æä¾›äº†æœ‰å…³åŸç”Ÿç±»å‹çš„ä¸€äº›ç»†èŠ‚ï¼Œä¾‹å¦‚  <code>int64</code> æ˜¯å¦å¯ç”¨ä¸”åœ¨32ä½è®¡ç®—æœºä¸Šå…·æœ‰64ä½å¤§å°ï¼Œä»¥åŠå¦‚ä½•æ£€æµ‹ä½•æ—¶ä½ çš„ç¨‹åºæ­£åœ¨è¿™æ ·çš„ç¡¬ä»¶ä¸Šè¿è¡Œã€‚</p>
<h2 id="å¯ç”¨çš„åŸç”Ÿæ•°å­—httpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">å¯ç”¨çš„åŸç”Ÿæ•°å­—</a>&nbsp;<a class="headline-hash no-text-decoration" href="#å¯ç”¨çš„åŸç”Ÿæ•°å­—httpsdocsrakuorglanguagenumerics___top">#</a> </h2>
<table>
<thead>
<tr>
<th style="text-align:left">Native type</th>
<th style="text-align:left">Base numeric</th>
<th style="text-align:left">Size</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">atomicint</td>
<td style="text-align:left">integer</td>
<td style="text-align:left">sized to offer CPU-provided atomic operations. (typically 64 bits on 64-bit platforms and 32 bits on 32-bit ones)</td>
</tr>
<tr>
<td style="text-align:left">int</td>
<td style="text-align:left">integer</td>
<td style="text-align:left">64-bits</td>
</tr>
<tr>
<td style="text-align:left">int16</td>
<td style="text-align:left">integer</td>
<td style="text-align:left">16-bits</td>
</tr>
<tr>
<td style="text-align:left">int32</td>
<td style="text-align:left">integer</td>
<td style="text-align:left">32-bits</td>
</tr>
<tr>
<td style="text-align:left">int64</td>
<td style="text-align:left">integer</td>
<td style="text-align:left">64-bits</td>
</tr>
<tr>
<td style="text-align:left">int8</td>
<td style="text-align:left">integer</td>
<td style="text-align:left">8-bits</td>
</tr>
<tr>
<td style="text-align:left">num</td>
<td style="text-align:left">floating point</td>
<td style="text-align:left">64-bits</td>
</tr>
<tr>
<td style="text-align:left">num32</td>
<td style="text-align:left">floating point</td>
<td style="text-align:left">32-bits</td>
</tr>
<tr>
<td style="text-align:left">num64</td>
<td style="text-align:left">floating point</td>
<td style="text-align:left">64-bits</td>
</tr>
<tr>
<td style="text-align:left">uint</td>
<td style="text-align:left">unsigned integer</td>
<td style="text-align:left">64-bits</td>
</tr>
<tr>
<td style="text-align:left">uint16</td>
<td style="text-align:left">unsigned integer</td>
<td style="text-align:left">16-bits</td>
</tr>
<tr>
<td style="text-align:left">uint32</td>
<td style="text-align:left">unsigned integer</td>
<td style="text-align:left">32-bits</td>
</tr>
<tr>
<td style="text-align:left">uint64</td>
<td style="text-align:left">unsigned integer</td>
<td style="text-align:left">64-bits</td>
</tr>
<tr>
<td style="text-align:left">uint8</td>
<td style="text-align:left">unsigned integer</td>
<td style="text-align:left">8-bits</td>
</tr>
</tbody>
</table>
<h2 id="åˆ›å»ºåŸç”Ÿæ•°å­—httpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">åˆ›å»ºåŸç”Ÿæ•°å­—</a>&nbsp;<a class="headline-hash no-text-decoration" href="#åˆ›å»ºåŸç”Ÿæ•°å­—httpsdocsrakuorglanguagenumerics___top">#</a> </h2>
<p>è¦åˆ›å»ºåŸç”Ÿç±»å‹çš„å˜é‡æˆ–å‚æ•°ï¼Œåªéœ€ä½¿ç”¨å…¶ä¸­ä¸€ä¸ªå¯ç”¨æ•°å­—çš„åç§°ä½œä¸ºç±»å‹çº¦æŸï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">my</span> <span class="kt">int32</span> <span class="nv">$x</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">sub</span> <span class="nf">foo</span><span class="p">(</span><span class="n">num</span> <span class="nv">$y</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="p">{</span> <span class="k">has</span> <span class="kt">int8</span> <span class="nv">$.z</span> <span class="p">}</span>
</span></span></code></pre></div><p>æœ‰æ—¶ï¼Œæ‚¨å¯èƒ½å¸Œæœ›åœ¨ä¸åˆ›å»ºä»»ä½•å¯ç”¨å˜é‡çš„æƒ…å†µä¸‹å°†æŸäº›å€¼å¼ºåˆ¶è½¬æ¢ä¸ºåŸç”Ÿç±»å‹ã€‚æ²¡æœ‰<code>.int</code>æˆ–ç±»ä¼¼çš„å¼ºåˆ¶æ–¹æ³•ï¼ˆæ–¹æ³•è°ƒç”¨æ˜¯åæœŸçš„ï¼Œæ‰€ä»¥å®ƒä»¬ä¸é€‚åˆè¿™ä¸ªç›®çš„ï¼‰ã€‚ç›¸åï¼Œåªéœ€ä½¿ç”¨åŒ¿åå˜é‡ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="n">some-native-taking-sub</span> <span class="p">(</span><span class="k">my</span> <span class="kt">int</span> <span class="nv">$</span> <span class="o">=</span> <span class="nv">$y</span><span class="p">)</span><span class="o">,</span> <span class="p">(</span><span class="k">my</span> <span class="kt">int32</span> <span class="nv">$</span> <span class="o">=</span> <span class="nv">$z</span><span class="p">)</span>
</span></span></code></pre></div><h2 id="æº¢å‡ºä¸‹æº¢httpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">æº¢å‡º/ä¸‹æº¢</a>&nbsp;<a class="headline-hash no-text-decoration" href="#æº¢å‡ºä¸‹æº¢httpsdocsrakuorglanguagenumerics___top">#</a> </h2>
<p>å°è¯•<strong>åˆ†é…</strong>ä¸é€‚åˆç‰¹å®šåŸç”Ÿç±»å‹çš„å€¼ä¼šäº§ç”Ÿå¼‚å¸¸ã€‚è¿™åŒ…æ‹¬å°è¯•ä¸ºåŸç”Ÿå‚æ•°æä¾›è¿‡å¤§çš„å‚æ•°ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">my</span> <span class="kt">int</span> <span class="nv">$x</span> <span class="o">=</span> <span class="mi">2</span>Â¹â°â°<span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># OUTPUT: </span>
</span></span><span class="line"><span class="cl"><span class="c1"># Cannot unbox 101 bit wide bigint into native integer </span>
</span></span><span class="line"><span class="cl"><span class="c1">#  in block &lt;unit&gt; at -e line 1 </span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">sub</span> <span class="nb">f</span><span class="p">(</span><span class="kt">int</span> <span class="nv">$x</span><span class="p">)</span> <span class="p">{</span> <span class="nv">$x</span> <span class="p">};</span> <span class="nb">say</span> <span class="nb">f</span> <span class="mi">2</span>â¶â´
</span></span><span class="line"><span class="cl"><span class="c1"># OUTPUT: </span>
</span></span><span class="line"><span class="cl"><span class="c1"># Cannot unbox 65 bit wide bigint into native integer </span>
</span></span><span class="line"><span class="cl"><span class="c1">#   in sub f at -e line 1 </span>
</span></span><span class="line"><span class="cl"><span class="c1">#   in block &lt;unit&gt; at -e line 1 </span>
</span></span></code></pre></div><p>ä½†æ˜¯ï¼Œä»¥è¿™æ ·ä¸€ç§å¤ªå¤§/å¤ªå°çš„æ–¹å¼ä¿®æ”¹å·²å­˜åœ¨çš„å€¼ä¼šäº§ç”Ÿæº¢å‡º/ä¸‹æº¢è¡Œä¸ºï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">my</span> <span class="kt">int</span> <span class="nv">$x</span> <span class="o">=</span> <span class="mi">2</span>â¶Â³<span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">$x</span><span class="p">;</span>             <span class="c1"># OUTPUT: Â«9223372036854775807Â» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="o">++</span><span class="nv">$x</span><span class="p">;</span>           <span class="c1"># OUTPUT: Â«-9223372036854775808Â» </span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="kt">uint8</span> <span class="nv">$x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">$x</span><span class="p">;</span>             <span class="c1"># OUTPUT: Â«0Â» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">$x</span> <span class="o">-=</span> <span class="mi">100</span><span class="p">;</span>      <span class="c1"># OUTPUT: Â«156Â» </span>
</span></span></code></pre></div><p>åˆ›å»ºä½¿ç”¨åŸç”Ÿç±»å‹çš„å¯¹è±¡ä¸æ¶‰åŠç¨‹åºå‘˜çš„ç›´æ¥åˆ†é…; è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿™äº›æ„é€ æä¾›æº¢å‡º/ä¸‹æº¢è¡Œä¸ºè€Œä¸æ˜¯æŠ›å‡ºå¼‚å¸¸ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="kt">Buf</span><span class="o">.</span><span class="nb">new</span><span class="p">(</span><span class="mi">1000</span><span class="o">,</span> <span class="mi">2000</span><span class="o">,</span> <span class="mi">3000</span><span class="p">)</span><span class="o">.</span><span class="kt">List</span><span class="p">;</span> <span class="c1"># OUTPUT: Â«(232 208 184)Â» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="k">my</span> <span class="kt">uint8</span> <span class="nv">@a</span> <span class="o">=</span> <span class="mi">1000</span><span class="o">,</span> <span class="mi">2000</span><span class="o">,</span> <span class="mi">3000</span><span class="p">;</span> <span class="c1"># OUTPUT: Â«232 208 184Â» </span>
</span></span></code></pre></div><h2 id="auto-boxinghttpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">Auto-boxing</a>&nbsp;<a class="headline-hash no-text-decoration" href="#auto-boxinghttpsdocsrakuorglanguagenumerics___top">#</a> </h2>
<p>è™½ç„¶å®ƒä»¬å¯ä»¥è¢«ç§°ä¸ºâ€œ<em>åŸç”Ÿç±»å‹</em> â€ï¼Œä½†åŸç”Ÿæ•°å­—å®é™…ä¸Šå¹¶ä¸æ˜¯å…·æœ‰ä»»ä½•å¯ç”¨æ–¹æ³•çš„ç±»ã€‚ä½†æ˜¯ï¼Œæ‚¨<em>å¯ä»¥</em>è°ƒç”¨è¿™äº›æ•°å­—çš„éåŸç”Ÿç‰ˆæœ¬ä¸Šå¯ç”¨çš„ä»»ä½•æ–¹æ³•ã€‚è¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">my</span> <span class="kt">int8</span> <span class="nv">$x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">42</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">$x</span><span class="o">.</span><span class="nb">abs</span><span class="p">;</span> <span class="c1"># OUTPUT: Â«42Â» </span>
</span></span></code></pre></div><p>æ­¤è¡Œä¸ºç§°ä¸ºâ€œè‡ªåŠ¨è£…ç®±â€ã€‚ç¼–è¯‘å™¨ä½¿ç”¨æ‰€æœ‰æ–¹æ³•è‡ªåŠ¨å°†åŸç”Ÿç±»å‹â€œè£…ç®±â€ä¸ºåŠŸèƒ½é½å…¨çš„é«˜çº§ç±»å‹ã€‚æ¢å¥è¯è¯´ï¼Œ<code>int8</code>ä¸Šé¢çš„å†…å®¹è‡ªåŠ¨è½¬æ¢ä¸º<a href="https://docs.raku.org/type/Int">Intï¼Œ</a>ç„¶åå®ƒæ˜¯<a href="https://docs.raku.org/type/Int">Int</a>ç±»ï¼Œç„¶åæä¾›è¢«è°ƒç”¨çš„<a href="https://docs.raku.org/routine/abs">abs</a>æ–¹æ³•ã€‚</p>
<p>å½“æ‚¨ä½¿ç”¨åŸç”Ÿç±»å‹è·å¾—æ€§èƒ½æå‡æ—¶ï¼Œæ­¤è¯¦ç»†ä¿¡æ¯éå¸¸é‡è¦ã€‚å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨çš„ä»£ç å¯¼è‡´æ‰§è¡Œå¤§é‡è‡ªåŠ¨è£…ç®±ï¼Œé‚£ä¹ˆä½¿ç”¨åŸç”Ÿç±»å‹çš„æ€§èƒ½å¯èƒ½ä¼šæ¯”ä½¿ç”¨éåŸç”Ÿç±»å‹æ—¶<em>æ›´å·®</em>ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$a</span> <span class="o">=</span> <span class="o">-</span><span class="mi">42</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="kt">int</span> <span class="nv">$a-native</span> <span class="o">=</span> <span class="o">-</span><span class="mi">42</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span> <span class="k">for</span> <span class="o">^</span><span class="mi">1000_000</span> <span class="p">{</span> <span class="nv">$a</span><span class="o">.</span><span class="nb">abs</span>        <span class="p">};</span> <span class="nb">say</span> <span class="nb">now</span> <span class="o">-</span> <span class="k">ENTER</span> <span class="nb">now</span> <span class="p">}</span> <span class="c1"># OUTPUT: Â«0.38180862Â» </span>
</span></span><span class="line"><span class="cl"><span class="p">{</span> <span class="k">for</span> <span class="o">^</span><span class="mi">1000_000</span> <span class="p">{</span> <span class="nv">$a-native</span><span class="o">.</span><span class="nb">abs</span> <span class="p">};</span> <span class="nb">say</span> <span class="nb">now</span> <span class="o">-</span> <span class="k">ENTER</span> <span class="nb">now</span> <span class="p">}</span> <span class="c1"># OUTPUT: Â«0.938720Â» </span>
</span></span></code></pre></div><p>å¦‚æ‚¨æ‰€è§ï¼ŒåŸç”Ÿå˜ä½“çš„é€Ÿåº¦æ…¢äº†ä¸¤å€å¤šã€‚åŸå› æ˜¯æ–¹æ³•è°ƒç”¨éœ€è¦å°†åŸç”Ÿç±»å‹è£…ç®±ï¼Œè€ŒéåŸç”Ÿå˜ä½“ä¸éœ€è¦è¿™æ ·çš„ä¸œè¥¿ï¼Œå› æ­¤æ€§èƒ½æŸå¤±ã€‚</p>
<p>åœ¨è¿™ç§ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°åˆ‡æ¢åˆ°<a href="https://docs.raku.org/routine/abs">abs</a>çš„å­ç¨‹åºå½¢å¼ï¼Œå®ƒå¯ä»¥ä½¿ç”¨åŸç”Ÿç±»å‹è€Œæ— éœ€è£…ç®±ã€‚åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½éœ€è¦å¯»æ‰¾å…¶ä»–è§£å†³æ–¹æ¡ˆä»¥é¿å…è¿‡å¤šçš„è‡ªåŠ¨è£…ç®±ï¼ŒåŒ…æ‹¬åˆ‡æ¢åˆ°éƒ¨åˆ†ä»£ç çš„éåŸç”Ÿç±»å‹ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$a</span> <span class="o">=</span> <span class="o">-</span><span class="mi">42</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="kt">int</span> <span class="nv">$a-native</span> <span class="o">=</span> <span class="o">-</span><span class="mi">42</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span> <span class="k">for</span> <span class="o">^</span><span class="mi">1000_000</span> <span class="p">{</span> <span class="nb">abs</span> <span class="nv">$a</span>        <span class="p">};</span> <span class="nb">say</span> <span class="nb">now</span> <span class="o">-</span> <span class="k">ENTER</span> <span class="nb">now</span> <span class="p">}</span> <span class="c1"># OUTPUT: Â«0.38229177Â» </span>
</span></span><span class="line"><span class="cl"><span class="p">{</span> <span class="k">for</span> <span class="o">^</span><span class="mi">1000_000</span> <span class="p">{</span> <span class="nb">abs</span> <span class="nv">$a-native</span> <span class="p">};</span> <span class="nb">say</span> <span class="nb">now</span> <span class="o">-</span> <span class="k">ENTER</span> <span class="nb">now</span> <span class="p">}</span> <span class="c1"># OUTPUT: Â«0.3088305Â» </span>
</span></span></code></pre></div><h2 id="é»˜è®¤å€¼httpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">é»˜è®¤å€¼</a>&nbsp;<a class="headline-hash no-text-decoration" href="#é»˜è®¤å€¼httpsdocsrakuorglanguagenumerics___top">#</a> </h2>
<p>ç”±äºåŸç”Ÿç±»å‹åé¢æ²¡æœ‰ç±»ï¼Œå› æ­¤é€šå¸¸æ²¡æœ‰ä½¿ç”¨å°šæœªåˆå§‹åŒ–çš„å˜é‡è·å¾—çš„ç±»å‹å¯¹è±¡ã€‚å› æ­¤ï¼ŒåŸç”Ÿç±»å‹è‡ªåŠ¨åˆå§‹åŒ–ä¸ºé›¶ã€‚åœ¨6.cè¯­è¨€ï¼ŒåŸç”Ÿçš„æµ®ç‚¹ç±»å‹ï¼ˆ<code>num</code>ï¼Œ<code>num32</code>ï¼Œå’Œ<code>num64</code>ï¼‰è¢«åˆå§‹åŒ–ä¸ºå€¼ <code>NaN</code>; åœ¨ 6.d è¯­è¨€ä¸­é»˜è®¤ä¸º <code>0e0</code>ã€‚</p>
<h2 id="åŸç”Ÿåˆ†æ´¾httpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">åŸç”Ÿåˆ†æ´¾</a>&nbsp;<a class="headline-hash no-text-decoration" href="#åŸç”Ÿåˆ†æ´¾httpsdocsrakuorglanguagenumerics___top">#</a> </h2>
<p>ä¾‹å¦‚ï¼Œå½“å¤§å°å¯é¢„æµ‹æ—¶ï¼Œå¯ä»¥ä½¿åŸç”Ÿå€™é€‰è€…ä¸éåŸç”Ÿå€™é€‰è€…ä¸€èµ·æä¾›å…·æœ‰åŸç”Ÿå€™é€‰è€…çš„æ›´å¿«ç®—æ³•ï¼Œä½†æ˜¯å¦åˆ™å›é€€åˆ°è¾ƒæ…¢çš„éåŸç”Ÿå€™é€‰è€…ã€‚ä»¥ä¸‹æ˜¯æ¶‰åŠåŸç”Ÿå€™é€‰äººçš„å¤šé‡åˆ†æ´¾çš„è§„åˆ™ã€‚</p>
<p>é¦–å…ˆï¼ŒåŸç”Ÿç±»å‹çš„å¤§å°åœ¨åˆ†æ´¾ä¸­ä¸èµ·ä½œç”¨ï¼Œå¹¶ä¸”<code>int8</code>è¢«è®¤ä¸ºä¸<code>int16</code>æˆ–<code>int</code> ä¾‹å¦‚ï¼Œå½“å¤§å°å¯é¢„æµ‹æ—¶ï¼Œå¯ä»¥ä½¿æœ¬åœ°å€™é€‰è€…ä¸éæœ¬åœ°å€™é€‰è€…ä¸€èµ·æä¾›å…·æœ‰æœ¬åœ°å€™é€‰è€…çš„æ›´å¿«ç®—æ³•ï¼Œä½†æ˜¯å¦åˆ™å›é€€åˆ°è¾ƒæ…¢çš„éæœ¬åœ°å€™é€‰è€…ã€‚ä»¥ä¸‹æ˜¯æ¶‰åŠæœ¬åœ°å€™é€‰äººçš„å¤šæ¬¡æ´¾é£çš„è§„åˆ™ã€‚</p>
<p>é¦–å…ˆï¼ŒåŸç”Ÿç±»å‹çš„å¤§å°åœ¨è°ƒåº¦ä¸­ä¸èµ·ä½œç”¨ï¼Œå¹¶ä¸”<code>int8</code>è¢«è®¤ä¸ºä¸<code>int16</code>æˆ–<code>int</code> ç›¸åŒï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">multi</span> <span class="nf">foo</span><span class="p">(</span><span class="kt">int</span>   <span class="nv">$x</span><span class="p">)</span> <span class="p">{</span> <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">int</span><span class="p">&#34;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">multi</span> <span class="nf">foo</span><span class="p">(</span><span class="kt">int32</span> <span class="nv">$x</span><span class="p">)</span> <span class="p">{</span> <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">int32</span><span class="p">&#34;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="n">foo</span> <span class="k">my</span> <span class="kt">int</span> <span class="nv">$x</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># OUTPUT: </span>
</span></span><span class="line"><span class="cl"><span class="c1"># Ambiguous call to &#39;foo(Int)&#39;; these signatures all match: </span>
</span></span><span class="line"><span class="cl"><span class="c1"># :(int $x) </span>
</span></span><span class="line"><span class="cl"><span class="c1"># :(int32 $x) </span>
</span></span></code></pre></div><p>å…¶æ¬¡ï¼Œå¦‚æœä¾‹ç¨‹æ˜¯ä¸€ä¸ª <code>only</code>-ieï¼Œå®ƒä¸æ˜¯ä¸€ä¸ª<a href="https://docs.raku.org/language/functions#Multi-dispatch"><code>multi</code></a>éåŸç”Ÿç±»å‹ï¼Œè€Œæ˜¯åœ¨è°ƒç”¨æœŸé—´ç»™å‡ºä¸€ä¸ªåŸç”Ÿç±»å‹ï¼Œåä¹‹äº¦ç„¶ï¼Œé‚£ä¹ˆå‚æ•°å°†è¢«è‡ªåŠ¨è£…ç®±æˆ–è‡ªåŠ¨å–æ¶ˆè£…ç®±ä»¥ä½¿å¯ä»¥è¢«è°ƒç”¨ã€‚å¦‚æœç»™å®šçš„å‚æ•°å¤ªå¤§è€Œæ— æ³•æ”¾å…¥nativeå‚æ•°ï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">-&gt;</span> <span class="kt">int</span> <span class="p">{}(</span> <span class="mi">42</span> <span class="p">);</span>            <span class="c1"># OK; auto-unboxing </span>
</span></span><span class="line"><span class="cl"><span class="k">-&gt;</span> <span class="kt">int</span> <span class="p">{}(</span> <span class="mi">2</span>Â¹â°â° <span class="p">);</span>          <span class="c1"># Too large; exception </span>
</span></span><span class="line"><span class="cl"><span class="k">-&gt;</span> <span class="kt">Int</span> <span class="p">{}(</span> <span class="mi">2</span>Â¹â°â° <span class="p">);</span>          <span class="c1"># OK; non-native parameter </span>
</span></span><span class="line"><span class="cl"><span class="k">-&gt;</span> <span class="kt">Int</span> <span class="p">{}(</span> <span class="k">my</span> <span class="kt">int</span> <span class="nv">$</span> <span class="o">=</span> <span class="mi">42</span> <span class="p">);</span> <span class="c1"># OK; auto-boxing </span>
</span></span></code></pre></div><p>å½“æ¶‰åŠåˆ°<a href="https://docs.raku.org/language/functions#Multi-dispatch"><code>multi</code></a>ä¾‹ç¨‹æ—¶ï¼Œå¦‚æœæ²¡æœ‰å¯ç”¨çš„åŸç”Ÿå€™é€‰è€…ï¼Œåˆ™åŸç”Ÿå‚æ•°å°†å§‹ç»ˆè‡ªåŠ¨è£…ç®±ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">multi</span> <span class="nf">foo</span> <span class="p">(</span><span class="kt">Int</span> <span class="nv">$x</span><span class="p">)</span> <span class="p">{</span> <span class="nv">$x</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="n">foo</span> <span class="k">my</span> <span class="kt">int</span> <span class="nv">$</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span> <span class="c1"># OUTPUT: Â«42Â» </span>
</span></span></code></pre></div><p>å¦ä¸€ç§æ–¹å¼æ˜¯ä¸èƒ½æä¾›ç›¸åŒçš„ luxuryã€‚å¦‚æœåªæœ‰åŸç”Ÿå€™é€‰è€…å¯ç”¨ï¼Œåˆ™éåŸç”Ÿå‚æ•°å°†<em>ä¸ä¼š</em>è¢«è‡ªåŠ¨å–æ¶ˆè£…ç®±ï¼Œè€Œæ˜¯æŒ‡ç¤ºä¸ä¼šæŠ›å‡ºåŒ¹é…çš„å€™é€‰è€…çš„å¼‚å¸¸ï¼ˆè¿™ç§ä¸å¯¹ç§°çš„åŸå› æ˜¯åŸç”Ÿç±»å‹æ€»æ˜¯å¯ä»¥è£…ç®±ï¼Œä½†æ˜¯éåŸç”Ÿçš„å¯èƒ½å¤ªå¤§è€Œæ— æ³•èå…¥åŸç”Ÿï¼‰ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">multi</span> <span class="nb">f</span><span class="p">(</span><span class="kt">int</span> <span class="nv">$x</span><span class="p">)</span> <span class="p">{</span> <span class="nv">$x</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$x</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nb">f</span> <span class="nv">$x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># OUTPUT: </span>
</span></span><span class="line"><span class="cl"><span class="c1"># Cannot resolve caller f(Int); none of these signatures match: </span>
</span></span><span class="line"><span class="cl"><span class="c1">#     (int $x) </span>
</span></span><span class="line"><span class="cl"><span class="c1">#   in block &lt;unit&gt; at -e line 1 </span>
</span></span></code></pre></div><p>ä½†æ˜¯ï¼Œå¦‚æœæ­£åœ¨è¿›è¡Œè°ƒç”¨ï¼Œå…¶ä¸­ä¸€ä¸ªå‚æ•°æ˜¯åŸç”Ÿç±»å‹è€Œå¦ä¸€ä¸ªæ˜¯<a href="https://docs.raku.org/language/syntax#Number_literals">æ•°å­—å­—é¢é‡</a>ï¼Œåˆ™æ”¾å¼ƒæ­¤è§„åˆ™ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">multi</span> <span class="nb">f</span><span class="p">(</span><span class="kt">int</span><span class="o">,</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="nb">f</span> <span class="mi">42</span><span class="o">,</span> <span class="k">my</span> <span class="kt">int</span> <span class="nv">$x</span><span class="p">;</span> <span class="c1"># Successful call </span>
</span></span></code></pre></div><p>è¿™æ ·ï¼Œæ‚¨å°±ä¸å¿…ä¸æ–­å°†è¯¸å¦‚ <code>$n +&gt; 2</code> å†™ä¸º <code>$n +&gt; (my int $ = 2)</code> äº†ã€‚ç¼–è¯‘å™¨çŸ¥é“å­—é¢é‡å°åˆ°è¶³ä»¥é€‚åˆåŸç”Ÿç±»å‹å¹¶å°†å…¶è½¬æ¢ä¸ºåŸç”Ÿç±»å‹ã€‚</p>
<h2 id="åŸå­æ“ä½œhttpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">åŸå­æ“ä½œ</a>&nbsp;<a class="headline-hash no-text-decoration" href="#åŸå­æ“ä½œhttpsdocsrakuorglanguagenumerics___top">#</a> </h2>
<p>è¯¥è¯­è¨€æä¾›äº†ä¸€äº›ä¿è¯ä»¥åŸå­æ–¹å¼æ‰§è¡Œçš„<a href="https://docs.raku.org/type/atomicint">æ“ä½œ</a>ï¼Œå³å®‰å…¨åœ°ç”±å¤šä¸ªçº¿ç¨‹æ‰§è¡Œè€Œæ— éœ€é”å®šè€Œæ²¡æœ‰æ•°æ®äº‰ç”¨çš„é£é™©ã€‚</p>
<p>å¯¹äºæ­¤ç±»æ“ä½œï¼Œéœ€è¦<a href="https://docs.raku.org/type/atomicint">atomicint</a>åŸç”Ÿç±»å‹ã€‚æ­¤ç±»å‹ä¸æ™®é€šåŸç”Ÿ<a href="https://docs.raku.org/type/int">int</a>ç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºå®ƒçš„å¤§å°ä½¿å¾—å¯ä»¥å¯¹å…¶æ‰§è¡ŒCPUæä¾›çš„åŸå­æ“ä½œã€‚åœ¨32ä½CPUä¸Šï¼Œå®ƒé€šå¸¸æ˜¯32ä½å¤§å°ï¼Œè€Œåœ¨64ä½CPUä¸Šï¼Œå®ƒé€šå¸¸æ˜¯64ä½å¤§å°ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="c1"># !!WRONG!! Might be non-atomic on some systems </span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="kt">int</span> <span class="nv">$x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nb">await</span> <span class="o">^</span><span class="mi">100</span> <span class="o">.</span><span class="nb">map</span><span class="o">:</span> <span class="p">{</span> <span class="k">start</span> <span class="nv">$x</span>âš›<span class="o">++</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">$x</span><span class="p">;</span> <span class="c1"># OUTPUT: Â«98Â» </span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1"># RIGHT! The use of `atomicint` type guarantees operation is atomic </span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="kt">atomicint</span> <span class="nv">$x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nb">await</span> <span class="o">^</span><span class="mi">100</span> <span class="o">.</span><span class="nb">map</span><span class="o">:</span> <span class="p">{</span> <span class="k">start</span> <span class="nv">$x</span>âš›<span class="o">++</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">$x</span><span class="p">;</span> <span class="c1"># OUTPUT: Â«100Â» </span>
</span></span></code></pre></div><p>ç›¸ä¼¼æ€§<code>int</code>ä¹Ÿå­˜åœ¨äºå¤šé‡åˆ†æ´¾ä¸­ï¼š <code>atomicint</code>ï¼Œæ™®é€šçš„ <code>int</code>å’Œå›ºå®šå¤§å°çš„<code>int</code>å˜é‡éƒ½æ˜¯ç›¸åŒçš„ï¼Œå¹¶ä¸”ä¸èƒ½é€šè¿‡å¤šé‡åˆ†æ´¾æ¥åŒºåˆ†ã€‚</p>
<h1 id="numeric-infectiousnesshttpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">Numeric infectiousness</a></h1>
<p>å½“ä¸€äº›æ•°å­¦è¿ç®—ä¸­æ¶‰åŠä¸¤ä¸ªä¸åŒç±»å‹çš„æ•°å­—æ—¶ï¼Œæ•°å­—â€œä¼ é€’æ€§â€å†³å®šäº†ç»“æœç±»å‹ã€‚å¦‚æœç»“æœæ˜¯è¯¥ç±»å‹è€Œä¸æ˜¯å…¶ä»–æ“ä½œæ•°çš„ç±»å‹ï¼Œåˆ™è®¤ä¸ºç±»å‹æ¯”å…¶ä»–ç±»å‹æ›´å…·ä¼ é€’æ€§ã€‚ä¾‹å¦‚ï¼Œ<a href="https://docs.raku.org/type/Num">Num</a>ç±»å‹æ¯”<a href="https://docs.raku.org/type/Int">Int</a>æ›´å…·ä¼ é€’æ€§ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æœŸæœ›<code>42e0 + 42</code>äº§ç”Ÿ<a href="https://docs.raku.org/type/Num">Num</a>ä½œä¸ºç»“æœã€‚</p>
<p>ä¼ é€’æ€§å¦‚ä¸‹ï¼Œé¦–å…ˆåˆ—å‡ºæœ€å…·ä¼ é€’æ€§çš„ç±»å‹</p>
<ul>
<li>Complex</li>
<li>Num</li>
<li>FatRat</li>
<li>Rat</li>
<li>Int</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="mf">2e0</span><span class="p">)</span><span class="o">.^</span><span class="nb">name</span><span class="p">;</span> <span class="c1"># Int + Num =&gt; OUTPUT: Â«NumÂ» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">(</span>Â½ <span class="o">+</span> Â½<span class="p">)</span><span class="o">.^</span><span class="nb">name</span><span class="p">;</span> <span class="c1"># Rat + Rat =&gt; OUTPUT: Â«RatÂ» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">(</span><span class="kt">FatRat</span><span class="o">.</span><span class="nb">new</span><span class="p">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> Â½<span class="p">)</span><span class="o">.^</span><span class="nb">name</span><span class="p">;</span> <span class="c1"># FatRat + Rat =&gt; OUTPUT: Â«FatRatÂ» </span>
</span></span></code></pre></div><p>åŒè´¨å¼‚å½¢ä½“å…·æœ‰ä¸å…¶æ•°å­—æˆåˆ†ç›¸åŒçš„ä¼ é€’æ€§ã€‚åŸç”Ÿç±»å‹è·å¾—è‡ªåŠ¨è£…ç®±ï¼Œå¹¶å…·æœ‰ä¸å…¶ç›’è£…å˜ä½“ç›¸åŒçš„ä¼ é€’æ€§ã€‚</p>


        </div>
    </div>
</article>



                <footer>
                    




<div class="no-text-decoration">
    <div class="jump top"><a href="#" title="Top of this page">â®‰</a></div>
    <div class="jump bottom"><a href="#bottom" title="Bottom of this page">â®‹</a></div>
</div>


 
    
        <div class="hugotoc no-text-decoration">
            <nav id="TableOfContents">
  <ul>
    <li><a href="#rathttpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top"><code>Rat</code></a></a>
      <ul>
        <li><a href="#åˆ†è§£ä¸º-numhttpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">åˆ†è§£ä¸º <code>Num</code></a></a></li>
      </ul>
    </li>
    <li><a href="#fatrathttpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top"><code>FatRat</code></a></a></li>
    <li><a href="#æ‰“å°-rationalshttpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">æ‰“å° rationals</a></a></li>
  </ul>

  <ul>
    <li><a href="#zero-denominator-rationalshttpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">Zero-denominator rationals</a></a></li>
  </ul>

  <ul>
    <li><a href="#å¯ç”¨çš„åŒè´¨å¼‚å½¢httpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">å¯ç”¨çš„åŒè´¨å¼‚å½¢</a></a></li>
    <li><a href="#coercion-of-allomorphshttpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">Coercion of allomorphs</a></a></li>
    <li><a href="#object-identityhttpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">Object identity</a></a></li>
  </ul>

  <ul>
    <li><a href="#å¯ç”¨çš„åŸç”Ÿæ•°å­—httpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">å¯ç”¨çš„åŸç”Ÿæ•°å­—</a></a></li>
    <li><a href="#åˆ›å»ºåŸç”Ÿæ•°å­—httpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">åˆ›å»ºåŸç”Ÿæ•°å­—</a></a></li>
    <li><a href="#æº¢å‡ºä¸‹æº¢httpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">æº¢å‡º/ä¸‹æº¢</a></a></li>
    <li><a href="#auto-boxinghttpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">Auto-boxing</a></a></li>
    <li><a href="#é»˜è®¤å€¼httpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">é»˜è®¤å€¼</a></a></li>
    <li><a href="#åŸç”Ÿåˆ†æ´¾httpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">åŸç”Ÿåˆ†æ´¾</a></a></li>
    <li><a href="#åŸå­æ“ä½œhttpsdocsrakuorglanguagenumerics___top"><a href="https://docs.raku.org/language/numerics#___top">åŸå­æ“ä½œ</a></a></li>
  </ul>
</nav>
            <a href="#" class="back-to-top">Back to top</a>
        </div>
    
    
<script src="/js/libs/jquery/3.3.1/jquery.slim.min.min.22ee3db0c0e99fd0fbce3aee19672bd53d25469daf734bd4c165649f6eaf7d7f.js"></script>

<link rel="preload" href="/js/libs/jquery/3.3.1/jquery.slim.min.min.22ee3db0c0e99fd0fbce3aee19672bd53d25469daf734bd4c165649f6eaf7d7f.js" as="script">

<script type="application/javascript">(function() {
     var $window = $(window);
     if ($window.width() >= 1400) { 
         var $toc = $('#TableOfContents');
         if ($toc.length > 0) {
             function onScroll(){
                 var currentScroll = $window.scrollTop();
                 var h = $('.content h1, .content h2, .content h3, .content h4, .content h5, .content h6, .h-feed h2');
                 var id = "";
                 h.each(function (i, e) {
                     e = $(e);
                     if (e.offset().top - 10 <= currentScroll) {
                         id = e.attr('id');
                     }
                 });
                 var current = $toc.find('a.current');
                 if (current.length == 1 && current.eq(0).attr('href') == '#' + id) return true;

                 current.each(function (i, e) {
                     $(e).removeClass('current').siblings('ul').hide();
                 });
                 $toc.find('a[href="#' + id + '"]').parentsUntil('#TableOfContents').each(function (i, e) {
                     $(e).children('a').addClass('current').siblings('ul').show();
                 });
             }
             $window.on('scroll', onScroll);
             $(document).ready(function() {
                 $toc.find('a').parent('li').find('ul').hide();
                 onScroll();
                 document.getElementsByClassName('hugotoc')[0].style.display = '';
             });}}})();</script>








<div class="backtotop center no-text-decoration">
    <a href="#">back to <span class="top">top</span></a>
</div>


<div class="right">
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in â€˜rakulangâ€™"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with â€˜rakulangâ€™"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>

</div>
<div class="clear-float"></div>



<div class="prev-next-navigator clear-float">
    
        <span class="prev-post left no-text-decoration">
            <a href="https://ohmycloud.github.io/posts/53.object-orientation/" class="nobr">Â« é¢å‘å¯¹è±¡</a>
        </span>
    
    
        <span class="next-post right no-text-decoration">
            <a href="https://ohmycloud.github.io/notes/a-tour-of-spark-structured-streaming/" class="nobr">Spark ç»“æ„åŒ–æµä¹‹æ—… Â»</a>
        </span>
    
</div>


<a id="bottom"></a>









                       







                    <ul class="no-bullets feed right inline">
    
        
        
    
</ul>
<div class="clear-float"></div>

                </footer>
                <hr />
            </div>               

            <footer> 
                

<ul class="social no-text-decoration">
    
</ul>










 
    
    



<p class="generated no-text-decoration">
    Generated using  <a href="https://gitlab.com/kaushalmodi/hugo-theme-refined"><code class="nobr">hugo-theme-refined</code></a> + <span class="nobr">Hugo <a href="https://github.com/gohugoio/hugo/commit/312735366b20d64bd61bff8627f593749f86c964">0.123.7</a></span>
</p>

<p>
    
</p>




<div class="badges no-text-decoration">
    
    

    
</div>




<script type="application/javascript">var nav=responsiveNav("#nav");</script>




<script defer src="/js/libs/fragmentions/wrapper.min.e8c468c89edc4f5dccaa8c720c6b220b3088a16cd7b1e4a1e3345985788260c9.js"></script>









            </footer>
        </div> 
    </body>
</html>
