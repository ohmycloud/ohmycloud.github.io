{"author":{"name":null,"type":"card","url":"https://ohmycloud.github.io/"},"content":{"html":"\u003cp\u003eRaku 对 Unicode 有很高的支持。本文档旨在概述和描述不属于例程和方法文档的 Unicode 功能。\u003c/p\u003e\n\u003cp\u003e有关 MoarVM 内部字符串表示的概述，请参阅 \u003ca href=\"https://github.com/MoarVM/MoarVM/blob/master/docs/strings.asciidoc\"\u003eMoarVM 字符串文档\u003c/a\u003e。\u003c/p\u003e\n\u003ch1 id=\"文件句柄和输入输出httpsdocsrakuorglanguageunicode___top\"\u003e\u003ca href=\"https://docs.raku.org/language/unicode#___top\"\u003e文件句柄和输入输出\u003c/a\u003e\u003c/h1\u003e\n\u003ch2 id=\"标准化httpsdocsrakuorglanguageunicode___top\"\u003e\u003ca href=\"https://docs.raku.org/language/unicode#___top\"\u003e标准化\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e默认情况下，Raku 对所有输入和输出应用标准化，但存储为 \u003ca href=\"(https://docs.raku.org/language/unicode#UTF8-C8)\"\u003eUTF8-C8\u003c/a\u003e 的文件名除外;字形是用户可见的字符形式，将使用标准化表示。这是什么意思？例如，字形数字 \u003ccode\u003eá\u003c/code\u003e 可以用两种方式表示，或者使用一个代码点：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003eá\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eU\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"n\"\u003eE1\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"s2\"\u003eLATIN SMALL LETTER A WITH ACUTE\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026#34;)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e或两个代码点:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003ea\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e  \u003cspan class=\"n\"\u003é\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eU\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"mi\"\u003e61\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"s2\"\u003eLATIN SMALL LETTER A\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026#34;\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eU\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"mi\"\u003e301\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"s2\"\u003eCOMBINING ACUTE ACCENT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026#34;)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eRaku 将这两个输入转换为一个代码点，如规范化形式 C（NFC）所指定的那样。在大多数情况下，这很有用，意味着两个相同的输入都被视为相同。 Unicode 具有规范等价的概念，它允许我们确定字符串的规范形式，允许我们正确地比较字符串并操纵它们，而不必担心文本丢失这些属性。默认情况下，您处理或从 Raku 输出的任何文本都将采用此“规范”形式，即使在对字符串进行修改或连接时也是如此（请参阅下文，了解如何避免这种情况）。有关规范化表单C和规范等效性的更多详细信息，请参阅Unicode Foundation 的\u003ca href=\"https://unicode.org/reports/tr15/#Canon_Compat_Equivalence\"\u003e规范化和规范等效性\u003c/a\u003e页面。\u003c/p\u003e\n\u003cp\u003e我们不默认的一种情况是文件名。这是因为必须完全访问文件的名称，就像在磁盘上写入字节一样。\u003c/p\u003e\n\u003cp\u003e为避免规范化，您可以使用名为 \u003ca href=\"https://docs.raku.org/language/unicode#UTF8-C8\"\u003eUTF8-C8\u003c/a\u003e 的特殊编码格式。将此编码与任何文件句柄一起使用将允许您读取磁盘上的确切字节，而不进行规范化。如果使用 UTF8 句柄打印出来，打印出来时看起来会很滑稽。如果将其打印到输出编码为 \u003ca href=\"https://docs.raku.org/language/unicode#UTF8-C8\"\u003eUTF8-C8\u003c/a\u003e 的句柄，则它将按照您通常的预期进行渲染，并且是字节精确复制的字节。有关 MoarVM 上 UTF8-C8 的更多技术细节, 请参见下文。\u003c/p\u003e\n\u003ch2 id=\"utf8-c8httpsdocsrakuorglanguageunicode___top\"\u003e\u003ca href=\"https://docs.raku.org/language/unicode#___top\"\u003eUTF8-C8\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eUTF-8 Clean-8 是一种编码器/解码器，主要用作 UTF-8。但是，遇到一个不能解码为有效 UTF-8 的字节序列，或者由于规范化而不会往返的字节序列时，它将使用 \u003ca href=\"(https://docs.raku.org/language/glossary#NFG)\"\u003eNFG\u003c/a\u003e 合成来跟踪所涉及的原始字节。这意味着编码回 UTF-8 Clean-8 将能够重新创建它们最初存在的字节。合成物包含4个代码点：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e代码点 0x10FFFD (这是一个私用的代码点)\u003c/li\u003e\n\u003cli\u003e代码点 \u0026lsquo;x\u0026rsquo;\u003c/li\u003e\n\u003cli\u003e高4位作为十六进制字符的不可解码字节 (0..9A..F)\u003c/li\u003e\n\u003cli\u003e低4位作为十进制字符的不可解码字节 (0..9A..F)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e在正常的 UTF-8 编码下，这意味着不可代表的字符会像 \u003ccode\u003e?xFF\u003c/code\u003e 那样出现。\u003c/p\u003e\n\u003cp\u003eUTF-8 Clean-8 用于 MoarVM 从环境，命令行参数和文件系统查询接收字符串的地方，例如解码缓冲区时：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003esay\u003c/span\u003e \u003cspan class=\"kt\"\u003eBuf\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003eord\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u0026#39;\u003c/span\u003e\u003cspan class=\"s1\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026#39;)\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e \u003cspan class=\"mh\"\u003e0xFE\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e \u003cspan class=\"nb\"\u003eord\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u0026#39;\u003c/span\u003e\u003cspan class=\"s1\"\u003eZ\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026#39;))\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003edecode\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u0026#39;\u003c/span\u003e\u003cspan class=\"s1\"\u003eutf8-c8\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026#39;);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e#  OUTPUT: «A􏿽xFEZ␤» \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e您可以看到 UTF8-C8 使用的两个初始代码点如何显示在此处，就在“FE”之前。您可以使用此类编码来读取具有未知编码的文件：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003emy\u003c/span\u003e \u003cspan class=\"nv\"\u003e$test-file\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"s2\"\u003e/tmp/test\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026#34;;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003egiven\u003c/span\u003e \u003cspan class=\"nb\"\u003eopen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nv\"\u003e$test-file\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"s\"\u003ew\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"s\"\u003ebin\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003ewrite\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eBuf\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003eord\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u0026#39;\u003c/span\u003e\u003cspan class=\"s1\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026#39;)\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e \u003cspan class=\"mh\"\u003e0xFA\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e \u003cspan class=\"nb\"\u003eord\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u0026#39;\u003c/span\u003e\u003cspan class=\"s1\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026#39;)\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e \u003cspan class=\"mh\"\u003e0xFB\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e \u003cspan class=\"mh\"\u003e0xFC\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e \u003cspan class=\"nb\"\u003eord\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u0026#39;\u003c/span\u003e\u003cspan class=\"s1\"\u003eC\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026#39;)\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e \u003cspan class=\"mh\"\u003e0xFD\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003eclose\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003esay\u003c/span\u003e \u003cspan class=\"nb\"\u003eslurp\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nv\"\u003e$test-file\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003eenc\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026#39;\u003c/span\u003e\u003cspan class=\"s1\"\u003eutf8-c8\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026#39;);\u003c/span\u003e \u003cspan class=\"c1\"\u003e# OUTPUT: «(65 250 66 251 252 67 253)» \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e使用这种类型的编码进行读取并将它们编码回 UTF8-C8 将返回原始字节;使用默认的 UTF8-C8 是不可能的。\u003c/p\u003e\n\u003cp\u003e请注意，到目前为止，这种编码在 Rakudo 的 JVM 实现中不受支持。\u003c/p\u003e\n\u003ch1 id=\"输入-unicode-代码点和代码点序列httpsdocsrakuorglanguageunicode___top\"\u003e\u003ca href=\"https://docs.raku.org/language/unicode#___top\"\u003e输入 unicode 代码点和代码点序列\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003e您可以按编号（十进制和十六进制）输入 Unicode 代码点。例如，名为“带有macron的拉丁大写字母ae”的字符具有十进制代码点482和十六进制代码点0x1E2：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003esay\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"se\"\u003e\\c\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e482\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u0026#34;;\u003c/span\u003e \u003cspan class=\"c1\"\u003e# OUTPUT: «Ǣ␤» \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003esay\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"se\"\u003e\\x\u003c/span\u003e\u003cspan class=\"mh\"\u003e1E2\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026#34;;\u003c/span\u003e   \u003cspan class=\"c1\"\u003e# OUTPUT: «Ǣ␤» \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e您还可以按名称访问 Unicode 代码点：Rakudo 支持所有 Unicode 9.0 名称。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003esay\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"se\"\u003e\\c\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003ePENGUIN\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u0026#34;;\u003c/span\u003e \u003cspan class=\"c1\"\u003e# OUTPUT: «🐧␤» \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003esay\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"se\"\u003e\\c\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003eBELL\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u0026#34;;\u003c/span\u003e    \u003cspan class=\"c1\"\u003e# OUTPUT: «🔔␤» (U+1F514 BELL) \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e所有 Unicode 代码点名称/命名seq /emoji 序列现在都不区分大小写：[从2017.02开始]\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003esay\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"se\"\u003e\\c\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003elatin capital letter ae with macron\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u0026#34;;\u003c/span\u003e \u003cspan class=\"c1\"\u003e# OUTPUT: «Ǣ␤» \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003esay\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"se\"\u003e\\c\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003elatin capital letter E\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u0026#34;;\u003c/span\u003e              \u003cspan class=\"c1\"\u003e# OUTPUT: «E␤» (U+0045) \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e您可以使用带有 \u003ccode\u003e\\c[]\u003c/code\u003e 的逗号分隔列表来指定多个字符。 您也可以组合数字和命名样式：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003esay\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"se\"\u003e\\c\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e482,PENGUIN\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u0026#34;;\u003c/span\u003e \u003cspan class=\"c1\"\u003e# OUTPUT: «Ǣ🐧␤» \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e除了在内插字符串中使用 \u003ccode\u003e\\c[]\u003c/code\u003e 之外，您还可以使用 \u003ca href=\"https://docs.raku.org/routine/uniparse\"\u003euniparse\u003c/a\u003e:：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003esay\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"s2\"\u003eDIGIT ONE\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003euniparse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e  \u003cspan class=\"c1\"\u003e# OUTPUT: «1␤» \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003esay\u003c/span\u003e \u003cspan class=\"nb\"\u003euniparse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u0026#34;\u003c/span\u003e\u003cspan class=\"s2\"\u003eDIGIT ONE\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026#34;);\u003c/span\u003e \u003cspan class=\"c1\"\u003e# OUTPUT: «1␤» \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"名称别名httpsdocsrakuorglanguageunicode___top\"\u003e\u003ca href=\"https://docs.raku.org/language/unicode#___top\"\u003e名称别名\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e按名称别名。名称别名主要用于没有正式名称的代码点，缩写或更正（Unicode 名称永远不会更改）。有关它们的完整列表，请参见\u003ca href=\"https://www.unicode.org/Public/UCD/latest/ucd/NameAliases.txt\"\u003e此处\u003c/a\u003e。\u003c/p\u003e\n\u003cp\u003e没有任何官方名称的控制代码：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003esay\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"se\"\u003e\\c\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003eALERT\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u0026#34;;\u003c/span\u003e     \u003cspan class=\"c1\"\u003e# Not visible (U+0007 control code (also accessible as \\a)) \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003esay\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"se\"\u003e\\c\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003eLINE FEED\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u0026#34;;\u003c/span\u003e \u003cspan class=\"c1\"\u003e# Not visible (U+000A same as \u0026#34;\\n\u0026#34;) \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e更正:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003esay\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"se\"\u003e\\c\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003eLATIN CAPITAL LETTER GHA\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u0026#34;;\u003c/span\u003e \u003cspan class=\"c1\"\u003e# OUTPUT: «Ƣ␤» \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003esay\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"s2\"\u003eƢ\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003euniname\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e# OUTPUT: «LATIN CAPITAL LETTER OI␤» \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# This one is a spelling mistake that was corrected in a Name Alias: \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003esay\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"se\"\u003e\\c\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003ePRESENTATION FORM FOR VERTICAL RIGHT WHITE LENTICULAR BRACKET\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u0026#34;\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003euniname\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# OUTPUT: «PRESENTATION FORM FOR VERTICAL RIGHT WHITE LENTICULAR BRAKCET␤» \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e缩写:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003esay\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"se\"\u003e\\c\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003eZWJ\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u0026#34;\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003euniname\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e  \u003cspan class=\"c1\"\u003e# OUTPUT: «ZERO WIDTH JOINER␤» \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003esay\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"se\"\u003e\\c\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003eNBSP\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u0026#34;\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003euniname\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e# OUTPUT: «NO-BREAK SPACE␤» \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"命名序列httpsdocsrakuorglanguageunicode___top\"\u003e\u003ca href=\"https://docs.raku.org/language/unicode#___top\"\u003e命名序列\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e您也可以使用任何\u003ca href=\"https://www.unicode.org/Public/UCD/latest/ucd/NamedSequences.txt\"\u003e命名序列\u003c/a\u003e，这些不是单个代码点，而是它们的序列。 [从2017.02开始]\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003esay\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"se\"\u003e\\c\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003eLATIN CAPITAL LETTER E WITH VERTICAL LINE BELOW AND ACUTE\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u0026#34;;\u003c/span\u003e      \u003cspan class=\"c1\"\u003e# OUTPUT: «É̩␤» \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003esay\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"se\"\u003e\\c\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003eLATIN CAPITAL LETTER E WITH VERTICAL LINE BELOW AND ACUTE\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u0026#34;\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003eords\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e# OUTPUT: «(201 809)␤» \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"emoji-序列httpsdocsrakuorglanguageunicode___top\"\u003e\u003ca href=\"https://docs.raku.org/language/unicode#___top\"\u003eEmoji 序列\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eRakudo 支持表情符号 4.0（最新的非草稿版本）序列。 对于他们所有人看到：\u003ca href=\"(https://www.unicode.org/Public/emoji/4.0/emoji-zwj-sequences.txt)\"\u003e表情符号 ZWJ 序列\u003c/a\u003e和\u003ca href=\"https://www.unicode.org/Public/emoji/4.0/emoji-sequences.txt\"\u003e表情符号序列\u003c/a\u003e。 请注意，任何带逗号的名称都应删除逗号，因为 Raku 使用逗号分隔同一 \u003ccode\u003e\\c\u003c/code\u003e 序列中的不同代码点/序列。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-raku\" data-lang=\"raku\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003esay\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"se\"\u003e\\c\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003ewoman gesturing OK\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u0026#34;;\u003c/span\u003e         \u003cspan class=\"c1\"\u003e# OUTPUT: «🙆‍♀️␤» \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003esay\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"se\"\u003e\\c\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003efamily: man woman girl boy\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u0026#34;;\u003c/span\u003e \u003cspan class=\"c1\"\u003e# OUTPUT: «👨‍👩‍👧‍👦␤» \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","text":"Raku 对 Unicode 有很高的支持。本文档旨在概述和描述不属于例程和方法文档的 Unicode 功能。\n有关 MoarVM 内部字符串表示的概述，请参阅 MoarVM 字符串文档。\n文件句柄和输入输出 标准化 默认情况下，Raku 对所有输入和输出应用标准化，但存储为 UTF8-C8 的文件名除外;字形是用户可见的字符形式，将使用标准化表示。这是什么意思？例如，字形数字 á 可以用两种方式表示，或者使用一个代码点：\ná (U+E1 \u0026#34;LATIN SMALL LETTER A WITH ACUTE\u0026#34;) 或两个代码点:\na + ́ (U+61 \u0026#34;LATIN SMALL LETTER A\u0026#34; + U+301 \u0026#34;COMBINING ACUTE ACCENT\u0026#34;) Raku 将这两个输入转换为一个代码点，如规范化形式 C（NFC）所指定的那样。在大多数情况下，这很有用，意味着两个相同的输入都被视为相同。 Unicode 具有规范等价的概念，它允许我们确定字符串的规范形式，允许我们正确地比较字符串并操纵它们，而不必担心文本丢失这些属性。默认情况下，您处理或从 Raku 输出的任何文本都将采用此“规范”形式，即使在对字符串进行修改或连接时也是如此（请参阅下文，了解如何避免这种情况）。有关规范化表单C和规范等效性的更多详细信息，请参阅Unicode Foundation 的规范化和规范等效性页面。\n我们不默认的一种情况是文件名。这是因为必须完全访问文件的名称，就像在磁盘上写入字节一样。\n为避免规范化，您可以使用名为 UTF8-C8 的特殊编码格式。将此编码与任何文件句柄一起使用将允许您读取磁盘上的确切字节，而不进行规范化。如果使用 UTF8 句柄打印出来，打印出来时看起来会很滑稽。如果将其打印到输出编码为 UTF8-C8 的句柄，则它将按照您通常的预期进行渲染，并且是字节精确复制的字节。有关 MoarVM 上 UTF8-C8 的更多技术细节, 请参见下文。\nUTF8-C8 UTF-8 Clean-8 是一种编码器/解码器，主要用作 UTF-8。但是，遇到一个不能解码为有效 UTF-8 的字节序列，或者由于规范化而不会往返的字节序列时，它将使用 NFG 合成来跟踪所涉及的原始字节。这意味着编码回 UTF-8 Clean-8 将能够重新创建它们最初存在的字节。合成物包含4个代码点：\n代码点 0x10FFFD (这是一个私用的代码点) 代码点 \u0026lsquo;x\u0026rsquo; 高4位作为十六进制字符的不可解码字节 (0..9A..F) 低4位作为十进制字符的不可解码字节 (0..9A..F) 在正常的 UTF-8 编码下，这意味着不可代表的字符会像 ?xFF 那样出现。\nUTF-8 Clean-8 用于 MoarVM 从环境，命令行参数和文件系统查询接收字符串的地方，例如解码缓冲区时：\nsay Buf.new(ord(\u0026#39;A\u0026#39;), 0xFE, ord(\u0026#39;Z\u0026#39;)).decode(\u0026#39;utf8-c8\u0026#39;); # OUTPUT: «A􏿽xFEZ␤» 您可以看到 UTF8-C8 使用的两个初始代码点如何显示在此处，就在“FE”之前。您可以使用此类编码来读取具有未知编码的文件：\nmy $test-file = \u0026#34;/tmp/test\u0026#34;; given open($test-file, :w, :bin) { .write: Buf.new(ord(\u0026#39;A\u0026#39;), 0xFA, ord(\u0026#39;B\u0026#39;), 0xFB, 0xFC, ord(\u0026#39;C\u0026#39;), 0xFD); .close; } say slurp($test-file, enc =\u0026gt; \u0026#39;utf8-c8\u0026#39;); # OUTPUT: «(65 250 66 251 252 67 253)» 使用这种类型的编码进行读取并将它们编码回 UTF8-C8 将返回原始字节;使用默认的 UTF8-C8 是不可能的。\n请注意，到目前为止，这种编码在 Rakudo 的 JVM 实现中不受支持。\n输入 unicode 代码点和代码点序列 您可以按编号（十进制和十六进制）输入 Unicode 代码点。例如，名为“带有macron的拉丁大写字母ae”的字符具有十进制代码点482和十六进制代码点0x1E2：\nsay \u0026#34;\\c[482]\u0026#34;; # OUTPUT: «Ǣ␤» say \u0026#34;\\x1E2\u0026#34;; # OUTPUT: «Ǣ␤» 您还可以按名称访问 Unicode 代码点：Rakudo 支持所有 Unicode 9.0 名称。\nsay \u0026#34;\\c[PENGUIN]\u0026#34;; # OUTPUT: «🐧␤» say \u0026#34;\\c[BELL]\u0026#34;; # OUTPUT: «🔔␤» (U+1F514 BELL) 所有 Unicode 代码点名称/命名seq /emoji 序列现在都不区分大小写：[从2017.02开始]\nsay \u0026#34;\\c[latin capital letter ae with macron]\u0026#34;; # OUTPUT: «Ǣ␤» say \u0026#34;\\c[latin capital letter E]\u0026#34;; # OUTPUT: «E␤» (U+0045) 您可以使用带有 \\c[] 的逗号分隔列表来指定多个字符。 您也可以组合数字和命名样式：\nsay \u0026#34;\\c[482,PENGUIN]\u0026#34;; # OUTPUT: «Ǣ🐧␤» 除了在内插字符串中使用 \\c[] 之外，您还可以使用 uniparse:：\nsay \u0026#34;DIGIT ONE\u0026#34;.uniparse; # OUTPUT: «1␤» say uniparse(\u0026#34;DIGIT ONE\u0026#34;); # OUTPUT: «1␤» 名称别名 按名称别名。名称别名主要用于没有正式名称的代码点，缩写或更正（Unicode 名称永远不会更改）。有关它们的完整列表，请参见此处。\n没有任何官方名称的控制代码：\nsay \u0026#34;\\c[ALERT]\u0026#34;; # Not visible (U+0007 control code (also accessible as \\a)) say \u0026#34;\\c[LINE FEED]\u0026#34;; # Not visible (U+000A same as \u0026#34;\\n\u0026#34;) 更正:\nsay \u0026#34;\\c[LATIN CAPITAL LETTER GHA]\u0026#34;; # OUTPUT: «Ƣ␤» say \u0026#34;Ƣ\u0026#34;.uniname; # OUTPUT: «LATIN CAPITAL LETTER OI␤» # This one is a spelling mistake that was corrected in a Name Alias: say \u0026#34;\\c[PRESENTATION FORM FOR VERTICAL RIGHT WHITE LENTICULAR BRACKET]\u0026#34;.uniname; # OUTPUT: «PRESENTATION FORM FOR VERTICAL RIGHT WHITE LENTICULAR BRAKCET␤» 缩写:\nsay \u0026#34;\\c[ZWJ]\u0026#34;.uniname; # OUTPUT: «ZERO WIDTH JOINER␤» say \u0026#34;\\c[NBSP]\u0026#34;.uniname; # OUTPUT: «NO-BREAK SPACE␤» 命名序列 您也可以使用任何命名序列，这些不是单个代码点，而是它们的序列。 [从2017.02开始]\nsay \u0026#34;\\c[LATIN CAPITAL LETTER E WITH VERTICAL LINE BELOW AND ACUTE]\u0026#34;; # OUTPUT: «É̩␤» say \u0026#34;\\c[LATIN CAPITAL LETTER E WITH VERTICAL LINE BELOW AND ACUTE]\u0026#34;.ords; # OUTPUT: «(201 809)␤» Emoji 序列 Rakudo 支持表情符号 4.0（最新的非草稿版本）序列。 对于他们所有人看到：表情符号 ZWJ 序列和表情符号序列。 请注意，任何带逗号的名称都应删除逗号，因为 Raku 使用逗号分隔同一 \\c 序列中的不同代码点/序列。\nsay \u0026#34;\\c[woman gesturing OK]\u0026#34;; # OUTPUT: «🙆‍♀️␤» say \u0026#34;\\c[family: man woman girl boy]\u0026#34;; # OUTPUT: «👨‍👩‍👧‍👦␤» "},"name":"Unicode","published":"2018-12-12T21:13:31+08:00","summary":"Raku 对 Unicode 有很高的支持。本文档旨在概述和描述不属于例程和方法文档的 Unicode 功能。\n有关 MoarVM 内部字符串表示的概述，请参阅 MoarVM 字符串文档。\n文件句柄和输入输出 标准化 默认情况下，Raku 对所有输入和输出应用标准化，但存储为 UTF8-C8 的文件名除外;字形是用户可见的字符形式，将使用标准化表示。这是什么意思？例如，字形数字 á 可以用两种方式表示，或者使用一个代码点：\ná (U+E1 \u0026#34;LATIN SMALL LETTER A WITH ACUTE\u0026#34;) 或两个代码点:\na + ́ (U+61 \u0026#34;LATIN SMALL LETTER A\u0026#34; + U+301 \u0026#34;COMBINING ACUTE ACCENT\u0026#34;) Raku 将这两个输入转换为一个代码点，如规范化形式 C（NFC）所指定的那样。在大多数情况下，这很有用，意味着两个相同的输入都被视为相同。 Unicode 具有规范等价的概念，它允许我们确定字符串的规范形式，允许我们正确地比较字符串并操纵它们，而不必担心文本丢失这些属性。默认情况下，您处理或从 Raku 输出的任何文本都将采用此“规范”形式，即使在对字符串进行修改或连接时也是如此（请参阅下文，了解如何避免这种情况）。有关规范化表单C和规范等效性的更多详细信息，请参阅Unicode Foundation 的规范化和规范等效性页面。\n我们不默认的一种情况是文件名。这是因为必须完全访问文件的名称，就像在磁盘上写入字节一样。\n为避免规范化，您可以使用名为 UTF8-C8 的特殊编码格式。将此编码与任何文件句柄一起使用将允许您读取磁盘上的确切字节，而不进行规范化。如果使用 UTF8 句柄打印出来，打印出来时看起来会很滑稽。如果将其打印到输出编码为 UTF8-C8 的句柄，则它将按照您通常的预期进行渲染，并且是字节精确复制的字节。有关 MoarVM 上 UTF8-C8 的更多技术细节, 请参见下文。\nUTF8-C8 UTF-8 Clean-8 是一种编码器/解码器，主要用作 UTF-8。但是，遇到一个不能解码为有效 UTF-8 的字节序列，或者由于规范化而不会往返的字节序列时，它将使用 NFG 合成来跟踪所涉及的原始字节。这意味着编码回 UTF-8 Clean-8 将能够重新创建它们最初存在的字节。合成物包含4个代码点：","type":"entry","url":"https://ohmycloud.github.io/posts/69.unicode/"}