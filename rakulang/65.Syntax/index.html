<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">

    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
    
    
    

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5">

    
    <meta name="referrer" content="no-referrer">

    <title>
        
            语法 ❚ 焉知非鱼
        
    </title>

    
    


    
    
    
    

    
    
    
    

    
    
    

    
    
    
    <style>
     
     
     :root {
         --theme-color: #ac4142;
         --theme-color-light: rgba(172, 65, 66, 0.2);
     }
     
     html {
         line-height: 1.5;
     }
    </style>

    
    

    
    
    
    
    <link rel="stylesheet" href="/css/refined.min.7f6d3ee611034e4ebcbc063f1db3bc042fecdc8901afbedad80ff02bae409204.css">
    
    <link rel="preload" href="/css/refined.min.7f6d3ee611034e4ebcbc063f1db3bc042fecdc8901afbedad80ff02bae409204.css" as="style">

    



    
        <style>
         
         /* Background */ .chroma { background-color: #ffffff }
/* Error */ .chroma .err { color: #a61717; background-color: #e3d2d2 }
/* LineTableTD */ .chroma .lntd { vertical-align: top; padding: 0; margin: 0; border: 0; }
/* LineTable */ .chroma .lntable { border-spacing: 0; padding: 0; margin: 0; border: 0; width: auto; overflow: auto; display: block; }
/* LineHighlight */ .chroma .hl { display: block; width: 100%;background-color: #ffffcc }
/* LineNumbersTable */ .chroma .lnt { margin-right: 0.4em; padding: 0 0.4em 0 0.4em; }
/* LineNumbers */ .chroma .ln { margin-right: 0.4em; padding: 0 0.4em 0 0.4em; }
/* Keyword */ .chroma .k { color: #000000; font-weight: bold }
/* KeywordConstant */ .chroma .kc { color: #000000; font-weight: bold }
/* KeywordDeclaration */ .chroma .kd { color: #000000; font-weight: bold }
/* KeywordNamespace */ .chroma .kn { color: #000000; font-weight: bold }
/* KeywordPseudo */ .chroma .kp { color: #000000; font-weight: bold }
/* KeywordReserved */ .chroma .kr { color: #000000; font-weight: bold }
/* KeywordType */ .chroma .kt { color: #445588; font-weight: bold }
/* NameAttribute */ .chroma .na { color: #008080 }
/* NameBuiltin */ .chroma .nb { color: #0086b3 }
/* NameBuiltinPseudo */ .chroma .bp { color: #999999 }
/* NameClass */ .chroma .nc { color: #445588; font-weight: bold }
/* NameConstant */ .chroma .no { color: #008080 }
/* NameDecorator */ .chroma .nd { color: #3c5d5d; font-weight: bold }
/* NameEntity */ .chroma .ni { color: #800080 }
/* NameException */ .chroma .ne { color: #990000; font-weight: bold }
/* NameFunction */ .chroma .nf { color: #990000; font-weight: bold }
/* NameLabel */ .chroma .nl { color: #990000; font-weight: bold }
/* NameNamespace */ .chroma .nn { color: #555555 }
/* NameTag */ .chroma .nt { color: #000080 }
/* NameVariable */ .chroma .nv { color: #008080 }
/* NameVariableClass */ .chroma .vc { color: #008080 }
/* NameVariableGlobal */ .chroma .vg { color: #008080 }
/* NameVariableInstance */ .chroma .vi { color: #008080 }
/* LiteralString */ .chroma .s { color: #dd1144 }
/* LiteralStringAffix */ .chroma .sa { color: #dd1144 }
/* LiteralStringBacktick */ .chroma .sb { color: #dd1144 }
/* LiteralStringChar */ .chroma .sc { color: #dd1144 }
/* LiteralStringDelimiter */ .chroma .dl { color: #dd1144 }
/* LiteralStringDoc */ .chroma .sd { color: #dd1144 }
/* LiteralStringDouble */ .chroma .s2 { color: #dd1144 }
/* LiteralStringEscape */ .chroma .se { color: #dd1144 }
/* LiteralStringHeredoc */ .chroma .sh { color: #dd1144 }
/* LiteralStringInterpol */ .chroma .si { color: #dd1144 }
/* LiteralStringOther */ .chroma .sx { color: #dd1144 }
/* LiteralStringRegex */ .chroma .sr { color: #009926 }
/* LiteralStringSingle */ .chroma .s1 { color: #dd1144 }
/* LiteralStringSymbol */ .chroma .ss { color: #990073 }
/* LiteralNumber */ .chroma .m { color: #009999 }
/* LiteralNumberBin */ .chroma .mb { color: #009999 }
/* LiteralNumberFloat */ .chroma .mf { color: #009999 }
/* LiteralNumberHex */ .chroma .mh { color: #009999 }
/* LiteralNumberInteger */ .chroma .mi { color: #009999 }
/* LiteralNumberIntegerLong */ .chroma .il { color: #009999 }
/* LiteralNumberOct */ .chroma .mo { color: #009999 }
/* Operator */ .chroma .o { color: #000000; font-weight: bold }
/* OperatorWord */ .chroma .ow { color: #000000; font-weight: bold }
/* Comment */ .chroma .c { color: #999988; font-style: italic }
/* CommentHashbang */ .chroma .ch { color: #999988; font-style: italic }
/* CommentMultiline */ .chroma .cm { color: #999988; font-style: italic }
/* CommentSingle */ .chroma .c1 { color: #999988; font-style: italic }
/* CommentSpecial */ .chroma .cs { color: #999999; font-weight: bold; font-style: italic }
/* CommentPreproc */ .chroma .cp { color: #999999; font-weight: bold; font-style: italic }
/* CommentPreprocFile */ .chroma .cpf { color: #999999; font-weight: bold; font-style: italic }
/* GenericDeleted */ .chroma .gd { color: #000000; background-color: #ffdddd }
/* GenericEmph */ .chroma .ge { color: #000000; font-style: italic }
/* GenericError */ .chroma .gr { color: #aa0000 }
/* GenericHeading */ .chroma .gh { color: #999999 }
/* GenericInserted */ .chroma .gi { color: #000000; background-color: #ddffdd }
/* GenericOutput */ .chroma .go { color: #888888 }
/* GenericPrompt */ .chroma .gp { color: #555555 }
/* GenericStrong */ .chroma .gs { font-weight: bold }
/* GenericSubheading */ .chroma .gu { color: #aaaaaa }
/* GenericTraceback */ .chroma .gt { color: #aa0000 }
/* GenericUnderline */ .chroma .gl { text-decoration: underline }
/* TextWhitespace */ .chroma .w { color: #bbbbbb }

         
         /* Overrides on top of the theme and Chroma CSS */
/* Chroma-based lines highlighting in code blocks */
.chroma .hl {
    background-color: #e8e8e8;
    /* Extend highlight up to 100 characters (assuming that the code blocks never have more than 100 characters in a line) */
    min-width: 100ch;
}
/* GenericHeading */ .chroma .gh { color: #999999; font-weight: bold }
/* GenericSubheading */ .chroma .gu { color: #aaaaaa; font-weight: bold }

         
        </style>
    

    

    
    
    

    
    <script src="/js/responsive-nav-orig.min.e2b5f2a956b488f466da513820636134defdc38b90ed566248960593f2bb4ba5.js"></script>
    
    <link rel="preload" href="/js/responsive-nav-orig.min.e2b5f2a956b488f466da513820636134defdc38b90ed566248960593f2bb4ba5.js" as="script">

    
    
    <script defer src="/js/libs/fa/fontawesome-all.min.08916ac0fd078adfb58edc890460e2c8990729aee02bca7586404b56805f5219.js"></script>
    
    <link rel="preload" href="/js/libs/fa/fontawesome-all.min.08916ac0fd078adfb58edc890460e2c8990729aee02bca7586404b56805f5219.js" as="script">

    

    

    
    
    

    
    
<!-- rel="me" links for IndieAuth -->







    
 
<meta property="og:title" content="语法" />
<meta property="og:description"
      content=" " />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/rakulang/65.syntax/" />


    
        <meta property="article:published_time" content="2018-12-09T21:13:31&#43;08:00"/>
    
    
        <meta property="article:modified_time" content="2018-12-09T21:13:31&#43;08:00"/>
    









    




     <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="语法"/>
<meta name="twitter:description" content=" "/>


    
    
    <link rel="alternate" type="application/jf2post+json" href="http://localhost:1313/rakulang/65.syntax/jf2post.json" title="Jf2post for 焉知非鱼" />
    
     



    
    
    
        
    


     
        
        <meta name="DC.Creator" content="焉知非鱼"/>
    



    
    
    
    <meta name="hugo-build-date" content="2024-03-01T16:16:06Z"/>
    <meta name="hugo-commit-hash" content="312735366b20d64bd61bff8627f593749f86c964"/>
    <meta name="generator" content="Hugo 0.123.7">
</head>


    
        <body lang="en">
    

        
        <div class="border" id="home"></div>

        <div class="wrapper">   
            
<nav id="nav" class="nav-collapse opened" aria-hidden="false">
    <ul class="navbar">
        <li><a class="" href="/">Home</a></li>
        
            
                <li><a class="" href="http://localhost:1313/posts/">Posts</a></li>
            
        
            
                <li><a class="" href="http://localhost:1313/notes/">Notes</a></li>
            
        
            
                <li><a class="" href="http://localhost:1313/rakulang/">Rakulang</a></li>
            
        
        
            <li><a class="" href="http://localhost:1313/search/">Search</a></li>
        
    </ul>
</nav>

            <div class="container">
                <header class="masthead">
                    <div class="masthead-title no-text-decoration">
                        <a href="/">焉知非鱼</a> <span class="blinking-cursor">❚</span>
                    </div>
                    <div class="masthead-tagline">
                        Wait the light to fall
                    </div>
                </header>

                








<article class="post h-entry rakulang">
    <header>
        <div class="center">
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="http://localhost:1313/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="http://localhost:1313/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>

</div>

        <h1 class="post-title p-name">语法</h1>

        
        <data class="u-url" value="http://localhost:1313/rakulang/65.syntax/"></data>

        <div class="date-syndication">
            


    
    
    <div class="post-date">
        
        <time datetime="2018-12-09T21:13:31+0800" class="dt-published">Sun Dec 9, 2018</time>
        
        
    </div>


            




        </div>
         



    
    
    
        
    


    
        
        <span class="hide">
            &mdash; <a href="http://localhost:1313/" class="u-author">焉知非鱼</a>
        </span>
    


    </header>

    <div class="content">
        


        





                       


        <div class="e-content">
            




<p>Raku 借用了人类语言中的许多概念。考虑到它是由语言学家设计的，这并不奇怪。</p>
<p>它重用不同语境中的共同元素，具有名词（术语）和动词（运算符）的概念，是上下文敏感的（在日常意义上，不一定在计算机科学解释中），因此符号可以具有不同的含义取决于名词或动词是否是预期的。</p>
<p>它也是自同步的，因此解析器可以检测大多数常见错误并提供良好的错误消息。</p>
<h2 id="词法约定">词法约定&nbsp;<a class="headline-hash no-text-decoration" href="#词法约定">#</a> </h2>
<p>Raku 代码是 Unicode 文本。当前的实现支持 UTF-8 作为输入编码。</p>
<p>也参阅 <a href="https://docs.raku.org/language/unicode_ascii">Unicode versus ASCII symbols</a>.</p>
<h3 id="自由形式">自由形式&nbsp;<a class="headline-hash no-text-decoration" href="#自由形式">#</a> </h3>
<p>Raku 代码也是自由格式的，从某种意义上说，你可以自由选择你使用的空格量，尽管在某些情况下，空格的存在与否具有意义。</p>
<p>所以你可以写</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">if</span> <span class="kt">True</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">Hello</span><span class="p">&#34;;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>或</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl">    <span class="k">if</span> <span class="kt">True</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&#34;</span><span class="s2">Hello</span><span class="p">&#34;;</span> <span class="c1"># Bad indentation intended </span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><p>或</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">if</span> <span class="kt">True</span> <span class="p">{</span> <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">Hello</span><span class="p">&#34;</span> <span class="p">}</span>
</span></span></code></pre></div><p>或者甚至</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">if</span> <span class="kt">True</span> <span class="p">{</span><span class="nb">say</span> <span class="p">&#34;</span><span class="s2">Hello</span><span class="p">&#34;}</span>
</span></span></code></pre></div><p>虽然你不能省略任何剩余的空白。</p>
<h3 id="unspace">Unspace&nbsp;<a class="headline-hash no-text-decoration" href="#unspace">#</a> </h3>
<p>在编译器不允许空格的许多地方，只要用反斜杠引用，就可以使用任意数量的空格。不支持 token 中的空格。当编译器生成行号时，未空格的换行仍然计算。用于非空格的用例是后缀运算符和例程参数列表的分离。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">sub</span> <span class="nf">alignment</span><span class="p">(</span><span class="o">+</span><span class="nv">@l</span><span class="p">)</span> <span class="p">{</span> <span class="o">+</span><span class="nv">@l</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="k">sub</span> <span class="nf">long-name-alignment</span><span class="p">(</span><span class="o">+</span><span class="nv">@l</span><span class="p">)</span> <span class="p">{</span> <span class="o">+</span><span class="nv">@l</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="n">alignment</span>\         <span class="p">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="nb">say</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nf">long-name-alignment</span><span class="p">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">5</span><span class="p">)</span>\   <span class="o">.</span><span class="nb">say</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="no">Inf</span><span class="o">+</span><span class="no">Inf</span>\<span class="no">i</span><span class="p">;</span>
</span></span></code></pre></div><p>在这种情况下，我们的目的是让 <code>.</code> 两个语句以及括号都对齐，所以我们在用于填充的空格之前加上 <code>\</code>。</p>
<h3 id="用分号分割语句">用分号分割语句&nbsp;<a class="headline-hash no-text-decoration" href="#用分号分割语句">#</a> </h3>
<p>Raku 程序是一组由分号 <code>;</code> 分割的语句。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&#34;</span><span class="s2">Hello</span><span class="p">&#34;;</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&#34;</span><span class="s2">world</span><span class="p">&#34;;</span>
</span></span></code></pre></div><p>最后一个语句之后（或在块内的最终语句之后）的分号是可选的。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&#34;</span><span class="s2">Hello</span><span class="p">&#34;;</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&#34;</span><span class="s2">world</span><span class="p">&#34;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">if</span> <span class="kt">True</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">Hello</span><span class="p">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&#34;</span><span class="s2">world</span><span class="p">&#34;</span>
</span></span></code></pre></div><h3 id="隐式分隔符规则对于以块结尾的语句">隐式分隔符规则（对于以块结尾的语句）&nbsp;<a class="headline-hash no-text-decoration" href="#隐式分隔符规则对于以块结尾的语句">#</a> </h3>
<p>以裸块结尾的完整语句可以省略尾随分号，如果同一行上没有其他语句跟随块的结束大括号 <code>}</code>。 这称为“隐式分隔符规则”。例如，您不需要在 <code>if</code> 语句块之后写一个分号，如上所示，以及下面所示。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">if</span> <span class="kt">True</span> <span class="p">{</span> <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">Hello</span><span class="p">&#34;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&#34;</span><span class="s2">world</span><span class="p">&#34;;</span>
</span></span></code></pre></div><p>但是，需要使用分号将块与同一行中的尾随语句分开。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">if</span> <span class="kt">True</span> <span class="p">{</span> <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">Hello</span><span class="p">&#34;</span> <span class="p">};</span> <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">world</span><span class="p">&#34;;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#                     ^^^ this ; is required </span>
</span></span></code></pre></div><p>此隐式语句分隔符规则除了控制语句之外还以其他方式应用，可能以裸块结束。例如，结合冒号：方法调用的语法。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">@names</span> <span class="o">=</span> <span class="p">&lt;</span><span class="s">Foo Bar Baz</span><span class="p">&gt;;</span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">@upper-case-names</span> <span class="o">=</span> <span class="nv">@names</span><span class="o">.</span><span class="nb">map</span><span class="o">:</span> <span class="p">{</span> <span class="o">.</span><span class="nb">uc</span> <span class="p">}</span>    <span class="c1"># OUTPUT: [FOO BAR BAZ] </span>
</span></span></code></pre></div><p>对于属于同一 <code>if/elsif/else</code>（或类似）构造的一系列块，隐式分隔符规则仅适用于该系列的最后一个块的末尾。这三个是等价的：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">if</span> <span class="kt">True</span> <span class="p">{</span> <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">Hello</span><span class="p">&#34;</span> <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">Goodbye</span><span class="p">&#34;</span> <span class="p">};</span> <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">world</span><span class="p">&#34;;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#                                            ^^^ this ; is required </span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">if</span> <span class="kt">True</span> <span class="p">{</span> <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">Hello</span><span class="p">&#34;</span> <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">Goodbye</span><span class="p">&#34;</span> <span class="p">}</span> <span class="c1"># &lt;- implied statement separator </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&#34;</span><span class="s2">world</span><span class="p">&#34;;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">if</span> <span class="kt">True</span> <span class="p">{</span> <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">Hello</span><span class="p">&#34;</span> <span class="p">}</span>   <span class="c1"># still in the middle of an if/else statement </span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>    <span class="p">{</span> <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">Goodbye</span><span class="p">&#34;</span> <span class="p">}</span> <span class="c1"># &lt;- no semicolon required because it ends in a block </span>
</span></span><span class="line"><span class="cl">                          <span class="c1">#    without trailing statements in the same line </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&#34;</span><span class="s2">world</span><span class="p">&#34;;</span>
</span></span></code></pre></div><h3 id="注释">注释&nbsp;<a class="headline-hash no-text-decoration" href="#注释">#</a> </h3>
<p>注释是程序文本的一部分，仅供人类读者阅读; Raku 编译器不会将它们当作程序文本。</p>
<p>在缺少或存在空白消除可能的解析的地方，注释计为空格。</p>
<h4 id="单行注释">单行注释&nbsp;<a class="headline-hash no-text-decoration" href="#单行注释">#</a> </h4>
<p>Raku 中最常见的注释形式以单个哈希字符 <code>#</code> 开头，直到该行的结尾。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">if</span> <span class="nv">$age</span> <span class="o">&gt;</span> <span class="mi">250</span> <span class="p">{</span>     <span class="c1"># catch obvious outliers </span>
</span></span><span class="line"><span class="cl">    <span class="c1"># this is another comment! </span>
</span></span><span class="line"><span class="cl">    <span class="nb">die</span> <span class="p">&#34;</span><span class="s2">That doesn&#39;t look right</span><span class="p">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h4 id="多行--嵌套注释">多行 / 嵌套注释&nbsp;<a class="headline-hash no-text-decoration" href="#多行--嵌套注释">#</a> </h4>
<p>多行和嵌入式注释以井号字符开头，然后是反引号，然后是一些开口括号字符，并以匹配的闭合括号字符结束。内容不仅可以跨越多行，还可以嵌入内联。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">if</span> <span class="cm">#`( why would I ever write an inline comment here? )</span> <span class="kt">True</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">something stupid</span><span class="p">&#34;;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>这些注释可以扩展到多行</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="cm">#`[
</span></span></span><span class="line"><span class="cl"><span class="cm">And this is how a multi would work.
</span></span></span><span class="line"><span class="cl"><span class="cm">That says why we do what we do below.
</span></span></span><span class="line"><span class="cl"><span class="cm">]</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&#34;</span><span class="s2">No more</span><span class="p">&#34;;</span>
</span></span></code></pre></div><p>注释中的大括号可以嵌套，因此在  #<code>{ a { b } c }, 中，注释一直持续到字符串的最后。 您也可以使用多个花括号，例如 #</code>{{ double-curly-brace }}，这可能有助于消除嵌套分隔符的歧义。 您可以在表达式中嵌入这些注释，只要不将它们插入关键字或标识符的中间即可。</p>
<h4 id="pod-注释">Pod 注释&nbsp;<a class="headline-hash no-text-decoration" href="#pod-注释">#</a> </h4>
<p>Pod 语法可用于多行注释</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&#34;</span><span class="s2">this is code</span><span class="p">&#34;;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">=begin</span><span class="sd"> </span><span class="k">comment</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd"> 
</span></span></span><span class="line"><span class="cl"><span class="sd">Here are several
</span></span></span><span class="line"><span class="cl"><span class="sd">lines
</span></span></span><span class="line"><span class="cl"><span class="sd">of comment
</span></span></span><span class="line"><span class="cl"><span class="sd"> 
</span></span></span><span class="line"><span class="cl"><span class="sd"></span><span class="k">=end comment</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&#39;</span><span class="s1">code again</span><span class="p">&#39;;</span>
</span></span></code></pre></div><h3 id="标识符">标识符&nbsp;<a class="headline-hash no-text-decoration" href="#标识符">#</a> </h3>
<p>标识符是语法构建块，可用于为实体/对象赋予名称，例如常量，变量（例如标量）和例程（例如，Subs 和方法）。在变量名中，任何sigil（和twigil）都在标识符之前，并且不形成其一部分。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">constant</span> <span class="no">c</span> <span class="o">=</span> <span class="mi">299792458</span><span class="p">;</span>     <span class="c1"># identifier &#34;c&#34; names an Int </span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$a</span> <span class="o">=</span> <span class="mi">123</span><span class="p">;</span>                <span class="c1"># identifier &#34;a&#34; in the name &#34;$a&#34; of a Scalar </span>
</span></span><span class="line"><span class="cl"><span class="k">sub</span> <span class="nf">hello</span> <span class="p">{</span> <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">Hello!</span><span class="p">&#34;</span> <span class="p">};</span> <span class="c1"># identifier &#34;hello&#34; names a Sub </span>
</span></span></code></pre></div><p>标识符有不同的形式：普通标识符，扩展标识符和复合标识符。</p>
<h4 id="普通标识符">普通标识符&nbsp;<a class="headline-hash no-text-decoration" href="#普通标识符">#</a> </h4>
<p>普通标识符由前导字母字符组成，后面可以跟着一个或多个字母数字字符。它也可能包含单独的，嵌入的撇号 <code>'</code> 和/或连字符 <code>-</code>,  前提是下一个字符每次都是字母。</p>
<p>“字母”和“字母数字”的定义包括适当的 Unicode 字符。哪些字符“合适”取决于实现。在 Rakudo/MoarVM Raku 实现中，字母字符包括具有 Unicode 通用类别值 Letter(L) 和下划线 <code>_</code> 的字符。字母数字字符还包括具有 Unicode 通用类别值编号，十进制数字(Nd) 的字符。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="c1"># valid ordinary identifiers: </span>
</span></span><span class="line"><span class="cl"><span class="nb">x</span>
</span></span><span class="line"><span class="cl"><span class="n">_snake_oil</span>
</span></span><span class="line"><span class="cl"><span class="n">something-longer</span>
</span></span><span class="line"><span class="cl"><span class="n">with-numbers1234</span>
</span></span><span class="line"><span class="cl"><span class="n">don&#39;t-do-that</span>
</span></span><span class="line"><span class="cl"><span class="n">piece_of_π</span>
</span></span><span class="line"><span class="cl"><span class="n">駱駝道</span>              <span class="c1"># &#34;Rakuda-dō&#34;, Japanese for &#34;Way of the camel&#34; </span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="c1"># invalid ordinary identifiers: </span>
</span></span><span class="line"><span class="cl"><span class="mi">42</span>                 <span class="c1"># identifier does not start with alphabetic character </span>
</span></span><span class="line"><span class="cl"><span class="n">with-numbers1234-5</span> <span class="c1"># embedded hyphen not followed by alphabetic character </span>
</span></span><span class="line"><span class="cl"><span class="nb">is-prime</span><span class="o">?</span>          <span class="c1"># question mark is not alphanumeric </span>
</span></span><span class="line"><span class="cl"><span class="nb">x</span>²                 <span class="c1"># superscript 2 is not alphanumeric (explained above) </span>
</span></span></code></pre></div><h4 id="扩展标识符">扩展标识符&nbsp;<a class="headline-hash no-text-decoration" href="#扩展标识符">#</a> </h4>
<p>使名称包含普通标识符中不允许的字符通常很方便。用例包括一组实体共享一个共同的“短”名称但仍需要单独识别其每个元素的情况。例如，您可以使用短名称为 <code>Dog</code> 的模块，而其长名称包括其命名所有权和版本号：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="n">Dog</span><span class="p">:</span><span class="na">auth</span><span class="p">&lt;</span><span class="s">Somebody</span><span class="p">&gt;:</span><span class="na">ver</span><span class="p">&lt;</span><span class="s">1.0</span><span class="p">&gt;</span>  <span class="c1"># long module names including author and version </span>
</span></span><span class="line"><span class="cl"><span class="n">Dog</span><span class="p">:</span><span class="na">auth</span><span class="p">&lt;</span><span class="s">Somebody</span><span class="p">&gt;:</span><span class="na">ver</span><span class="p">&lt;</span><span class="s">2.0</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nn">Dog</span><span class="p">:</span><span class="na">auth</span><span class="p">&lt;</span><span class="s">Somebody</span><span class="p">&gt;:</span><span class="na">ver</span><span class="p">&lt;</span><span class="s">2.0</span><span class="p">&gt;;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Selection of second module causes its full name to be aliased to the </span>
</span></span><span class="line"><span class="cl"><span class="c1"># short name for the rest of # the lexical scope, allowing a declaration </span>
</span></span><span class="line"><span class="cl"><span class="c1"># like this. </span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="n">Dog</span> <span class="nv">$spot</span> <span class="o">.=</span> <span class="nb">new</span><span class="p">(&#34;</span><span class="s2">woof</span><span class="p">&#34;);</span>
</span></span></code></pre></div><p>类似地，运算符集在各种语法类别中一起工作，其名称如 prefix，infix 和 postfix。这些运算符的官方名称通常包含从普通标识符中排除的字符。长名称是扩展标识符的构成，包括这个句法类别;短名称将包含在定义中的引号中：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">infix</span><span class="o">:</span><span class="p">&lt;</span><span class="s">+</span><span class="p">&gt;</span>                 <span class="c1"># the official name of the operator in $a + $b </span>
</span></span><span class="line"><span class="cl"><span class="nb">infix</span><span class="o">:</span><span class="p">&lt;</span><span class="s">*</span><span class="p">&gt;</span>                 <span class="c1"># the official name of the operator in $a * $b </span>
</span></span><span class="line"><span class="cl"><span class="nb">infix</span><span class="o">:</span><span class="p">«</span><span class="s2">&lt;=</span><span class="p">»</span>                <span class="c1"># the official name of the operator in $a &lt;= $b </span>
</span></span></code></pre></div><p>对于所有此类用途，您可以将一个或多个冒号分隔的字符串附加到普通标识符，以创建所谓的扩展标识符。 附加到标识符（即后缀位置）时，此冒号分隔的字符串会生成该标识符的唯一变体。</p>
<p>这些字符串的格式为 <code>:key&lt;value&gt;</code>，其中 key 或 value 是可选的; 也就是说，在将它与常规标识符分开的冒号之后，将存在一个键和/或引用包围结构，例如 &lt;&gt;，«» 或 [&rsquo; &lsquo;]，它引用一个或多个任意字符值。[1]</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="c1"># exemplary valid extended identifiers: </span>
</span></span><span class="line"><span class="cl"><span class="nb">postfix</span><span class="o">:</span><span class="p">&lt;</span><span class="s">²</span><span class="p">&gt;</span>               <span class="c1"># the official long name of the operator in $x² </span>
</span></span><span class="line"><span class="cl"><span class="n">WOW:That&#39;sAwesome</span>
</span></span><span class="line"><span class="cl"><span class="n">WOW</span><span class="p">:</span><span class="na">That&#39;s</span><span class="p">&lt;&lt;</span><span class="s2">🆒</span><span class="p">&gt;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">party</span><span class="p">:</span><span class="na">sweet</span><span class="p">&lt;</span><span class="s">16</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1"># exemplary invalid extended identifiers: </span>
</span></span><span class="line"><span class="cl"><span class="n">party</span><span class="p">:</span><span class="na">16</span><span class="p">&lt;</span><span class="s">sweet</span><span class="p">&gt;</span>           <span class="c1"># 16 is not an ordinary identifier </span>
</span></span><span class="line"><span class="cl"><span class="nf">party:16sweet</span>
</span></span><span class="line"><span class="cl"><span class="n">party:</span><span class="o">!</span><span class="n">a</span>                  <span class="c1"># ...and neither is !a </span>
</span></span><span class="line"><span class="cl"><span class="n">party:</span><span class="nv">$a</span>                  <span class="c1"># ...nor $a </span>
</span></span></code></pre></div><p>在扩展标识符中，后缀字符串被视为名称的组成部分，因此 <code>infix:&lt;+&gt;</code> 和 <code>infix:&lt;-&gt;</code> 是两个不同的运算符。但是，使用的包围字符不算作其中的一部分;只有引用的数据很重要。所以这些都是同一个名字：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">infix</span><span class="o">:</span><span class="p">&lt;</span><span class="s">+</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nb">infix</span><span class="o">:</span><span class="p">&lt;&lt;</span><span class="s2">+</span><span class="p">&gt;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nb">infix</span><span class="o">:</span><span class="p">«</span><span class="s2">+</span><span class="p">»</span>
</span></span><span class="line"><span class="cl"><span class="nb">infix</span><span class="o">:[</span><span class="p">&#39;</span><span class="s1">+</span><span class="p">&#39;</span><span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nb">infix</span><span class="o">:</span><span class="p">(&#39;</span><span class="s1">+</span><span class="p">&#39;)</span>
</span></span></code></pre></div><p>同样，所有这些都有效：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$foo</span><span class="p">:</span><span class="na">bar</span><span class="p">&lt;</span><span class="s">baz</span><span class="p">&gt;</span> <span class="o">=</span> <span class="p">&#39;</span><span class="s1">quux</span><span class="p">&#39;;</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">$foo</span><span class="p">:</span><span class="na">bar</span><span class="p">«</span><span class="s2">baz</span><span class="p">»;</span>                               <span class="c1"># OUTPUT: «quux␤» </span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$take-me:</span><span class="p">&lt;</span><span class="s">home</span><span class="p">&gt;</span> <span class="o">=</span> <span class="p">&#39;</span><span class="s1">Where the glory has no end</span><span class="p">&#39;;</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">$take-me:</span><span class="o">[</span><span class="p">&#39;</span><span class="s1">home</span><span class="p">&#39;</span><span class="o">]</span><span class="p">;</span>                           <span class="c1"># OUTPUT: «Where [...]␤» </span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$foo</span><span class="p">:</span><span class="na">bar</span><span class="p">&lt;</span><span class="s">2</span><span class="p">&gt;</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">$foo</span><span class="p">:</span><span class="na">bar</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>                               <span class="c1"># OUTPUT: «5␤» </span>
</span></span></code></pre></div><p>如果扩展标识符包含两个或更多个冒号对，则它们的顺序通常很重要：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$a</span><span class="p">:</span><span class="na">b</span><span class="p">&lt;</span><span class="s">c</span><span class="p">&gt;:</span><span class="na">d</span><span class="p">&lt;</span><span class="s">e</span><span class="p">&gt;</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$a</span><span class="p">:</span><span class="na">d</span><span class="p">&lt;</span><span class="s">e</span><span class="p">&gt;:</span><span class="na">b</span><span class="p">&lt;</span><span class="s">c</span><span class="p">&gt;</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">$a</span><span class="p">:</span><span class="na">b</span><span class="p">&lt;</span><span class="s">c</span><span class="p">&gt;:</span><span class="na">d</span><span class="p">&lt;</span><span class="s">e</span><span class="p">&gt;;</span>               <span class="c1"># OUTPUT: «100␤», NOT: «200␤» </span>
</span></span></code></pre></div><p>此规则的一个例外是模块版本控制;所以这些标识符有效地命名相同的模块：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">use</span> <span class="nn">ThatModule</span><span class="p">:</span><span class="na">auth</span><span class="p">&lt;</span><span class="s">Somebody</span><span class="p">&gt;:</span><span class="na">ver</span><span class="p">&lt;</span><span class="s">2.7.18.28.18</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nn">ThatModule</span><span class="p">:</span><span class="na">ver</span><span class="p">&lt;</span><span class="s">2.7.18.28.18</span><span class="p">&gt;:</span><span class="na">auth</span><span class="p">&lt;</span><span class="s">Somebody</span><span class="p">&gt;</span>
</span></span></code></pre></div><p>此外，扩展标识符支持编译时插值;这需要使用常量作为插值：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">constant</span> <span class="nv">$c</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>  <span class="c1"># Constant binds to Int; $-sigil enables interpolation </span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$a</span><span class="p">:</span><span class="na">foo</span><span class="p">&lt;</span><span class="s">42</span><span class="p">&gt;</span> <span class="o">=</span> <span class="p">&#34;</span><span class="s2">answer</span><span class="p">&#34;;</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">$a</span><span class="p">:</span><span class="na">foo</span><span class="p">«</span><span class="nv">$c</span><span class="p">»;</span>    <span class="c1"># OUTPUT: «answer␤» </span>
</span></span></code></pre></div><p>虽然引用包围结构在标识符的上下文中通常是可互换的，但它们并不相同。特别是，尖括号 <code>&lt;&gt;</code>（模仿单引号插值特征）不能用于常量名称的插值。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">constant</span> <span class="nv">$what</span> <span class="o">=</span> <span class="p">&#39;</span><span class="s1">are</span><span class="p">&#39;;</span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">@we:</span><span class="p">&lt;</span><span class="s">are</span><span class="p">&gt;</span><span class="o">=</span> <span class="p">&lt;</span><span class="s">the champions</span><span class="p">&gt;;</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">@we:</span><span class="p">«</span><span class="nv">$what</span><span class="p">»;</span>     <span class="c1"># OUTPUT: «[the champions]␤» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">@we:</span><span class="p">&lt;</span><span class="s">$what</span><span class="p">&gt;;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Compilation error: Variable &#39;@we:&lt;$what&gt;&#39; is not declared </span>
</span></span></code></pre></div><h4 id="组合标识符">组合标识符&nbsp;<a class="headline-hash no-text-decoration" href="#组合标识符">#</a> </h4>
<p>复合标识符是由两个或多个普通和/或扩展标识符组成的标识符，这些标识符通过双冒号 <code>::</code> 彼此分开。</p>
<p>双冒号 <code>::</code> 被称为命名空间分隔符或包分隔符，它在名称中阐明了它的语义功能：强制将名称的前一部分视为包名/命名空间，名称的后续部分通过该包/命名空间位于：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">module</span> <span class="nn">MyModule</span> <span class="p">{</span>               <span class="c1"># declare a module package </span>
</span></span><span class="line"><span class="cl">    <span class="k">our</span> <span class="nv">$var</span> <span class="o">=</span> <span class="p">&#34;</span><span class="s2">Hello</span><span class="p">&#34;;</span>         <span class="c1"># declare package-scoped variable </span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">$MyModule::var</span>              <span class="c1"># OUTPUT: «Hello␤» </span>
</span></span></code></pre></div><p>在上面的示例中，<code>MyModule::var</code> 是一个复合标识符，由包名称标识符 <code>MyModule</code> 和变量名称 <code>var</code> 的标识符部分组成。加在一块, <code>$MyModule::var</code> 通常被称为包限定名。</p>
<p>使用双冒号分隔标识符会导致最右边的名称插入到现有包（参见上面的示例）或自动创建的包中：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$foo::bar</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="n">OUR::</span><span class="o">.</span><span class="nb">keys</span><span class="p">;</span>           <span class="c1"># OUTPUT: «(foo)␤» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="n">OUR::foo</span><span class="o">.</span><span class="nb">HOW</span>          <span class="c1"># OUTPUT: «Raku::Metamodel::PackageHOW.new␤» </span>
</span></span></code></pre></div><p>最后几行显示了如何自动创建 <code>foo</code> 包，作为该命名空间中变量的存放。</p>
<p>双冒号语法允许使用 <code>::($expr)</code> 将字符串运行时插入到包或变量名中，您通常会在其中放置包或变量名：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$buz</span> <span class="o">=</span> <span class="p">&#34;</span><span class="s2">quux</span><span class="p">&#34;;</span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$bur::quux</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">$bur::</span><span class="p">(</span><span class="nv">$buz</span><span class="p">);</span>               <span class="c1"># OUTPUT: «7␤» </span>
</span></span></code></pre></div><h3 id="项-term">项 term:&lt;&gt;&nbsp;<a class="headline-hash no-text-decoration" href="#项-term">#</a> </h3>
<p>您可以使用 <code>term:&lt;&gt;</code> 来引入新的项，这对于引入违反常规标识符规则的常量非常方便：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">use</span> <span class="kt">Test</span><span class="p">;</span> <span class="nb">plan</span> <span class="mi">1</span><span class="p">;</span> <span class="k">constant</span> <span class="nv">&amp;term:</span><span class="p">&lt;</span><span class="s">👍</span><span class="p">&gt;</span> <span class="o">=</span> <span class="nv">&amp;ok</span><span class="o">.</span><span class="nb">assuming</span><span class="p">(</span><span class="kt">True</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">👍
</span></span><span class="line"><span class="cl"><span class="c1"># OUTPUT: «1..1␤ok 1 - ␤» </span>
</span></span></code></pre></div><p>但是项不必是常量：您也可以将它们用于不带任何参数的函数，并强制解析器在它们之后期望运算符。例如：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">sub</span> <span class="nb">term</span><span class="o">:</span><span class="p">&lt;</span><span class="s">dice</span><span class="p">&gt;</span> <span class="p">{</span> <span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="nb">pick</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="n">dice</span> <span class="o">+</span> <span class="n">dice</span><span class="p">;</span>
</span></span></code></pre></div><p>可以打印 2 到 12 之间的任何数字。</p>
<p>相反，我们已经声明 dice 为常规子例程</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">sub</span> <span class="nf">dice</span><span class="p">()</span> <span class="p">{(</span><span class="mi">1</span><span class="o">...</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="nb">pick</span> <span class="p">}</span>
</span></span></code></pre></div><p>表达式 <code>dice + dice</code> 将被解析为 <code>dice(+(dice()))</code>，导致错误，因为子 <code>dice</code> 需要零个参数。</p>
<h2 id="语句和表达式">语句和表达式&nbsp;<a class="headline-hash no-text-decoration" href="#语句和表达式">#</a> </h2>
<p>Raku 程序由一组组成。语句的一个特例是表达式，它返回一个值。例如，<code> if True { say 42 }</code> 在语法上是一个语句，而不是一个表达式，而 <code>1 + 2</code> 是一个表达式（因此也是一个语句）。</p>
<p><code>do</code> 前缀将语句转换为表达式。所以虽然</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$x</span> <span class="o">=</span> <span class="k">if</span> <span class="kt">True</span> <span class="p">{</span> <span class="mi">42</span> <span class="p">};</span>     <span class="c1"># Syntax error! </span>
</span></span></code></pre></div><p>是一个错误,</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$x</span> <span class="o">=</span> <span class="nb">do</span> <span class="k">if</span> <span class="kt">True</span> <span class="p">{</span> <span class="mi">42</span> <span class="p">};</span>
</span></span></code></pre></div><p>将 <code>if</code> 语句（此处为 42）的返回值赋给变量 <code>$x</code>。</p>
<h2 id="项">项&nbsp;<a class="headline-hash no-text-decoration" href="#项">#</a> </h2>
<p>项是基本名词，可选地与运算符一起形成表达式。项的示例是变量（<code>$x</code>），诸如类型名称（Int），字面量（42），声明（<code>sub f() { }</code>）和调用（<code>f()</code>）之类的裸字。</p>
<p>例如，在表达式 <code>2 * $salary</code> 中，<code>2</code> 和 <code>$salary</code> 是两个项（整数字面量和变量）。</p>
<h3 id="变量">变量&nbsp;<a class="headline-hash no-text-decoration" href="#变量">#</a> </h3>
<p>变量通常以称为 sigil 的特殊字符开头，后跟一个标识符。必须先声明变量才能使用它们。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="c1"># declaration: </span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$number</span> <span class="o">=</span> <span class="mi">21</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># usage: </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">$number</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
</span></span></code></pre></div><p>有关更多详细信息，请参阅变量文档。</p>
<h3 id="裸字-常量类型名">裸字 (常量,类型名)&nbsp;<a class="headline-hash no-text-decoration" href="#裸字-常量类型名">#</a> </h3>
<p>预先声明的标识符可以是它们自己的术语。这些通常是类型名称或常量，但也是术语 <code>self</code>，它指的是调用方法的对象（请参阅对象）和无符号变量：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="kt">Int</span><span class="p">;</span>                <span class="c1"># OUTPUT: «(Int)␤» </span>
</span></span><span class="line"><span class="cl"><span class="c1">#   ^^^ type name (built in) </span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">constant</span> <span class="no">answer</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="n">answer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#   ^^^^^^ constant </span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Foo</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">method</span> <span class="nf">type-name</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">self</span><span class="o">.^</span><span class="nb">name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="c1"># ^^^^ built-in term &#39;self&#39; </span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="n">Foo</span><span class="o">.</span><span class="nf">type-name</span><span class="p">;</span>     <span class="c1"># OUTPUT: «Foo␤» </span>
</span></span><span class="line"><span class="cl"><span class="c1">#   ^^^ type name </span>
</span></span></code></pre></div><h3 id="包和限定名">包和限定名&nbsp;<a class="headline-hash no-text-decoration" href="#包和限定名">#</a> </h3>
<p>命名实体（如变量，常量，类，模块或子）是命名空间的一部分。名称的嵌套部分使用 <code>::</code> 来分隔层次结构。一些例子：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nv">$foo</span>                <span class="c1"># simple identifiers </span>
</span></span><span class="line"><span class="cl"><span class="nv">$Foo::Bar::baz</span>      <span class="c1"># compound identifiers separated by :: </span>
</span></span><span class="line"><span class="cl"><span class="nv">$Foo::</span><span class="p">(</span><span class="nv">$bar</span><span class="p">)</span><span class="o">:</span><span class="p">:</span><span class="s">baz</span>   <span class="c1"># compound identifiers that perform interpolations </span>
</span></span><span class="line"><span class="cl"><span class="nf">Foo::Bar::bob</span><span class="p">(</span><span class="mi">23</span><span class="p">)</span>   <span class="c1"># function invocation given qualified name </span>
</span></span></code></pre></div><p>有关更多详细信息，请参阅包中的文档。</p>
<h3 id="字面量">字面量&nbsp;<a class="headline-hash no-text-decoration" href="#字面量">#</a> </h3>
<p>字面量是源代码中常量值的表示。 Raku 具有几种内置类型的字面量，如字符串，几种数字类型，pair 对儿等等。</p>
<h4 id="字符串字面量">字符串字面量&nbsp;<a class="headline-hash no-text-decoration" href="#字符串字面量">#</a> </h4>
<p>字符串字面量用引号括起来：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&#39;</span><span class="s1">a string literal</span><span class="p">&#39;;</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&#34;</span><span class="s2">a string literal</span><span class="se">\n</span><span class="s2">that interprets escape sequences</span><span class="p">&#34;;</span>
</span></span></code></pre></div><p>请参阅引用以获取更多选项，包括转义引用 <code>q</code>。 Raku 在字面量中使用标准转义字符 \a \b \t \n \f \r \e, 与设计文档中指定的 ASCII 转义码具有相同的含义。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&#34;</span><span class="s2">🔔</span><span class="se">\a</span><span class="p">&#34;;</span>  <span class="c1"># OUTPUT: «🔔␇␤» </span>
</span></span></code></pre></div><h4 id="数字字面量">数字字面量&nbsp;<a class="headline-hash no-text-decoration" href="#数字字面量">#</a> </h4>
<p>数字字面量通常用十进制表示（除非前缀为 <code>0x</code>（十六进制，基数为16），<code>0o</code>（八进制，基数为8）或 <code>0b</code>（二进制，基数为2），否则可以通过前缀0d逐字地使用（如果需要，可以使用前缀 <code>0d</code>）。 ）或状语符号中的显式基数，如 <code>:16&lt;A0&gt;</code> 另有说明。与其他编程语言不同，前导零不表示基数 8;而是发出编译时警告。</p>
<p>在所有字面量格式中，你可以使用下划线来分组数字;他们没有任何语义信息;以下字面量都计算为相同的数字：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="mi">1000000</span>
</span></span><span class="line"><span class="cl"><span class="mi">1_000_000</span>
</span></span><span class="line"><span class="cl"><span class="mi">10_00000</span>
</span></span><span class="line"><span class="cl"><span class="mi">100_00_00</span>
</span></span></code></pre></div><h5 id="int-字面量">Int 字面量&nbsp;<a class="headline-hash no-text-decoration" href="#int-字面量">#</a> </h5>
<p>整数默认为有符号十进制的，但您可以使用其他基数。有关详细信息，请参阅 Int。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="c1"># actually not a literal, but unary - operator applied to numeric literal 2 </span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="mi">12345</span>
</span></span><span class="line"><span class="cl"><span class="mh">0xBEEF</span>      <span class="c1"># base 16 </span>
</span></span><span class="line"><span class="cl"><span class="mi">0</span><span class="n">o755</span>       <span class="c1"># base 8 </span>
</span></span><span class="line"><span class="cl"><span class="p">:</span><span class="mi">3</span><span class="p">&lt;</span><span class="s">1201</span><span class="p">&gt;</span>    <span class="c1"># arbitrary base, here base 3 </span>
</span></span></code></pre></div><h5 id="rat-字面量">Rat 字面量&nbsp;<a class="headline-hash no-text-decoration" href="#rat-字面量">#</a> </h5>
<p>Rat 字面量（有理数）非常常见，取代许多其他语言中的小数或浮点数。整除也会产生 Rat。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="mf">1.0</span>
</span></span><span class="line"><span class="cl"><span class="mf">3.14159</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="mf">2.5</span>        <span class="c1"># Not actually a literal, but still a Rat </span>
</span></span><span class="line"><span class="cl"><span class="p">:</span><span class="mi">3</span><span class="p">&lt;</span><span class="s">21.0012</span><span class="p">&gt;</span> <span class="c1"># Base 3 rational </span>
</span></span><span class="line"><span class="cl">⅔
</span></span><span class="line"><span class="cl"><span class="mi">2</span><span class="o">/</span><span class="mi">3</span>         <span class="c1"># Not actually a literal, but still a Rat </span>
</span></span></code></pre></div><h5 id="num-字面量">Num 字面量&nbsp;<a class="headline-hash no-text-decoration" href="#num-字面量">#</a> </h5>
<p>在 <code>e</code> 产生浮点数后，使用整数指数到十进制的科学记数法：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="mf">1e0</span>
</span></span><span class="line"><span class="cl"><span class="mf">6.022e23</span>
</span></span><span class="line"><span class="cl"><span class="mf">1e-9</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="mf">2e48</span>
</span></span><span class="line"><span class="cl"><span class="mf">2e2.5</span>       <span class="c1"># error </span>
</span></span></code></pre></div><h5 id="complex-字面量">Complex 字面量&nbsp;<a class="headline-hash no-text-decoration" href="#complex-字面量">#</a> </h5>
<p>复数可以写为虚数（只是附加后缀 <code>i</code> 的有理数），也可以是实数和虚数之和：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="mi">1</span><span class="o">+</span><span class="mi">2</span><span class="no">i</span>
</span></span><span class="line"><span class="cl"><span class="mf">6.123e5</span><span class="no">i</span>    <span class="c1"># note that this is 6.123e5 * i, not 6.123 * 10 ** (5i) </span>
</span></span></code></pre></div><h4 id="pair-字面量">Pair 字面量&nbsp;<a class="headline-hash no-text-decoration" href="#pair-字面量">#</a> </h4>
<p>对由键和值组成，构造它们有两种基本形式：<code>key =&gt; 'value'</code> 和 <code>:key('value')</code>。</p>
<h5 id="arrow-pairs">Arrow pairs&nbsp;<a class="headline-hash no-text-decoration" href="#arrow-pairs">#</a> </h5>
<p>箭头对可以有一个表达式，一个字符串字面量或一个“裸标识符”，这是一个普通标识符语法的字符串，左侧不需要引号：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="s">like-an-identifier-ain&#39;t-it</span> <span class="o">=&gt;</span> <span class="mi">42</span>
</span></span><span class="line"><span class="cl"><span class="p">&#34;</span><span class="s2">key</span><span class="p">&#34;</span> <span class="o">=&gt;</span> <span class="mi">42</span>
</span></span><span class="line"><span class="cl"><span class="p">(&#39;</span><span class="s1">a</span><span class="p">&#39;</span> <span class="o">~</span> <span class="p">&#39;</span><span class="s1">b</span><span class="p">&#39;)</span> <span class="o">=&gt;</span> <span class="mi">1</span>
</span></span></code></pre></div><h5 id="副词对儿-colon-pairs">副词对儿 (colon pairs)&nbsp;<a class="headline-hash no-text-decoration" href="#副词对儿-colon-pairs">#</a> </h5>
<p>没有显式值的简短形式：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$thing</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="o">:</span><span class="nv">$thing</span>                 <span class="c1"># same as  thing =&gt; $thing </span>
</span></span><span class="line"><span class="cl"><span class="p">:</span><span class="s">thing</span>                  <span class="c1"># same as  thing =&gt; True </span>
</span></span><span class="line"><span class="cl"><span class="p">:</span><span class="o">!</span><span class="s">thing</span>                 <span class="c1"># same as  thing =&gt; False </span>
</span></span></code></pre></div><p>变量形式也适用于其他符号，例如：<code>:&amp;callback</code> 或 <code>:@elements</code>。如果值是数字字面量，它也可以用这种简短形式表示：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="p">:</span><span class="mi">42</span><span class="s">thing</span>            <span class="c1"># same as  thing =&gt; 42 </span>
</span></span><span class="line"><span class="cl"><span class="p">:</span><span class="mi">٤٢</span><span class="s">thing</span>            <span class="c1"># same as  thing =&gt; 42 </span>
</span></span></code></pre></div><p>如果您使用其他字母，则此顺序将被反转：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="p">:</span><span class="mi">٤٢</span><span class="s">ث</span>              <span class="c1"># same as   ث =&gt; ٤٢ </span>
</span></span></code></pre></div><p>thaa 字母在数字之前。</p>
<p>具有显式值的长形式：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="p">:</span><span class="s">thing</span><span class="p">(</span><span class="nv">$value</span><span class="p">)</span>              <span class="c1"># same as  thing =&gt; $value </span>
</span></span><span class="line"><span class="cl"><span class="p">:</span><span class="s">thing</span><span class="p">&lt;</span><span class="s">quoted list</span><span class="p">&gt;</span>         <span class="c1"># same as  thing =&gt; &lt;quoted list&gt; </span>
</span></span><span class="line"><span class="cl"><span class="p">:</span><span class="s">thing</span><span class="p">[&#39;</span><span class="s1">some</span><span class="p">&#39;</span><span class="o">,</span> <span class="p">&#39;</span><span class="s1">values</span><span class="p">&#39;]</span>    <span class="c1"># same as  thing =&gt; [&#39;some&#39;, &#39;values&#39;] </span>
</span></span><span class="line"><span class="cl"><span class="p">:</span><span class="s">thing</span><span class="p">{</span><span class="s">a</span> <span class="o">=&gt;</span> <span class="p">&#39;</span><span class="s1">b</span><span class="p">&#39;}</span>            <span class="c1"># same as  thing =&gt; { a =&gt; &#39;b&#39; } </span>
</span></span></code></pre></div><h4 id="boolean-字面量">Boolean 字面量&nbsp;<a class="headline-hash no-text-decoration" href="#boolean-字面量">#</a> </h4>
<p>True 和 False 是 Boolean 字面量; 他们始终是首字母大写的。</p>
<h4 id="array-字面量">Array 字面量&nbsp;<a class="headline-hash no-text-decoration" href="#array-字面量">#</a> </h4>
<p>一对方括号可以围绕表达式以形成逐项数组字面量; 通常在里面有一个以逗号分隔的列表：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="o">[</span><span class="p">&#39;</span><span class="s1">a</span><span class="p">&#39;</span><span class="o">,</span> <span class="p">&#39;</span><span class="s1">b</span><span class="p">&#39;</span><span class="o">,</span> <span class="mi">42</span><span class="o">].</span><span class="nb">join</span><span class="p">(&#39;</span><span class="s1"> </span><span class="p">&#39;);</span>   <span class="c1"># OUTPUT: «a b 42␤» </span>
</span></span><span class="line"><span class="cl"><span class="c1">#   ^^^^^^^^^^^^^^ Array constructor </span>
</span></span></code></pre></div><p>如果构造函数被赋予单个 Iterable，它将克隆并展平它。如果你想要一个只有 1 个 Iterable 元素的数组，请确保在它之后使用逗号：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">@a</span> <span class="o">=</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="o">[</span><span class="nv">@a</span><span class="o">].</span><span class="nb">perl</span><span class="p">;</span>  <span class="c1"># OUTPUT: «[1, 2]␤» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="o">[</span><span class="nv">@a</span><span class="o">,].</span><span class="nb">perl</span><span class="p">;</span> <span class="c1"># OUTPUT: «[[1, 2],]␤» </span>
</span></span></code></pre></div><p>Array 构造函数不会展平其他类型的内容。使用 Slip 前缀运算符(<code>|</code>)展平所需项：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">@a</span> <span class="o">=</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="o">[</span><span class="nv">@a</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">].</span><span class="nb">perl</span><span class="p">;</span>  <span class="c1"># OUTPUT: «[[1, 2], 3, 4]␤» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="o">[|</span><span class="nv">@a</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">].</span><span class="nb">perl</span><span class="p">;</span> <span class="c1"># OUTPUT: «[1, 2, 3, 4]␤» </span>
</span></span></code></pre></div><h4 id="hash-字面量">Hash 字面量&nbsp;<a class="headline-hash no-text-decoration" href="#hash-字面量">#</a> </h4>
<p>一个前导的关联符号和一对括号 <code>%( )</code> 可以包围一对列表以形成一个哈希字面量; 通常在里面有一个以逗号分隔的 Pairs 列表。如果使用非 pair 对，则假定它是一个键，下一个元素是值。大多数情况下，它与简单的箭头对一起使用。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">%</span><span class="p">(</span> <span class="s">a</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="o">,</span> <span class="s">b</span> <span class="o">=&gt;</span> <span class="mi">23</span><span class="o">,</span> <span class="p">:</span><span class="s">foo</span><span class="o">,</span> <span class="p">:</span><span class="s">dog</span><span class="p">&lt;</span><span class="s">cat</span><span class="p">&gt;</span><span class="o">,</span> <span class="p">&#34;</span><span class="s2">french</span><span class="p">&#34;</span><span class="o">,</span> <span class="p">&#34;</span><span class="s2">fries</span><span class="p">&#34;</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1"># OUTPUT: «a =&gt; 3, b =&gt; 23, dog =&gt; cat, foo =&gt; True, french =&gt; fries␤» </span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">%</span><span class="p">(</span><span class="s">a</span> <span class="o">=&gt;</span> <span class="mi">73</span><span class="o">,</span> <span class="s">foo</span> <span class="o">=&gt;</span> <span class="p">&#34;</span><span class="s2">fish</span><span class="p">&#34;)</span><span class="o">.</span><span class="nb">keys</span><span class="o">.</span><span class="nb">join</span><span class="p">(&#34;</span><span class="s2"> </span><span class="p">&#34;);</span>   <span class="c1"># OUTPUT: «a foo␤» </span>
</span></span><span class="line"><span class="cl"><span class="c1">#   ^^^^^^^^^^^^^^^^^^^^^^^^^ Hash constructor </span>
</span></span></code></pre></div><p>当赋值给左侧的 <code>%</code> sigiled 变量时，右侧 Pairs 周围的符号和括号是可选的。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">%ages</span> <span class="o">=</span> <span class="s">fred</span> <span class="o">=&gt;</span> <span class="mi">23</span><span class="o">,</span> <span class="s">jean</span> <span class="o">=&gt;</span> <span class="mi">87</span><span class="o">,</span> <span class="s">ann</span> <span class="o">=&gt;</span> <span class="mi">4</span><span class="p">;</span>
</span></span></code></pre></div><p>默认情况下, <code>%( )</code> 中的键被强制为字符串。要使用非字符串键组合散列，请使用带有冒号前缀的花括号分隔符 <code>:{}</code>。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$when</span> <span class="o">=</span> <span class="o">:</span><span class="p">{</span> <span class="p">(</span><span class="nb">now</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">&#34;</span><span class="s2">Instant</span><span class="p">&#34;</span><span class="o">,</span> <span class="p">(</span><span class="kt">DateTime</span><span class="o">.</span><span class="nb">now</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">&#34;</span><span class="s2">DateTime</span><span class="p">&#34;</span> <span class="p">};</span>
</span></span></code></pre></div><p>请注意，将对象作为键，您不能将非字符串键作为字符串访问：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="o">:</span><span class="p">{</span> <span class="o">-</span><span class="mi">1</span> <span class="o">=&gt;</span> <span class="mi">41</span><span class="o">,</span> <span class="mi">0</span> <span class="o">=&gt;</span> <span class="mi">42</span><span class="o">,</span> <span class="mi">1</span> <span class="o">=&gt;</span> <span class="mi">43</span> <span class="p">}&lt;</span><span class="s">0</span><span class="p">&gt;;</span>  <span class="c1"># OUTPUT: «(Any)␤» </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="o">:</span><span class="p">{</span> <span class="o">-</span><span class="mi">1</span> <span class="o">=&gt;</span> <span class="mi">41</span><span class="o">,</span> <span class="mi">0</span> <span class="o">=&gt;</span> <span class="mi">42</span><span class="o">,</span> <span class="mi">1</span> <span class="o">=&gt;</span> <span class="mi">43</span> <span class="p">}{</span><span class="mi">0</span><span class="p">};</span>  <span class="c1"># OUTPUT: «42␤» </span>
</span></span></code></pre></div><h4 id="regex-字面量">Regex 字面量&nbsp;<a class="headline-hash no-text-decoration" href="#regex-字面量">#</a> </h4>
<p>使用 <code>/foo/</code> 等斜杠声明正则表达式。请注意，此 <code>//</code> 语法是完整的 <code>rx//</code> 语法的简写。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="p">/</span><span class="sr">foo</span><span class="p">/</span>          <span class="c1"># Short version </span>
</span></span><span class="line"><span class="cl"><span class="k">rx</span><span class="p">/</span><span class="sr">foo</span><span class="p">/</span>        <span class="c1"># Longer version </span>
</span></span><span class="line"><span class="cl"><span class="n">Q</span> <span class="p">:</span><span class="s">regex</span> <span class="o">/</span><span class="n">foo</span><span class="o">/</span> <span class="c1"># Even longer version</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$r</span> <span class="o">=</span> <span class="p">/</span><span class="sr">foo</span><span class="p">/;</span> <span class="c1"># Regexes can be assigned to variables</span>
</span></span></code></pre></div><h4 id="签名字面量">签名字面量&nbsp;<a class="headline-hash no-text-decoration" href="#签名字面量">#</a> </h4>
<p>除了 sub 和块声明中的典型用法之外，签名可以单独用于模式匹配。从冒号开始声明独立签名：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&#34;</span><span class="s2">match!</span><span class="p">&#34;</span> <span class="k">if</span> <span class="mi">5</span><span class="o">,</span> <span class="p">&#34;</span><span class="s2">fish</span><span class="p">&#34;</span> <span class="o">~~</span> <span class="o">:</span><span class="p">(</span><span class="kt">Int</span><span class="o">,</span> <span class="kt">Str</span><span class="p">);</span> <span class="c1"># OUTPUT: «match!␤» </span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$sig</span> <span class="o">=</span> <span class="o">:</span><span class="p">(</span><span class="kt">Int</span> <span class="nv">$a</span><span class="o">,</span> <span class="kt">Str</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&#34;</span><span class="s2">match!</span><span class="p">&#34;</span> <span class="k">if</span> <span class="p">(</span><span class="mi">5</span><span class="o">,</span> <span class="p">&#34;</span><span class="s2">fish</span><span class="p">&#34;)</span> <span class="o">~~</span> <span class="nv">$sig</span><span class="p">;</span> <span class="c1"># OUTPUT: «match!␤» </span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">given</span> <span class="p">&#34;</span><span class="s2">foo</span><span class="p">&#34;</span><span class="o">,</span> <span class="mi">42</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">when</span> <span class="o">:</span><span class="p">(</span><span class="kt">Str</span><span class="o">,</span> <span class="kt">Str</span><span class="p">)</span> <span class="p">{</span> <span class="p">&#34;</span><span class="s2">This won&#39;t match</span><span class="p">&#34;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">when</span> <span class="o">:</span><span class="p">(</span><span class="kt">Str</span><span class="o">,</span> <span class="kt">Int</span> <span class="nv">$n</span> <span class="k">where</span> <span class="nv">$n</span> <span class="o">&gt;</span> <span class="mi">20</span><span class="p">)</span> <span class="p">{</span> <span class="p">&#34;</span><span class="s2">This will!</span><span class="p">&#34;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>有关签名的更多信息，请参阅签名文档。</p>
<h3 id="声明">声明&nbsp;<a class="headline-hash no-text-decoration" href="#声明">#</a> </h3>
<h4 id="变量声明">变量声明&nbsp;<a class="headline-hash no-text-decoration" href="#变量声明">#</a> </h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$x</span><span class="p">;</span>                          <span class="c1"># simple lexical variable </span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$x</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>                      <span class="c1"># initialize the variable </span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="kt">Int</span> <span class="nv">$x</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>                  <span class="c1"># declare the type </span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="kt">Int:D</span> <span class="nv">$x</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>                <span class="c1"># specify that the value must be defined (not undef) </span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="kt">Int</span> <span class="nv">$x</span> <span class="k">where</span> <span class="p">{</span> <span class="nv">$_</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="p">}</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span> <span class="c1"># constrain the value based on a function </span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="kt">Int</span> <span class="nv">$x</span> <span class="k">where</span> <span class="o">*</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>      <span class="c1"># same constraint, but using Whatever shorthand </span>
</span></span></code></pre></div><p>有关其他作用域的更多详细信息，请参阅变量声明符和作用域（<code>our</code>，<code>has</code>）。</p>
<h4 id="子例程声明">子例程声明&nbsp;<a class="headline-hash no-text-decoration" href="#子例程声明">#</a> </h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="c1"># The signature is optional </span>
</span></span><span class="line"><span class="cl"><span class="k">sub</span> <span class="nf">foo</span> <span class="p">{</span> <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">Hello!</span><span class="p">&#34;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">sub</span> <span class="nf">say-hello</span><span class="p">(</span><span class="nv">$to-whom</span><span class="p">)</span> <span class="p">{</span> <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">Hello </span><span class="nv">$to-whom</span><span class="s2">!</span><span class="p">&#34;</span> <span class="p">}</span>
</span></span></code></pre></div><p>您还可以将子例程赋值给变量。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">&amp;f</span> <span class="o">=</span> <span class="k">sub</span> <span class="p">{</span> <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">Hello!</span><span class="p">&#34;</span> <span class="p">}</span> <span class="c1"># Un-named sub </span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">&amp;f</span> <span class="o">=</span> <span class="k">-&gt;</span> <span class="p">{</span> <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">Hello!</span><span class="p">&#34;</span> <span class="p">}</span>  <span class="c1"># Lambda style syntax. The &amp; sigil indicates the variable holds a function </span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$f</span> <span class="o">=</span> <span class="k">-&gt;</span> <span class="p">{</span> <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">Hello!</span><span class="p">&#34;</span> <span class="p">}</span>  <span class="c1"># Functions can also be put into scalars </span>
</span></span></code></pre></div><h4 id="包-模块-类-角色-和-grammar-声明">包, 模块, 类, 角色 和 Grammar 声明&nbsp;<a class="headline-hash no-text-decoration" href="#包-模块-类-角色-和-grammar-声明">#</a> </h4>
<p>有几种类型的包，每种类型都使用关键字，名称，一些可选特征以及子例程，方法或规则体声明。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">package</span> <span class="nn">P</span> <span class="p">{</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">module</span> <span class="nn">M</span> <span class="p">{</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">C</span> <span class="p">{</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">role</span> <span class="nc">R</span> <span class="p">{</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">grammar</span> <span class="nc">G</span> <span class="p">{</span> <span class="p">}</span>
</span></span></code></pre></div><p>可以在单个文件中声明多个包。但是，您可以在文件的开头声明一个单元包（仅在注释或 <code>use</code> 语句之前），并且该文件的其余部分将被视为包的主体。在这种情况下，不需要花括号。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">unit</span> <span class="k">module</span> <span class="nn">M</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ... stuff goes here instead of in {}&#39;s </span>
</span></span></code></pre></div><h4 id="多重分派的声明">多重分派的声明&nbsp;<a class="headline-hash no-text-decoration" href="#多重分派的声明">#</a> </h4>
<p>另请参见多重分派。</p>
<p>可以使用多个签名声明同名子例程。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">multi</span> <span class="k">sub</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span> <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">Hello!</span><span class="p">&#34;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">multi</span> <span class="k">sub</span> <span class="nf">foo</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span> <span class="p">{</span> <span class="nb">say</span> <span class="p">&#34;</span><span class="s2">Hello </span><span class="nv">$name</span><span class="s2">!</span><span class="p">&#34;</span> <span class="p">}</span>
</span></span></code></pre></div><p>在类里面, 你还可以声明多重分派方法。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">multi</span> <span class="k">method</span> <span class="nf">greet</span> <span class="p">{</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">multi</span> <span class="k">method</span> <span class="nf">greet</span><span class="p">(</span><span class="kt">Str</span> <span class="nv">$name</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
</span></span></code></pre></div><h3 id="子例程调用">子例程调用&nbsp;<a class="headline-hash no-text-decoration" href="#子例程调用">#</a> </h3>
<p>子程序使用关键字 <code>sub</code> 创建，后跟可选名称，可选签名和代码块。子例程是词法作用域的，因此如果在声明时指定了名称，则可以在词法作用域中使用相同的名称来调用子例程。子例程是 <code>Sub</code> 类型的实例，可以赋值给任何容器。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="n">foo</span><span class="p">;</span>   <span class="c1"># Invoke the function foo with no arguments </span>
</span></span><span class="line"><span class="cl"><span class="nf">foo</span><span class="p">();</span> <span class="c1"># Invoke the function foo with no arguments </span>
</span></span><span class="line"><span class="cl"><span class="nv">&amp;f</span><span class="p">();</span>  <span class="c1"># Invoke &amp;f, which contains a function </span>
</span></span><span class="line"><span class="cl"><span class="nv">&amp;f</span><span class="o">.</span><span class="p">();</span> <span class="c1"># Same as above, needed to make the following work </span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">@functions</span> <span class="o">=</span> <span class="p">({</span><span class="nb">say</span> <span class="mi">1</span><span class="p">}</span><span class="o">,</span> <span class="p">{</span><span class="nb">say</span> <span class="mi">2</span><span class="p">}</span><span class="o">,</span> <span class="p">{</span><span class="nb">say</span> <span class="mi">3</span><span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="nv">@functions</span><span class="o">&gt;&gt;.</span><span class="p">();</span> <span class="c1"># hyper method call operator </span>
</span></span></code></pre></div><p>当在类中声明时，子例程被命名为“方法”：方法是针对对象（即，类实例）调用的子例程。在方法中，特殊变量 <code>self</code> 包含对象实例（请参阅方法）。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="c1"># Method invocation. Object (instance) is $person, method is set-name-age </span>
</span></span><span class="line"><span class="cl"><span class="nv">$person</span><span class="o">.</span><span class="nf">set-name-age</span><span class="p">(&#39;</span><span class="s1">jane</span><span class="p">&#39;</span><span class="o">,</span> <span class="mi">98</span><span class="p">);</span>   <span class="c1"># Most common way </span>
</span></span><span class="line"><span class="cl"><span class="nv">$person</span><span class="o">.</span><span class="nf">set-name-age</span><span class="o">:</span> <span class="p">&#39;</span><span class="s1">jane</span><span class="p">&#39;</span><span class="o">,</span> <span class="mi">98</span><span class="p">;</span>   <span class="c1"># Precedence drop </span>
</span></span><span class="line"><span class="cl"><span class="nf">set-name-age</span><span class="p">(</span><span class="nv">$person:</span> <span class="p">&#39;</span><span class="s1">jane</span><span class="p">&#39;</span><span class="o">,</span> <span class="mi">98</span><span class="p">);</span>  <span class="c1"># Invocant marker </span>
</span></span><span class="line"><span class="cl"><span class="nf">set-name-age</span> <span class="nv">$person:</span> <span class="p">&#39;</span><span class="s1">jane</span><span class="p">&#39;</span><span class="o">,</span> <span class="mi">98</span><span class="p">;</span>   <span class="c1"># Indirect invocation </span>
</span></span></code></pre></div><p>有关更多信息，请参阅函数。</p>
<h4 id="优先级下降">优先级下降&nbsp;<a class="headline-hash no-text-decoration" href="#优先级下降">#</a> </h4>
<p>在方法调用的情况下（即，在针对类实例调用子例程时），可以应用由冒号标识的优先级下降：在方法名称之后和参数列表之前。参数列表优先于方法调用，另一方面“降低”其优先级。为了更好地理解，请考虑以下简单示例（仅添加额外空格以对齐方法调用）：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$band</span> <span class="o">=</span> <span class="p">&#39;</span><span class="s1">Foo Fighters</span><span class="p">&#39;;</span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">$band</span><span class="o">.</span><span class="nb">substr</span><span class="p">(</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">3</span> <span class="p">)</span> <span class="o">.</span><span class="nb">substr</span><span class="p">(</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span> <span class="p">);</span> <span class="c1"># F </span>
</span></span><span class="line"><span class="cl"><span class="nb">say</span> <span class="nv">$band</span><span class="o">.</span><span class="nb">substr</span><span class="o">:</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">3</span>   <span class="o">.</span><span class="nb">substr</span><span class="p">(</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span> <span class="p">);</span> <span class="c1"># Foo </span>
</span></span></code></pre></div><p>在第二种方法调用中，最右边的 <code>substr</code> 应用于“3”，而不是最左边的 substr 的结果，另一方面，它产生优先级最右边的 substr。</p>
<h3 id="运算符">运算符&nbsp;<a class="headline-hash no-text-decoration" href="#运算符">#</a> </h3>
<p>有关详细信息，请参阅运算符。</p>
<p>运算符是具有更多符号重和可组合语法的函数。与其他函数一样，运算符可以进行多重分派以允许特定于上下文的使用。</p>
<p>运算符有五种类型（排列），每种类型都有一个或两个参数。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="o">++</span><span class="nv">$x</span>           <span class="c1"># prefix, operator comes before single input </span>
</span></span><span class="line"><span class="cl"><span class="mi">5</span> <span class="o">+</span> <span class="mi">3</span>          <span class="c1"># infix, operator is between two inputs </span>
</span></span><span class="line"><span class="cl"><span class="nv">$x</span><span class="o">++</span>           <span class="c1"># postfix, operator is after single input </span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="s">the blue sky</span><span class="p">&gt;</span> <span class="c1"># circumfix, operator surrounds single input </span>
</span></span><span class="line"><span class="cl"><span class="nv">%foo</span><span class="p">&lt;</span><span class="s">bar</span><span class="p">&gt;</span>      <span class="c1"># postcircumfix, operator comes after first input and surrounds second </span>
</span></span></code></pre></div><h4 id="元运算符">元运算符&nbsp;<a class="headline-hash no-text-decoration" href="#元运算符">#</a> </h4>
<p>运算符可以组合。一个常见的例子是将中缀（二元）运算符与赋值相结合。您可以将赋值与任何二元运算符组合。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nv">$x</span> <span class="o">+=</span> <span class="mi">5</span>     <span class="c1"># Adds 5 to $x, same as $x = $x + 5 </span>
</span></span><span class="line"><span class="cl"><span class="nv">$x</span> <span class="nb">min</span><span class="o">=</span> <span class="mi">3</span>   <span class="c1"># Sets $x to the smaller of $x and 3, same as $x = $x min 3 </span>
</span></span><span class="line"><span class="cl"><span class="nv">$x</span> <span class="o">.=</span> <span class="nb">child</span> <span class="c1"># Equivalent to $x = $x.child </span>
</span></span></code></pre></div><p>在 <code>[ ]</code> 中包装中缀运算符以创建一个新的化简运算符，该运算符在单个输入列表上工作，从而产生单个值。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="o">[+]</span> <span class="o">&lt;</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="o">&gt;</span><span class="p">;</span>    <span class="c1"># OUTPUT: «15␤» </span>
</span></span><span class="line"><span class="cl"><span class="p">(((</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="mi">5</span> <span class="c1"># equivalent expanded version </span>
</span></span></code></pre></div><p>用 <code>« »</code>（或等效的 ASCII）包装一个中缀运算符，以创建一个在两个列表上成对工作的新超运算符。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="p">&lt;</span><span class="s">1 2 3</span><span class="p">&gt;</span> <span class="p">«</span><span class="s2">+</span><span class="p">»</span> <span class="p">&lt;</span><span class="s">4 5 6</span><span class="p">&gt;</span> <span class="c1"># OUTPUT: «(5 7 9)␤» </span>
</span></span></code></pre></div><p>箭头的方向表示当列表的大小不同时该怎么做。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nv">@a</span> <span class="o">«+«</span> <span class="nv">@b</span> <span class="c1"># Result is the size of @b, elements from @a will be re-used </span>
</span></span><span class="line"><span class="cl"><span class="nv">@a</span> <span class="o">»+»</span> <span class="nv">@b</span> <span class="c1"># Result is the size of @a, elements from @b will be re-used </span>
</span></span><span class="line"><span class="cl"><span class="nv">@a</span> <span class="o">«+»</span> <span class="nv">@b</span> <span class="c1"># Result is the size of the biggest input, the smaller one is re-used </span>
</span></span><span class="line"><span class="cl"><span class="nv">@a</span> <span class="o">»+«</span> <span class="nv">@b</span> <span class="c1"># Exception if @a and @b are different sizes </span>
</span></span></code></pre></div><p>您还可以使用超运算符包装一元运算符。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-raku" data-lang="raku"><span class="line"><span class="cl"><span class="nb">say</span> <span class="o">-</span><span class="p">«</span><span class="s2"> &lt;1 2 3&gt; # OUTPUT: «(-1 -2 -3)␤</span><span class="p">»</span> 
</span></span></code></pre></div>

        </div>
    </div>
</article>



                <footer>
                    




<div class="no-text-decoration">
    <div class="jump top"><a href="#" title="Top of this page">⮉</a></div>
    <div class="jump bottom"><a href="#bottom" title="Bottom of this page">⮋</a></div>
</div>


 
    
        <div class="hugotoc no-text-decoration">
            <nav id="TableOfContents">
  <ul>
    <li><a href="#词法约定">词法约定</a>
      <ul>
        <li><a href="#自由形式">自由形式</a></li>
        <li><a href="#unspace">Unspace</a></li>
        <li><a href="#用分号分割语句">用分号分割语句</a></li>
        <li><a href="#隐式分隔符规则对于以块结尾的语句">隐式分隔符规则（对于以块结尾的语句）</a></li>
        <li><a href="#注释">注释</a></li>
        <li><a href="#标识符">标识符</a></li>
        <li><a href="#项-term">项 term:&lt;&gt;</a></li>
      </ul>
    </li>
    <li><a href="#语句和表达式">语句和表达式</a></li>
    <li><a href="#项">项</a>
      <ul>
        <li><a href="#变量">变量</a></li>
        <li><a href="#裸字-常量类型名">裸字 (常量,类型名)</a></li>
        <li><a href="#包和限定名">包和限定名</a></li>
        <li><a href="#字面量">字面量</a></li>
        <li><a href="#声明">声明</a></li>
        <li><a href="#子例程调用">子例程调用</a></li>
        <li><a href="#运算符">运算符</a></li>
      </ul>
    </li>
  </ul>
</nav>
            <a href="#" class="back-to-top">Back to top</a>
        </div>
    
    
<script src="/js/libs/jquery/3.3.1/jquery.slim.min.min.22ee3db0c0e99fd0fbce3aee19672bd53d25469daf734bd4c165649f6eaf7d7f.js"></script>

<link rel="preload" href="/js/libs/jquery/3.3.1/jquery.slim.min.min.22ee3db0c0e99fd0fbce3aee19672bd53d25469daf734bd4c165649f6eaf7d7f.js" as="script">

<script type="application/javascript">(function() {
     var $window = $(window);
     if ($window.width() >= 1400) { 
         var $toc = $('#TableOfContents');
         if ($toc.length > 0) {
             function onScroll(){
                 var currentScroll = $window.scrollTop();
                 var h = $('.content h1, .content h2, .content h3, .content h4, .content h5, .content h6, .h-feed h2');
                 var id = "";
                 h.each(function (i, e) {
                     e = $(e);
                     if (e.offset().top - 10 <= currentScroll) {
                         id = e.attr('id');
                     }
                 });
                 var current = $toc.find('a.current');
                 if (current.length == 1 && current.eq(0).attr('href') == '#' + id) return true;

                 current.each(function (i, e) {
                     $(e).removeClass('current').siblings('ul').hide();
                 });
                 $toc.find('a[href="#' + id + '"]').parentsUntil('#TableOfContents').each(function (i, e) {
                     $(e).children('a').addClass('current').siblings('ul').show();
                 });
             }
             $window.on('scroll', onScroll);
             $(document).ready(function() {
                 $toc.find('a').parent('li').find('ul').hide();
                 onScroll();
                 document.getElementsByClassName('hugotoc')[0].style.display = '';
             });}}})();</script>








<div class="backtotop center no-text-decoration">
    <a href="#">back to <span class="top">top</span></a>
</div>


<div class="right">
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="http://localhost:1313/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="http://localhost:1313/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>

</div>
<div class="clear-float"></div>



<div class="prev-next-navigator clear-float">
    
        <span class="prev-post left no-text-decoration">
            <a href="http://localhost:1313/notes/add-a-theme-system-to-your-mojolicious-app/" class="nobr">« 第九天 - 为你的 Mojolicious 应用添加主题系统</a>
        </span>
    
    
        <span class="next-post right no-text-decoration">
            <a href="http://localhost:1313/notes/more-one-x/" class="nobr">🎄 9/25. 关于 X 的更多东西, Raku 中的 .. 和 … »</a>
        </span>
    
</div>


<a id="bottom"></a>









                       







                    <ul class="no-bullets feed right inline">
    
        
        
    
</ul>
<div class="clear-float"></div>

                </footer>
                <hr />
            </div>               

            <footer> 
                

<ul class="social no-text-decoration">
    
</ul>










 
    
    



<p class="generated no-text-decoration">
    Generated using  <a href="https://gitlab.com/kaushalmodi/hugo-theme-refined"><code class="nobr">hugo-theme-refined</code></a> + <span class="nobr">Hugo <a href="https://github.com/gohugoio/hugo/commit/312735366b20d64bd61bff8627f593749f86c964">0.123.7</a></span>
</p>

<p>
    
</p>




<div class="badges no-text-decoration">
    
    

    
</div>




<script type="application/javascript">var nav=responsiveNav("#nav");</script>




<script defer src="/js/libs/fragmentions/wrapper.min.e8c468c89edc4f5dccaa8c720c6b220b3088a16cd7b1e4a1e3345985788260c9.js"></script>









            </footer>
        </div> 
    </body>
</html>
