{"author":{"name":null,"type":"card","url":"https://ohmyweekly.github.io/"},"content":{"html":"\u003ch2 id=\"文本处理\"\u003e文本处理\u003c/h2\u003e\n\u003cp\u003e1）对于字符串：A_B_C_D_E.mp4，如何匹配倒数第二个“_”？\u003c/p\u003e\n\u003cp\u003e2）问题1：\n每行行首都是下列形式数字章节号开头\n1.1\n1.1.1\n1.1.2\n1.2\n1.2.1\n1.2.2\n1.3\n以上章节号每个占据一行，章节号后面均有一个空格字符，然后是数量不定的英文或中文字符或数字，最后两个字符是tab空格和位数不限的数字。\u003c/p\u003e\n\u003cp\u003e章节号里有1个小数点的，行首加1个tab空格；2个小数点的，行首加2个tab空格，以此类推。\u003c/p\u003e\n\u003cp\u003e问题2：\n每行行首大多数是以问题1的数字开头，但有部分是以英文或汉字开头，怎么吧以英文或汉字开始的行合并到上一行去？\u003c/p\u003e\n\u003cp\u003e问题1原始数据：\n1.1 甲\t1\n1.1.1 yi\t2\n1.1.1.1 4\t3\n1.2 乙\t14\n1.2.1 yi\t20\n1.2.1.1 4\t32\u003c/p\u003e\n\u003cp\u003e问题1期望数据：\n1.1 甲\t1\n1.1.1 yi\t2\n1.1.1.1 4\t3\n1.2 乙\t14\n1.2.1 yi\t20\n1.2.1.1 4\t32\u003c/p\u003e\n\u003cp\u003e问题2原始数据：\n1.1 甲\t1\n1.1.1 yi\n哈\t2\n1.1.1.1 4\t3\n1.2 乙\nAV\t4\n1.2.1 yi\t20\n1.2.1.1 4\t32\u003c/p\u003e\n\u003cp\u003e问题2期望数据：\n1.1 甲\t1\n1.1.1 yi哈\t2\n1.1.1.1 4\t3\n1.2 乙AV\t4\n1.2.1 yi\t20\n1.2.1.1 4\t32\u003c/p\u003e\n\u003cp\u003e3）根据某些字符对齐\u003c/p\u003e\n\u003cp\u003e比如根据r2对齐。\u003c/p\u003e\n\u003cp\u003e123123123, r2\n123,r2\u003c/p\u003e\n\u003cp\u003e按照tab或者空格，像下面这样对齐。\u003c/p\u003e\n\u003cp\u003e123123123,\tr2\n123,\t\tr2\u003c/p\u003e\n\u003cp\u003e4）匹配中文\u003c/p\u003e\n\u003cp\u003e.Str.say for \u0026lsquo;J00我是中文字\u0026rsquo;.match(/\u0026lt;:Hani\u0026gt;/,:g);\u003c/p\u003e\n\u003col start=\"5\"\u003e\n\u003cli\u003e区分大小写替换\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e正则替换时能保留原来的大小写规则进行替换。\u003c/p\u003e\n\u003cp\u003elogin -\u0026gt; login\nLogin -\u0026gt; Reg\nLOGIN -\u0026gt; REG\u003c/p\u003e\n\u003cp\u003e6）文本内容的查找插入\u003c/p\u003e\n\u003cp\u003e一个文本文件，格式如下：\u003c/p\u003e\n\u003cp\u003e2012-10-01\n一行文本内容\n又一行文本内容\n2012-10-02\n又又一行文本内容\u003c/p\u003e\n\u003cp\u003e现在想把表示日期的比如2012-10-01放到“一行文本内容”的前面，形成如下：\n2012-10-01,一行文本内容\n2012-10-01,又一行文本内容\n2012-10-02,又又一行文本内容\u003c/p\u003e\n\u003cp\u003e7）文本处理\u003c/p\u003e\n\u003cp\u003e需要处理从串口传过来的数据，传过来的字串长度是固定的，前导固定为‘’﹂+‘’，末尾固定为‘’B﹁‘’。具体例子：\n﹂+00185621B﹁\n其中前6位数字是有效数字（本例为001856），接下来那一位数字是从右向左的小数位数（本例为2），余下的不要。最后的结果要处理成小数。\n对于本例，前后的特殊字符和字母都不要，有效数字是001856，前面两个零没意义，就变为1856，又因为小数位数为2，最终变成18.56。\u003c/p\u003e\n","text":"文本处理 1）对于字符串：A_B_C_D_E.mp4，如何匹配倒数第二个“_”？\n2）问题1： 每行行首都是下列形式数字章节号开头 1.1 1.1.1 1.1.2 1.2 1.2.1 1.2.2 1.3 以上章节号每个占据一行，章节号后面均有一个空格字符，然后是数量不定的英文或中文字符或数字，最后两个字符是tab空格和位数不限的数字。\n章节号里有1个小数点的，行首加1个tab空格；2个小数点的，行首加2个tab空格，以此类推。\n问题2： 每行行首大多数是以问题1的数字开头，但有部分是以英文或汉字开头，怎么吧以英文或汉字开始的行合并到上一行去？\n问题1原始数据： 1.1 甲\t1 1.1.1 yi\t2 1.1.1.1 4\t3 1.2 乙\t14 1.2.1 yi\t20 1.2.1.1 4\t32\n问题1期望数据： 1.1 甲\t1 1.1.1 yi\t2 1.1.1.1 4\t3 1.2 乙\t14 1.2.1 yi\t20 1.2.1.1 4\t32\n问题2原始数据： 1.1 甲\t1 1.1.1 yi 哈\t2 1.1.1.1 4\t3 1.2 乙 AV\t4 1.2.1 yi\t20 1.2.1.1 4\t32\n问题2期望数据： 1.1 甲\t1 1.1.1 yi哈\t2 1.1.1.1 4\t3 1.2 乙AV\t4 1.2.1 yi\t20 1.2.1.1 4\t32\n3）根据某些字符对齐\n比如根据r2对齐。\n123123123, r2 123,r2\n按照tab或者空格，像下面这样对齐。\n123123123,\tr2 123,\tr2\n4）匹配中文\n.Str.say for \u0026lsquo;J00我是中文字\u0026rsquo;.match(/\u0026lt;:Hani\u0026gt;/,:g);\n区分大小写替换 正则替换时能保留原来的大小写规则进行替换。\nlogin -\u0026gt; login Login -\u0026gt; Reg LOGIN -\u0026gt; REG\n6）文本内容的查找插入\n一个文本文件，格式如下：\n2012-10-01 一行文本内容 又一行文本内容 2012-10-02 又又一行文本内容\n现在想把表示日期的比如2012-10-01放到“一行文本内容”的前面，形成如下： 2012-10-01,一行文本内容 2012-10-01,又一行文本内容 2012-10-02,又又一行文本内容\n7）文本处理\n需要处理从串口传过来的数据，传过来的字串长度是固定的，前导固定为‘’﹂+‘’，末尾固定为‘’B﹁‘’。具体例子： ﹂+00185621B﹁ 其中前6位数字是有效数字（本例为001856），接下来那一位数字是从右向左的小数位数（本例为2），余下的不要。最后的结果要处理成小数。 对于本例，前后的特殊字符和字母都不要，有效数字是001856，前面两个零没意义，就变为1856，又因为小数位数为2，最终变成18.56。\n"},"name":"使用 Raku 进行文本处理","published":"2017-01-07T16:16:21Z","summary":"文本处理 1）对于字符串：A_B_C_D_E.mp4，如何匹配倒数第二个“_”？\n2）问题1： 每行行首都是下列形式数字章节号开头 1.1 1.1.1 1.1.2 1.2 1.2.1 1.2.2 1.3 以上章节号每个占据一行，章节号后面均有一个空格字符，然后是数量不定的英文或中文字符或数字，最后两个字符是tab空格和位数不限的数字。\n章节号里有1个小数点的，行首加1个tab空格；2个小数点的，行首加2个tab空格，以此类推。\n问题2： 每行行首大多数是以问题1的数字开头，但有部分是以英文或汉字开头，怎么吧以英文或汉字开始的行合并到上一行去？\n问题1原始数据： 1.1 甲\t1 1.1.1 yi\t2 1.1.1.1 4\t3 1.2 乙\t14 1.2.1 yi\t20 1.2.1.1 4\t32\n问题1期望数据： 1.1 甲\t1 1.1.1 yi\t2 1.1.1.1 4\t3 1.2 乙\t14 1.2.1 yi\t20 1.2.1.1 4\t32\n问题2原始数据： 1.1 甲\t1 1.1.1 yi 哈\t2 1.1.1.1 4\t3 1.2 乙 AV\t4 1.2.1 yi\t20 1.","type":"entry","url":"https://ohmyweekly.github.io/notes/text-processing-in-raku/"}