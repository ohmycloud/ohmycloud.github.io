<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">

    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
    
    
    

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5">

    
    <meta name="referrer" content="no-referrer">

    <title>
        
            ImageMagick - The Definitive Guide To ImageMagick ❚ 焉知非鱼
        
    </title>

    
    


    
    
    
    

    
    
    
    

    
    
    

    
    
    
    <style>
     
     
     :root {
         --theme-color: #ac4142;
         --theme-color-light: rgba(172, 65, 66, 0.2);
     }
     
     html {
         line-height: 1.5;
     }
    </style>

    
    

    
    
    
    
    <link rel="stylesheet" href="/css/refined.min.7f6d3ee611034e4ebcbc063f1db3bc042fecdc8901afbedad80ff02bae409204.css">
    
    <link rel="preload" href="/css/refined.min.7f6d3ee611034e4ebcbc063f1db3bc042fecdc8901afbedad80ff02bae409204.css" as="style">

    



    
        <style>
         
         /* Background */ .chroma { background-color: #ffffff }
/* Error */ .chroma .err { color: #a61717; background-color: #e3d2d2 }
/* LineTableTD */ .chroma .lntd { vertical-align: top; padding: 0; margin: 0; border: 0; }
/* LineTable */ .chroma .lntable { border-spacing: 0; padding: 0; margin: 0; border: 0; width: auto; overflow: auto; display: block; }
/* LineHighlight */ .chroma .hl { display: block; width: 100%;background-color: #ffffcc }
/* LineNumbersTable */ .chroma .lnt { margin-right: 0.4em; padding: 0 0.4em 0 0.4em; }
/* LineNumbers */ .chroma .ln { margin-right: 0.4em; padding: 0 0.4em 0 0.4em; }
/* Keyword */ .chroma .k { color: #000000; font-weight: bold }
/* KeywordConstant */ .chroma .kc { color: #000000; font-weight: bold }
/* KeywordDeclaration */ .chroma .kd { color: #000000; font-weight: bold }
/* KeywordNamespace */ .chroma .kn { color: #000000; font-weight: bold }
/* KeywordPseudo */ .chroma .kp { color: #000000; font-weight: bold }
/* KeywordReserved */ .chroma .kr { color: #000000; font-weight: bold }
/* KeywordType */ .chroma .kt { color: #445588; font-weight: bold }
/* NameAttribute */ .chroma .na { color: #008080 }
/* NameBuiltin */ .chroma .nb { color: #0086b3 }
/* NameBuiltinPseudo */ .chroma .bp { color: #999999 }
/* NameClass */ .chroma .nc { color: #445588; font-weight: bold }
/* NameConstant */ .chroma .no { color: #008080 }
/* NameDecorator */ .chroma .nd { color: #3c5d5d; font-weight: bold }
/* NameEntity */ .chroma .ni { color: #800080 }
/* NameException */ .chroma .ne { color: #990000; font-weight: bold }
/* NameFunction */ .chroma .nf { color: #990000; font-weight: bold }
/* NameLabel */ .chroma .nl { color: #990000; font-weight: bold }
/* NameNamespace */ .chroma .nn { color: #555555 }
/* NameTag */ .chroma .nt { color: #000080 }
/* NameVariable */ .chroma .nv { color: #008080 }
/* NameVariableClass */ .chroma .vc { color: #008080 }
/* NameVariableGlobal */ .chroma .vg { color: #008080 }
/* NameVariableInstance */ .chroma .vi { color: #008080 }
/* LiteralString */ .chroma .s { color: #dd1144 }
/* LiteralStringAffix */ .chroma .sa { color: #dd1144 }
/* LiteralStringBacktick */ .chroma .sb { color: #dd1144 }
/* LiteralStringChar */ .chroma .sc { color: #dd1144 }
/* LiteralStringDelimiter */ .chroma .dl { color: #dd1144 }
/* LiteralStringDoc */ .chroma .sd { color: #dd1144 }
/* LiteralStringDouble */ .chroma .s2 { color: #dd1144 }
/* LiteralStringEscape */ .chroma .se { color: #dd1144 }
/* LiteralStringHeredoc */ .chroma .sh { color: #dd1144 }
/* LiteralStringInterpol */ .chroma .si { color: #dd1144 }
/* LiteralStringOther */ .chroma .sx { color: #dd1144 }
/* LiteralStringRegex */ .chroma .sr { color: #009926 }
/* LiteralStringSingle */ .chroma .s1 { color: #dd1144 }
/* LiteralStringSymbol */ .chroma .ss { color: #990073 }
/* LiteralNumber */ .chroma .m { color: #009999 }
/* LiteralNumberBin */ .chroma .mb { color: #009999 }
/* LiteralNumberFloat */ .chroma .mf { color: #009999 }
/* LiteralNumberHex */ .chroma .mh { color: #009999 }
/* LiteralNumberInteger */ .chroma .mi { color: #009999 }
/* LiteralNumberIntegerLong */ .chroma .il { color: #009999 }
/* LiteralNumberOct */ .chroma .mo { color: #009999 }
/* Operator */ .chroma .o { color: #000000; font-weight: bold }
/* OperatorWord */ .chroma .ow { color: #000000; font-weight: bold }
/* Comment */ .chroma .c { color: #999988; font-style: italic }
/* CommentHashbang */ .chroma .ch { color: #999988; font-style: italic }
/* CommentMultiline */ .chroma .cm { color: #999988; font-style: italic }
/* CommentSingle */ .chroma .c1 { color: #999988; font-style: italic }
/* CommentSpecial */ .chroma .cs { color: #999999; font-weight: bold; font-style: italic }
/* CommentPreproc */ .chroma .cp { color: #999999; font-weight: bold; font-style: italic }
/* CommentPreprocFile */ .chroma .cpf { color: #999999; font-weight: bold; font-style: italic }
/* GenericDeleted */ .chroma .gd { color: #000000; background-color: #ffdddd }
/* GenericEmph */ .chroma .ge { color: #000000; font-style: italic }
/* GenericError */ .chroma .gr { color: #aa0000 }
/* GenericHeading */ .chroma .gh { color: #999999 }
/* GenericInserted */ .chroma .gi { color: #000000; background-color: #ddffdd }
/* GenericOutput */ .chroma .go { color: #888888 }
/* GenericPrompt */ .chroma .gp { color: #555555 }
/* GenericStrong */ .chroma .gs { font-weight: bold }
/* GenericSubheading */ .chroma .gu { color: #aaaaaa }
/* GenericTraceback */ .chroma .gt { color: #aa0000 }
/* GenericUnderline */ .chroma .gl { text-decoration: underline }
/* TextWhitespace */ .chroma .w { color: #bbbbbb }

         
         /* Overrides on top of the theme and Chroma CSS */
/* Chroma-based lines highlighting in code blocks */
.chroma .hl {
    background-color: #e8e8e8;
    /* Extend highlight up to 100 characters (assuming that the code blocks never have more than 100 characters in a line) */
    min-width: 100ch;
}
/* GenericHeading */ .chroma .gh { color: #999999; font-weight: bold }
/* GenericSubheading */ .chroma .gu { color: #aaaaaa; font-weight: bold }

         
        </style>
    

    

    
    
    

    
    <script src="/js/responsive-nav-orig.min.e2b5f2a956b488f466da513820636134defdc38b90ed566248960593f2bb4ba5.js"></script>
    
    <link rel="preload" href="/js/responsive-nav-orig.min.e2b5f2a956b488f466da513820636134defdc38b90ed566248960593f2bb4ba5.js" as="script">

    
    
    <script defer src="/js/libs/fa/fontawesome-all.min.08916ac0fd078adfb58edc890460e2c8990729aee02bca7586404b56805f5219.js"></script>
    
    <link rel="preload" href="/js/libs/fa/fontawesome-all.min.08916ac0fd078adfb58edc890460e2c8990729aee02bca7586404b56805f5219.js" as="script">

    

    

    
    
    

    
    
<!-- rel="me" links for IndieAuth -->







    
 
<meta property="og:title" content="ImageMagick - The Definitive Guide To ImageMagick" />
<meta property="og:description"
      content=" " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ohmyweekly.github.io/notes/the-definitive-guide-to-imagemagick/" />


    
        <meta property="article:published_time" content="2011-06-18T16:16:21&#43;00:00"/>
    
    
        <meta property="article:modified_time" content="2011-06-18T16:16:21&#43;00:00"/>
    









    




     <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="ImageMagick - The Definitive Guide To ImageMagick"/>
<meta name="twitter:description" content=" "/>


    
    
    <link rel="alternate" type="application/jf2post+json" href="https://ohmyweekly.github.io/notes/the-definitive-guide-to-imagemagick/jf2post.json" title="Jf2post for 焉知非鱼" />
    
     



    
    
    
        
    


     
        
        <meta name="DC.Creator" content="焉知非鱼"/>
    



    
    
    
    <meta name="hugo-build-date" content="2024-03-01T16:16:06Z"/>
    <meta name="hugo-commit-hash" content="312735366b20d64bd61bff8627f593749f86c964"/>
    <meta name="generator" content="Hugo 0.123.7">
</head>


    
        <body lang="en">
    

        
        <div class="border" id="home"></div>

        <div class="wrapper">   
            
<nav id="nav" class="nav-collapse opened" aria-hidden="false">
    <ul class="navbar">
        <li><a class="" href="/">Home</a></li>
        
            
                <li><a class="" href="https://ohmyweekly.github.io/posts/">Posts</a></li>
            
        
            
                <li><a class="" href="https://ohmyweekly.github.io/notes/">Notes</a></li>
            
        
        
            <li><a class="" href="https://ohmyweekly.github.io/search/">Search</a></li>
        
    </ul>
</nav>

            <div class="container">
                <header class="masthead">
                    <div class="masthead-title no-text-decoration">
                        <a href="/">焉知非鱼</a> <span class="blinking-cursor">❚</span>
                    </div>
                    <div class="masthead-tagline">
                        Wait the light to fall
                    </div>
                </header>

                








<article class="post h-entry notes">
    <header>
        <div class="center">
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmyweekly.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmyweekly.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>

</div>

        <h1 class="post-title p-name">ImageMagick - The Definitive Guide To ImageMagick</h1>

        
        <data class="u-url" value="https://ohmyweekly.github.io/notes/the-definitive-guide-to-imagemagick/"></data>

        <div class="date-syndication">
            


    
    
    <div class="post-date">
        
        <time datetime="2011-06-18T16:16:21+0000" class="dt-published">Sat Jun 18, 2011</time>
        
        
    </div>


            




        </div>
         



    
    
    
        
    


    
        
        <span class="hide">
            &mdash; <a href="https://ohmyweekly.github.io/" class="u-author">焉知非鱼</a>
        </span>
    


    </header>

    <div class="content">
        


        





                       


        <div class="e-content">
            




<h2 id="imagemagick学习之-the-definitive-guide-to-imagemagick">ImageMagick学习之 The Definitive Guide To ImageMagick&nbsp;<a class="headline-hash no-text-decoration" href="#imagemagick学习之-the-definitive-guide-to-imagemagick">#</a> </h2>
<pre tabindex="0"><code>convert -contrast -contrast -contrast -contrast in.jpg out.png  # 增强对比，contrast选项可以有多个
convert -append zx.jpg modulate.jpg modulate145.jpg append.jpg  # 垂直排列
convert -append zx.jpg modulate.jpg modulate145.jpg -border 5 append-border.jpg # 垂直排列后加上边框
</code></pre><h2 id="the-definitive-guide-to-imagemagick之添加边框">The Definitive Guide To ImageMagick之添加边框&nbsp;<a class="headline-hash no-text-decoration" href="#the-definitive-guide-to-imagemagick之添加边框">#</a> </h2>
<p>给图像添加边框</p>
<p>A commonly requested operation that ImageMagick can help you with is creating borders on images. To make simple, single-colored borders, you just use the border command-line option.
This option takes two arguments—the horizontal width of the border and the vertical height of the border. For this example, I’ll show how to put a 5×10-pixel border around an image. This will result in the image being 10 （5+5）pixels wider and 20（10+10） pixels higher than it was before. The com-
mand line to do this is as follows:</p>
<pre tabindex="0"><code>convert -border 5x10 input.jpg output.jpg
#添加一个宽度为5，长度为10的边框
</code></pre><p>You can specify the color of the border by using the bordercolor command-line option.
For example, if you want to make the border green, then you use the following command line:</p>
<pre tabindex="0"><code>convert -bordercolor green -border 5x10 input.jpg output.jpg
</code></pre><p>如果想要边框的宽和高一样，只要在命令行中使用一个数字即可： 例如，下面的:</p>
<pre tabindex="0"><code>convert -border 5 input.jpg output.jpg
</code></pre><p>与此相同:</p>
<pre tabindex="0"><code>convert -border 5x5 input.jpg output.jpg
</code></pre><h2 id="the-definitive-guide-to-imagemagick之旋转图像">The Definitive Guide To ImageMagick之旋转图像&nbsp;<a class="headline-hash no-text-decoration" href="#the-definitive-guide-to-imagemagick之旋转图像">#</a> </h2>
<p>The rotate command-line option takes one argument, which is the number of degrees by which to rotate the image. A positive number is the number of degrees to the right, and a negative number is the number of degrees to the left.</p>
<p>To rotate this picture 45 degrees to the left, use the following command line:</p>
<pre tabindex="0"><code>convert -rotate -45 input.jpg output.jpg
</code></pre><p>Rotating the image 30 degrees to the right requires the following command line:</p>
<pre tabindex="0"><code>convert -rotate 30 input.jpg output.jpg
</code></pre><p>You can also apply conditional schematics to the rotation by adding a greater-than or
less-than sign to the argument. For example, to rotate the image only if its width is greater than its height, then add a greater-than sign:</p>
<pre tabindex="0"><code>convert -rotate -15^&gt; input.jpg output.jpg
</code></pre><p>To perform the inverse and rotate only if its height is greater than its width, use a less-than sign:</p>
<pre tabindex="0"><code>convert -rotate 60^&lt; input.jpg output.jpg
</code></pre><p>Remember that depending on your operating system and the shell you use, greater-than and less-than signs might be interpreted as shell commands. If they are, then you’ll need to escape them using whatever mechanism your shell uses.Winddows中用^转义&gt;号.</p>
<p>添加背景色：</p>
<pre tabindex="0"><code>convert -background red -rotate 30 input.jpg output.jpg
</code></pre><h2 id="the-definitive-guide-to-imagemagick之对比度">The Definitive Guide To ImageMagick之对比度&nbsp;<a class="headline-hash no-text-decoration" href="#the-definitive-guide-to-imagemagick之对比度">#</a> </h2>
<p>ImageMagick can manipulate the amount of contrast in an image, either by adding more contrast to images or by reducing it. To add more contrast to an image, use the contrast command-line option:</p>
<pre tabindex="0"><code>convert -contrast input.jpg output.jpg
</code></pre><p>If you need to add even more contrast, then specify the command-line option more than once. For example:</p>
<pre tabindex="0"><code>convert -contrast -contrast input.jpg output.jpg #增加更多的对比度
</code></pre><p>较少对比度：</p>
<p>You can also reduce the contrast present in an image. To do this, use a plus sign as the first character of the command-line option instead of aminus sign, like this:</p>
<pre tabindex="0"><code>convert +contrast input.jpg output.jpg
</code></pre><p>Again, specifying more than one occurrence of the +contrast command-line option will result in the effect of the operation being more pronounced.</p>
<pre tabindex="0"><code>convert +contrast +contrast input.jpg output.jpg
</code></pre><h2 id="the-definitive-guide-to-imagemagick之图像抖动">The Definitive Guide To ImageMagick之图像抖动&nbsp;<a class="headline-hash no-text-decoration" href="#the-definitive-guide-to-imagemagick之图像抖动">#</a> </h2>
<p>Dithering an Image</p>
<p>Dithering reduces the number of colors in an image. The most common example in everyday use is turning color images into strict black-and-white images for use in newspapers. Dithering works in amonochrome context by determining the brightness of a given color and then using the right frequency of black dots per area to imply that brightness.</p>
<p>To dither this image into monochrome（黑白相片）, you use a command line like this:</p>
<pre tabindex="0"><code>convert -dither -monochrome input.jpg output.jpg
</code></pre><p>You don’t have to dither to monochrome, though—you can also dither to different numbers of colors using the colors command-line option discussed in Chapter 2. For example, this command limits the picture to using eight colors:</p>
<pre tabindex="0"><code>convert -dither -colors 8 input.jpg output.jpg
</code></pre><p>To use the dither command-line option, you must specify either the monochrome
command-line option or the colors command-line option</p>
<h2 id="the-definitive-guide-to-imagemagick之图像均衡">The Definitive Guide To ImageMagick之图像均衡&nbsp;<a class="headline-hash no-text-decoration" href="#the-definitive-guide-to-imagemagick之图像均衡">#</a> </h2>
<p>Equalizing an Image</p>
<p>ImageMagick can also apply histogram equalization to an image</p>
<p>Flipping an Image</p>
<p>ImageMagick refers to turning an image upside down as a flip.</p>
<p>You use this command line:</p>
<pre tabindex="0"><code>convert -flip input.jpg output.jpg
</code></pre><p>To flip the image horizontally, use the flop operation:</p>
<pre tabindex="0"><code>convert -flop input.jpg output.jpg
</code></pre><h2 id="the-definitive-guide-to-imagemagick之图像着色">The Definitive Guide To ImageMagick之图像着色&nbsp;<a class="headline-hash no-text-decoration" href="#the-definitive-guide-to-imagemagick之图像着色">#</a> </h2>
<p>You can also apply tint colors to images with ImageMagick. The tint command-line option will add the specified percentage of the current fill color to the image. Only the nonpure colors in the image will be affected; in other words, pure colors such as red and green won’t change.</p>
<pre tabindex="0"><code>convert -fill blue -tint 15% zx.jpg zx15blue.jpg
convert -fill blue -tint 35% zx.jpg zx35blue.jpg
convert -fill blue -tint 55% zx.jpg zx55blue.jpg
convert -fill blue -tint 75% zx.jpg zx75blue.jpg
</code></pre><p>If you don’t specify a fill color, you get the default tint of black. To apply a 10 percent tint to an image, you use a command line like this:</p>
<pre tabindex="0"><code>convert -fill red -tint 10% input.jpg output.jpg
</code></pre><h2 id="the-definitive-guide-to-imagemagick之负片">The Definitive Guide To ImageMagick之负片&nbsp;<a class="headline-hash no-text-decoration" href="#the-definitive-guide-to-imagemagick之负片">#</a> </h2>
<p>Negating a pixel is the process of inverting its value. ImageMagick can negate images with the negate command-line option. This is similar to the solarize option except that no threshold is applied to the decision to negate a given pixel.</p>
<p>In contrast, the solarize （曝光）command gives you the images for varying
levels of threshold（阈值）.</p>
<pre tabindex="0"><code>convert -solarize 1 input.jpg output.jpg
convert -solarize 31 input.jpg output.jpg
convert -solarize 61 input.jpg output.jpg
convert -solarize 91 input.jpg output.jpg
</code></pre><h2 id="the-definitive-guide-to-imagemagick之正态化增强和调整图像">The Definitive Guide To ImageMagick之正态化，增强和调整图像&nbsp;<a class="headline-hash no-text-decoration" href="#the-definitive-guide-to-imagemagick之正态化增强和调整图像">#</a> </h2>
<p>Normalization is the process of improving the contrast in an image so that it uses all the available color range.</p>
<p>Another way to correct contrast problems in an image is to enhance the photo using the level command-line option. This option lets you specify the black point (the color that is considered black in the image) that you’d like in the output image. You can specify this as an absolute value ranging from zero to the maximum RGB value possible in the image, but in this example I’ll specify this as a percentage, because this is amore generically useful technique.</p>
<p>To specify a black point of 20 percent of the maximum possible RGB value, use a command like this:</p>
<pre tabindex="0"><code>convert -level 20% input.jpg output.jpg
convert -level 35% input.jpg output.jpg
convert -level 55% input.jpg output.jpg
convert -level 75% input.jpg output.jpg
</code></pre><p>You can also specify a desired white point for the image. You do this by adding another value to the specification argument. The following command specifies a white point of 50 percent of the maximum RGB value for the image, again using percentages:</p>
<pre tabindex="0"><code>convert -level 20%,50% input.jpg output.jpg
convert -level 20%,15% input.jpg output.jpg
convert -level 20%,35% input.jpg output35.jpg
convert -level 20%,55% input.jpg output55.jpg
convert -level 20%,75% input.jpg output75.jpg
</code></pre><p>A border has been added to these images for clarity. You can see from these examples that a white point higher than the black point produces a much nicer result. Finally, you can also specify a gamma correction value like this:</p>
<pre tabindex="0"><code>convert -level 20%,50%,1.0 input.jpg output.jpg
</code></pre><p>where the default is 1.0, which is what is specified in this example.Another way of tweaking the way an image looks is to modify the brightness, color saturation, and hue through modulation. You do this with ImageMagick with the modulate
command. The following command line manipulates the brightness of an image:</p>
<pre tabindex="0"><code>convert -modulate 80% input.jpg output.jpg
</code></pre><p>This changes the brightness to 80 percent of the current brightness of the image.</p>
<pre tabindex="0"><code>convert -modulate 15% input.jpg output.jpg
convert -modulate 55% input.jpg output.jpg
convert -modulate 95% input.jpg output95.jpg
convert -modulate 145% input.jpg output145.jpg
</code></pre><h2 id="the-definitive-guide-to-imagemagick之调整亮度色度饱和度">The Definitive Guide To ImageMagick之调整亮度、色度、饱和度&nbsp;<a class="headline-hash no-text-decoration" href="#the-definitive-guide-to-imagemagick之调整亮度色度饱和度">#</a> </h2>
<p>Let’s select a brightness of 100 percent based on the images  and then modify
the color saturation（色度） of the image. You do this by specifying a second part to the argument of the modulate command-line option, like this:</p>
<pre tabindex="0"><code>convert -modulate 100%,80% input.jpg output.jpg
</code></pre><p>调整亮度和色度：</p>
<pre tabindex="0"><code>convert -modulate 100%,80% input.jpg output.jpg
</code></pre><p>一下四个处理：</p>
<pre tabindex="0"><code>convert -modulate 100%,15%  input.jpg output.jpg
convert -modulate 100%,55%  input.jpg output.jpg
convert -modulate 100%,90%  input.jpg output.jpg
convert -modulate 100%,145% input.jpg output.jpg
</code></pre><h2 id="the-definitive-guide-to-imagemagick之调整亮度饱和度色度">The Definitive Guide To ImageMagick之调整亮度、饱和度、色度&nbsp;<a class="headline-hash no-text-decoration" href="#the-definitive-guide-to-imagemagick之调整亮度饱和度色度">#</a> </h2>
<p>Finally, you can also adjust the hue with the modulate command, like this:</p>
<pre tabindex="0"><code>convert -modulate 100%,100%,80% input.jpg output.jpg
convert -modulate 100%,100%,15% zx.jpg zxliangdu-baohedu-sedu15.jpg
convert -modulate 100%,100%,55% zx.jpg zxliangdu-baohedu-sedu55.jpg
convert -modulate 100%,100%,95% zx.jpg zxliangdu-baohedu-sedu95.jpg
convert -modulate 100%,100%,145% zx.jpg zxliangdu-baohedu-sedu145.jpg
</code></pre><h2 id="使用convert命令做简历的小图案">使用convert命令做简历的小图案&nbsp;<a class="headline-hash no-text-decoration" href="#使用convert命令做简历的小图案">#</a> </h2>
<p>这张图是128x128像素的，想弄成16x16或8x8像素的，用-resize选项：</p>
<pre tabindex="0"><code>convert -resize 16x16 mail.png m16.png
</code></pre><p>使用convert命令做简历的小图案</p>
<p>批量的话用</p>
<pre tabindex="0"><code>mogrify -resize 8x8 mail.png 8x8.png
</code></pre><p>有篇文章：http://home.lupaworld.com/home-space-uid-980-do-blog-id-230184.html</p>
<p>比如我们要把一张1600<em>1200的图片改成600</em>600大小，裁减掉多余边框, 首先缩放</p>
<pre tabindex="0"><code>convert -resize 800x600 a.jpg b.png
</code></pre><p>800x600表示宽800像素高600像素，这样就生成了一张800*600的图片, 然后截取需要的大小:</p>
<pre tabindex="0"><code>convert -crop 600x600+50+0 b.png c.gif
</code></pre><p>这样就把左面50个像素和右面50个像素去掉了
注意如果直接convert -resize 600x600 a.jpg会得到一张600*450的图片。
另外，从上面的命令可以看出，convert对图片后缀不感冒，它先把源文件解码，然后处理，然后编码成你需要的格式，当然，如果你的文件后缀和文件类型不符也没关系。</p>
<h2 id="the-definitive-guide-to-imagemagick之shearing-an-image">The Definitive Guide To ImageMagick之Shearing an Image&nbsp;<a class="headline-hash no-text-decoration" href="#the-definitive-guide-to-imagemagick之shearing-an-image">#</a> </h2>
<p>Shearing an Image</p>
<p>The shear effect puts the input image at an angle. You can tilt the image horizontally and vertically in both directions (in other words, from left to right, from right to left, from top to bottom, and from bottom to top). The tilt is specified as an angle; for example, in the horizontal direction, a negative tilt(倾斜;倾侧) is a tilt to the left, and a positive tilt is a tilt to the right. For example, to tilt an image to the right 45 degrees, you use this command line:</p>
<pre tabindex="0"><code>convert -shear 45 input.jpg output.jpg
</code></pre><p>The folowing shows some examples of shearing horizontally. In these examples I have also specified a vertical shear of zero.</p>
<pre tabindex="0"><code>convert -shear -45x0 -background red input.jpg output.jpg
convert -shear -20x0 input.jpg output.jpg
convert -shear 20x0 input.jpg output.jpg
convert -shear 40x0 input.jpg output.jpg
</code></pre><p>The empty triangles created by the shearing are filled with the color currently specified as the background color. You can also shear vertically by specifying a zero shear angle for the horizontal axis and then a vertical shearing. A positive angle is toward the top of the image, and a negative angle is toward the bottom. For example, to shear vertically toward the top 30 degrees, use this command line:</p>
<pre tabindex="0"><code>convert -shear 0x30 input.jpg output.jpg
convert -shear 0x-40 input.jpg output.jpg
convert -shear 0x-20 input.jpg output.jpg
convert -shear 0x20 input.jpg output.jpg
</code></pre><p>You can, of course, shear in the horizontal and vertical directions at the same time. To
perform the shear operation, specify the horizontal and vertical angles as arguments to the shear command-line option. For example, for a horizontal shear of 10 degrees and a vertical shear of 20 degrees, use this command line:</p>
<pre tabindex="0"><code>convert -shear 10x20 input.jpg output.jpg
</code></pre><h2 id="the-definitive-guide-to-imagemagick之rolling-an-image">The Definitive Guide To ImageMagick之Rolling an Image&nbsp;<a class="headline-hash no-text-decoration" href="#the-definitive-guide-to-imagemagick之rolling-an-image">#</a> </h2>
<p>Rolling an Image</p>
<p>The roll effect provided by ImageMagick can roll an image horizontally or vertically. A vertical roll involves taking a rectangle(矩形) from the top of the image and moving it to the bottom of the image; a horizontal roll moves some of the image from the left side to the right side. You do this by specifying the horizontal roll and then the vertical roll. For example, to roll the image 100 pixels to the right and 200 pixels to the bottom, use this command line:</p>
<pre tabindex="0"><code>convert -roll +100+200 input.jpg output.jpg
</code></pre><p>To roll horizontally only, don’t specify a vertical roll. To roll just vertically, specify a zero horizontal roll. To roll to the left or upward, use a negative number.</p>
<pre tabindex="0"><code>convert -roll -120+200 input.jpg output.jpg
</code></pre><h2 id="turning-multiple-images-into-one-image">Turning Multiple Images into One Image&nbsp;<a class="headline-hash no-text-decoration" href="#turning-multiple-images-into-one-image">#</a> </h2>
<p>Appending Images</p>
<p>To append these three figures in a vertical column, you can use this ImageMagick
command line:</p>
<pre tabindex="0"><code>convert -append input1.jpg input2.jpg input3.jpg output.jpg
</code></pre><p>To make it more obvious what is happening because of the different size of the last image, here is the same append command but with a border added:</p>
<pre tabindex="0"><code>convert -append input2.jpg input2.jpg input3.jpg -border 5 output.jpg
</code></pre><p>The color used to fill in the vacant space to the right of the first two images
is the background color. This is much more obvious if you set the background color to something a little more obvious than the default of white:</p>
<pre tabindex="0"><code>convert -background red -append input1.jpg input2.jpg input3.jpg output.jpg
</code></pre><p>You can also create a horizontal row of images with the append command. To do this, just use a plus sign instead of aminus sign as the first character of the append command. For example, you can create that same column in a horizontal style:</p>
<pre tabindex="0"><code>convert -background red +append inpuot.jpg input.jpg output.jpg result.jpg
</code></pre><h2 id="using-the-drawing-commands">Using the Drawing Commands&nbsp;<a class="headline-hash no-text-decoration" href="#using-the-drawing-commands">#</a> </h2>
<p>Specifying Colors
Many of the drawing commands demonstrated in this chapter take an argument that is a color, so in the following three sections, I’ll discuss how to specify colors for these commands. ImageMagick supports three major ways of specifying a color: named colors, HTML-style strings, and RGB tuples.</p>
<p>Using Named Colors</p>
<p>As mentioned in Chapter 1, it’s possible for the administrator who set up ImageMagick to have defined a set of named colors. These names act as shortcuts to the RGB value associated with
that name. The default names should still work if the administrator hasn’t removed them. You can find out what named colors exist using the following command line:</p>
<pre tabindex="0"><code>convert -list color
</code></pre><p>This will list the colors that have been defined in the colors.xml file discussed in Chapter 1.
Here’s a sample of the list that is returned from my default installation of ImageMagick:</p>
<p>Using HTML-Style Color Strings</p>
<p>ImageMagick also takes color arguments in the form of HTML-style color strings. For example, all the following are valid color strings:</p>
<pre tabindex="0"><code>#RGB                 (R,G,B are hex numbers, 4 bits each)
#RRGGBB              (8 bits each)
#RRRGGGBBB           (12 bits each)
#RRRRGGGGBBBB        (16 bits each)
#RGBA                (4 bits each)
#RRGGBBAA            (8 bits each)
#RRRGGGBBBAAA        (12 bits each)
#RRRRGGGGBBBBAAAA    (16 bits each)
</code></pre><p>To understand these values, you have to know that color is represented to ImageMagick in the form of an RGB value, which consists of red, green, and blue values. You can represent any color with an RGB value, and this is the color format used by many image formats, as well as a lot of hardware such as computer monitors. Of course, other ways of representing colors exist, such as CMYK and YUV, but given that ImageMagick uses RGB, I’ll limit this discussion to the
RGB values.</p>
<p>Using RGB Tuples</p>
<p>The final method of specifying a color is useful if you know what the decimal values for the various channels you want to set are. Two types of RGB tuples exist. To specify the RGB values, then use this form:</p>
<pre tabindex="0"><code>rgb(value, value, value)
</code></pre><p>where value is replaced by the red, green, and blue values, respectively. Alternatively, if you want to specify an alpha channel as well, then use this form:</p>
<pre tabindex="0"><code>rgba(value, value, value, value)
</code></pre><p>Specifying a Page Size</p>
<p>For example, to create a new image that is 100 pixels wide and 200 pixels tall and is
green, then you use a command line like this:</p>
<pre tabindex="0"><code>convert -size 100x200 xc:green output.jpg
</code></pre><p>The xc: syntax specifies that ImageMagick should create an image and use green as the color of that image.</p>
<p>Specifying a Background Color</p>
<pre tabindex="0"><code>convert -background red -rotate 30 input.jpg output.jpg
</code></pre><p>Specifying the Fill Color and Stroke Color填充色和画笔颜色</p>
<pre tabindex="0"><code>convert -size 200x100 xc:lightgray -stroke green -draw &#34;rectangle 10,10,190,90&#34; output.jpg
</code></pre><p>This command line creates a light-gray image that is 200 pixels wide and 100 pixels high; it then sets the stroke color to green and draws a rectangle inset 10 pixels from all the edges of the image. This image is filled with the default fill color of black. The image is then saved to output.jpg.</p>
<p>You can also fill that rectangle with, for instance, light gray. For this command, use a whit background for the image:</p>
<pre tabindex="0"><code>convert -size 200x100 xc:white -stroke green -fill lightgray -draw &#34;rectangle 10,10,190,90&#34; output.jpg
</code></pre><p>You can also specify the width of the stroked line. In this example, the green line is harder to see now that the rectangle is filled. If you make the line 5 pixels wide, then you get amuch more visible border around the fill color:</p>
<pre tabindex="0"><code>convert -size 200x100 xc:white -stroke green -strokewidth 5 -fill lightgray -draw &#34;rectangle 10,10,190,90&#34; output.jpg
</code></pre><h2 id="setting-gravity">Setting Gravity&nbsp;<a class="headline-hash no-text-decoration" href="#setting-gravity">#</a> </h2>
<p>ImageMagick lets you specify how some graphical operations occur using a concept called gravity. For instance, in Chapter 4, you saw an example that used the composite command and some corner images to create a curved corner effect on an image. The gravity command told ImageMagick which corner of the large image to place the corner images in.</p>
<p>So, the top of the image is North, and the right of the image is East. You can also specify corners with this compass, in that the top-right corner is NorthEast, for instance. To specify the center of the image, use the Center keyword. You specify the gravity on the command line with the gravity option; for example, to put a rounded corner on the top-right corner of an image, use this command:</p>
<pre tabindex="0"><code>composite -gravity NorthEast rounded-ne.png input.png output.png
</code></pre><p>圆角矩形也可以做出来。</p>
<h2 id="annotating-an-image-with-text">Annotating an Image with Text&nbsp;<a class="headline-hash no-text-decoration" href="#annotating-an-image-with-text">#</a> </h2>
<p>添加文字：</p>
<pre tabindex="0"><code>convert -annotate 0x0+10+10 weibo.com input.jpg output.jpg
</code></pre><p>This will put the text text on the image at the top-left corner and inset it 10 pixels
from each edge. Note that this inset is the bottom-left corner of the first character, so you expect the text to look closer to the top of the image than it is to the left because of this.</p>
<pre tabindex="0"><code>convert -pointsize 24 -annotate 0x0+10+10 weibo.com input.jpg output.jpg
</code></pre><p>You can see that in this example the text falls off the edge of the image, so let’s shift the bottom of the text down to 30 pixels:</p>
<pre tabindex="0"><code>convert -pointsize 24 -annotate 0x0+10+30  weibo.com input.jpg output.jpg
</code></pre><p>This is much nicer. Now let’s change the color of the text to red, which you can do with the stroke color (as discussed in the earlier “Specifying the Fill Color and Stroke Color” section):</p>
<pre tabindex="0"><code>convert -pointsize 24 -stroke red -annotate 0x0+10+30 weibo.com input.jpg output.jpg
</code></pre><p>This doesn’t give you the result you probably expected, because the inside of the letters isn’t the right color。</p>
<p>To make this look as you expect, you need to have the inside of the letters filled with the red color as well. So, let’s specify a fill color:</p>
<pre tabindex="0"><code>convert -pointsize 24 -stroke red -fill red -annotate 0x0+10+30 www.sina.com input.jpg output.jpg
</code></pre><p>This is a much nicer result in this instance. It’s useful to note that the letters’ fill color
and stroke color don’t have to be the same, which can sometimes come in handy. For completeness, it’s worth noting that you can also specify the stroke width for text annotations. For example, this sets the stroke width to 3 pixels:</p>
<pre tabindex="0"><code>convert -pointsize 24 -stroke red -strokewidth 3 -fill red -annotate 0x0+10+30 sina.com input.jpg output.jpg
</code></pre><p>You can also specify the font to use with the annotation. To do this, use the font commandline argument, which takes the name of a font as its argument. For this example, I want to use a TrueType font called Arbuckle that I downloaded from the Internet for free. The font is stored in the Arbuckle.ttf file, which means I use this command line:</p>
<pre tabindex="0"><code>convert -pointsize 24 -font Arbuckle.ttf -stroke red -fill red -annotate 0x0+10+30 sina.com input.jpg output.jpg

convert -pointsize 24 -font c:\windows\fonts\Jokerman.ttf -stroke red -fill red -annotate 0x0+10+30 sina.com input.jpg output.jpg
</code></pre><p>It’s worth noting that ImageMagick has a separate specification for fixed-width fonts, which you specify in the same manner as the font command-line option; it’s called text-font. You also specify another two numbers in the offset specification, which are rotation parameters.</p>
<pre tabindex="0"><code>convert -pointsize 24 -stroke red -fill red -annotate 45x0+10+30 sina.com input.jpg output.jpg
</code></pre><p>To rotate the annotation vertically, use the other number:</p>
<pre tabindex="0"><code>convert -pointsize 24 -stroke red -fill red -annotate 0x45+10+30 sina.com input.jpg output.jpg
</code></pre><p>You can also use the gravity command-line argument to specify where on the image the text should be placed. For example, to put this text in the bottom-right corner instead of the top-left corner, then you use the gravity option like this:</p>
<pre tabindex="0"><code>convert -pointsize 24 -font  c:\windows\fonts\Jokerman.ttf -stroke red -fill red -gravity SouthEast -annotate 0x0+10+60 sina.com input.jpg output.jpg
</code></pre><p>The SouthEast argument to the gravity command-line option tells ImageMagick to put the text at the bottom-right corner of the image.</p>
<p>You can also specify a box to be placed under the annotation text, which can make it a lot easier to read—in return for being more intrusive on the original image. You do this by adding the box command-line option to the command, with the argument to the box option being the color of the box. For example, the following command line adds a blue box behind the text you put on the image:</p>
<pre tabindex="0"><code>convert -pointsize 24 -stroke red -fill red -box blue -annotate 0x0+10+30 sina.com input.jpg output.jpg
</code></pre><p>Finally, you can have the annotation text come from a file if you don’t want to specify the text on the command line. To do this, instead of the annotation text in the command line, use an at sign and then the name of the file containing the annotation text. For example:</p>
<pre tabindex="0"><code>convert -annotate 0x0+10+30 @textfile.txt input.jpg output.jpg
</code></pre><h2 id="drawing-simple-shapes">Drawing Simple Shapes&nbsp;<a class="headline-hash no-text-decoration" href="#drawing-simple-shapes">#</a> </h2>
<p>Drawing a Single Point</p>
<p>The simplest shape is just a single pixel. For example, the following command line puts a red pixel onto a 100×100-pixel image at the point 50 pixels in from the top-left edge:</p>
<pre tabindex="0"><code>convert -size 100x100 -fill red -draw &#34;point 50,50&#34; xc:white output.png
</code></pre><p>Drawing a Straight Line</p>
<p>You can draw straight lines with the line shape. For example, the following command draws a line between 10,10 and 90,90 on another blank 100×100-pixel image:</p>
<pre tabindex="0"><code>convert -size 100x100 -fill red -draw &#34;line 10,10 90,90&#34; xc:white output.png
</code></pre><p>Again, you can see that the fill color draws the line, not the stroke color. Note that setting the stroke width doesn’t affect the image; however, the linewidth setting will change the width of the line:</p>
<pre tabindex="0"><code>convert -size 100x100 -stroke black -fill red -linewidth 5 -draw &#34;line 10,10 90,90&#34; xc:white output.png
</code></pre><p>Drawing a Rectangle</p>
<pre tabindex="0"><code>convert -size 100x100 -stroke red -fill white -draw &#34;rectangle 10,10 90,90&#34; xc:white output.png
</code></pre><p>You can change the size of the line used by the rectangle by using the strokewidth
command-line option:</p>
<pre tabindex="0"><code>convert -size 100x100 -stroke red -strokewidth 5 -fill white -draw &#34;rectangle 10,10 90,90&#34; xc:white output.png
</code></pre><p>And finally, you can change the color with which the rectangle is filled:</p>
<pre tabindex="0"><code>convert -size 100x100 -stroke red -strokewidth 5 -fill lightgray -draw &#34;rectangle 10,10 90,90&#34; xc:white output.png
</code></pre><p>Drawing a Rectangle with Rounded Corners</p>
<p>ImageMagick can also round the corners of the rectangles that it draws. To do this, you change the name of the shape you’re drawing to roundRectangle and append an extra argument to the shape description. This extra argument is the width of the circle and the height of the circle that forms those corners. For example:</p>
<pre tabindex="0"><code>convert -size 100x100 -stroke red -strokewidth 5 -fill lightblue -draw &#34;roundRectangle 10,10 90,90 10,10&#34; xc:white output.png
</code></pre><p>This rounded rectangle has corners that are based on a circle that is 10×10 pixels. The following command tweaks that to 20×10:</p>
<pre tabindex="0"><code>convert -size 100x100 -stroke red -strokewidth 5 -fill lightblue -draw &#34;roundRectangle 10,10 90,90 20,10&#34; xc:white output.png
</code></pre><p>Drawing a Circle</p>
<pre tabindex="0"><code>convert -size 100x100 -stroke red -fill lightblue -draw &#34;circle 50,50 70,70&#34; xc:white output.png
</code></pre><p>The arguments to the circle shape are slightly different from the rectangle shape. The first argument is the center of the circle, and the second argument is how far the circle extends.</p>
<p>You can also increase the stroke width of a circle much like a rectangle:</p>
<pre tabindex="0"><code>convert -size 100x100 -stroke red -strokewidth 5 -fill lightblue -draw &#34;circle 50,50 70,70&#34; xc:white output.png
</code></pre><p>And finally, you can of course fill the circle:</p>
<pre tabindex="0"><code>convert -size 100x100 -stroke red -strokewidth 5 -fill red -draw &#34;circle 50,50 70,70&#34; xc:white output.png
</code></pre><p>Drawing an Arc 画弧</p>
<p>You can draw arcs with ImageMagick. You merely specify three pairs of numbers—the first two pairs of numbers are control points that dictate the size of the ellipse in which the arc is drawn. The third pair of numbers is the starting angle of the arc and the ending angle of the arc. This is a simple command-line example:</p>
<pre tabindex="0"><code>convert -size 100x100 -stroke red -fill lightblue -draw &#34;arc 10,10 90,90 45,270&#34; xc:white output.png
</code></pre><p>You can see on this diagram that the arc starts at 45 degrees and ends at 270 degrees.</p>
<p>Drawing an Ellipse 椭圆</p>
<p>You can use a similar effect with an ellipse:</p>
<pre tabindex="0"><code>convert -size 100x100 -stroke red -fill lightblue -draw &#34;ellipse 50,50 20,40 45,270&#34; xc:white output.png
</code></pre><p>The arguments to this primitive are the center of the ellipse, the horizontal radius, and the vertical radius. The start and end angles are handled the same as in the arc primitive.</p>
<p>Drawing a Polyline 线段</p>
<pre tabindex="0"><code>convert -size 100x100 -stroke red -fill lightgray -draw &#34;polyline 10,10 20,40 90,90 10,90&#34; xc:white output.png
</code></pre><p>Drawing a Polygon 多边形</p>
<p>The polygon primitive is the same as the polyline primitive, but the polygon finishes by returning to the starting point of the polygon:</p>
<pre tabindex="0"><code>convert -size 100x100 -stroke red -fill lightgray -draw &#34;polygon 10,10 20,40 90,90 10,90&#34; xc:white output.png
</code></pre><p>Drawing a Bezier 曲线</p>
<p>The Bezier primitive draws Bezier curves. Bezier curves are based on a series of control points. The first and last points are the start and end points of the curve, and the intervening points act like gravity points and “pull” the curve toward those points. Here’s an example of a Bezier curve with four control points:</p>
<pre tabindex="0"><code>convert -size 100x100 -stroke red -fill lightgray -draw &#34;bezier 10,10 30,100 70,0 90,90&#34; xc:white output.png
</code></pre><p>Drawing Text</p>
<p>You saw how to annotate text earlier in this chapter in the “Annotating an Image with Text” section. The annotate command-line option mentioned in that section is actually a shorthand method of calling the draw command-line option’s text functionality, which is much the same but offers tighter control.</p>
<p>To annotate an image using the draw command-line option, use the text primitive, which takes a location and the string to write as arguments. For example, this command writes a word on the blank image:</p>
<pre tabindex="0"><code>convert -size 100x100 -stroke red -draw &#34;text 50,50 blah&#34; xc:white output.png
</code></pre><pre tabindex="0"><code>convert -size 100x100 -stroke red -fill white -draw &#34;rectangle 10,10 90,90&#34; -fill black -draw &#34;color 50,50 point&#34; xc:white output.png
</code></pre><p>replace
The replace argument looks at the value of the pixel specified and then replaces all occurrences of that color in the image with the current fill color:</p>
<pre tabindex="0"><code>convert -size 100x100 -stroke red -fill white -draw &#34;rectangle 10,10 90,90&#34; -fill black -draw &#34;color 50,50 replace&#34; xc:white output.png
</code></pre><ul>
<li>floodfill
The floodfill argument fills the inside of the shape that contains the specified point with the current fill color:</li>
</ul>
<pre tabindex="0"><code>convert -size 100x100 -stroke red -fill white -draw &#34;rectangle 10,10 90,90&#34; -fill black -draw &#34;color 50,50 floodfill&#34; xc:white output.png
</code></pre><ul>
<li>filltoborder
The filltoborder argument is similar to the floodfill option, but replaces the border as well:</li>
</ul>
<pre tabindex="0"><code>convert -size 100x100 -stroke red -fill white -draw &#34;rectangle 10,10 90,90&#34; -fill black -draw &#34;color 50,50 filltoborder&#34; xc:white output.png
</code></pre><p>As this command sets the entire image to black, I haven&rsquo;t included an example of it&rsquo;s output.</p>
<ul>
<li>reset</li>
</ul>
<p>The reset argument colors all pixels anew:</p>
<pre tabindex="0"><code>convert -size 100x100 -stroke red -fill white -draw &#34;rectangle 10,10 90,90&#34; -fill black -draw &#34;color 50,50 filltoborder&#34; xc:white output.png
</code></pre><p>Similar to filltoborder, this command sets the entire image to black, so I haven&rsquo;t included an example of it&rsquo;s output.</p>
<p>Transforming Your Drawings</p>
<p>The draw command-line option supports a number of transformations that you can apply to the primitives you use. In this series of examples, I’ll show how to use the draw command-line option to put some primitives on top of an existing image and then use the transformation’sprimitives to rearrange the elements I’m drawing. I’ll put them on top of the image shown in Figure to show that the draw transformations don’t affect that image.</p>
<p>This command line draws a simple stick-figure man and some text:</p>
<pre tabindex="0"><code>convert -fill blue -font  c:\windows\fonts\Jokerman.ttf -pointsize 48 -draw &#34;circle 50,50 75,75 rectangle 45,75 65,150 text 100,150 Water&#34; input.jpg output.jpg
</code></pre><h3 id="rotating-the-drawing">Rotating the Drawing&nbsp;<a class="headline-hash no-text-decoration" href="#rotating-the-drawing">#</a> </h3>
<p>The first transformation I’ll apply is the rotate transformation primitive. The rotate
command-line option takes an argument that is the number of degrees to rotate clockwise, much like the rotate command-line option discussed in Chapter 6. Here’s an example:</p>
<pre tabindex="0"><code>convert -fill blue -font c:\windows\fonts\Jokerman.ttf -pointsize 36 -draw &#34;rotate -15 circle 50,50 75,75 rectangle 45,75 65,150 text 100,150 Water&#34; input.jpg output.jpg
</code></pre><p>This rotates all the drawn elements but not the original picture</p>
<p>You can choose to rotate only some of the drawn elements by changing where you place the rotate command:</p>
<pre tabindex="0"><code>convert -fill blue -font c:\windows\fonts\Jokerman.ttf -pointsize 36 -draw &#34;circle 50,50 65,45 rectangle 60,75 55,150 rotate -15 text 100,150 Water&#34; input.jpg output.jpg
</code></pre><p>Translating a Drawing
You can also translate a drawing. Translation is the process of shifting a drawing by a given amount, for example, 40 pixels to the left or 150 pixels down. The following command translates the drawing used in the previous example down 150 pixels:</p>
<pre tabindex="0"><code>convert -fill blue -font c:\windows\fonts\Jokerman.ttf -pointsize 36 -draw &#34;translate 0,75 circle 50,50 65,65 rectangle 65,70 60,120 text 100,150 Water&#34; input.jpg output.jpg
</code></pre><h3 id="scaling-a-drawing">Scaling a Drawing&nbsp;<a class="headline-hash no-text-decoration" href="#scaling-a-drawing">#</a> </h3>
<p>Perhaps you’re really happy with the drawing you’ve done but now realize that it’s the wrong size and want to scale the whole drawing without changing all those coordinates. You just provide a scale primitive with the horizontal scaling factor and vertical scaling factor. For example, the following command makes the drawing one-and-a-half times its current width but half its current height:</p>
<pre tabindex="0"><code>convert -fill blue -font c:\windows\fonts\Jokerman.ttf -pointsize 24 -draw &#34;scale 1.5,0.5 circle 50,50 65,65 rectangle 65,70 75,100 text 100,100 Water&#34; input.jpg output.jpg
</code></pre><h3 id="skewing-a-drawing">Skewing a Drawing&nbsp;<a class="headline-hash no-text-decoration" href="#skewing-a-drawing">#</a> </h3>
<p>Finally, for the transformations you can apply to your drawing, you can skew the drawing. You can perform this skew either horizontally or vertically by using different commands. For example, to skew horizontally, simply specify the number of degrees to skew with the skewx primitive:（把字体复制到命令行所在路径，和照片放在一块）</p>
<pre tabindex="0"><code>convert -fill blue -font Jokerman.ttf -pointsize 24 -draw &#34;skewx 30 circle 80,80 65,65 rectangle 65,70 75,100 text 100,150 Water&#34; input.jpg output.jpg
</code></pre><p>You can also skew vertically with the skewy primitive:</p>
<pre tabindex="0"><code>convert -fill blue -font  Jokerman.ttf -pointsize 24 -draw &#34;skewy 30 circle 50,50 55,55 rectangle 65,70 75,100 text 100,150 Water&#34; input.jpg output.jpg
</code></pre><h3 id="combining-transformation-primitives">Combining Transformation Primitives&nbsp;<a class="headline-hash no-text-decoration" href="#combining-transformation-primitives">#</a> </h3>
<p>Of course, you can combine transformations; for example, to rotate just the word water but move the whole drawing down 150 pixels, use a command line like this:</p>
<pre tabindex="0"><code>convert -fill blue -font   Jokerman.ttf -pointsize 24 -draw &#34;translate 0,75 circle 50,50 65,65 rectangle 30,75 65,150 rotate -15 text 100,150 Water&#34; input.jpg output.jpg
</code></pre><h3 id="using-more-than-one-draw-command">Using More Than One Draw Command&nbsp;<a class="headline-hash no-text-decoration" href="#using-more-than-one-draw-command">#</a> </h3>
<p>Nothing is stopping you from using more than one invocation of the draw command-line option. In fact, this is sometimes required—for instance, if you want to change the color you’re filling shapes with, you’ll have to use more than one command. The following command keeps the stick-figure man blue but makes the text red:</p>
<pre tabindex="0"><code>convert -fill blue -font Jokerman.ttf -pointsize 24 -draw &#34;circle 50,50 65,65 rectangle 30,75 64,150&#34; -fill red -draw &#34;text 100,150 Water&#34; input.jpg output.jpg
</code></pre><h2 id="compositing-images-with-the-draw-command">Compositing Images with the draw Command&nbsp;<a class="headline-hash no-text-decoration" href="#compositing-images-with-the-draw-command">#</a> </h2>
<p>使用draw命令合成图片</p>
<p>to place an image over another, you can use syntax like this:</p>
<pre tabindex="0"><code>convert -draw &#34;image Over 100,100 118,111 fern.png&#34; input.jpg output.jpg
</code></pre><p>The first pair of numbers in the command line is the inset to start the image at, and the second pair of numbers is the size of the image. If you use 0,0, then the real size of the image is used; any other pair of numbers will result in the image being scaled to the specified size. You don’t just need to place images over one another, however. The following sections highlight the available operators and show examples of their effects.</p>
<h3 id="using-the-over-operator">Using the Over Operator&nbsp;<a class="headline-hash no-text-decoration" href="#using-the-over-operator">#</a> </h3>
<p>This is the transformation used previously, so I won’t include an example here. It’s listed here for completeness.</p>
<h3 id="using-the-in-operator">Using the In Operator&nbsp;<a class="headline-hash no-text-decoration" href="#using-the-in-operator">#</a> </h3>
<p>The In operator replaces the image data under the overlay image with the overlay image. None of the image data from the original image in the covered area is used, even if the overlay image specifies transparency:</p>
<pre tabindex="0"><code>convert -draw &#34;image In 100,100 118,111 fern.png&#34; input.jpg output.jpg
</code></pre><h3 id="using-the-out-operator">Using the Out Operator&nbsp;<a class="headline-hash no-text-decoration" href="#using-the-out-operator">#</a> </h3>
<p>The Out operator removes the section of the input image that would be covered by the overlay image but doesn’t actually put the overlay image into that space:</p>
<pre tabindex="0"><code>convert -draw &#34;image Out 100,100 218,111 fern.jpg&#34; input.jpg output.jpg
</code></pre><h3 id="using-the-atop-operator">Using the Atop Operator&nbsp;<a class="headline-hash no-text-decoration" href="#using-the-atop-operator">#</a> </h3>
<p>The Atop operator produces something visually the same as the Over operator, except in the case where the overlay image falls outside the input image’s original boundary. For example, here’s the Atop operator with the coordinates tweaked so that the image does fall outside the edge of the input image:</p>
<pre tabindex="0"><code>convert -draw &#34;image Atop 125,75 109,80 fern.jpg&#34; input.jpg output.jpg
</code></pre><p>In previous releases of ImageMagick, the Over operator would have extended the image to include all of the overlay image. This is no longer the case, however.</p>
<h3 id="using-the-xor-operator">Using the Xor Operator&nbsp;<a class="headline-hash no-text-decoration" href="#using-the-xor-operator">#</a> </h3>
<p>The Xor operation will apply the exclusive “or” Boolean operator to the input image and the overlay image and then place the result into the output image. The exclusive “or” operator is often known as the logical difference, because it’s a simple bit difference operator. If the value of two Bits from the input images is different, then the value of the exclusive or operation is a 1.</p>
<p>Otherwise, the value of the exclusive or is 0. This command line:</p>
<pre tabindex="0"><code>convert -draw &#34;image Xor 50,50 80,100 fern.jpg&#34; input.jpg output.jpg
</code></pre><h3 id="using-the-plus-operator">Using the Plus Operator&nbsp;<a class="headline-hash no-text-decoration" href="#using-the-plus-operator">#</a> </h3>
<p>The Plus operator adds the existing pixel value in the input image to the pixel value of the overlay image and then uses that new value in the output image. If the new pixel value is higher than can be stored in the output image, it’s truncated to the maximum possible value for that image. The matte channel value is set to opaque. For example:</p>
<pre tabindex="0"><code>convert -draw &#34;image Plus 50,50 100,80 fern.jpg&#34; input.jpg output.jpg
</code></pre><h3 id="using-the-minus-operator">Using the Minus Operator&nbsp;<a class="headline-hash no-text-decoration" href="#using-the-minus-operator">#</a> </h3>
<p>Minus does the same as the Plus operator, except that the base image’s pixel value is subtracted from the overlay image’s pixel value. If the new value is less than zero, then it’s made zero. The matte channel value is set to opaque. For example:</p>
<pre tabindex="0"><code>convert -draw &#34;image Minus 50,50 100,50 fern.jpg&#34; input.jpg output.jpg
</code></pre><h3 id="using-the-difference-operator">Using the Difference Operator&nbsp;<a class="headline-hash no-text-decoration" href="#using-the-difference-operator">#</a> </h3>
<p>Difference is similar to the Minus operator, except that an absolute value is applied to the result of the subtraction, so the new pixel value doesn’t need to be forced to not be negative. For example:</p>
<pre tabindex="0"><code>convert -draw &#34;image Difference 50,50 108,90 fern.jpg&#34; input.jpg output.jpg
</code></pre><p>Again, the image doesn’t show up well after the printing process has done its thing; but again, if you look closely, you can see the outline of the letters. The ImageMagick documentation suggests that the Difference operator is useful to see differences in similar images.</p>
<h3 id="using-the-multiply-operator">Using the Multiply Operator&nbsp;<a class="headline-hash no-text-decoration" href="#using-the-multiply-operator">#</a> </h3>
<p>Multiplymultiplies the pixel value from the input image with the pixel value from the overlay image to determine the value of the pixel in the output image:</p>
<pre tabindex="0"><code>convert -draw &#34;image Multiply 50,50 100,90 fern.jpg&#34; input.jpg output.jpg
</code></pre><h3 id="using-the-bumpmap-operator">Using the Bumpmap Operator&nbsp;<a class="headline-hash no-text-decoration" href="#using-the-bumpmap-operator">#</a> </h3>
<p>The Bumpmap operator takes the input image and shades it with the overlay image:</p>
<pre tabindex="0"><code>convert -draw &#34;image Bumpmap 50,50 100,50 fern.jpg&#34; input.jpg output.jpg
</code></pre><p>Performing Other Tasks with These Composition Operators
You can also use these composition operators with the composite command:</p>
<pre tabindex="0"><code>composite -compose In fern.jpg input.jpg output.jpg
</code></pre><h2 id="antialiasing-your-images">Antialiasing Your Images&nbsp;<a class="headline-hash no-text-decoration" href="#antialiasing-your-images">#</a> </h2>
<p>反锯齿</p>
<p>Sometimes you don’t want antialiasing, however. For example, on LCD monitors, antialiased text often looks fuzzy and slightly out of focus. ImageMagick therefore lets you turn antialiasing on and off. To use antialiasing, which is the default, just use the antialias command-line option. Here’s how to create the earlier antialiased example:</p>
<pre tabindex="0"><code>convert -antialias -font JOKERMAN.ttf -pointsize 48 -size 300x120 -fill black -annotate 0,0+10+100 &#34;Magick&#34; xc:white output.png
</code></pre><p>To disable antialiasing, use the +antialias command-line option, like this:</p>
<pre tabindex="0"><code>convert +antialias -font JOKERMAN.ttf -pointsize 48 -size 300x120 -fill black -annotate 0,0+10+100 &#34;Magick&#34; xc:white output.png
</code></pre><h3 id="framing-an-image">Framing an Image&nbsp;<a class="headline-hash no-text-decoration" href="#framing-an-image">#</a> </h3>
<p>ImageMagick can place frames around images, which is something I briefly touched upon in Chapter 2 when I showed how to remove frames with the trim command-line option. The way you create one of these frames with ImageMagick is with the frame command-line option. At its most basic, the command takes the thickness of the frame horizontally and vertically as its arguments, like this:</p>
<pre tabindex="0"><code>convert -frame 10x10 input.jpg output.jpg
</code></pre><p>Now, this gray frame isn’t very visible here, so I’ve opted to create a dark green frame using the mattecolor option:</p>
<pre tabindex="0"><code>convert -mattecolor darkgreen -frame 10x10 input.jpg output.jpg
</code></pre><p>The first number is the amount to add to each side of the image, and the other number is the amount to add to the top and the bottom of the image.</p>
<p>You can specify two other arguments with the frame command-line option. These are the outer bevel width and the inner bevel width. Here’s an example of setting the outer bevel  width to 5 and the inner bevel width to 0:</p>
<pre tabindex="0"><code>convert -mattecolor darkgreen -frame 10x10+5+0 input.jpg output.jpg
</code></pre><p>You can also set the inner bevel:</p>
<pre tabindex="0"><code>convert -mattecolor darkgreen -frame 10x10+0+5 input.jpg output.jpg
</code></pre><p>Finally, you can set both and outer and an inner bevel:</p>
<pre tabindex="0"><code>convert -mattecolor darkgreen -frame 10x10+5+5 input.jpg output.jpg
</code></pre>

        </div>
    </div>
</article>



                <footer>
                    




<div class="no-text-decoration">
    <div class="jump top"><a href="#" title="Top of this page">⮉</a></div>
    <div class="jump bottom"><a href="#bottom" title="Bottom of this page">⮋</a></div>
</div>


 
    
        <div class="hugotoc no-text-decoration">
            <nav id="TableOfContents">
  <ul>
    <li><a href="#imagemagick学习之-the-definitive-guide-to-imagemagick">ImageMagick学习之 The Definitive Guide To ImageMagick</a></li>
    <li><a href="#the-definitive-guide-to-imagemagick之添加边框">The Definitive Guide To ImageMagick之添加边框</a></li>
    <li><a href="#the-definitive-guide-to-imagemagick之旋转图像">The Definitive Guide To ImageMagick之旋转图像</a></li>
    <li><a href="#the-definitive-guide-to-imagemagick之对比度">The Definitive Guide To ImageMagick之对比度</a></li>
    <li><a href="#the-definitive-guide-to-imagemagick之图像抖动">The Definitive Guide To ImageMagick之图像抖动</a></li>
    <li><a href="#the-definitive-guide-to-imagemagick之图像均衡">The Definitive Guide To ImageMagick之图像均衡</a></li>
    <li><a href="#the-definitive-guide-to-imagemagick之图像着色">The Definitive Guide To ImageMagick之图像着色</a></li>
    <li><a href="#the-definitive-guide-to-imagemagick之负片">The Definitive Guide To ImageMagick之负片</a></li>
    <li><a href="#the-definitive-guide-to-imagemagick之正态化增强和调整图像">The Definitive Guide To ImageMagick之正态化，增强和调整图像</a></li>
    <li><a href="#the-definitive-guide-to-imagemagick之调整亮度色度饱和度">The Definitive Guide To ImageMagick之调整亮度、色度、饱和度</a></li>
    <li><a href="#the-definitive-guide-to-imagemagick之调整亮度饱和度色度">The Definitive Guide To ImageMagick之调整亮度、饱和度、色度</a></li>
    <li><a href="#使用convert命令做简历的小图案">使用convert命令做简历的小图案</a></li>
    <li><a href="#the-definitive-guide-to-imagemagick之shearing-an-image">The Definitive Guide To ImageMagick之Shearing an Image</a></li>
    <li><a href="#the-definitive-guide-to-imagemagick之rolling-an-image">The Definitive Guide To ImageMagick之Rolling an Image</a></li>
    <li><a href="#turning-multiple-images-into-one-image">Turning Multiple Images into One Image</a></li>
    <li><a href="#using-the-drawing-commands">Using the Drawing Commands</a></li>
    <li><a href="#setting-gravity">Setting Gravity</a></li>
    <li><a href="#annotating-an-image-with-text">Annotating an Image with Text</a></li>
    <li><a href="#drawing-simple-shapes">Drawing Simple Shapes</a>
      <ul>
        <li><a href="#rotating-the-drawing">Rotating the Drawing</a></li>
        <li><a href="#scaling-a-drawing">Scaling a Drawing</a></li>
        <li><a href="#skewing-a-drawing">Skewing a Drawing</a></li>
        <li><a href="#combining-transformation-primitives">Combining Transformation Primitives</a></li>
        <li><a href="#using-more-than-one-draw-command">Using More Than One Draw Command</a></li>
      </ul>
    </li>
    <li><a href="#compositing-images-with-the-draw-command">Compositing Images with the draw Command</a>
      <ul>
        <li><a href="#using-the-over-operator">Using the Over Operator</a></li>
        <li><a href="#using-the-in-operator">Using the In Operator</a></li>
        <li><a href="#using-the-out-operator">Using the Out Operator</a></li>
        <li><a href="#using-the-atop-operator">Using the Atop Operator</a></li>
        <li><a href="#using-the-xor-operator">Using the Xor Operator</a></li>
        <li><a href="#using-the-plus-operator">Using the Plus Operator</a></li>
        <li><a href="#using-the-minus-operator">Using the Minus Operator</a></li>
        <li><a href="#using-the-difference-operator">Using the Difference Operator</a></li>
        <li><a href="#using-the-multiply-operator">Using the Multiply Operator</a></li>
        <li><a href="#using-the-bumpmap-operator">Using the Bumpmap Operator</a></li>
      </ul>
    </li>
    <li><a href="#antialiasing-your-images">Antialiasing Your Images</a>
      <ul>
        <li><a href="#framing-an-image">Framing an Image</a></li>
      </ul>
    </li>
  </ul>
</nav>
            <a href="#" class="back-to-top">Back to top</a>
        </div>
    
    
<script src="/js/libs/jquery/3.3.1/jquery.slim.min.min.22ee3db0c0e99fd0fbce3aee19672bd53d25469daf734bd4c165649f6eaf7d7f.js"></script>

<link rel="preload" href="/js/libs/jquery/3.3.1/jquery.slim.min.min.22ee3db0c0e99fd0fbce3aee19672bd53d25469daf734bd4c165649f6eaf7d7f.js" as="script">

<script type="application/javascript">(function() {
     var $window = $(window);
     if ($window.width() >= 1400) { 
         var $toc = $('#TableOfContents');
         if ($toc.length > 0) {
             function onScroll(){
                 var currentScroll = $window.scrollTop();
                 var h = $('.content h1, .content h2, .content h3, .content h4, .content h5, .content h6, .h-feed h2');
                 var id = "";
                 h.each(function (i, e) {
                     e = $(e);
                     if (e.offset().top - 10 <= currentScroll) {
                         id = e.attr('id');
                     }
                 });
                 var current = $toc.find('a.current');
                 if (current.length == 1 && current.eq(0).attr('href') == '#' + id) return true;

                 current.each(function (i, e) {
                     $(e).removeClass('current').siblings('ul').hide();
                 });
                 $toc.find('a[href="#' + id + '"]').parentsUntil('#TableOfContents').each(function (i, e) {
                     $(e).children('a').addClass('current').siblings('ul').show();
                 });
             }
             $window.on('scroll', onScroll);
             $(document).ready(function() {
                 $toc.find('a').parent('li').find('ul').hide();
                 onScroll();
                 document.getElementsByClassName('hugotoc')[0].style.display = '';
             });}}})();</script>








<div class="backtotop center no-text-decoration">
    <a href="#">back to <span class="top">top</span></a>
</div>


<div class="right">
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmyweekly.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmyweekly.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>

</div>
<div class="clear-float"></div>



<div class="prev-next-navigator clear-float">
    
        <span class="prev-post left no-text-decoration">
            <a href="https://ohmyweekly.github.io/notes/vintage%E6%95%88%E6%9E%9C/" class="nobr">« ImageMagick - Vintage 效果</a>
        </span>
    
    
        <span class="next-post right no-text-decoration">
            <a href="https://ohmyweekly.github.io/notes/nconvert-%E7%BF%BB%E8%AF%91/" class="nobr">ImageMagick - nconvert 命令 »</a>
        </span>
    
</div>


<a id="bottom"></a>









                       







                    <ul class="no-bullets feed right inline">
    
        
        
    
</ul>
<div class="clear-float"></div>

                </footer>
                <hr />
            </div>               

            <footer> 
                

<ul class="social no-text-decoration">
    
</ul>










 
    
    



<p class="generated no-text-decoration">
    Generated using  <a href="https://gitlab.com/kaushalmodi/hugo-theme-refined"><code class="nobr">hugo-theme-refined</code></a> + <span class="nobr">Hugo <a href="https://github.com/gohugoio/hugo/commit/312735366b20d64bd61bff8627f593749f86c964">0.123.7</a></span>
</p>

<p>
    
</p>




<div class="badges no-text-decoration">
    
    

    
</div>




<script type="application/javascript">var nav=responsiveNav("#nav");</script>




<script defer src="/js/libs/fragmentions/wrapper.min.e8c468c89edc4f5dccaa8c720c6b220b3088a16cd7b1e4a1e3345985788260c9.js"></script>









            </footer>
        </div> 
    </body>
</html>
