{"author":{"name":null,"type":"card","url":"http://localhost:1313/"},"content":{"html":"\u003cp\u003e协议的命名遵循 Swift 的标准库, 即协议名以 \u0026ldquo;Type\u0026rdquo;， \u0026ldquo;-able\u0026rdquo;， \u0026ldquo;-ible\u0026rdquo; 结尾\u003c/p\u003e\n\u003cp\u003e例如 \u003cstrong\u003eSequenceType\u003c/strong\u003e, \u003cstrong\u003eGeneratorType\u003c/strong\u003e, \u003cstrong\u003eCustomStringConvertible\u003c/strong\u003e, \u003ccode\u003e-type\u003c/code\u003e 定义行为, \u003ccode\u003e-able\u003c/code\u003e 定义元素怎样做某事。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-swift\" data-lang=\"swift\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kd\"\u003eprotocol\u003c/span\u003e  \u003cspan class=\"nc\"\u003eExerciseType\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eCustomStringConvertible\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nv\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eString\u003c/span\u003e  \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"kr\"\u003eget\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nv\"\u003ecaloriesBurned\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eDouble\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"kr\"\u003eget\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nv\"\u003eminutes\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eDouble\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"kr\"\u003eget\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// 结构体遵守 ErerciseType 协议, 但是也可以有自己的属性和方法, 这也是一种继承和封装\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kd\"\u003estruct\u003c/span\u003e \u003cspan class=\"nc\"\u003eEllipticalTrainer\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eExerciseType\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nv\"\u003ename\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;Elliptical Machine\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nv\"\u003ecaloriesBurned\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eDouble\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nv\"\u003eminutes\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eDouble\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kd\"\u003estruct\u003c/span\u003e \u003cspan class=\"nc\"\u003eTreadmill\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eExerciseType\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nv\"\u003ename\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;Treadmill\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nv\"\u003ecaloriesBurned\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eDouble\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nv\"\u003eminutes\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eDouble\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nv\"\u003edistancesInMiles\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eDouble\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kd\"\u003eextension\u003c/span\u003e \u003cspan class=\"nc\"\u003eTreadmill\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nv\"\u003edescription\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eString\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;Treadmill(\u003c/span\u003e\u003cspan class=\"si\"\u003e\\(\u003c/span\u003e\u003cspan class=\"n\"\u003ecaloriesBurned\u003c/span\u003e\u003cspan class=\"si\"\u003e)\u003c/span\u003e\u003cspan class=\"s\"\u003e calories and \u003c/span\u003e\u003cspan class=\"si\"\u003e\\(\u003c/span\u003e\u003cspan class=\"n\"\u003edistancesInMiles\u003c/span\u003e\u003cspan class=\"si\"\u003e)\u003c/span\u003e\u003cspan class=\"s\"\u003e miles in \u003c/span\u003e\u003cspan class=\"si\"\u003e\\(\u003c/span\u003e\u003cspan class=\"n\"\u003eminutes\u003c/span\u003e\u003cspan class=\"si\"\u003e)\u003c/span\u003e\u003cspan class=\"s\"\u003e minutes)\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nv\"\u003eellipticalWorkout\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eEllipticalTrainer\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecaloriesBurned\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e335\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eminutes\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e30\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nv\"\u003erunningWorkout\u003c/span\u003e    \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eTreadmill\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecaloriesBurned\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e350\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eminutes\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e25\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edistancesInMiles\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mf\"\u003e4.2\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"扩展-exercisetype\"\u003e扩展 ExerciseType\u003c/h2\u003e\n\u003chr\u003e\n\u003cp\u003e有尖括号\u003ccode\u003e\u0026lt;\u0026gt;\u003c/code\u003e, 表明这是泛型函数, 而占位符类型(placeholder type)要求遵守 \u003cstrong\u003eExerciseType\u003c/strong\u003e 协议\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-swift\" data-lang=\"swift\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// 函数体中用了两个 ExerciseType 的属性来计算每分钟燃烧的卡路里\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kd\"\u003efunc\u003c/span\u003e \u003cspan class=\"nf\"\u003ecaloriesPerMinutes\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eExercise\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eExerciseType\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003eexercise\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eExercise\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"nb\"\u003eDouble\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eexercise\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecaloriesBurned\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u003c/span\u003e \u003cspan class=\"n\"\u003eexercise\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eminutes\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"bp\"\u003eprint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecaloriesPerMinutes\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eellipticalWorkout\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"bp\"\u003eprint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecaloriesPerMinutes\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erunningWorkout\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003ccode\u003ecaloriesBurnedPerMinute(_:)\u003c/code\u003e 没有一点错误, 但是每当你拥有一个 \u003cstrong\u003eExerciseType\u003c/strong\u003e 的实例, 你必须记住 \u003ccode\u003ecaloriesBurnedPerMinute(_:)\u003c/code\u003e 函数的存在。所以让每一个 \u003cstrong\u003eExerciseType\u003c/strong\u003e  都有一个 \u003ccode\u003ecaloriesBurnedPerMinute\u003c/code\u003e 属性更适合 ——  但是你不想把同样一份实现拷贝进 \u003cstrong\u003eEllipticalTrainer\u003c/strong\u003e 和 \u003cstrong\u003eTreadmill\u003c/strong\u003e 结构体中(或者你新创建的 \u003cstrong\u003eExerciseType\u003c/strong\u003e 中)\u003c/p\u003e\n\u003ch2 id=\"swift-能扩展协议\"\u003eSwift 能扩展协议\u003c/h2\u003e\n\u003chr\u003e\n\u003cp\u003e扩展 \u003cstrong\u003eExerciseType\u003c/strong\u003e 协议来添加一个属性\u003c/p\u003e\n\u003cp\u003e协议扩展能添加已经实现的属性和方法, 但是不能为协议添加新的必须要实现的属性和方法\u003c/p\u003e\n\u003cp\u003e很像你写泛型函数那样, 协议扩展的内部实现只能访问保证存在的其它属性的方法\u003c/p\u003e\n\u003cp\u003e添加到协议扩展中的属性和方法对于所有遵守该协议的类型来说都是可访问的。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-swift\" data-lang=\"swift\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kd\"\u003eextension\u003c/span\u003e \u003cspan class=\"nc\"\u003eExerciseType\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nv\"\u003ecaloriesBurnedPerMinutes\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eDouble\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003ecaloriesBurned\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u003c/span\u003e \u003cspan class=\"n\"\u003eminutes\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nv\"\u003edescription\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eString\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;Exercise(\u003c/span\u003e\u003cspan class=\"si\"\u003e\\(\u003c/span\u003e\u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"si\"\u003e)\u003c/span\u003e\u003cspan class=\"s\"\u003e, burned \u003c/span\u003e\u003cspan class=\"si\"\u003e\\(\u003c/span\u003e\u003cspan class=\"n\"\u003ecaloriesBurned\u003c/span\u003e\u003cspan class=\"si\"\u003e)\u003c/span\u003e\u003cspan class=\"s\"\u003e calories in \u003c/span\u003e\u003cspan class=\"si\"\u003e\\(\u003c/span\u003e\u003cspan class=\"n\"\u003eminutes\u003c/span\u003e\u003cspan class=\"si\"\u003e)\u003c/span\u003e\u003cspan class=\"s\"\u003e minutes)\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"bp\"\u003eprint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eellipticalWorkout\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecaloriesBurnedPerMinutes\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"bp\"\u003eprint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erunningWorkout\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecaloriesBurnedPerMinutes\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"协议扩展----where-从句\"\u003e协议扩展 \u0026ndash; where 从句\u003c/h2\u003e\n\u003chr\u003e\n\u003cp\u003e扩展允许你为任意类型添加属性和方法, 不仅仅是你定义过的自定义类型\u003c/p\u003e\n\u003cp\u003e同样地, 协议扩展允许你给任何协议添加新的方法和属性, 然而, 就像我们上面提到的, 你为协议添加的属性和方法只能使用其它确定会存在的属性和方法。\u003c/p\u003e\n\u003cp\u003e使用 where 从句来为 SquenceTypes 协议扩展添加元素(Element)类型为指定类型的约束\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-swift\" data-lang=\"swift\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kd\"\u003eextension\u003c/span\u003e \u003cspan class=\"nc\"\u003eSequenceType\u003c/span\u003e \u003cspan class=\"k\"\u003ewhere\u003c/span\u003e \u003cspan class=\"n\"\u003eGenerator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eElement\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eExerciseType\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kd\"\u003efunc\u003c/span\u003e \u003cspan class=\"nf\"\u003etotalCaloriesBurned\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"nb\"\u003eDouble\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nv\"\u003etotal\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eDouble\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003eexercise\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"kc\"\u003eself\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e            \u003cspan class=\"n\"\u003etotal\u003c/span\u003e \u003cspan class=\"o\"\u003e+=\u003c/span\u003e \u003cspan class=\"n\"\u003eexercise\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecaloriesBurned\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003etotal\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e协议扩展中的\u003cstrong\u003ewhere\u003c/strong\u003e 从句和泛型中的 \u003cstrong\u003ewhere\u003c/strong\u003e 从句的语法一样。你添加了一个 \u003ccode\u003etotalCaloriesBurned()\u003c/code\u003e 方法来计算序列所有运动(exercise)的卡路里总数。 在实现中, 你遍历 \u003cstrong\u003eself\u003c/strong\u003e 中的每个 \u003ccode\u003eexercise\u003c/code\u003e, 这是被允许的, 因为 \u003cstrong\u003eself\u003c/strong\u003e 就是某种 \u003ccode\u003eSequenceType\u003c/code\u003e。\u003c/p\u003e\n\u003cp\u003e然后你访问每个元素中的 \u003ccode\u003ecaloriesBurned\u003c/code\u003e 属性, 这是被允许的, 因为 \u003ccode\u003ewhere\u003c/code\u003e 从句约束这个序列的方法的元素类型是 \u003ccode\u003eExerciseType\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e创建一个\u003ccode\u003eExerciseTypes\u003c/code\u003e类型的数组, 数组遵守 \u003ccode\u003eSequenceType\u003c/code\u003e 协议。所以你可以调用你的新的 \u003ccode\u003etotalCaloriesBurned()\u003c/code\u003e 方法。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-swift\" data-lang=\"swift\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nv\"\u003emondayWorkout\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eExerciseType\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eellipticalWorkout\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003erunningWorkout\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"bp\"\u003eprint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emondayWorkout\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etotalCaloriesBurned\u003c/span\u003e\u003cspan class=\"p\"\u003e())\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e这个数组能访问 \u003ccode\u003etotalCaloriesBurned()\u003c/code\u003e 方法, 因为它的元素类型是\u003ccode\u003e [ExerciseType]\u003c/code\u003e, 所以你得到结果为 \u003ccode\u003e685.0\u003c/code\u003e。 如果你创建了一个 \u003ccode\u003e[Int]\u003c/code\u003e 类型的数组, 那么 \u003ccode\u003etotalCaloriesBurned()\u003c/code\u003e 方法是访问不到的。它不会出现在 Xcode 的自动补全中, 即使你手动输入, 程序也会爆出编译错误。因为它满足不了 where 从句要求的数组的元素类型必须为 \u003ccode\u003eExerciseType\u003c/code\u003e 的约束。\u003c/p\u003e\n\u003ch2 id=\"协议扩展的默认实现\"\u003e协议扩展的默认实现\u003c/h2\u003e\n\u003chr\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-swift\" data-lang=\"swift\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"bp\"\u003eprint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eellipticalWorkout\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"bp\"\u003eprint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erunningWorkout\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e当一个协议为它的(某些或全部)属性和方法提供了默认的实现时, 遵守该协议的类型不一定要实现它们。但是它们能选择去实现它们如果默认实现不合适的话。\u003c/p\u003e\n\u003cp\u003e既然 Treadmill 自身实现了 description , 你应该看见默认的实现只出现在打印 ellpticalWorkout 上了.\u003c/p\u003e\n","text":"协议的命名遵循 Swift 的标准库, 即协议名以 \u0026ldquo;Type\u0026rdquo;， \u0026ldquo;-able\u0026rdquo;， \u0026ldquo;-ible\u0026rdquo; 结尾\n例如 SequenceType, GeneratorType, CustomStringConvertible, -type 定义行为, -able 定义元素怎样做某事。\nprotocol ExerciseType: CustomStringConvertible { var name: String { get } var caloriesBurned: Double { get } var minutes: Double { get } } // 结构体遵守 ErerciseType 协议, 但是也可以有自己的属性和方法, 这也是一种继承和封装 struct EllipticalTrainer: ExerciseType { let name = \u0026#34;Elliptical Machine\u0026#34; let caloriesBurned: Double let minutes: Double } struct Treadmill: ExerciseType { let name = \u0026#34;Treadmill\u0026#34; let caloriesBurned: Double let minutes: Double let distancesInMiles: Double } extension Treadmill { var description: String { return \u0026#34;Treadmill(\\(caloriesBurned) calories and \\(distancesInMiles) miles in \\(minutes) minutes)\u0026#34; } } let ellipticalWorkout = EllipticalTrainer(caloriesBurned: 335, minutes: 30) let runningWorkout = Treadmill(caloriesBurned: 350, minutes: 25, distancesInMiles: 4.2) 扩展 ExerciseType 有尖括号\u0026lt;\u0026gt;, 表明这是泛型函数, 而占位符类型(placeholder type)要求遵守 ExerciseType 协议\n// 函数体中用了两个 ExerciseType 的属性来计算每分钟燃烧的卡路里 func caloriesPerMinutes\u0026lt;Exercise: ExerciseType\u0026gt;(exercise: Exercise) -\u0026gt; Double { return exercise.caloriesBurned / exercise.minutes } print(caloriesPerMinutes(ellipticalWorkout)) print(caloriesPerMinutes(runningWorkout)) caloriesBurnedPerMinute(_:) 没有一点错误, 但是每当你拥有一个 ExerciseType 的实例, 你必须记住 caloriesBurnedPerMinute(_:) 函数的存在。所以让每一个 ExerciseType 都有一个 caloriesBurnedPerMinute 属性更适合 —— 但是你不想把同样一份实现拷贝进 EllipticalTrainer 和 Treadmill 结构体中(或者你新创建的 ExerciseType 中)\nSwift 能扩展协议 扩展 ExerciseType 协议来添加一个属性\n协议扩展能添加已经实现的属性和方法, 但是不能为协议添加新的必须要实现的属性和方法\n很像你写泛型函数那样, 协议扩展的内部实现只能访问保证存在的其它属性的方法\n添加到协议扩展中的属性和方法对于所有遵守该协议的类型来说都是可访问的。\nextension ExerciseType { var caloriesBurnedPerMinutes: Double { return caloriesBurned / minutes } var description: String { return \u0026#34;Exercise(\\(name), burned \\(caloriesBurned) calories in \\(minutes) minutes)\u0026#34; } } print(ellipticalWorkout.caloriesBurnedPerMinutes) print(runningWorkout.caloriesBurnedPerMinutes) 协议扩展 \u0026ndash; where 从句 扩展允许你为任意类型添加属性和方法, 不仅仅是你定义过的自定义类型\n同样地, 协议扩展允许你给任何协议添加新的方法和属性, 然而, 就像我们上面提到的, 你为协议添加的属性和方法只能使用其它确定会存在的属性和方法。\n使用 where 从句来为 SquenceTypes 协议扩展添加元素(Element)类型为指定类型的约束\nextension SequenceType where Generator.Element == ExerciseType { func totalCaloriesBurned() -\u0026gt; Double { var total: Double = 0 for exercise in self { total += exercise.caloriesBurned } return total } } 协议扩展中的where 从句和泛型中的 where 从句的语法一样。你添加了一个 totalCaloriesBurned() 方法来计算序列所有运动(exercise)的卡路里总数。 在实现中, 你遍历 self 中的每个 exercise, 这是被允许的, 因为 self 就是某种 SequenceType。\n然后你访问每个元素中的 caloriesBurned 属性, 这是被允许的, 因为 where 从句约束这个序列的方法的元素类型是 ExerciseType\n创建一个ExerciseTypes类型的数组, 数组遵守 SequenceType 协议。所以你可以调用你的新的 totalCaloriesBurned() 方法。\nlet mondayWorkout: [ExerciseType] = [ellipticalWorkout, runningWorkout] print(mondayWorkout.totalCaloriesBurned()) 这个数组能访问 totalCaloriesBurned() 方法, 因为它的元素类型是 [ExerciseType], 所以你得到结果为 685.0。 如果你创建了一个 [Int] 类型的数组, 那么 totalCaloriesBurned() 方法是访问不到的。它不会出现在 Xcode 的自动补全中, 即使你手动输入, 程序也会爆出编译错误。因为它满足不了 where 从句要求的数组的元素类型必须为 ExerciseType 的约束。\n协议扩展的默认实现 print(ellipticalWorkout) print(runningWorkout) 当一个协议为它的(某些或全部)属性和方法提供了默认的实现时, 遵守该协议的类型不一定要实现它们。但是它们能选择去实现它们如果默认实现不合适的话。\n既然 Treadmill 自身实现了 description , 你应该看见默认的实现只出现在打印 ellpticalWorkout 上了.\n"},"name":"Swift 扩展协议","published":"2015-10-07T16:16:21Z","summary":"协议的命名遵循 Swift 的标准库, 即协议名以 \u0026ldquo;Type\u0026rdquo;， \u0026ldquo;-able\u0026rdquo;， \u0026ldquo;-ible\u0026rdquo; 结尾\n例如 SequenceType, GeneratorType, CustomStringConvertible, -type 定义行为, -able 定义元素怎样做某事。\nprotocol ExerciseType: CustomStringConvertible { var name: String { get } var caloriesBurned: Double { get } var minutes: Double { get } } // 结构体遵守 ErerciseType 协议, 但是也可以有自己的属性和方法, 这也是一种继承和封装 struct EllipticalTrainer: ExerciseType { let name = \u0026#34;Elliptical Machine\u0026#34; let caloriesBurned: Double let minutes: Double } struct Treadmill: ExerciseType { let name = \u0026#34;Treadmill\u0026#34; let caloriesBurned: Double let minutes: Double let distancesInMiles: Double } extension Treadmill { var description: String { return \u0026#34;Treadmill(\\(caloriesBurned) calories and \\(distancesInMiles) miles in \\(minutes) minutes)\u0026#34; } } let ellipticalWorkout = EllipticalTrainer(caloriesBurned: 335, minutes: 30) let runningWorkout = Treadmill(caloriesBurned: 350, minutes: 25, distancesInMiles: 4.","type":"entry","url":"http://localhost:1313/notes/swift-%E5%8D%8F%E8%AE%AE%E6%89%A9%E5%B1%95/"}