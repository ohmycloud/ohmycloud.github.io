{"author":{"name":null,"type":"card","url":"http://localhost:1313/"},"content":{"html":"\u003cp\u003e假设有一个 0..100 的数字区间, 需要分成下面这样的区间：\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e0..5\n5..10\n10..15\n15..20\n20..25\n25..30\n30..35\n35..40\n40..45\n45..50\n50..55\n55..60\n60..65\n65..70\n70..75\n75..80\n80..85\n85..90\n90..95\n95..100\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003ca href=\"https://docs.raku.org/routine/rotor\"\u003erotor\u003c/a\u003e 来拯救：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-perl\" data-lang=\"perl\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eminmax\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esay\u003c/span\u003e \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e..\u003c/span\u003e\u003cspan class=\"mi\"\u003e100\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erotor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e6\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e我想偷懒用程序生成下面的代码：\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eif (current \u0026gt;=0 \u0026amp;\u0026amp; current \u0026lt; 5) \u0026#34;0\u0026#34;\nif (current \u0026gt;=5 \u0026amp;\u0026amp; current \u0026lt; 10) \u0026#34;1\u0026#34;\nif (current \u0026gt;=10 \u0026amp;\u0026amp; current \u0026lt; 15) \u0026#34;2\u0026#34;\nif (current \u0026gt;=15 \u0026amp;\u0026amp; current \u0026lt; 20) \u0026#34;3\u0026#34;\nif (current \u0026gt;=20 \u0026amp;\u0026amp; current \u0026lt; 25) \u0026#34;4\u0026#34;\nif (current \u0026gt;=25 \u0026amp;\u0026amp; current \u0026lt; 30) \u0026#34;5\u0026#34;\nif (current \u0026gt;=30 \u0026amp;\u0026amp; current \u0026lt; 35) \u0026#34;6\u0026#34;\nif (current \u0026gt;=35 \u0026amp;\u0026amp; current \u0026lt; 40) \u0026#34;7\u0026#34;\nif (current \u0026gt;=40 \u0026amp;\u0026amp; current \u0026lt; 45) \u0026#34;8\u0026#34;\nif (current \u0026gt;=45 \u0026amp;\u0026amp; current \u0026lt; 50) \u0026#34;9\u0026#34;\nif (current \u0026gt;=50 \u0026amp;\u0026amp; current \u0026lt; 55) \u0026#34;10\u0026#34;\nif (current \u0026gt;=55 \u0026amp;\u0026amp; current \u0026lt; 60) \u0026#34;11\u0026#34;\nif (current \u0026gt;=60 \u0026amp;\u0026amp; current \u0026lt; 65) \u0026#34;12\u0026#34;\nif (current \u0026gt;=65 \u0026amp;\u0026amp; current \u0026lt; 70) \u0026#34;13\u0026#34;\nif (current \u0026gt;=70 \u0026amp;\u0026amp; current \u0026lt; 75) \u0026#34;14\u0026#34;\nif (current \u0026gt;=75 \u0026amp;\u0026amp; current \u0026lt; 80) \u0026#34;15\u0026#34;\nif (current \u0026gt;=80 \u0026amp;\u0026amp; current \u0026lt; 85) \u0026#34;16\u0026#34;\nif (current \u0026gt;=85 \u0026amp;\u0026amp; current \u0026lt; 90) \u0026#34;17\u0026#34;\nif (current \u0026gt;=90 \u0026amp;\u0026amp; current \u0026lt; 95) \u0026#34;18\u0026#34;\nif (current \u0026gt;=95 \u0026amp;\u0026amp; current \u0026lt; 100) \u0026#34;19\u0026#34;\n\u003c/code\u003e\u003c/pre\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-perl\" data-lang=\"perl\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e..\u003c/span\u003e\u003cspan class=\"mi\"\u003e100\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erotor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e6\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"nv\"\u003e$r\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003esay\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;if (current \u0026gt;={$r.min} \u0026amp;\u0026amp; current \u0026lt; {$r.max}) \u0026#34;\u003c/span\u003e \u003cspan class=\"o\"\u003e~\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#39;\u0026#34;\u0026#39;\u003c/span\u003e \u003cspan class=\"o\"\u003e~\u003c/span\u003e \u003cspan class=\"vg\"\u003e$+\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"o\"\u003e~\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#39;\u0026#34;\u0026#39;\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003erotor 是操作列表的利器,\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-perl\" data-lang=\"perl\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e..\u003c/span\u003e\u003cspan class=\"mi\"\u003e7\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erotor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003ejoin\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#39;|\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"c1\"\u003e# 1 2 3|4 5 6\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cstrong\u003e7\u003c/strong\u003e 被舍弃了。如果你也需要 7, 那么使用 \u003cem\u003e:partial\u003c/em\u003e 副词。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-perl\" data-lang=\"perl\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e..\u003c/span\u003e\u003cspan class=\"mi\"\u003e7\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erotor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"n\"\u003epartial\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003ejoin\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#39;|\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"c1\"\u003e# 1 2 3|4 5 6|7\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003erotor 的第一个参数是一个数组, 数组的元素有俩种：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e一个整数\u003c/li\u003e\n\u003cli\u003e一个 \u003ca href=\"https://docs.raku.org/type/Pair\"\u003ePair\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e实际上：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-perl\" data-lang=\"perl\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e..\u003c/span\u003e\u003cspan class=\"mi\"\u003e7\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erotor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003ejoin\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#39;|\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"c1\"\u003e# 1 2 3|4 5 6\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e相当于\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-perl\" data-lang=\"perl\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e..\u003c/span\u003e\u003cspan class=\"mi\"\u003e7\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erotor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e3\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003ejoin\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#39;|\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"c1\"\u003e# 1 2 3|4 5 6\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003ePair 中的 key 指定所返回的子列表的大小, Pair 的 value 指定子列表之间的间隙, 这个间隙可为正, 可为负。如果是正数则跳过, 为负数则重叠一些元素。\u003c/p\u003e\n\u003cp\u003e以（\u003cem\u003eM\u003c/em\u003e =\u0026gt; \u003cem\u003eN\u003c/em\u003e）这个 Pair 为例, M 是所返回的子列表中的元素个数, N 是缝隙的大小, N \u0026lt; 0 时, 发生重叠, N \u0026gt; 0 时, 发生缝隙。\u003c/p\u003e\n\u003cp\u003eN \u0026gt; 0 时：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-perl\" data-lang=\"perl\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e..\u003c/span\u003e\u003cspan class=\"mi\"\u003e7\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erotor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"n\"\u003epartial\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003ejoin\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#39;|\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"c1\"\u003e# 1 2|4 5|7\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eN \u0026lt; 0 时：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-perl\" data-lang=\"perl\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e..\u003c/span\u003e\u003cspan class=\"mi\"\u003e7\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erotor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"n\"\u003epartial\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003ejoin\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#39;|\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"c1\"\u003e# 1 2|2 3|3 4|4 5|5 6|6 7|7\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e来看 rotor 的函数签名：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-perl\" data-lang=\"perl\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nv\"\u003e@cycle\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eBool\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"nv\"\u003e$partial\u003c/span\u003e \u003cspan class=\"o\"\u003e--\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eSeq:D\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e@circle 除了可以包含整数, Pair 等单个元素之外, 还可以同时包含整数和 Pair, rotor 会循环使用这几种元素, 例子：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-perl\" data-lang=\"perl\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e..\u003c/span\u003e\u003cspan class=\"mi\"\u003e7\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erotor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"n\"\u003epartial\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003ejoin\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#39;|\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"c1\"\u003e# 1 2|3 4 5|6 7\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-perl\" data-lang=\"perl\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e..\u003c/span\u003e\u003cspan class=\"mi\"\u003e7\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erotor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"n\"\u003epartial\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003ejoin\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#39;|\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"c1\"\u003e# 1|3 4 5|6\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-perl\" data-lang=\"perl\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e..\u003c/span\u003e\u003cspan class=\"mi\"\u003e7\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erotor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"n\"\u003epartial\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003ejoin\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#39;|\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"c1\"\u003e# 1|3 4|4|6 7|7\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","text":"假设有一个 0..100 的数字区间, 需要分成下面这样的区间：\n0..5 5..10 10..15 15..20 20..25 25..30 30..35 35..40 40..45 45..50 50..55 55..60 60..65 65..70 70..75 75..80 80..85 85..90 90..95 95..100 rotor 来拯救：\n.minmax.say for (0..100).rotor(6 =\u0026gt; -1) 我想偷懒用程序生成下面的代码：\nif (current \u0026gt;=0 \u0026amp;\u0026amp; current \u0026lt; 5) \u0026#34;0\u0026#34; if (current \u0026gt;=5 \u0026amp;\u0026amp; current \u0026lt; 10) \u0026#34;1\u0026#34; if (current \u0026gt;=10 \u0026amp;\u0026amp; current \u0026lt; 15) \u0026#34;2\u0026#34; if (current \u0026gt;=15 \u0026amp;\u0026amp; current \u0026lt; 20) \u0026#34;3\u0026#34; if (current \u0026gt;=20 \u0026amp;\u0026amp; current \u0026lt; 25) \u0026#34;4\u0026#34; if (current \u0026gt;=25 \u0026amp;\u0026amp; current \u0026lt; 30) \u0026#34;5\u0026#34; if (current \u0026gt;=30 \u0026amp;\u0026amp; current \u0026lt; 35) \u0026#34;6\u0026#34; if (current \u0026gt;=35 \u0026amp;\u0026amp; current \u0026lt; 40) \u0026#34;7\u0026#34; if (current \u0026gt;=40 \u0026amp;\u0026amp; current \u0026lt; 45) \u0026#34;8\u0026#34; if (current \u0026gt;=45 \u0026amp;\u0026amp; current \u0026lt; 50) \u0026#34;9\u0026#34; if (current \u0026gt;=50 \u0026amp;\u0026amp; current \u0026lt; 55) \u0026#34;10\u0026#34; if (current \u0026gt;=55 \u0026amp;\u0026amp; current \u0026lt; 60) \u0026#34;11\u0026#34; if (current \u0026gt;=60 \u0026amp;\u0026amp; current \u0026lt; 65) \u0026#34;12\u0026#34; if (current \u0026gt;=65 \u0026amp;\u0026amp; current \u0026lt; 70) \u0026#34;13\u0026#34; if (current \u0026gt;=70 \u0026amp;\u0026amp; current \u0026lt; 75) \u0026#34;14\u0026#34; if (current \u0026gt;=75 \u0026amp;\u0026amp; current \u0026lt; 80) \u0026#34;15\u0026#34; if (current \u0026gt;=80 \u0026amp;\u0026amp; current \u0026lt; 85) \u0026#34;16\u0026#34; if (current \u0026gt;=85 \u0026amp;\u0026amp; current \u0026lt; 90) \u0026#34;17\u0026#34; if (current \u0026gt;=90 \u0026amp;\u0026amp; current \u0026lt; 95) \u0026#34;18\u0026#34; if (current \u0026gt;=95 \u0026amp;\u0026amp; current \u0026lt; 100) \u0026#34;19\u0026#34; for (0..100).rotor(6 =\u0026gt; -1) -\u0026gt; $r { say \u0026#34;if (current \u0026gt;={$r.min} \u0026amp;\u0026amp; current \u0026lt; {$r.max}) \u0026#34; ~ \u0026#39;\u0026#34;\u0026#39; ~ $++ ~ \u0026#39;\u0026#34;\u0026#39; } rotor 是操作列表的利器,\n(1..7).rotor(3).join(\u0026#39;|\u0026#39;) # 1 2 3|4 5 6 7 被舍弃了。如果你也需要 7, 那么使用 :partial 副词。\n(1..7).rotor(3, :partial).join(\u0026#39;|\u0026#39;) # 1 2 3|4 5 6|7 rotor 的第一个参数是一个数组, 数组的元素有俩种：\n一个整数 一个 Pair 实际上：\n(1..7).rotor(3).join(\u0026#39;|\u0026#39;) # 1 2 3|4 5 6 相当于\n(1..7).rotor(3 =\u0026gt; 0).join(\u0026#39;|\u0026#39;) # 1 2 3|4 5 6 Pair 中的 key 指定所返回的子列表的大小, Pair 的 value 指定子列表之间的间隙, 这个间隙可为正, 可为负。如果是正数则跳过, 为负数则重叠一些元素。\n以（M =\u0026gt; N）这个 Pair 为例, M 是所返回的子列表中的元素个数, N 是缝隙的大小, N \u0026lt; 0 时, 发生重叠, N \u0026gt; 0 时, 发生缝隙。\nN \u0026gt; 0 时：\n(1..7).rotor(2 =\u0026gt; 1, :partial).join(\u0026#39;|\u0026#39;) # 1 2|4 5|7 N \u0026lt; 0 时：\n(1..7).rotor(2 =\u0026gt; -1, :partial).join(\u0026#39;|\u0026#39;) # 1 2|2 3|3 4|4 5|5 6|6 7|7 来看 rotor 的函数签名：\n(*@cycle, Bool() :$partial --\u0026gt; Seq:D) @circle 除了可以包含整数, Pair 等单个元素之外, 还可以同时包含整数和 Pair, rotor 会循环使用这几种元素, 例子：\n(1..7).rotor(2,3, :partial).join(\u0026#39;|\u0026#39;) # 1 2|3 4 5|6 7 (1..7).rotor(1 =\u0026gt; 1,3, :partial).join(\u0026#39;|\u0026#39;) # 1|3 4 5|6 (1..7).rotor(1 =\u0026gt; 1,2 =\u0026gt; -1, :partial).join(\u0026#39;|\u0026#39;) # 1|3 4|4|6 7|7 "},"name":"使用rotor操作列表","published":"2019-01-10T15:23:11Z","summary":"假设有一个 0..100 的数字区间, 需要分成下面这样的区间：\n0..5 5..10 10..15 15..20 20..25 25..30 30..35 35..40 40..45 45..50 50..55 55..60 60..65 65..70 70..75 75..80 80..85 85..90 90..95 95..100 rotor 来拯救：\n.minmax.say for (0..100).rotor(6 =\u0026gt; -1) 我想偷懒用程序生成下面的代码：\nif (current \u0026gt;=0 \u0026amp;\u0026amp; current \u0026lt; 5) \u0026#34;0\u0026#34; if (current \u0026gt;=5 \u0026amp;\u0026amp; current \u0026lt; 10) \u0026#34;1\u0026#34; if (current \u0026gt;=10 \u0026amp;\u0026amp; current \u0026lt; 15) \u0026#34;2\u0026#34; if (current \u0026gt;=15 \u0026amp;\u0026amp; current \u0026lt; 20) \u0026#34;3\u0026#34; if (current \u0026gt;=20 \u0026amp;\u0026amp; current \u0026lt; 25) \u0026#34;4\u0026#34; if (current \u0026gt;=25 \u0026amp;\u0026amp; current \u0026lt; 30) \u0026#34;5\u0026#34; if (current \u0026gt;=30 \u0026amp;\u0026amp; current \u0026lt; 35) \u0026#34;6\u0026#34; if (current \u0026gt;=35 \u0026amp;\u0026amp; current \u0026lt; 40) \u0026#34;7\u0026#34; if (current \u0026gt;=40 \u0026amp;\u0026amp; current \u0026lt; 45) \u0026#34;8\u0026#34; if (current \u0026gt;=45 \u0026amp;\u0026amp; current \u0026lt; 50) \u0026#34;9\u0026#34; if (current \u0026gt;=50 \u0026amp;\u0026amp; current \u0026lt; 55) \u0026#34;10\u0026#34; if (current \u0026gt;=55 \u0026amp;\u0026amp; current \u0026lt; 60) \u0026#34;11\u0026#34; if (current \u0026gt;=60 \u0026amp;\u0026amp; current \u0026lt; 65) \u0026#34;12\u0026#34; if (current \u0026gt;=65 \u0026amp;\u0026amp; current \u0026lt; 70) \u0026#34;13\u0026#34; if (current \u0026gt;=70 \u0026amp;\u0026amp; current \u0026lt; 75) \u0026#34;14\u0026#34; if (current \u0026gt;=75 \u0026amp;\u0026amp; current \u0026lt; 80) \u0026#34;15\u0026#34; if (current \u0026gt;=80 \u0026amp;\u0026amp; current \u0026lt; 85) \u0026#34;16\u0026#34; if (current \u0026gt;=85 \u0026amp;\u0026amp; current \u0026lt; 90) \u0026#34;17\u0026#34; if (current \u0026gt;=90 \u0026amp;\u0026amp; current \u0026lt; 95) \u0026#34;18\u0026#34; if (current \u0026gt;=95 \u0026amp;\u0026amp; current \u0026lt; 100) \u0026#34;19\u0026#34; for (0.","type":"entry","url":"http://localhost:1313/notes/%E4%BD%BF%E7%94%A8rotor%E6%93%8D%E4%BD%9C%E5%88%97%E8%A1%A8/"}