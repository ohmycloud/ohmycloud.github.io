{"author":{"name":null,"type":"card","url":"https://ohmyweekly.github.io"},"content":{"html":"\u003ch1 id=\"describe-语句\"\u003eDESCRIBE 语句\u003c/h1\u003e\n\u003cp\u003eDESCRIBE 语句用于描述表或视图的模式。\u003c/p\u003e\n\u003ch2 id=\"运行一个describe语句\"\u003e运行一个DESCRIBE语句\u003c/h2\u003e\n\u003cp\u003eDESCRIBE语句可以用TableEnvironment的executeSql()方法执行，也可以在SQL CLI中执行。executeSql()方法对于一个成功的DESCRIBE操作会返回给定表的模式，否则会抛出一个异常。\u003c/p\u003e\n\u003cp\u003e下面的例子展示了如何在TableEnvironment和SQL CLI中运行DESCRIBE语句。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-scala\" data-lang=\"scala\"\u003e\u003cspan class=\"k\"\u003eval\u003c/span\u003e \u003cspan class=\"n\"\u003esettings\u003c/span\u003e \u003cspan class=\"k\"\u003e=\u003c/span\u003e \u003cspan class=\"nc\"\u003eEnvironmentSettings\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003enewInstance\u003c/span\u003e\u003cspan class=\"o\"\u003e()...\u003c/span\u003e\n\u003cspan class=\"k\"\u003eval\u003c/span\u003e \u003cspan class=\"n\"\u003etableEnv\u003c/span\u003e \u003cspan class=\"k\"\u003e=\u003c/span\u003e \u003cspan class=\"nc\"\u003eTableEnvironment\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecreate\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esettings\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// register a table named \u0026#34;Orders\u0026#34;\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e \u003cspan class=\"n\"\u003etableEnv\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eexecuteSql\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"s\"\u003e\u0026#34;CREATE TABLE Orders (\u0026#34;\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e\n        \u003cspan class=\"s\"\u003e\u0026#34; `user` BIGINT NOT NULl,\u0026#34;\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e\n        \u003cspan class=\"s\"\u003e\u0026#34; product VARCHAR(32),\u0026#34;\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e\n        \u003cspan class=\"s\"\u003e\u0026#34; amount INT,\u0026#34;\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e\n        \u003cspan class=\"s\"\u003e\u0026#34; ts TIMESTAMP(3),\u0026#34;\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e\n        \u003cspan class=\"s\"\u003e\u0026#34; ptime AS PROCTIME(),\u0026#34;\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e\n        \u003cspan class=\"s\"\u003e\u0026#34; PRIMARY KEY(`user`) NOT ENFORCED,\u0026#34;\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e\n        \u003cspan class=\"s\"\u003e\u0026#34; WATERMARK FOR ts AS ts - INTERVAL \u0026#39;1\u0026#39; SECONDS\u0026#34;\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e\n        \u003cspan class=\"s\"\u003e\u0026#34;) with (...)\u0026#34;\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// print the schema\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003etableEnv\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eexecuteSql\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;DESCRIBE Orders\u0026#34;\u003c/span\u003e\u003cspan class=\"o\"\u003e).\u003c/span\u003e\u003cspan class=\"n\"\u003eprint\u003c/span\u003e\u003cspan class=\"o\"\u003e()\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cpre\u003e\u003ccode\u003eFlink SQL\u0026gt; CREATE TABLE Orders (\n\u0026gt;  `user` BIGINT NOT NULl,\n\u0026gt;  product VARCHAR(32),\n\u0026gt;  amount INT,\n\u0026gt;  ts TIMESTAMP(3),\n\u0026gt;  ptime AS PROCTIME(),\n\u0026gt;  PRIMARY KEY(`user`) NOT ENFORCED,\n\u0026gt;  WATERMARK FOR ts AS ts - INTERVAL '1' SECONDS\n\u0026gt; ) with (\n\u0026gt;  ...\n\u0026gt; );\n[INFO] Table has been created.\n\nFlink SQL\u0026gt; DESCRIBE Orders;\n\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode\u003eroot\n |-- user: BIGINT NOT NULL\n |-- product: VARCHAR(32)\n |-- amount: INT\n |-- ts: TIMESTAMP(3) *ROWTIME*\n |-- ptime: TIMESTAMP(3) NOT NULL *PROCTIME* AS PROCTIME()\n |-- WATERMARK FOR ts AS `ts` - INTERVAL '1' SECOND\n |-- CONSTRAINT PK_3599338 PRIMARY KEY (user)\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e上述例子的结果是：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e+---------+----------------------------------+-------+-----------+-----------------+----------------------------+\n|    name |                             type |  null |       key | computed column |                  watermark |\n+---------+----------------------------------+-------+-----------+-----------------+----------------------------+\n|    user |                           BIGINT | false | PRI(user) |                 |                            |\n| product |                      VARCHAR(32) |  true |           |                 |                            |\n|  amount |                              INT |  true |           |                 |                            |\n|      ts |           TIMESTAMP(3) *ROWTIME* |  true |           |                 | `ts` - INTERVAL '1' SECOND |\n|   ptime | TIMESTAMP(3) NOT NULL *PROCTIME* | false |           |      PROCTIME() |                            |\n+---------+----------------------------------+-------+-----------+-----------------+----------------------------+\n5 rows in set\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"语法\"\u003e语法\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan class=\"k\"\u003eDESCRIBE\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"k\"\u003ecatalog_name\u003c/span\u003e\u003cspan class=\"p\"\u003e.][\u003c/span\u003e\u003cspan class=\"n\"\u003edb_name\u003c/span\u003e\u003cspan class=\"p\"\u003e.]\u003c/span\u003e\u003cspan class=\"k\"\u003etable_name\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e原文链接: \u003ca href=\"https://ci.apache.org/projects/flink/flink-docs-release-1.11/dev/table/sql/describe.html\"\u003ehttps://ci.apache.org/projects/flink/flink-docs-release-1.11/dev/table/sql/describe.html\u003c/a\u003e\u003c/p\u003e\n","text":"DESCRIBE 语句 DESCRIBE 语句用于描述表或视图的模式。\n运行一个DESCRIBE语句 DESCRIBE语句可以用TableEnvironment的executeSql()方法执行，也可以在SQL CLI中执行。executeSql()方法对于一个成功的DESCRIBE操作会返回给定表的模式，否则会抛出一个异常。\n下面的例子展示了如何在TableEnvironment和SQL CLI中运行DESCRIBE语句。\nval settings = EnvironmentSettings.newInstance()... val tableEnv = TableEnvironment.create(settings) // register a table named \u0026#34;Orders\u0026#34;  tableEnv.executeSql( \u0026#34;CREATE TABLE Orders (\u0026#34; + \u0026#34; `user` BIGINT NOT NULl,\u0026#34; + \u0026#34; product VARCHAR(32),\u0026#34; + \u0026#34; amount INT,\u0026#34; + \u0026#34; ts TIMESTAMP(3),\u0026#34; + \u0026#34; ptime AS PROCTIME(),\u0026#34; + \u0026#34; PRIMARY KEY(`user`) NOT ENFORCED,\u0026#34; + \u0026#34; WATERMARK FOR ts AS ts - INTERVAL \u0026#39;1\u0026#39; SECONDS\u0026#34; + \u0026#34;) with (...)\u0026#34;) // print the schema tableEnv.executeSql(\u0026#34;DESCRIBE Orders\u0026#34;).print() Flink SQL\u0026gt; CREATE TABLE Orders ( \u0026gt; `user` BIGINT NOT NULl, \u0026gt; product VARCHAR(32), \u0026gt; amount INT, \u0026gt; ts TIMESTAMP(3), \u0026gt; ptime AS PROCTIME(), \u0026gt; PRIMARY KEY(`user`) NOT ENFORCED, \u0026gt; WATERMARK FOR ts AS ts - INTERVAL '1' SECONDS \u0026gt; ) with ( \u0026gt; ... \u0026gt; ); [INFO] Table has been created. Flink SQL\u0026gt; DESCRIBE Orders; root |-- user: BIGINT NOT NULL |-- product: VARCHAR(32) |-- amount: INT |-- ts: TIMESTAMP(3) *ROWTIME* |-- ptime: TIMESTAMP(3) NOT NULL *PROCTIME* AS PROCTIME() |-- WATERMARK FOR ts AS `ts` - INTERVAL '1' SECOND |-- CONSTRAINT PK_3599338 PRIMARY KEY (user) 上述例子的结果是：\n+---------+----------------------------------+-------+-----------+-----------------+----------------------------+ | name | type | null | key | computed column | watermark | +---------+----------------------------------+-------+-----------+-----------------+----------------------------+ | user | BIGINT | false | PRI(user) | | | | product | VARCHAR(32) | true | | | | | amount | INT | true | | | | | ts | TIMESTAMP(3) *ROWTIME* | true | | | `ts` - INTERVAL '1' SECOND | | ptime | TIMESTAMP(3) NOT NULL *PROCTIME* | false | | PROCTIME() | | +---------+----------------------------------+-------+-----------+-----------------+----------------------------+ 5 rows in set 语法 DESCRIBE [catalog_name.][db_name.]table_name 原文链接: https://ci.apache.org/projects/flink/flink-docs-release-1.11/dev/table/sql/describe.html\n"},"name":"运行 Describe 语句","published":"2020-08-22T00:00:00+08:00","summary":"Run a Describe Statement","type":"entry","url":"https://ohmyweekly.github.io/notes/2020-08-22-run-a-describe-statement/"}