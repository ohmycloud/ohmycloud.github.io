{"author":{"name":null,"type":"card","url":"https://ohmyweekly.github.io"},"content":{"html":"\u003cp\u003e最近看抖音短视频有很多好听的歌想转成 mp3 格式, 使用 \u003ca href=\"https://ffmpeg.org/ffmpeg.html\"\u003eFFmpeg\u003c/a\u003e 来搞定:\u003c/p\u003e\n\u003ch2 id=\"从视频中采集音频httpsstackoverflowcomquestions9913032how-can-i-extract-audio-from-video-with-ffmpeg2741382427413824\"\u003e\u003ca href=\"https://stackoverflow.com/questions/9913032/how-can-i-extract-audio-from-video-with-ffmpeg/27413824#27413824\"\u003e从视频中采集音频\u003c/a\u003e\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003effmpeg -i input.mp4 -f mp3 -vn output.mp3\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e或\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003effmpeg -i input.mp4 -q:a \u003cspan class=\"m\"\u003e0\u003c/span\u003e -map a output.mp3\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"去除音频中的静音httpsstackoverflowcomquestions25697596using-ffmpeg-with-silencedetect-to-remove-audio-silence2941197329411973\"\u003e\u003ca href=\"https://stackoverflow.com/questions/25697596/using-ffmpeg-with-silencedetect-to-remove-audio-silence/29411973#29411973\"\u003e去除音频中的静音\u003c/a\u003e\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003effmpeg -i input.mp3 -af \u003cspan class=\"nv\"\u003esilenceremove\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e1:0:-50dB output.mp3\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"给视频添加字幕httpsenwikipediaorgwikilist_of_iso_639-2_codes\"\u003e\u003ca href=\"https://en.wikipedia.org/wiki/List_of_ISO_639-2_codes\"\u003e给视频添加字幕\u003c/a\u003e\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003effmpeg -i input.mp4 -i SRT文件 -c copy -c:s mov_text -metadata:s:s:0  \u003cspan class=\"nv\"\u003elanguage\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u0026lt;language code\u0026gt; output.mp4 \n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"移除超过1秒的静止画面httpsstackoverflowcomquestions40966394how-to-simply-remove-duplicate-frames-from-a-video-using-ffmpeg4097778640977786\"\u003e\u003ca href=\"https://stackoverflow.com/questions/40966394/how-to-simply-remove-duplicate-frames-from-a-video-using-ffmpeg/40977786#40977786\"\u003e移除超过1秒的静止画面\u003c/a\u003e\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003effmpeg -i in.mp4 -vf\n\u003cspan class=\"s2\"\u003e\u0026#34;select=\u0026#39;if(gt(scene,0.01),st(1,t),lte(t-ld(1),1))\u0026#39;,setpts=N/FRAME_RATE/TB\u0026#34;\u003c/span\u003e\ntrimmed.mp4\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"将图片和音频合成视频\"\u003e将图片和音频合成视频\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003effmpeg -loop \u003cspan class=\"m\"\u003e1\u003c/span\u003e -i \u003cspan class=\"nv\"\u003e$image\u003c/span\u003e -i \u003cspan class=\"nv\"\u003e$audio_file\u003c/span\u003e -q:v \u003cspan class=\"m\"\u003e1\u003c/span\u003e -c:a copy  -shortest \u003cspan class=\"nv\"\u003e$video_file\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"将多个视频合并成一个\"\u003e将多个视频合并成一个\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003effmpeg -safe \u003cspan class=\"m\"\u003e0\u003c/span\u003e -f concat -i \u003cspan class=\"nv\"\u003e$list_file\u003c/span\u003e -c:v libx264 \u003cspan class=\"nv\"\u003e$final\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003elist file 的格式是：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003efile './data_1.ts'\nfile './data_2.ts'\nfile './data_3.ts'\n\u003c/code\u003e\u003c/pre\u003e","text":"最近看抖音短视频有很多好听的歌想转成 mp3 格式, 使用 FFmpeg 来搞定:\n从视频中采集音频 ffmpeg -i input.mp4 -f mp3 -vn output.mp3 或\nffmpeg -i input.mp4 -q:a 0 -map a output.mp3 去除音频中的静音 ffmpeg -i input.mp3 -af silenceremove=1:0:-50dB output.mp3 给视频添加字幕 ffmpeg -i input.mp4 -i SRT文件 -c copy -c:s mov_text -metadata:s:s:0 language=\u0026lt;language code\u0026gt; output.mp4 移除超过1秒的静止画面 ffmpeg -i in.mp4 -vf \u0026#34;select=\u0026#39;if(gt(scene,0.01),st(1,t),lte(t-ld(1),1))\u0026#39;,setpts=N/FRAME_RATE/TB\u0026#34; trimmed.mp4 将图片和音频合成视频 ffmpeg -loop 1 -i $image -i $audio_file -q:v 1 -c:a copy -shortest $video_file 将多个视频合并成一个 ffmpeg -safe 0 -f concat -i $list_file -c:v libx264 $final list file 的格式是：\nfile './data_1.ts' file './data_2.ts' file './data_3.ts' "},"name":"使用 FFmpeg 提取抖音短视频中的音乐","published":"2020-07-04T00:00:00+08:00","summary":"Use FFmpeg to extract music in TikTok","type":"entry","url":"https://ohmyweekly.github.io/notes/ffmpeg-notes/"}