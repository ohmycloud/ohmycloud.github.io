{"author":{"name":null,"type":"card","url":"https://ohmyweekly.github.io/"},"content":{"html":"\u003cp\u003e抖音短视频有很多好听的歌, 网易云音乐、QQ音乐和虾米音乐上都没有, 但是可以把视频转成 mp3 格式。 使用 \u003ca href=\"https://ffmpeg.org/ffmpeg.html\"\u003eFFmpeg\u003c/a\u003e 来搞定。点击抖音上的转发按钮, 如果「保存本地」的按钮不是灰色的, 表示可以下载到手机上。下载完后, 再转发到电脑上, 下载好 ffmpeg:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ebrew install ffmpeg\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"从视频中采集音频httpsstackoverflowcomquestions9913032how-can-i-extract-audio-from-video-with-ffmpeg2741382427413824\"\u003e\u003ca href=\"https://stackoverflow.com/questions/9913032/how-can-i-extract-audio-from-video-with-ffmpeg/27413824#27413824\"\u003e从视频中采集音频\u003c/a\u003e\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003effmpeg -i input.mp4 -f mp3 -vn output.mp3\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e或\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003effmpeg -i input.mp4 -q:a \u003cspan class=\"m\"\u003e0\u003c/span\u003e -map a output.mp3\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e或者只截取全部音频中的一小段:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003effmpeg -ss 00:00:03 -t 0:0:14 -i alcastar.mp4 -f mp3 -vn alcastar.mp3\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e其中 \u003ccode\u003e-ss  00:00:03\u003c/code\u003e 用于指定要截取的音频的起始时间, 即从第三秒开始截取; \u003ccode\u003e-t 0:0:14\u003c/code\u003e 用于指定要截取的音频的持续时长, 即截取 14 秒的音频。\u003ccode\u003e -i alcastar.mp4\u003c/code\u003e 用于指定输入文件,  即下载好的视频文件; \u003ccode\u003e-f mp3\u003c/code\u003e 用于指定输出格式为 mp3; \u003ccode\u003e-vn\u003c/code\u003e 即 no vedio, 即不保留视频; 最后的 alcastar.mp3 是输出文件名。\u003c/p\u003e\n\u003ch2 id=\"去除音频中的静音httpsstackoverflowcomquestions25697596using-ffmpeg-with-silencedetect-to-remove-audio-silence2941197329411973\"\u003e\u003ca href=\"https://stackoverflow.com/questions/25697596/using-ffmpeg-with-silencedetect-to-remove-audio-silence/29411973#29411973\"\u003e去除音频中的静音\u003c/a\u003e\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003effmpeg -i input.mp3 -af \u003cspan class=\"nv\"\u003esilenceremove\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e1:0:-50dB output.mp3\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"给视频添加字幕httpsenwikipediaorgwikilist_of_iso_639-2_codes\"\u003e\u003ca href=\"https://en.wikipedia.org/wiki/List_of_ISO_639-2_codes\"\u003e给视频添加字幕\u003c/a\u003e\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003effmpeg -i input.mp4 -i SRT文件 -c copy -c:s mov_text -metadata:s:s:0  \u003cspan class=\"nv\"\u003elanguage\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u0026lt;language code\u0026gt; output.mp4 \n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"移除超过1秒的静止画面httpsstackoverflowcomquestions40966394how-to-simply-remove-duplicate-frames-from-a-video-using-ffmpeg4097778640977786\"\u003e\u003ca href=\"https://stackoverflow.com/questions/40966394/how-to-simply-remove-duplicate-frames-from-a-video-using-ffmpeg/40977786#40977786\"\u003e移除超过1秒的静止画面\u003c/a\u003e\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003effmpeg -i in.mp4 -vf\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"s2\"\u003e\u0026#34;select=\u0026#39;if(gt(scene,0.01),st(1,t),lte(t-ld(1),1))\u0026#39;,setpts=N/FRAME_RATE/TB\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003etrimmed.mp4\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"将图片和音频合成视频\"\u003e将图片和音频合成视频\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003effmpeg -loop \u003cspan class=\"m\"\u003e1\u003c/span\u003e -i \u003cspan class=\"nv\"\u003e$image\u003c/span\u003e -i \u003cspan class=\"nv\"\u003e$audio_file\u003c/span\u003e -q:v \u003cspan class=\"m\"\u003e1\u003c/span\u003e -c:a copy  -shortest \u003cspan class=\"nv\"\u003e$video_file\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"将多个视频合并成一个\"\u003e将多个视频合并成一个\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003effmpeg -safe \u003cspan class=\"m\"\u003e0\u003c/span\u003e -f concat -i \u003cspan class=\"nv\"\u003e$list_file\u003c/span\u003e -c:v libx264 \u003cspan class=\"nv\"\u003e$final\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003elist file 的格式是：\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003efile \u0026#39;./data_1.ts\u0026#39;\nfile \u0026#39;./data_2.ts\u0026#39;\nfile \u0026#39;./data_3.ts\u0026#39;\n\u003c/code\u003e\u003c/pre\u003e","text":"抖音短视频有很多好听的歌, 网易云音乐、QQ音乐和虾米音乐上都没有, 但是可以把视频转成 mp3 格式。 使用 FFmpeg 来搞定。点击抖音上的转发按钮, 如果「保存本地」的按钮不是灰色的, 表示可以下载到手机上。下载完后, 再转发到电脑上, 下载好 ffmpeg:\nbrew install ffmpeg 从视频中采集音频 ffmpeg -i input.mp4 -f mp3 -vn output.mp3 或\nffmpeg -i input.mp4 -q:a 0 -map a output.mp3 或者只截取全部音频中的一小段:\nffmpeg -ss 00:00:03 -t 0:0:14 -i alcastar.mp4 -f mp3 -vn alcastar.mp3 其中 -ss 00:00:03 用于指定要截取的音频的起始时间, 即从第三秒开始截取; -t 0:0:14 用于指定要截取的音频的持续时长, 即截取 14 秒的音频。 -i alcastar.mp4 用于指定输入文件, 即下载好的视频文件; -f mp3 用于指定输出格式为 mp3; -vn 即 no vedio, 即不保留视频; 最后的 alcastar.mp3 是输出文件名。\n去除音频中的静音 ffmpeg -i input.mp3 -af silenceremove=1:0:-50dB output.mp3 给视频添加字幕 ffmpeg -i input.mp4 -i SRT文件 -c copy -c:s mov_text -metadata:s:s:0 language=\u0026lt;language code\u0026gt; output.mp4 移除超过1秒的静止画面 ffmpeg -i in.mp4 -vf \u0026#34;select=\u0026#39;if(gt(scene,0.01),st(1,t),lte(t-ld(1),1))\u0026#39;,setpts=N/FRAME_RATE/TB\u0026#34; trimmed.mp4 将图片和音频合成视频 ffmpeg -loop 1 -i $image -i $audio_file -q:v 1 -c:a copy -shortest $video_file 将多个视频合并成一个 ffmpeg -safe 0 -f concat -i $list_file -c:v libx264 $final list file 的格式是：\nfile \u0026#39;./data_1.ts\u0026#39; file \u0026#39;./data_2.ts\u0026#39; file \u0026#39;./data_3.ts\u0026#39; "},"name":"使用 FFmpeg 提取抖音短视频中的音乐","published":"2020-07-04T00:00:00Z","summary":"Use FFmpeg to extract music in TikTok","type":"entry","url":"https://ohmyweekly.github.io/notes/ffmpeg-notes/"}