{"author":{"name":null,"type":"card","url":"http://localhost:1313/"},"content":{"html":"\u003cp\u003e在批处理中，如果需要把一个命令的处理结果赋值给一个变量，可以使用如下方法：\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003efor /f \u0026#34;delims=\u0026#34; %%t in (\u0026#39;命令字符串\u0026#39;) do set str=%%t echo %str%\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e当命令字符串中含有%时，需要转义。使用imagemagick中的identify命令获取图片的宽和高：\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eidentify -format %wx%h demo.jpg\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e直接在命令行中使用上述命令可以看到输出了图片的高和宽，但是用它放在批处理脚本中来获取命令的输出结果，则失败，原因是命令字符串中含有%符号，它在批处理有特殊含义，所有需要转义，转义的方法是使用两个%%，正确的做法是：\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003efor /f \u0026#34;delims=\u0026#34; %%t in (\u0026#39;identify -format %%wx%%h demo.jpg\u0026#39;) set str=%%t\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e为什么用2个%号？ 因为这是在批处理脚本中而非命令行下！\u003c/p\u003e\n","text":"在批处理中，如果需要把一个命令的处理结果赋值给一个变量，可以使用如下方法：\nfor /f \u0026#34;delims=\u0026#34; %%t in (\u0026#39;命令字符串\u0026#39;) do set str=%%t echo %str% 当命令字符串中含有%时，需要转义。使用imagemagick中的identify命令获取图片的宽和高：\nidentify -format %wx%h demo.jpg 直接在命令行中使用上述命令可以看到输出了图片的高和宽，但是用它放在批处理脚本中来获取命令的输出结果，则失败，原因是命令字符串中含有%符号，它在批处理有特殊含义，所有需要转义，转义的方法是使用两个%%，正确的做法是：\nfor /f \u0026#34;delims=\u0026#34; %%t in (\u0026#39;identify -format %%wx%%h demo.jpg\u0026#39;) set str=%%t 为什么用2个%号？ 因为这是在批处理脚本中而非命令行下！\n"},"name":"ImageMagick - 在批处理中使用 ImageMagick","published":"2011-06-23T16:16:21Z","summary":"在批处理中，如果需要把一个命令的处理结果赋值给一个变量，可以使用如下方法：\nfor /f \u0026#34;delims=\u0026#34; %%t in (\u0026#39;命令字符串\u0026#39;) do set str=%%t echo %str% 当命令字符串中含有%时，需要转义。使用imagemagick中的identify命令获取图片的宽和高：\nidentify -format %wx%h demo.jpg 直接在命令行中使用上述命令可以看到输出了图片的高和宽，但是用它放在批处理脚本中来获取命令的输出结果，则失败，原因是命令字符串中含有%符号，它在批处理有特殊含义，所有需要转义，转义的方法是使用两个%%，正确的做法是：\nfor /f \u0026#34;delims=\u0026#34; %%t in (\u0026#39;identify -format %%wx%%h demo.jpg\u0026#39;) set str=%%t 为什么用2个%号？ 因为这是在批处理脚本中而非命令行下！","type":"entry","url":"http://localhost:1313/notes/%E5%9C%A8%E6%89%B9%E5%A4%84%E7%90%86%E4%B8%AD%E4%BD%BF%E7%94%A8-imagemagick/"}