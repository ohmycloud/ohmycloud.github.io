{"author":{"name":null,"type":"card","url":"https://ohmyweekly.github.io/"},"content":{"html":"\u003cp\u003esalve 上, \u003ccode\u003eroot@slave2:/opt/spark-2.1.0-bin-hadoop2.6/conf# vim spark-env.sh\u003c/code\u003e:\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eexport JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64\nexport SCALA_HOME=/opt/scala-2.11.8\nexport SPARK_MASTER_IP=namenode\nexport HADOOP_HOME=/opt/hadoop-2.6.5\nexport SPARK_WORKER_CORES=3\nexport SPARK_WORKER_MEMORY=12g\nexport HADOOP_CONF_DIR=/opt/hadoop-2.6.5/etc/hadoop\nexport HADOOP_CONF_LIB_NATIVE_DIR=/opt/hadoop-2.6.5/lib/native\nexport HADOOP_MAPRED_HOME=/opt/hadoop-2.6.5\nexport HADOOP_COMMON_HOME=/opt/hadoop-2.6.5\nexport HADOOP_HDFS_HOME=/opt/hadoop-2.6.5\nexport YARN_HOME=/opt/hadoop-2.6.5\nexport HADOOP_INSTALL=/opt/hadoop-2.6.5\nexport YARN_CONF_DIR=/opt/hadoop-2.6.5/etc/hadoop\nexport SPARK_HOME=/opt/spark-2.1.0-bin-hadoop2.6\nexport SPARK_CLASSPATH=/opt/hadoop-2.6.5/etc/hadoop:/opt/hadoop-2.6.5/share/hadoop/common/lib/*:/opt/hadoop-2.6.5/share/hadoop/common/*:/opt/hadoop-2.6.5/share/hadoop/hdfs:/opt/hadoop-2.6.5/share/hadoop/hdfs/lib/*:/opt/hadoop-2.6.5/share/hadoop/hdfs/*:/opt/hadoop-2.6.5/share/hadoop/yarn/lib/*:/opt/hadoop-2.6.5/share/hadoop/yarn/*:/opt/hadoop-2.6.5/share/hadoop/mapreduce/lib/*:/opt/hadoop-2.6.5/share/hadoop/mapreduce/*:/opt/hadoop-2.6.5/contrib/capacity-scheduler/*.jar\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eslave2上 yarn-site.xml\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e\u0026lt;?xml version=\u0026#34;1.0\u0026#34;?\u0026gt;\n\u0026lt;!--\n  Licensed under the Apache License, Version 2.0 (the \u0026#34;License\u0026#34;);\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \u0026#34;AS IS\u0026#34; BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License. See accompanying LICENSE file.\n--\u0026gt;\n\u0026lt;configuration\u0026gt;\n\n\u0026lt;!-- Site specific YARN configuration properties --\u0026gt;\n\u0026lt;property\u0026gt;\n\u0026lt;name\u0026gt;yarn.nodemanager.aux-services\u0026lt;/name\u0026gt;\n\u0026lt;value\u0026gt;mapreduce_shuffle\u0026lt;/value\u0026gt;\n\u0026lt;/property\u0026gt;\n\u0026lt;property\u0026gt;\n\u0026lt;name\u0026gt;yarn.nodemanager.aux-services.mapreduce.shuffle.class\u0026lt;/name\u0026gt;\n\u0026lt;value\u0026gt;org.apache.hadoop.mapred.ShuffleHandler\u0026lt;/value\u0026gt;\n\u0026lt;/property\u0026gt;\n\u0026lt;property\u0026gt;\n\u0026lt;name\u0026gt;yarn.resourcemanager.address\u0026lt;/name\u0026gt;\n\u0026lt;value\u0026gt;master:8032\u0026lt;/value\u0026gt;\n\u0026lt;/property\u0026gt;\n\u0026lt;property\u0026gt;\n\u0026lt;name\u0026gt;yarn.resourcemanager.scheduler.address\u0026lt;/name\u0026gt;\n\u0026lt;value\u0026gt;master:8030\u0026lt;/value\u0026gt;\n\u0026lt;/property\u0026gt;\n\u0026lt;property\u0026gt;\n\u0026lt;name\u0026gt;yarn.resourcemanager.resource-tracker.address\u0026lt;/name\u0026gt;\n\u0026lt;value\u0026gt;master:8035\u0026lt;/value\u0026gt;\n\u0026lt;/property\u0026gt;\n\u0026lt;property\u0026gt;\n\u0026lt;name\u0026gt;yarn.resourcemanager.admin.address\u0026lt;/name\u0026gt;\n\u0026lt;value\u0026gt;master:8033\u0026lt;/value\u0026gt;\n\u0026lt;/property\u0026gt;\n\u0026lt;property\u0026gt;\n\u0026lt;name\u0026gt;yarn.resourcemanager.webapp.address\u0026lt;/name\u0026gt;\n\u0026lt;value\u0026gt;0.0.0.0:8088\u0026lt;/value\u0026gt;\n\u0026lt;/property\u0026gt;\n\u0026lt;property\u0026gt;\n\u0026lt;name\u0026gt;yarn.nodemanager.resource.memory-mb\u0026lt;/name\u0026gt;\n\u0026lt;value\u0026gt;7168\u0026lt;/value\u0026gt;\n\u0026lt;/property\u0026gt;\n\u0026lt;property\u0026gt;\n\u0026lt;name\u0026gt;yarn.scheduler.minimum-allocation-mb\u0026lt;/name\u0026gt;\n\u0026lt;value\u0026gt;1024\u0026lt;/value\u0026gt;\n\u0026lt;/property\u0026gt;\n\u0026lt;!--\u0026lt;property\u0026gt;\n\u0026lt;name\u0026gt;yarn.scheduler.maximum-allocation-mb\u0026lt;/name\u0026gt;\n\u0026lt;value\u0026gt;4096\u0026lt;/value\u0026gt;\n\u0026lt;/property\u0026gt;\n--\u0026gt;\n\u0026lt;property\u0026gt;\n\u0026lt;name\u0026gt;yarn.nodemanager.pmem-check-enabled\u0026lt;/name\u0026gt;\n\u0026lt;value\u0026gt;false\u0026lt;/value\u0026gt;\n\u0026lt;/property\u0026gt;\n\n\u0026lt;property\u0026gt;\n\u0026lt;name\u0026gt;yarn.nodemanager.vmem-check-enabled\u0026lt;/name\u0026gt;\n\u0026lt;value\u0026gt;false\u0026lt;/value\u0026gt;\n\u0026lt;/property\u0026gt;\n\u0026lt;/configuration\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003ccode\u003e/opt/spark-2.1.0-bin-hadoop2.6/conf# vim spark-defaults.conf\u003c/code\u003e:\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e# Example:\n# spark.master                     spark://master:7077\n# spark.eventLog.enabled           true\n# spark.eventLog.dir               hdfs://namenode:8021/directory\n# spark.serializer                 org.apache.spark.serializer.KryoSerializer\nspark.driver.memory              12g\nspark.scheduler.mode             FAIR\n# spark.executor.extraJavaOptions  -XX:+PrintGCDetails -Dkey=value -Dnumbers=\u0026#34;one two three\u0026#34;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e/opt/spark-2.1.0-bin-hadoop2.6/conf# vim slaves\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eslave1\nslave2\nslave3\nslave4\n\u003c/code\u003e\u003c/pre\u003e","text":"salve 上, root@slave2:/opt/spark-2.1.0-bin-hadoop2.6/conf# vim spark-env.sh:\nexport JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 export SCALA_HOME=/opt/scala-2.11.8 export SPARK_MASTER_IP=namenode export HADOOP_HOME=/opt/hadoop-2.6.5 export SPARK_WORKER_CORES=3 export SPARK_WORKER_MEMORY=12g export HADOOP_CONF_DIR=/opt/hadoop-2.6.5/etc/hadoop export HADOOP_CONF_LIB_NATIVE_DIR=/opt/hadoop-2.6.5/lib/native export HADOOP_MAPRED_HOME=/opt/hadoop-2.6.5 export HADOOP_COMMON_HOME=/opt/hadoop-2.6.5 export HADOOP_HDFS_HOME=/opt/hadoop-2.6.5 export YARN_HOME=/opt/hadoop-2.6.5 export HADOOP_INSTALL=/opt/hadoop-2.6.5 export YARN_CONF_DIR=/opt/hadoop-2.6.5/etc/hadoop export SPARK_HOME=/opt/spark-2.1.0-bin-hadoop2.6 export SPARK_CLASSPATH=/opt/hadoop-2.6.5/etc/hadoop:/opt/hadoop-2.6.5/share/hadoop/common/lib/*:/opt/hadoop-2.6.5/share/hadoop/common/*:/opt/hadoop-2.6.5/share/hadoop/hdfs:/opt/hadoop-2.6.5/share/hadoop/hdfs/lib/*:/opt/hadoop-2.6.5/share/hadoop/hdfs/*:/opt/hadoop-2.6.5/share/hadoop/yarn/lib/*:/opt/hadoop-2.6.5/share/hadoop/yarn/*:/opt/hadoop-2.6.5/share/hadoop/mapreduce/lib/*:/opt/hadoop-2.6.5/share/hadoop/mapreduce/*:/opt/hadoop-2.6.5/contrib/capacity-scheduler/*.jar slave2上 yarn-site.xml\n\u0026lt;?xml version=\u0026#34;1.0\u0026#34;?\u0026gt; \u0026lt;!-- Licensed under the Apache License, Version 2.0 (the \u0026#34;License\u0026#34;); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \u0026#34;AS IS\u0026#34; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. See accompanying LICENSE file. --\u0026gt; \u0026lt;configuration\u0026gt; \u0026lt;!-- Site specific YARN configuration properties --\u0026gt; \u0026lt;property\u0026gt; \u0026lt;name\u0026gt;yarn.nodemanager.aux-services\u0026lt;/name\u0026gt; \u0026lt;value\u0026gt;mapreduce_shuffle\u0026lt;/value\u0026gt; \u0026lt;/property\u0026gt; \u0026lt;property\u0026gt; \u0026lt;name\u0026gt;yarn.nodemanager.aux-services.mapreduce.shuffle.class\u0026lt;/name\u0026gt; \u0026lt;value\u0026gt;org.apache.hadoop.mapred.ShuffleHandler\u0026lt;/value\u0026gt; \u0026lt;/property\u0026gt; \u0026lt;property\u0026gt; \u0026lt;name\u0026gt;yarn.resourcemanager.address\u0026lt;/name\u0026gt; \u0026lt;value\u0026gt;master:8032\u0026lt;/value\u0026gt; \u0026lt;/property\u0026gt; \u0026lt;property\u0026gt; \u0026lt;name\u0026gt;yarn.resourcemanager.scheduler.address\u0026lt;/name\u0026gt; \u0026lt;value\u0026gt;master:8030\u0026lt;/value\u0026gt; \u0026lt;/property\u0026gt; \u0026lt;property\u0026gt; \u0026lt;name\u0026gt;yarn.resourcemanager.resource-tracker.address\u0026lt;/name\u0026gt; \u0026lt;value\u0026gt;master:8035\u0026lt;/value\u0026gt; \u0026lt;/property\u0026gt; \u0026lt;property\u0026gt; \u0026lt;name\u0026gt;yarn.resourcemanager.admin.address\u0026lt;/name\u0026gt; \u0026lt;value\u0026gt;master:8033\u0026lt;/value\u0026gt; \u0026lt;/property\u0026gt; \u0026lt;property\u0026gt; \u0026lt;name\u0026gt;yarn.resourcemanager.webapp.address\u0026lt;/name\u0026gt; \u0026lt;value\u0026gt;0.0.0.0:8088\u0026lt;/value\u0026gt; \u0026lt;/property\u0026gt; \u0026lt;property\u0026gt; \u0026lt;name\u0026gt;yarn.nodemanager.resource.memory-mb\u0026lt;/name\u0026gt; \u0026lt;value\u0026gt;7168\u0026lt;/value\u0026gt; \u0026lt;/property\u0026gt; \u0026lt;property\u0026gt; \u0026lt;name\u0026gt;yarn.scheduler.minimum-allocation-mb\u0026lt;/name\u0026gt; \u0026lt;value\u0026gt;1024\u0026lt;/value\u0026gt; \u0026lt;/property\u0026gt; \u0026lt;!--\u0026lt;property\u0026gt; \u0026lt;name\u0026gt;yarn.scheduler.maximum-allocation-mb\u0026lt;/name\u0026gt; \u0026lt;value\u0026gt;4096\u0026lt;/value\u0026gt; \u0026lt;/property\u0026gt; --\u0026gt; \u0026lt;property\u0026gt; \u0026lt;name\u0026gt;yarn.nodemanager.pmem-check-enabled\u0026lt;/name\u0026gt; \u0026lt;value\u0026gt;false\u0026lt;/value\u0026gt; \u0026lt;/property\u0026gt; \u0026lt;property\u0026gt; \u0026lt;name\u0026gt;yarn.nodemanager.vmem-check-enabled\u0026lt;/name\u0026gt; \u0026lt;value\u0026gt;false\u0026lt;/value\u0026gt; \u0026lt;/property\u0026gt; \u0026lt;/configuration\u0026gt; /opt/spark-2.1.0-bin-hadoop2.6/conf# vim spark-defaults.conf:\n# Example: # spark.master spark://master:7077 # spark.eventLog.enabled true # spark.eventLog.dir hdfs://namenode:8021/directory # spark.serializer org.apache.spark.serializer.KryoSerializer spark.driver.memory 12g spark.scheduler.mode FAIR # spark.executor.extraJavaOptions -XX:+PrintGCDetails -Dkey=value -Dnumbers=\u0026#34;one two three\u0026#34; /opt/spark-2.1.0-bin-hadoop2.6/conf# vim slaves\nslave1 slave2 slave3 slave4 "},"name":"Spark 集群配置","published":"2017-03-19T16:36:25Z","summary":"salve 上, root@slave2:/opt/spark-2.1.0-bin-hadoop2.6/conf# vim spark-env.sh:\nexport JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 export SCALA_HOME=/opt/scala-2.11.8 export SPARK_MASTER_IP=namenode export HADOOP_HOME=/opt/hadoop-2.6.5 export SPARK_WORKER_CORES=3 export SPARK_WORKER_MEMORY=12g export HADOOP_CONF_DIR=/opt/hadoop-2.6.5/etc/hadoop export HADOOP_CONF_LIB_NATIVE_DIR=/opt/hadoop-2.6.5/lib/native export HADOOP_MAPRED_HOME=/opt/hadoop-2.6.5 export HADOOP_COMMON_HOME=/opt/hadoop-2.6.5 export HADOOP_HDFS_HOME=/opt/hadoop-2.6.5 export YARN_HOME=/opt/hadoop-2.6.5 export HADOOP_INSTALL=/opt/hadoop-2.6.5 export YARN_CONF_DIR=/opt/hadoop-2.6.5/etc/hadoop export SPARK_HOME=/opt/spark-2.1.0-bin-hadoop2.6 export SPARK_CLASSPATH=/opt/hadoop-2.6.5/etc/hadoop:/opt/hadoop-2.6.5/share/hadoop/common/lib/*:/opt/hadoop-2.6.5/share/hadoop/common/*:/opt/hadoop-2.6.5/share/hadoop/hdfs:/opt/hadoop-2.6.5/share/hadoop/hdfs/lib/*:/opt/hadoop-2.6.5/share/hadoop/hdfs/*:/opt/hadoop-2.6.5/share/hadoop/yarn/lib/*:/opt/hadoop-2.6.5/share/hadoop/yarn/*:/opt/hadoop-2.6.5/share/hadoop/mapreduce/lib/*:/opt/hadoop-2.6.5/share/hadoop/mapreduce/*:/opt/hadoop-2.6.5/contrib/capacity-scheduler/*.jar slave2上 yarn-site.xml\n\u0026lt;?xml version=\u0026#34;1.0\u0026#34;?\u0026gt; \u0026lt;!-- Licensed under the Apache License, Version 2.0 (the \u0026#34;License\u0026#34;); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.","type":"entry","url":"https://ohmyweekly.github.io/notes/spark-%E9%9B%86%E7%BE%A4/"}