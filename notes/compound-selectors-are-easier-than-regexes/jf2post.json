{"author":{"name":null,"type":"card","url":"http://localhost:1313/"},"content":{"html":"\u003cp\u003e\u003cimg src=\"https://mojolicious.io/blog/2018/12/05/compound-selectors/banner.jpg\" alt=\"img\"\u003e\u003c/p\u003e\n\u003cp\u003e当人们告诉我我不能（他们的意思是不应该）用正则表达式解析 HTML 时，我说“拿酒来”。这不仅仅是技巧或态度，而是方便。以正确的方式做到并不总是那么容易（我记得 HTML 0.9 是一个大问题）。最近，我一直在使用 \u003ca href=\"https://mojolicious.org/perldoc/Mojo/DOM\"\u003eMojo::DOM\u003c/a\u003e 为我做这件事。它比旧的，权宜之计更容易。\u003c/p\u003e\n\u003cp\u003e诀窍始终是隔离感兴趣的 HTML。我可以做到这一点切除有趣部分周围的所有数据：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-perl\" data-lang=\"perl\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003emy\u003c/span\u003e \u003cspan class=\"nv\"\u003e$html\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"o\"\u003e...\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nv\"\u003e$html\u003c/span\u003e \u003cspan class=\"o\"\u003e=~\u003c/span\u003e \u003cspan class=\"sr\"\u003es/.*?\u0026lt;table class=\u0026#34;foo\u0026#34;.*?\u0026gt;//\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nv\"\u003e$html\u003c/span\u003e \u003cspan class=\"o\"\u003e=~\u003c/span\u003e \u003cspan class=\"sr\"\u003es/\u0026lt;\\/table\u0026gt;.*//\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e现在我不必解析所有的 HTML;我可以考虑一下表格。即使这是权宜之计，也不是那么好。在我用更好的东西替换它之前，我会快速绕道而行。\u003c/p\u003e\n\u003ch2 id=\"层叠样式表\"\u003e层叠样式表\u003c/h2\u003e\n\u003cp\u003e您可能知道层叠样式表（CSS）使你的网页看起来很漂亮（但不是我的，真的）。您可以将元数据添加到标记上：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-html\" data-lang=\"html\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eimg\u003c/span\u003e \u003cspan class=\"na\"\u003eid\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;bender\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;robot\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003esrc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;...\u0026#34;\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eimg\u003c/span\u003e \u003cspan class=\"na\"\u003eid\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;fry\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;human\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003esrc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;...\u0026#34;\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eimg\u003c/span\u003e \u003cspan class=\"na\"\u003eid\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;leela\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;mutant\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003esrc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;...\u0026#34;\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eCSS 规则可以通过其 ID 或类来处理这些项目以将样式应用于它们。这个寻址是一个“选择器”，拥有比我更好的技能的人使用这些来使演示非常漂亮：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-html\" data-lang=\"html\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eimg#fry   { border: 1px; }\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eimg.robot { margin: 20px; }\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eHTML 可能有点复杂。也许那些有趣的标签在列表中。这包裹了数据的另一层 HTML 结构：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-html\" data-lang=\"html\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eul\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;employees\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eli\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eimg\u003c/span\u003e \u003cspan class=\"na\"\u003eid\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;bender\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;robot\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003esrc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;...\u0026#34;\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eli\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eli\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eimg\u003c/span\u003e \u003cspan class=\"na\"\u003eid\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;fry\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;human\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003esrc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;...\u0026#34;\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eli\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eli\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eimg\u003c/span\u003e \u003cspan class=\"na\"\u003eid\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;leela\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;mutant\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003esrc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;...\u0026#34;\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eli\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eul\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e如果我只想影响该列表中的那些图像，而只影响该列表中的项目。我可以用复合选择器指定祖先（两个或多个一起使用）。选择器之间只有一个空格，这意味着第二个选择器包含在第一个选择器中（“后代”）：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-html\" data-lang=\"html\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eul.employees img.human { border: 1px; }\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eul.employees img.robot { margin: 20px; }\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e但是，本文并不是关于使用选择器可以做的所有奇特事情。你知道它们存在，你可以在 \u003ca href=\"https://mojolicious.org/perldoc/Mojo/DOM/CSS\"\u003eMojo::CSS::Selectors\u003c/a\u003e 中看到它们的可能性。我将在下一节向您展示一些示例。\u003c/p\u003e\n\u003ch2 id=\"在-mojo-中使用选择器\"\u003e在 Mojo 中使用选择器\u003c/h2\u003e\n\u003cp\u003e但是你可以用这些来做更多的事情。使用 \u003ca href=\"https://mojolicious.org/perldoc/Mojo/DOM\"\u003eMojo::DOM\u003c/a\u003e，它支持 CSS Selectors \u003ca href=\"https://www.w3.org/TR/2018/PR-selectors-3-20180911/\"\u003eLevel 3\u003c/a\u003e（以及 \u003ca href=\"https://www.w3.org/TR/selectors-4/\"\u003eLevel 4\u003c/a\u003e 中的一些东西），您可以使用相同的寻址来提取数据。\u003c/p\u003e\n\u003cp\u003e从一些 HTML 开始。请注意 \u003ca href=\"https://www.effectiveperlprogramming.com/2016/12/strip-leading-spaces-from-here-docs-with-v5-26/\"\u003ePerl 5.26 中引入的花哨的新缩进文档语法\u003c/a\u003e：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-perl\" data-lang=\"perl\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003euse\u003c/span\u003e \u003cspan class=\"nn\"\u003ev5\u003c/span\u003e\u003cspan class=\"mf\"\u003e.28\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003euse\u003c/span\u003e \u003cspan class=\"nn\"\u003eutf8\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003euse\u003c/span\u003e \u003cspan class=\"nn\"\u003estrict\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003euse\u003c/span\u003e \u003cspan class=\"nn\"\u003ewarnings\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003euse\u003c/span\u003e \u003cspan class=\"nn\"\u003eMojo::DOM\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003emy\u003c/span\u003e \u003cspan class=\"nv\"\u003e$selector\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nv\"\u003e$ARGV\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"sr\"\u003e//\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#39;img\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003emy\u003c/span\u003e \u003cspan class=\"nv\"\u003e$html\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026lt;\u0026lt;~\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#39;HTML\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eimg\u003c/span\u003e \u003cspan class=\"n\"\u003eid\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;farnworth \u0026#34;\u003c/span\u003e \u003cspan class=\"n\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;human\u0026#34;\u003c/span\u003e \u003cspan class=\"n\"\u003esrc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;...\u0026#34;\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eul\u003c/span\u003e \u003cspan class=\"n\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;employees\u0026#34;\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"sr\"\u003e\u0026lt;li\u0026gt;\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eimg\u003c/span\u003e \u003cspan class=\"n\"\u003eid\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;bender\u0026#34;\u003c/span\u003e \u003cspan class=\"n\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;robot\u0026#34;\u003c/span\u003e \u003cspan class=\"n\"\u003esrc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;...\u0026#34;\u003c/span\u003e \u003cspan class=\"sr\"\u003e/\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003eli\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"sr\"\u003e\u0026lt;li\u0026gt;\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eimg\u003c/span\u003e \u003cspan class=\"n\"\u003eid\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;fry\u0026#34;\u003c/span\u003e \u003cspan class=\"n\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;human\u0026#34;\u003c/span\u003e \u003cspan class=\"n\"\u003esrc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;...\u0026#34;\u003c/span\u003e \u003cspan class=\"sr\"\u003e/\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003eli\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"sr\"\u003e\u0026lt;li\u0026gt;\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eimg\u003c/span\u003e \u003cspan class=\"n\"\u003eid\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;leela\u0026#34;\u003c/span\u003e \u003cspan class=\"n\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;mutant\u0026#34;\u003c/span\u003e \u003cspan class=\"n\"\u003esrc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;...\u0026#34;\u003c/span\u003e \u003cspan class=\"sr\"\u003e/\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003eli\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"sr\"\u003e\u0026lt;/ul\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eHTML\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003emy\u003c/span\u003e \u003cspan class=\"nv\"\u003e$dom\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nn\"\u003eMojo::DOM\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nv\"\u003e$html\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003esay\u003c/span\u003e \u003cspan class=\"nv\"\u003e$dom\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003efind\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nv\"\u003e$selector\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"nb\"\u003ejoin\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;\\n\u0026#34;\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e不用参数运行这个程序，我看到所有的 \u003ccode\u003eimg\u003c/code\u003e 标签：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e$ perl html.pl\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u0026lt;img \u003cspan class=\"nv\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;human\u0026#34;\u003c/span\u003e \u003cspan class=\"nv\"\u003eid\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;farnworth \u0026#34;\u003c/span\u003e \u003cspan class=\"nv\"\u003esrc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;...\u0026#34;\u003c/span\u003e\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u0026lt;img \u003cspan class=\"nv\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;robot\u0026#34;\u003c/span\u003e \u003cspan class=\"nv\"\u003eid\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;bender\u0026#34;\u003c/span\u003e \u003cspan class=\"nv\"\u003esrc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;...\u0026#34;\u003c/span\u003e\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u0026lt;img \u003cspan class=\"nv\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;human\u0026#34;\u003c/span\u003e \u003cspan class=\"nv\"\u003eid\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;fry\u0026#34;\u003c/span\u003e \u003cspan class=\"nv\"\u003esrc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;...\u0026#34;\u003c/span\u003e\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u0026lt;img \u003cspan class=\"nv\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;mutant\u0026#34;\u003c/span\u003e \u003cspan class=\"nv\"\u003eid\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;leela\u0026#34;\u003c/span\u003e \u003cspan class=\"nv\"\u003esrc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;...\u0026#34;\u003c/span\u003e\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e通过论证我可以选择我喜欢的任何部分。在这里，我得到以 \u003ccode\u003eli\u003c/code\u003e 标签开头的部件：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e$ perl html.pl li\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u0026lt;li\u0026gt;\u0026lt;img \u003cspan class=\"nv\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;robot\u0026#34;\u003c/span\u003e \u003cspan class=\"nv\"\u003eid\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;bender\u0026#34;\u003c/span\u003e \u003cspan class=\"nv\"\u003esrc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;...\u0026#34;\u003c/span\u003e\u0026gt;\u0026lt;/li\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u0026lt;li\u0026gt;\u0026lt;img \u003cspan class=\"nv\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;human\u0026#34;\u003c/span\u003e \u003cspan class=\"nv\"\u003eid\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;fry\u0026#34;\u003c/span\u003e \u003cspan class=\"nv\"\u003esrc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;...\u0026#34;\u003c/span\u003e\u0026gt;\u0026lt;/li\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u0026lt;li\u0026gt;\u0026lt;img \u003cspan class=\"nv\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;mutant\u0026#34;\u003c/span\u003e \u003cspan class=\"nv\"\u003eid\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;leela\u0026#34;\u003c/span\u003e \u003cspan class=\"nv\"\u003esrc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;...\u0026#34;\u003c/span\u003e\u0026gt;\u0026lt;/li\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e我可以选择具有某个类的所有图像：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e$ perl html.pl img.human\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u0026lt;img \u003cspan class=\"nv\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;human\u0026#34;\u003c/span\u003e \u003cspan class=\"nv\"\u003eid\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;farnworth \u0026#34;\u003c/span\u003e \u003cspan class=\"nv\"\u003esrc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;...\u0026#34;\u003c/span\u003e\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u0026lt;img \u003cspan class=\"nv\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;human\u0026#34;\u003c/span\u003e \u003cspan class=\"nv\"\u003eid\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;fry\u0026#34;\u003c/span\u003e \u003cspan class=\"nv\"\u003esrc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;...\u0026#34;\u003c/span\u003e\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e但是，如果我只想要列表中的人类图像怎么办？我必须努力工作。我指定了一个复合选择器，它指出 \u003ccode\u003eimg\u003c/code\u003e 必须在 \u003ccode\u003eli\u003c/code\u003e 标签中：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e$ perl html.pl \u003cspan class=\"s2\"\u003e\u0026#34;li img.human\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u0026lt;img \u003cspan class=\"nv\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;human\u0026#34;\u003c/span\u003e \u003cspan class=\"nv\"\u003eid\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;fry\u0026#34;\u003c/span\u003e \u003cspan class=\"nv\"\u003esrc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;...\u0026#34;\u003c/span\u003e\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e想象一下，更复杂的 HTML 与其他列表也有图像？我可以添加另一个选择器，说它必须在某种 \u003ccode\u003eul\u003c/code\u003e 标签中：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e$ perl html.pl \u003cspan class=\"s2\"\u003e\u0026#34;ul.employees li img.human\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u0026lt;img \u003cspan class=\"nv\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;human\u0026#34;\u003c/span\u003e \u003cspan class=\"nv\"\u003eid\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;fry\u0026#34;\u003c/span\u003e \u003cspan class=\"nv\"\u003esrc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;...\u0026#34;\u003c/span\u003e\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e如果这些标签之间没有任何内容。我可以将选择器与 \u003ccode\u003e\u0026gt;\u003c/code\u003e 连接，以表示那些应该是直接的孩子而不是后代：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e$ perl html.pl \u003cspan class=\"s2\"\u003e\u0026#34;ul.employees \u0026gt; li \u0026gt; img.human\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u0026lt;img \u003cspan class=\"nv\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;human\u0026#34;\u003c/span\u003e \u003cspan class=\"nv\"\u003eid\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;fry\u0026#34;\u003c/span\u003e \u003cspan class=\"nv\"\u003esrc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;...\u0026#34;\u003c/span\u003e\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e现在，考虑一下我在那里做了多少工作。几乎没有。我创建了一个 DOM 对象，应用了一个选择器，并且我已经隔离了部分数据。这与我以前做过的努力是一回事。这种方式更好，而不是更多的工作。这就是我喜欢 Mojolicious 的原因！\u003c/p\u003e\n\u003ch2 id=\"那些新的表情符号怎么样\"\u003e那些新的表情符号怎么样？\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://www.effectiveperlprogramming.com/2018/08/find-the-new-emojis-in-perls-unicode-support/\"\u003e在 Perl v5.26 中写关于 Unicode 9 更新\u003c/a\u003e时，我想知道我可以展示哪些内容可能很有趣。怎么弄清楚哪个新的表情符号出现了？\u003c/p\u003e\n\u003cp\u003e我的第一次尝试只是遍历每个字符并比较各种 Unicode 属性，以查看哪些代码编号从 \u003ccode\u003eUnassigned\u003c/code\u003e 更改为 \u003ccode\u003ePresent_In\u003c/code\u003e。那很好，但后来我发现有人已经列出了所有新的表情符号，我可以抓取他们的网站。\u003c/p\u003e\n\u003cp\u003e我不会解释这个程序中的所有内容。相信我使用 \u003ca href=\"https://mojolicious.org/perldoc/Mojo/UserAgent\"\u003eMojo::UserAgent\u003c/a\u003e 来获取数据，提取 DOM，并使用复合选择器 \u003ccode\u003eul:not( [class] ) li a\u003c/code\u003e 找到我想要的文本。其余的仅仅是对提取的列表进行转换。那些 \u003ccode\u003emap\u003c/code\u003e 和 \u003ccode\u003ejoin\u003c/code\u003e 来自 \u003ca href=\"https://mojolicious.org/perldoc/Mojo/Collection\"\u003eMojo::Collection\u003c/a\u003e。这比使用正则表达式更容易实现：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-perl\" data-lang=\"perl\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003euse\u003c/span\u003e \u003cspan class=\"nn\"\u003ev5\u003c/span\u003e\u003cspan class=\"mf\"\u003e.28\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003euse\u003c/span\u003e \u003cspan class=\"nn\"\u003eutf8\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003euse\u003c/span\u003e \u003cspan class=\"nn\"\u003estrict\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003euse\u003c/span\u003e \u003cspan class=\"nn\"\u003ewarnings\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003euse\u003c/span\u003e \u003cspan class=\"nn\"\u003eopen\u003c/span\u003e \u003cspan class=\"sx\"\u003eqw(:std :utf8)\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003euse\u003c/span\u003e \u003cspan class=\"nn\"\u003echarnames\u003c/span\u003e \u003cspan class=\"sx\"\u003eqw()\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003euse\u003c/span\u003e \u003cspan class=\"nn\"\u003eMojo::UserAgent\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003emy\u003c/span\u003e \u003cspan class=\"nv\"\u003e$ua\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nn\"\u003eMojo::UserAgent\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003emy\u003c/span\u003e \u003cspan class=\"nv\"\u003e$url\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#39;https://blog.emojipedia.org/new-unicode-9-emojis/\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003emy\u003c/span\u003e \u003cspan class=\"nv\"\u003e$tx\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nv\"\u003e$ua\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nv\"\u003e$url\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003edie\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;That didn\u0026#39;t work!\\n\u0026#34;\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nv\"\u003e$tx\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eerror\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003esay\u003c/span\u003e \u003cspan class=\"nv\"\u003e$tx\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"nn\"\u003eresult\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"nn\"\u003edom\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003efind\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#39;ul:not( [class] ) li a\u0026#39;\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"nb\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#39;text\u0026#39;\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"nb\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"k\"\u003esub\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003emy\u003c/span\u003e \u003cspan class=\"nv\"\u003e$c\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003esubstr\u003c/span\u003e \u003cspan class=\"nv\"\u003e$_\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"p\"\u003e[\u003c/span\u003e \u003cspan class=\"nv\"\u003e$c\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nb\"\u003eord\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nv\"\u003e$c\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"nn\"\u003echarnames::\u003c/span\u003e\u003cspan class=\"n\"\u003eviacode\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nb\"\u003eord\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nv\"\u003e$c\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"p\"\u003e})\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"nb\"\u003esort\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"k\"\u003esub\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"nv\"\u003e$a\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"sr\"\u003e\u0026lt;=\u0026gt;\u003c/span\u003e \u003cspan class=\"nv\"\u003e$b\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"nb\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"k\"\u003esub\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"nb\"\u003esprintf\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#39;%s (U+%05X) %s\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nv\"\u003e$_\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"nv\"\u003e@\u003c/span\u003e\u003cspan class=\"err\"\u003e*\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"err\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"nb\"\u003ejoin\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;\\n\u0026#34;\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e这是一个很好的列表，如下所示：\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e🕺 (U+1F57A) MAN DANCING\n🖤 (U+1F5A4) BLACK HEART\n🛑 (U+1F6D1) OCTAGONAL SIGN\n🛒 (U+1F6D2) SHOPPING TROLLEY\n🛴 (U+1F6F4) SCOOTER\n🛵 (U+1F6F5) MOTOR SCOOTER\n🛶 (U+1F6F6) CANOE\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e我使用相同的程序来查找 \u003ca href=\"https://www.effectiveperlprogramming.com/2018/08/use-unicode-10-in-perl-v5-28/\"\u003ev5.28 中的 Unicode 10 更新\u003c/a\u003e。\u003c/p\u003e\n\u003ch2 id=\"从表中提取列\"\u003e从表中提取列\u003c/h2\u003e\n\u003cp\u003e没有留下深刻印象？用 CSS 选择器切表怎么样？这是一个包含ID，名称和分数列的短表。我想加总所有的分数。\u003c/p\u003e\n\u003cp\u003e我不害怕用正则表达式做这个（再次强调！）但是 \u003ca href=\"https://mojolicious.org/perldoc/Mojo/DOM\"\u003eMojo::DOM\u003c/a\u003e 更容易。复合选择器按类查找表，选择每一行，并按位置寻址表格单元格（在本例中为：\u003ccode\u003e:last-child\u003c/code\u003e）：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-perl\" data-lang=\"perl\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003euse\u003c/span\u003e \u003cspan class=\"nn\"\u003ev5\u003c/span\u003e\u003cspan class=\"mf\"\u003e.26\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003euse\u003c/span\u003e \u003cspan class=\"nn\"\u003eutf8\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003euse\u003c/span\u003e \u003cspan class=\"nn\"\u003estrict\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003euse\u003c/span\u003e \u003cspan class=\"nn\"\u003ewarnings\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003euse\u003c/span\u003e \u003cspan class=\"nn\"\u003eList::Util\u003c/span\u003e \u003cspan class=\"sx\"\u003eqw(sum)\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003euse\u003c/span\u003e \u003cspan class=\"nn\"\u003eMojo::DOM\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003emy\u003c/span\u003e \u003cspan class=\"nv\"\u003e$html\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;~\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#39;HTML\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003etable\u003c/span\u003e \u003cspan class=\"n\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;scores\u0026#34;\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"sr\"\u003e\u0026lt;tr\u0026gt;\u0026lt;th\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eID\u003c/span\u003e\u003cspan class=\"sr\"\u003e\u0026lt;/th\u0026gt;\u0026lt;th\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eName\u003c/span\u003e\u003cspan class=\"sr\"\u003e\u0026lt;/th\u0026gt;\u0026lt;th\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eScore\u003c/span\u003e\u003cspan class=\"sr\"\u003e\u0026lt;/th\u0026gt;\u0026lt;/tr\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"sr\"\u003e\u0026lt;tr\u0026gt;\u0026lt;td\u0026gt;\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"sr\"\u003e\u0026lt;/td\u0026gt;\u003c/span\u003e \u003cspan class=\"sr\"\u003e\u0026lt;td\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eNibbler\u003c/span\u003e\u003cspan class=\"sr\"\u003e\u0026lt;/td\u0026gt;\u003c/span\u003e \u003cspan class=\"sr\"\u003e\u0026lt;td\u0026gt;\u003c/span\u003e\u003cspan class=\"mi\"\u003e1023\u003c/span\u003e\u003cspan class=\"sr\"\u003e\u0026lt;/td\u0026gt;\u0026lt;/tr\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"sr\"\u003e\u0026lt;tr\u0026gt;\u0026lt;td\u0026gt;\u003c/span\u003e\u003cspan class=\"mi\"\u003e27\u003c/span\u003e\u003cspan class=\"sr\"\u003e\u0026lt;/td\u0026gt;\u0026lt;td\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eScruffy\u003c/span\u003e\u003cspan class=\"sr\"\u003e\u0026lt;/td\u0026gt;\u003c/span\u003e \u003cspan class=\"sr\"\u003e\u0026lt;td\u0026gt;\u003c/span\u003e\u003cspan class=\"mi\"\u003e39\u003c/span\u003e\u003cspan class=\"sr\"\u003e\u0026lt;/td\u0026gt;\u003c/span\u003e  \u003cspan class=\"sr\"\u003e\u0026lt;/tr\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"sr\"\u003e\u0026lt;tr\u0026gt;\u0026lt;td\u0026gt;\u003c/span\u003e\u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"sr\"\u003e\u0026lt;/td\u0026gt;\u003c/span\u003e \u003cspan class=\"sr\"\u003e\u0026lt;td\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eZoidberg\u003c/span\u003e\u003cspan class=\"sr\"\u003e\u0026lt;/td\u0026gt;\u0026lt;td\u0026gt;\u003c/span\u003e\u003cspan class=\"mi\"\u003e5834\u003c/span\u003e\u003cspan class=\"sr\"\u003e\u0026lt;/td\u0026gt;\u0026lt;/tr\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"sr\"\u003e\u0026lt;/table\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eHTML\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003emy\u003c/span\u003e \u003cspan class=\"nv\"\u003e@scores\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nn\"\u003eMojo::DOM\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nv\"\u003e$html\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003efind\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#39;table.scores \u0026gt; tr \u0026gt; td:last-child\u0026#39;\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"nb\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#39;text\u0026#39;\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"nb\"\u003eeach\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003emy\u003c/span\u003e \u003cspan class=\"nv\"\u003e$grand\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003esum\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nv\"\u003e@scores\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003esay\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;Grand total: $grand\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"结论\"\u003e结论\u003c/h2\u003e\n\u003cp\u003e即使对于像我这样的老程序员来说，通过 Mojolicious 应用的 CSS 选择器处理 HTML 比我之前做的要容易得多（这比过去做得简单得多）。通过创建复合选择器的一点技巧，我可以得到我想要的任何部分。\u003c/p\u003e\n","text":"\n当人们告诉我我不能（他们的意思是不应该）用正则表达式解析 HTML 时，我说“拿酒来”。这不仅仅是技巧或态度，而是方便。以正确的方式做到并不总是那么容易（我记得 HTML 0.9 是一个大问题）。最近，我一直在使用 Mojo::DOM 为我做这件事。它比旧的，权宜之计更容易。\n诀窍始终是隔离感兴趣的 HTML。我可以做到这一点切除有趣部分周围的所有数据：\nmy $html = ...; $html =~ s/.*?\u0026lt;table class=\u0026#34;foo\u0026#34;.*?\u0026gt;//; $html =~ s/\u0026lt;\\/table\u0026gt;.*//; 现在我不必解析所有的 HTML;我可以考虑一下表格。即使这是权宜之计，也不是那么好。在我用更好的东西替换它之前，我会快速绕道而行。\n层叠样式表 您可能知道层叠样式表（CSS）使你的网页看起来很漂亮（但不是我的，真的）。您可以将元数据添加到标记上：\n\u0026lt;img id=\u0026#34;bender\u0026#34; class=\u0026#34;robot\u0026#34; src=\u0026#34;...\u0026#34; /\u0026gt; \u0026lt;img id=\u0026#34;fry\u0026#34; class=\u0026#34;human\u0026#34; src=\u0026#34;...\u0026#34; /\u0026gt; \u0026lt;img id=\u0026#34;leela\u0026#34; class=\u0026#34;mutant\u0026#34; src=\u0026#34;...\u0026#34; /\u0026gt; CSS 规则可以通过其 ID 或类来处理这些项目以将样式应用于它们。这个寻址是一个“选择器”，拥有比我更好的技能的人使用这些来使演示非常漂亮：\nimg#fry { border: 1px; } img.robot { margin: 20px; } HTML 可能有点复杂。也许那些有趣的标签在列表中。这包裹了数据的另一层 HTML 结构：\n\u0026lt;ul class=\u0026#34;employees\u0026#34;\u0026gt; \u0026lt;li\u0026gt;\u0026lt;img id=\u0026#34;bender\u0026#34; class=\u0026#34;robot\u0026#34; src=\u0026#34;...\u0026#34; /\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;img id=\u0026#34;fry\u0026#34; class=\u0026#34;human\u0026#34; src=\u0026#34;...\u0026#34; /\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;img id=\u0026#34;leela\u0026#34; class=\u0026#34;mutant\u0026#34; src=\u0026#34;...\u0026#34; /\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; 如果我只想影响该列表中的那些图像，而只影响该列表中的项目。我可以用复合选择器指定祖先（两个或多个一起使用）。选择器之间只有一个空格，这意味着第二个选择器包含在第一个选择器中（“后代”）：\nul.employees img.human { border: 1px; } ul.employees img.robot { margin: 20px; } 但是，本文并不是关于使用选择器可以做的所有奇特事情。你知道它们存在，你可以在 Mojo::CSS::Selectors 中看到它们的可能性。我将在下一节向您展示一些示例。\n在 Mojo 中使用选择器 但是你可以用这些来做更多的事情。使用 Mojo::DOM，它支持 CSS Selectors Level 3（以及 Level 4 中的一些东西），您可以使用相同的寻址来提取数据。\n从一些 HTML 开始。请注意 Perl 5.26 中引入的花哨的新缩进文档语法：\nuse v5.28; use utf8; use strict; use warnings; use Mojo::DOM; my $selector = $ARGV[0] // \u0026#39;img\u0026#39;; my $html =\u0026lt;\u0026lt;~\u0026#39;HTML\u0026#39;; \u0026lt;img id=\u0026#34;farnworth \u0026#34; class=\u0026#34;human\u0026#34; src=\u0026#34;...\u0026#34; /\u0026gt; \u0026lt;ul class=\u0026#34;employees\u0026#34;\u0026gt; \u0026lt;li\u0026gt;\u0026lt;img id=\u0026#34;bender\u0026#34; class=\u0026#34;robot\u0026#34; src=\u0026#34;...\u0026#34; /\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;img id=\u0026#34;fry\u0026#34; class=\u0026#34;human\u0026#34; src=\u0026#34;...\u0026#34; /\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;img id=\u0026#34;leela\u0026#34; class=\u0026#34;mutant\u0026#34; src=\u0026#34;...\u0026#34; /\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; HTML my $dom = Mojo::DOM-\u0026gt;new( $html ); say $dom-\u0026gt;find( $selector )-\u0026gt;join( \u0026#34;\\n\u0026#34; ); 不用参数运行这个程序，我看到所有的 img 标签：\n$ perl html.pl \u0026lt;img class=\u0026#34;human\u0026#34; id=\u0026#34;farnworth \u0026#34; src=\u0026#34;...\u0026#34;\u0026gt; \u0026lt;img class=\u0026#34;robot\u0026#34; id=\u0026#34;bender\u0026#34; src=\u0026#34;...\u0026#34;\u0026gt; \u0026lt;img class=\u0026#34;human\u0026#34; id=\u0026#34;fry\u0026#34; src=\u0026#34;...\u0026#34;\u0026gt; \u0026lt;img class=\u0026#34;mutant\u0026#34; id=\u0026#34;leela\u0026#34; src=\u0026#34;...\u0026#34;\u0026gt; 通过论证我可以选择我喜欢的任何部分。在这里，我得到以 li 标签开头的部件：\n$ perl html.pl li \u0026lt;li\u0026gt;\u0026lt;img class=\u0026#34;robot\u0026#34; id=\u0026#34;bender\u0026#34; src=\u0026#34;...\u0026#34;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;img class=\u0026#34;human\u0026#34; id=\u0026#34;fry\u0026#34; src=\u0026#34;...\u0026#34;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;img class=\u0026#34;mutant\u0026#34; id=\u0026#34;leela\u0026#34; src=\u0026#34;...\u0026#34;\u0026gt;\u0026lt;/li\u0026gt; 我可以选择具有某个类的所有图像：\n$ perl html.pl img.human \u0026lt;img class=\u0026#34;human\u0026#34; id=\u0026#34;farnworth \u0026#34; src=\u0026#34;...\u0026#34;\u0026gt; \u0026lt;img class=\u0026#34;human\u0026#34; id=\u0026#34;fry\u0026#34; src=\u0026#34;...\u0026#34;\u0026gt; 但是，如果我只想要列表中的人类图像怎么办？我必须努力工作。我指定了一个复合选择器，它指出 img 必须在 li 标签中：\n$ perl html.pl \u0026#34;li img.human\u0026#34; \u0026lt;img class=\u0026#34;human\u0026#34; id=\u0026#34;fry\u0026#34; src=\u0026#34;...\u0026#34;\u0026gt; 想象一下，更复杂的 HTML 与其他列表也有图像？我可以添加另一个选择器，说它必须在某种 ul 标签中：\n$ perl html.pl \u0026#34;ul.employees li img.human\u0026#34; \u0026lt;img class=\u0026#34;human\u0026#34; id=\u0026#34;fry\u0026#34; src=\u0026#34;...\u0026#34;\u0026gt; 如果这些标签之间没有任何内容。我可以将选择器与 \u0026gt; 连接，以表示那些应该是直接的孩子而不是后代：\n$ perl html.pl \u0026#34;ul.employees \u0026gt; li \u0026gt; img.human\u0026#34; \u0026lt;img class=\u0026#34;human\u0026#34; id=\u0026#34;fry\u0026#34; src=\u0026#34;...\u0026#34;\u0026gt; 现在，考虑一下我在那里做了多少工作。几乎没有。我创建了一个 DOM 对象，应用了一个选择器，并且我已经隔离了部分数据。这与我以前做过的努力是一回事。这种方式更好，而不是更多的工作。这就是我喜欢 Mojolicious 的原因！\n那些新的表情符号怎么样？ 在 Perl v5.26 中写关于 Unicode 9 更新时，我想知道我可以展示哪些内容可能很有趣。怎么弄清楚哪个新的表情符号出现了？\n我的第一次尝试只是遍历每个字符并比较各种 Unicode 属性，以查看哪些代码编号从 Unassigned 更改为 Present_In。那很好，但后来我发现有人已经列出了所有新的表情符号，我可以抓取他们的网站。\n我不会解释这个程序中的所有内容。相信我使用 Mojo::UserAgent 来获取数据，提取 DOM，并使用复合选择器 ul:not( [class] ) li a 找到我想要的文本。其余的仅仅是对提取的列表进行转换。那些 map 和 join 来自 Mojo::Collection。这比使用正则表达式更容易实现：\nuse v5.28; use utf8; use strict; use warnings; use open qw(:std :utf8); use charnames qw(); use Mojo::UserAgent; my $ua = Mojo::UserAgent-\u0026gt;new; my $url = \u0026#39;https://blog.emojipedia.org/new-unicode-9-emojis/\u0026#39;; my $tx = $ua-\u0026gt;get( $url ); die \u0026#34;That didn\u0026#39;t work!\\n\u0026#34; if $tx-\u0026gt;error; say $tx-\u0026gt;result -\u0026gt;dom -\u0026gt;find( \u0026#39;ul:not( [class] ) li a\u0026#39; ) -\u0026gt;map( \u0026#39;text\u0026#39; ) -\u0026gt;map( sub { my $c = substr $_, 0, 1; [ $c, ord($c), charnames::viacode( ord($c) ) ] }) -\u0026gt;sort( sub { $a-\u0026gt;[1] \u0026lt;=\u0026gt; $b-\u0026gt;[1] } ) -\u0026gt;map( sub { sprintf \u0026#39;%s (U+%05X) %s\u0026#39;, $_-\u0026gt;@* } ) -\u0026gt;join( \u0026#34;\\n\u0026#34; ); 这是一个很好的列表，如下所示：\n🕺 (U+1F57A) MAN DANCING 🖤 (U+1F5A4) BLACK HEART 🛑 (U+1F6D1) OCTAGONAL SIGN 🛒 (U+1F6D2) SHOPPING TROLLEY 🛴 (U+1F6F4) SCOOTER 🛵 (U+1F6F5) MOTOR SCOOTER 🛶 (U+1F6F6) CANOE 我使用相同的程序来查找 v5.28 中的 Unicode 10 更新。\n从表中提取列 没有留下深刻印象？用 CSS 选择器切表怎么样？这是一个包含ID，名称和分数列的短表。我想加总所有的分数。\n我不害怕用正则表达式做这个（再次强调！）但是 Mojo::DOM 更容易。复合选择器按类查找表，选择每一行，并按位置寻址表格单元格（在本例中为：:last-child）：\nuse v5.26; use utf8; use strict; use warnings; use List::Util qw(sum); use Mojo::DOM; my $html = \u0026lt;\u0026lt;~\u0026#39;HTML\u0026#39;; \u0026lt;table class=\u0026#34;scores\u0026#34;\u0026gt; \u0026lt;tr\u0026gt;\u0026lt;th\u0026gt;ID\u0026lt;/th\u0026gt;\u0026lt;th\u0026gt;Name\u0026lt;/th\u0026gt;\u0026lt;th\u0026gt;Score\u0026lt;/th\u0026gt;\u0026lt;/tr\u0026gt; \u0026lt;tr\u0026gt;\u0026lt;td\u0026gt;1\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Nibbler\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;1023\u0026lt;/td\u0026gt;\u0026lt;/tr\u0026gt; \u0026lt;tr\u0026gt;\u0026lt;td\u0026gt;27\u0026lt;/td\u0026gt;\u0026lt;td\u0026gt;Scruffy\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;39\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;tr\u0026gt;\u0026lt;td\u0026gt;5\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Zoidberg\u0026lt;/td\u0026gt;\u0026lt;td\u0026gt;5834\u0026lt;/td\u0026gt;\u0026lt;/tr\u0026gt; \u0026lt;/table\u0026gt; HTML my @scores = Mojo::DOM-\u0026gt;new( $html ) -\u0026gt;find( \u0026#39;table.scores \u0026gt; tr \u0026gt; td:last-child\u0026#39; ) -\u0026gt;map( \u0026#39;text\u0026#39; ) -\u0026gt;each ; my $grand = sum( @scores ); say \u0026#34;Grand total: $grand\u0026#34;; 结论 即使对于像我这样的老程序员来说，通过 Mojolicious 应用的 CSS 选择器处理 HTML 比我之前做的要容易得多（这比过去做得简单得多）。通过创建复合选择器的一点技巧，我可以得到我想要的任何部分。\n"},"name":"第五天 - 复合选择器比正则表达式更容易","published":"2018-12-05T21:34:46Z","summary":"当人们告诉我我不能（他们的意思是不应该）用正则表达式解析 HTML 时，我说“拿酒来”。这不仅仅是技巧或态度，而是方便。以正确的方式做到并不总是那么容易（我记得 HTML 0.9 是一个大问题）。最近，我一直在使用 Mojo::DOM 为我做这件事。它比旧的，权宜之计更容易。\n诀窍始终是隔离感兴趣的 HTML。我可以做到这一点切除有趣部分周围的所有数据：\nmy $html = ...; $html =~ s/.*?\u0026lt;table class=\u0026#34;foo\u0026#34;.*?\u0026gt;//; $html =~ s/\u0026lt;\\/table\u0026gt;.*//; 现在我不必解析所有的 HTML;我可以考虑一下表格。即使这是权宜之计，也不是那么好。在我用更好的东西替换它之前，我会快速绕道而行。\n层叠样式表 您可能知道层叠样式表（CSS）使你的网页看起来很漂亮（但不是我的，真的）。您可以将元数据添加到标记上：\n\u0026lt;img id=\u0026#34;bender\u0026#34; class=\u0026#34;robot\u0026#34; src=\u0026#34;...\u0026#34; /\u0026gt; \u0026lt;img id=\u0026#34;fry\u0026#34; class=\u0026#34;human\u0026#34; src=\u0026#34;...\u0026#34; /\u0026gt; \u0026lt;img id=\u0026#34;leela\u0026#34; class=\u0026#34;mutant\u0026#34; src=\u0026#34;...\u0026#34; /\u0026gt; CSS 规则可以通过其 ID 或类来处理这些项目以将样式应用于它们。这个寻址是一个“选择器”，拥有比我更好的技能的人使用这些来使演示非常漂亮：\nimg#fry { border: 1px; } img.robot { margin: 20px; } HTML 可能有点复杂。也许那些有趣的标签在列表中。这包裹了数据的另一层 HTML 结构：\n\u0026lt;ul class=\u0026#34;employees\u0026#34;\u0026gt; \u0026lt;li\u0026gt;\u0026lt;img id=\u0026#34;bender\u0026#34; class=\u0026#34;robot\u0026#34; src=\u0026#34;...\u0026#34; /\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;img id=\u0026#34;fry\u0026#34; class=\u0026#34;human\u0026#34; src=\u0026#34;...\u0026#34; /\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;img id=\u0026#34;leela\u0026#34; class=\u0026#34;mutant\u0026#34; src=\u0026#34;.","type":"entry","url":"http://localhost:1313/notes/compound-selectors-are-easier-than-regexes/"}