{"author":{"name":null,"type":"card","url":"https://ohmycloud.github.io/"},"content":{"html":"\u003cp\u003e使用 Perl 来完成一则文字逐字显示的动画。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"http://upload-images.jianshu.io/upload_images/326727-ab19925739b17550.gif?imageMogr2/auto-orient/strip\" alt=\"myth.gif\"\u003e\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003euse Win32::Console;\nuse Encode;\nuse 5.010;\nuse AnyEvent;\n\n \nuse Win32::Console::ANSI;\nuse Term::ANSIColor;\nmy @color    = qw( red  green  yellow  blue  magenta  cyan  white \n                   bright_black  bright_red  bright_green  bright_yellow \n\t\t\t\t   bright_blue   bright_magenta  bright_cyan   bright_white ansi0);\n\n\n#my @color= map {\u0026#39;ansi\u0026#39;.$_} (0..15);\n$|=1; #必须开启这个\nsystem(\u0026#34;mode con cols=135 lines=25\u0026#34;);\nmy $Out = new Win32::Console(STD_OUTPUT_HANDLE) || die;\nmy $cv = AnyEvent-\u0026gt;condvar;\nmy $count=0;\nmy $w; $w = AnyEvent-\u0026gt;timer(\n        after       =\u0026gt; 2, \n        interval =\u0026gt; 1,\n        cb =\u0026gt; sub {\n            $count++;\n\t\t\t\nmy ( $x, $y ) = $Out-\u0026gt;Cursor();\n$Out-\u0026gt;Cursor( $x+125, $y + 5,0,0);\n\n           while (\u0026lt;DATA\u0026gt;) {\n  s/ /　/g;\n  chomp;\n  $a=decode(\u0026#39;gb2312\u0026#39;,$_);\n  @words=$a=~m/(.)/g;\n  \n\n  foreach $word (@words) {  \n         $c = $color[int rand @color];\n\t\t print color \u0026#39;bold \u0026#39;.$c;\n         $Out-\u0026gt;Write(encode(\u0026#39;gb2312\u0026#39;,$word));\n         my ( $x, $y ) = $Out-\u0026gt;Cursor();\n         $Out-\u0026gt;Cursor( $x, $y + 1,0,1);\n\n         my ( $x, $y ) = $Out-\u0026gt;Cursor();\n         $Out-\u0026gt;Cursor( $x-2, $y,0,1);\n         select(undef,undef,undef,0.045);\n         }\n\nmy ( $x, $y ) = $Out-\u0026gt;Cursor();\n$Out-\u0026gt;Cursor( $x-2, $y-@words,0,0);\n}\n\t\t\t# system(\u0026#34;cls\u0026#34;);\n\t\t\t# say $count;\n\t\t\tseek(DATA,1565,0); # 句柄读到最后了就没有文本了，所以需要返回，其实DATA就是整个文件，是这个script的所有文本。\n\t\n            if ($count \u0026gt;= 1) {\n                undef $w; \n            }   \n        }   \n        );  \n$cv-\u0026gt;recv;\n__END__\n\n\n\n\n　　　　星月神话\n我的一生最美好的场景\n　\n就是遇见你\n　\n在人海茫茫中静静凝望着你\n　\n陌生又熟悉\n　\n尽管呼吸着同一天空的气息\n\n却无法拥抱到你\n　\n如果转换了时空身份和姓名\n　　　\n但愿认得你眼睛\n　\n千年之后的你会在哪里\n　\n身边有怎样风景\n　\n我们的故事并不算美丽\n　\n却如此难以忘记\n　 \n尽管呼吸着同一天空的气息\n　\n却无法拥抱到你\n　 \n如果转换了时空身份和姓名\n　\n但愿认得你眼睛\n　\n千年之后的你会在哪里\n　\n身边有怎样风景\n　\n我们的故事并不算美丽\n　\n却如此难以忘记\n　\n如果当初勇敢的在一起\n　 \n会不会不同结局\n　\n你会不会也有千言万语\n　\n埋在沉默的梦里　\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cimg src=\"http://upload-images.jianshu.io/upload_images/326727-b9a3ceef7bb01949.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"myth.png\"\u003e\u003c/p\u003e\n","text":"使用 Perl 来完成一则文字逐字显示的动画。\nuse Win32::Console; use Encode; use 5.010; use AnyEvent; use Win32::Console::ANSI; use Term::ANSIColor; my @color = qw( red green yellow blue magenta cyan white bright_black bright_red bright_green bright_yellow bright_blue bright_magenta bright_cyan bright_white ansi0); #my @color= map {\u0026#39;ansi\u0026#39;.$_} (0..15); $|=1; #必须开启这个 system(\u0026#34;mode con cols=135 lines=25\u0026#34;); my $Out = new Win32::Console(STD_OUTPUT_HANDLE) || die; my $cv = AnyEvent-\u0026gt;condvar; my $count=0; my $w; $w = AnyEvent-\u0026gt;timer( after =\u0026gt; 2, interval =\u0026gt; 1, cb =\u0026gt; sub { $count++; my ( $x, $y ) = $Out-\u0026gt;Cursor(); $Out-\u0026gt;Cursor( $x+125, $y + 5,0,0); while (\u0026lt;DATA\u0026gt;) { s/ /　/g; chomp; $a=decode(\u0026#39;gb2312\u0026#39;,$_); @words=$a=~m/(.)/g; foreach $word (@words) { $c = $color[int rand @color]; print color \u0026#39;bold \u0026#39;.$c; $Out-\u0026gt;Write(encode(\u0026#39;gb2312\u0026#39;,$word)); my ( $x, $y ) = $Out-\u0026gt;Cursor(); $Out-\u0026gt;Cursor( $x, $y + 1,0,1); my ( $x, $y ) = $Out-\u0026gt;Cursor(); $Out-\u0026gt;Cursor( $x-2, $y,0,1); select(undef,undef,undef,0.045); } my ( $x, $y ) = $Out-\u0026gt;Cursor(); $Out-\u0026gt;Cursor( $x-2, $y-@words,0,0); } # system(\u0026#34;cls\u0026#34;); # say $count; seek(DATA,1565,0); # 句柄读到最后了就没有文本了，所以需要返回，其实DATA就是整个文件，是这个script的所有文本。 if ($count \u0026gt;= 1) { undef $w; } } ); $cv-\u0026gt;recv; __END__ 星月神话 我的一生最美好的场景 就是遇见你 在人海茫茫中静静凝望着你 陌生又熟悉 尽管呼吸着同一天空的气息 却无法拥抱到你 如果转换了时空身份和姓名 但愿认得你眼睛 千年之后的你会在哪里 身边有怎样风景 我们的故事并不算美丽 却如此难以忘记 尽管呼吸着同一天空的气息 却无法拥抱到你 如果转换了时空身份和姓名 但愿认得你眼睛 千年之后的你会在哪里 身边有怎样风景 我们的故事并不算美丽 却如此难以忘记 如果当初勇敢的在一起 会不会不同结局 你会不会也有千言万语 埋在沉默的梦里　"},"name":"Perl 逐行显示动画","published":"2013-05-05T16:16:21Z","summary":"使用 Perl 来完成一则文字逐字显示的动画。\nuse Win32::Console; use Encode; use 5.010; use AnyEvent; use Win32::Console::ANSI; use Term::ANSIColor; my @color = qw( red green yellow blue magenta cyan white bright_black bright_red bright_green bright_yellow bright_blue bright_magenta bright_cyan bright_white ansi0); #my @color= map {\u0026#39;ansi\u0026#39;.$_} (0..15); $|=1; #必须开启这个 system(\u0026#34;mode con cols=135 lines=25\u0026#34;); my $Out = new Win32::Console(STD_OUTPUT_HANDLE) || die; my $cv = AnyEvent-\u0026gt;condvar; my $count=0; my $w; $w = AnyEvent-\u0026gt;timer( after =\u0026gt; 2, interval =\u0026gt; 1, cb =\u0026gt; sub { $count++; my ( $x, $y ) = $Out-\u0026gt;Cursor(); $Out-\u0026gt;Cursor( $x+125, $y + 5,0,0); while (\u0026lt;DATA\u0026gt;) { s/ /　/g; chomp; $a=decode(\u0026#39;gb2312\u0026#39;,$_); @words=$a=~m/(.","type":"entry","url":"https://ohmycloud.github.io/notes/perl-%E5%8A%A8%E7%94%BB%E4%B9%8B%E6%98%9F%E6%9C%88%E7%A5%9E%E8%AF%9D/"}