<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">

    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
    
    
    

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5">

    
    <meta name="referrer" content="no-referrer">

    <title>
        
            焉知非鱼 ❚
        
    </title>

    
    


    
    
    
    

    
    
    
    

    
    
    

    
    
    
    <style>
     
     
     :root {
         --theme-color: #ac4142;
         --theme-color-light: rgba(172, 65, 66, 0.2);
     }
     
     html {
         line-height: 1.5;
     }
    </style>

    
    

    
    
    
    
    <link rel="stylesheet" href="/css/refined.min.7f6d3ee611034e4ebcbc063f1db3bc042fecdc8901afbedad80ff02bae409204.css">
    
    <link rel="preload" href="/css/refined.min.7f6d3ee611034e4ebcbc063f1db3bc042fecdc8901afbedad80ff02bae409204.css" as="style">

    



    
        <style>
         
         /* Background */ .chroma { background-color: #ffffff }
/* Error */ .chroma .err { color: #a61717; background-color: #e3d2d2 }
/* LineTableTD */ .chroma .lntd { vertical-align: top; padding: 0; margin: 0; border: 0; }
/* LineTable */ .chroma .lntable { border-spacing: 0; padding: 0; margin: 0; border: 0; width: auto; overflow: auto; display: block; }
/* LineHighlight */ .chroma .hl { display: block; width: 100%;background-color: #ffffcc }
/* LineNumbersTable */ .chroma .lnt { margin-right: 0.4em; padding: 0 0.4em 0 0.4em; }
/* LineNumbers */ .chroma .ln { margin-right: 0.4em; padding: 0 0.4em 0 0.4em; }
/* Keyword */ .chroma .k { color: #000000; font-weight: bold }
/* KeywordConstant */ .chroma .kc { color: #000000; font-weight: bold }
/* KeywordDeclaration */ .chroma .kd { color: #000000; font-weight: bold }
/* KeywordNamespace */ .chroma .kn { color: #000000; font-weight: bold }
/* KeywordPseudo */ .chroma .kp { color: #000000; font-weight: bold }
/* KeywordReserved */ .chroma .kr { color: #000000; font-weight: bold }
/* KeywordType */ .chroma .kt { color: #445588; font-weight: bold }
/* NameAttribute */ .chroma .na { color: #008080 }
/* NameBuiltin */ .chroma .nb { color: #0086b3 }
/* NameBuiltinPseudo */ .chroma .bp { color: #999999 }
/* NameClass */ .chroma .nc { color: #445588; font-weight: bold }
/* NameConstant */ .chroma .no { color: #008080 }
/* NameDecorator */ .chroma .nd { color: #3c5d5d; font-weight: bold }
/* NameEntity */ .chroma .ni { color: #800080 }
/* NameException */ .chroma .ne { color: #990000; font-weight: bold }
/* NameFunction */ .chroma .nf { color: #990000; font-weight: bold }
/* NameLabel */ .chroma .nl { color: #990000; font-weight: bold }
/* NameNamespace */ .chroma .nn { color: #555555 }
/* NameTag */ .chroma .nt { color: #000080 }
/* NameVariable */ .chroma .nv { color: #008080 }
/* NameVariableClass */ .chroma .vc { color: #008080 }
/* NameVariableGlobal */ .chroma .vg { color: #008080 }
/* NameVariableInstance */ .chroma .vi { color: #008080 }
/* LiteralString */ .chroma .s { color: #dd1144 }
/* LiteralStringAffix */ .chroma .sa { color: #dd1144 }
/* LiteralStringBacktick */ .chroma .sb { color: #dd1144 }
/* LiteralStringChar */ .chroma .sc { color: #dd1144 }
/* LiteralStringDelimiter */ .chroma .dl { color: #dd1144 }
/* LiteralStringDoc */ .chroma .sd { color: #dd1144 }
/* LiteralStringDouble */ .chroma .s2 { color: #dd1144 }
/* LiteralStringEscape */ .chroma .se { color: #dd1144 }
/* LiteralStringHeredoc */ .chroma .sh { color: #dd1144 }
/* LiteralStringInterpol */ .chroma .si { color: #dd1144 }
/* LiteralStringOther */ .chroma .sx { color: #dd1144 }
/* LiteralStringRegex */ .chroma .sr { color: #009926 }
/* LiteralStringSingle */ .chroma .s1 { color: #dd1144 }
/* LiteralStringSymbol */ .chroma .ss { color: #990073 }
/* LiteralNumber */ .chroma .m { color: #009999 }
/* LiteralNumberBin */ .chroma .mb { color: #009999 }
/* LiteralNumberFloat */ .chroma .mf { color: #009999 }
/* LiteralNumberHex */ .chroma .mh { color: #009999 }
/* LiteralNumberInteger */ .chroma .mi { color: #009999 }
/* LiteralNumberIntegerLong */ .chroma .il { color: #009999 }
/* LiteralNumberOct */ .chroma .mo { color: #009999 }
/* Operator */ .chroma .o { color: #000000; font-weight: bold }
/* OperatorWord */ .chroma .ow { color: #000000; font-weight: bold }
/* Comment */ .chroma .c { color: #999988; font-style: italic }
/* CommentHashbang */ .chroma .ch { color: #999988; font-style: italic }
/* CommentMultiline */ .chroma .cm { color: #999988; font-style: italic }
/* CommentSingle */ .chroma .c1 { color: #999988; font-style: italic }
/* CommentSpecial */ .chroma .cs { color: #999999; font-weight: bold; font-style: italic }
/* CommentPreproc */ .chroma .cp { color: #999999; font-weight: bold; font-style: italic }
/* CommentPreprocFile */ .chroma .cpf { color: #999999; font-weight: bold; font-style: italic }
/* GenericDeleted */ .chroma .gd { color: #000000; background-color: #ffdddd }
/* GenericEmph */ .chroma .ge { color: #000000; font-style: italic }
/* GenericError */ .chroma .gr { color: #aa0000 }
/* GenericHeading */ .chroma .gh { color: #999999 }
/* GenericInserted */ .chroma .gi { color: #000000; background-color: #ddffdd }
/* GenericOutput */ .chroma .go { color: #888888 }
/* GenericPrompt */ .chroma .gp { color: #555555 }
/* GenericStrong */ .chroma .gs { font-weight: bold }
/* GenericSubheading */ .chroma .gu { color: #aaaaaa }
/* GenericTraceback */ .chroma .gt { color: #aa0000 }
/* GenericUnderline */ .chroma .gl { text-decoration: underline }
/* TextWhitespace */ .chroma .w { color: #bbbbbb }

         
         /* Overrides on top of the theme and Chroma CSS */
/* Chroma-based lines highlighting in code blocks */
.chroma .hl {
    background-color: #e8e8e8;
    /* Extend highlight up to 100 characters (assuming that the code blocks never have more than 100 characters in a line) */
    min-width: 100ch;
}
/* GenericHeading */ .chroma .gh { color: #999999; font-weight: bold }
/* GenericSubheading */ .chroma .gu { color: #aaaaaa; font-weight: bold }

         
        </style>
    

    

    
    
    

    
    <script src="/js/responsive-nav-orig.min.e2b5f2a956b488f466da513820636134defdc38b90ed566248960593f2bb4ba5.js"></script>
    
    <link rel="preload" href="/js/responsive-nav-orig.min.e2b5f2a956b488f466da513820636134defdc38b90ed566248960593f2bb4ba5.js" as="script">

    
    
    <script defer src="/js/libs/fa/fontawesome-all.min.08916ac0fd078adfb58edc890460e2c8990729aee02bca7586404b56805f5219.js"></script>
    
    <link rel="preload" href="/js/libs/fa/fontawesome-all.min.08916ac0fd078adfb58edc890460e2c8990729aee02bca7586404b56805f5219.js" as="script">

    

    

    
    
    

    
    
<!-- rel="me" links for IndieAuth -->







    
 
<meta property="og:title" content="焉知非鱼" />
<meta property="og:description"
      content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://ohmycloud.github.io/" />


    
        <meta property="og:updated_time" content="2022-12-27T00:00:00&#43;00:00"/>
    












     <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="焉知非鱼"/>
<meta name="twitter:description" content=""/>


    
    
    <link rel="alternate" type="application/rss+xml" href="https://ohmycloud.github.io/index.xml" title="Rss for 焉知非鱼" />
    <link rel="alternate" type="application/atom+xml" href="https://ohmycloud.github.io/atom.xml" title="Atom for 焉知非鱼" />
    <link rel="alternate" type="application/jf2feed+json" href="https://ohmycloud.github.io/jf2feed.json" title="Jf2feed for 焉知非鱼" />
    
     






    
    
    
    <meta name="hugo-build-date" content="2024-03-01T16:16:06Z"/>
    <meta name="hugo-commit-hash" content="312735366b20d64bd61bff8627f593749f86c964"/>
    <meta name="generator" content="Hugo 0.123.7">
</head>


    
        <body lang="en">
    

        
        <div class="border" id="home"></div>

        <div class="wrapper">   
            
<nav id="nav" class="nav-collapse opened" aria-hidden="false">
    <ul class="navbar">
        <li><a class="active" href="/">Home</a></li>
        
            
                <li><a class="" href="https://ohmycloud.github.io/posts/">Posts</a></li>
            
        
            
                <li><a class="" href="https://ohmycloud.github.io/notes/">Notes</a></li>
            
        
        
            <li><a class="" href="https://ohmycloud.github.io/search/">Search</a></li>
        
    </ul>
</nav>

            <div class="container">
                <header class="masthead">
                    <div class="masthead-title no-text-decoration">
                        <a href="/">焉知非鱼</a> <span class="blinking-cursor">❚</span>
                    </div>
                    <div class="masthead-tagline">
                        Wait the light to fall
                    </div>
                </header>

                

<div class="posts h-feed">
    <header>
        
        <data class="u-url" value="https://ohmycloud.github.io/"></data>
         





        <data class="p-name" value="焉知非鱼"></data>
    </header>
    
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/testing-dancer/'> 测试 Dancer</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-20T16:16:47+0000" class="dt-published">Thu Dec 20, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>Dancer（及其他）PSGI 应用程序的作者很可能习惯于测试与Plack::Test，虽然这是一个崇敬的选择，这是很裸机。
在去年出现的过程中，我写了一篇关于Test::Mojo的文章，展示了许多简单易用（我敢说）有趣的方法，你可以用它来测试你的Mojolicious应用程序。如果你错过了，那就去看看吧。
我希望至少有一些人能够阅读并思考，“我很乐意使用它，但我不会使用Mojolicious！”; 好吧，你很幸运！只需要一点角色来弥补差距，你也可以使用Test::Mojo来测试你的PSGI应用程序！
安装PSGI应用程序 Mojolicious本身不使用PSGI协议，因为它没有提供某些特性，而且某些异步操作也是必需的。也就是说，你可以使用Mojo::Server::PSGI在PSGI服务器上提供Mojolicious应用程序。当你的基于Mojolicious的应用程序检测到它已在PSGI服务器（例如plackup或Starman）下启动时，将自动使用此Mojolicious核心模块。
虽然在Mojo应用程序和PSGI服务器之间进行转换是核心功能，但相反，在PSGI应用程序和Mojolicious服务器（或应用程序，如你所见）之间进行转换可作为第三方模块使用。Mojolicious::Plugin::MountPSGI，顾名思义，可以将PSGI应用程序安装到基于Mojolicious的应用程序中。为此，它构建了一个新的，空的Mojolicious应用程序，在将任何请求转移到PSGI环境之前，将其转移到任何mount-ed应用程序。
使用Test::Mojo进行测试 一旦你能做到这一点，采用PSGI应用程序，用MountPSGI包装它，并将其设置为与Test::Mojo一起使用的应用程序是微不足道的。尽管如此，为了让它变得更加容易，在Test::Mojo::Role::PSGI中已经完成了所有这些工作。
与任何Mojolicious Role一样，我们可以使用应用角色with_roles创建（主要是匿名）子类。你可以使用快捷方式+代替Test::Mojo::Role::。
use Test::Mojo; my $class = Test::Mojo-&gt;with_roles(&#39;+PSGI&#39;); 然后使用PSGI应用程序的路径实例化该角色，或者使用PSGI应用程序本身。
由于你使用的是角色，这些角色都与组合有关，因此你还可以应用可能在CPAN上找到的其他角色。
一个例子 作为一个例子，假设我们有一个简单的应用程序脚本（命名app.psgi），可以以不同的方式渲染 &quot;hello world&quot;或&quot;hello $user&quot; 。我将允许纯文本响应，JSON和模板化HTML（使用简单的模板来保持这种简洁）。
use Dancer2; set template =&gt; &#39;simple&#39;; set views =&gt; &#39;.&#39;; any &#39;/text&#39; =&gt; sub { my $name = param(&#39;name&#39;) // &#39;world&#39;; send_as plain =&gt; &#34;hello $name&#34;; }; any &#39;/data&#39; =&gt; sub { my $name = param(&#39;name&#39;) // &#39;world&#39;; send_as JSON =&gt; { hello =&gt; $name }; }; any &#39;/html&#39; =&gt; sub { my $name = param(&#39;name&#39;) // &#39;world&#39;; template &#39;hello&#39; =&gt; { name =&gt; $name }; }; start; 而模板（hello.</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/testing-dancer/'
               title="Read more about 测试 Dancer">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 测试 Dancer</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/using-command-line-options-in-raku-one-liners/'> 🎄 20/25. 在 Raku 单行程序中使用命令行选项</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-20T09:13:47+0000" class="dt-published">Thu Dec 20, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>欢迎来到 Raku One-Liner Advent Calendar 的第20天！到目前为止，我们创建了大约25种不同的单行程序，但从未讨论过Rakudo Raku编译器为我们提供的命令行选项。
-e 使用（Rakudo）Raku时的第一个选项是-e。它需要一个带有Raku单行程序的字符串并立即执行。
例如，打印当前Raku规范的版本：
$ raku -e&#39;$ * PERL.version.say&#39; v6.c 注意不要使用Perl 5.10+样式的大写字母 -E，它与-e相同，但也激活诸如 say 之类的功能。在Raku中，选项始终为小写。
-n 此选项为每行输入数据重复运行代码。当您想要处理文件时，这非常方便。例如，这是一个单行程序，将行中的值相加并打印总和：
raku -ne&#39;say [+] .split(&#34; &#34;)&#39; data.txt 如果data.txt文件包含以下内容：
10 20 30 40 1 2 3 4 5 6 7 8 然后单行程序的结果是：
100 10 26 这与你是否使用shell的输入重定向没有区别; 以下单行程序也有效：
raku -ne&#39;say [+] .split(&#34; &#34;)&#39; &lt; data.txt 确保将 e 选项放在选项列表中的最后一个（因此，不是raku -en'...'）或拆分选项：raku -n -e'...'。
-p 此选项类似于-n，但在每次迭代后打印主题变量。
以下单行程序反转文件中的行并将其打印到控制台：
raku -npe&#39;.=flip&#39; data.txt 对于相同的输入文件，结果将如下所示：
04 03 02 01 4 3 2 1 8 7 6 5 请注意，您必须更新$_变量，因此键入.</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/using-command-line-options-in-raku-one-liners/'
               title="Read more about 🎄 20/25. 在 Raku 单行程序中使用命令行选项">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 🎄 20/25. 在 Raku 单行程序中使用命令行选项</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/git%E5%92%8Cssh%E7%AC%94%E8%AE%B0/'> ssh 和 git 笔记</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-19T16:16:21+0000" class="dt-published">Wed Dec 19, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>把旧电脑上的 .ssh 目录拷贝到新电脑上, 继续使用之前的 ssh 免密码登录提示 「权限不够或需要输入密码」， 解决办法：
chmod 755 ~/.ssh/ chmod 600 ~/.ssh/id_rsa ~/.ssh/id_rsa.pub chmod 644 ~/.ssh/known_hosts git 回滚 git log # 查看提交的 commit 历史 git reset –hard 8ff24a6803173208f3e606e32dfcf82db9ac84d8 git 瘦身 http://blog.mallol.cn/如何给git仓库瘦身删除大文件.html
git pull 不输入密码 # vi .git/config [remote &#34;origin&#34;] url = https://Username:Password@github.com/myRepoDir/myRepo.git scp 复制文件 - 权限拒绝 ssh 可以登陆，但是 scp 复制文件时却不行：
$ sudo scp -P 52113 ubuntu@123.206.136.59:/tmp/*.txt . Permission denied (publickey) 在 ~/.ssh/config 文件中添加：
Host 123.206.136.59 IdentityFile ~/.ssh/ohmycloud </p>

    </div>

    
    
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/you-only-export-twice/'> 你只需导出俩次</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-19T16:16:21+0000" class="dt-published">Wed Dec 19, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>我的Yancy文档站点已经构建，具有自定义登录页面和POD查看器，我只需要部署该站点。我可以使用hypnotoad部署网站，Mojolicious的preforking服务器进行热部署，但这需要我有一台服务器并保持在线。如果我可以像Github一样部署静态网站，就像所有酷炫的人一样，那就好多了。
但要做到这一点，我需要把我的动态网站变成一个静态网站，这是不可能的！真的是吗？为什么我问我自己，我就是那个开辟道路的人：Mojolicious导出命令。
export 命令将一组路径作为输入，获取这些页面，并将结果写入目录。然后它会查看这些页面上的所有链接并编写这些页面。通过这种方式，它将整个 Mojolicious 网站导出为静态文件。
我需要做的就是能够使用 export 命令来安装它：
$ cpanm Mojolicious::Command::export 一旦安装完毕，我们现在在我们的应用程序中有了 export 命令，我可以像任何其他 Mojolicious 命令一样使用它。
$ ./myapp.pl export 默认情况下，export命令尝试导出主页（/）并从那里递归工作。如果我的页面没有从其他地方链接，我应该（a）可能添加一些指向该页面的链接，但是（b）可以将它添加到要导出的页面列表中：
$ ./myapp.pl export / /private 由于我在我的个人网站的目录下托管这个网站，我需要使用该--base选项重写所有内部链接到正确的路径，我可以使用该--to选项直接写入Web服务器的目录：
$ ./myapp.pl export --base /yancy --to /var/www/preaction.me/yancy 而且，如果我愿意，我可以使用Mojolicious Config插件 来更改默认设置，包括要导出的页面，导出目录和 base URL。
最好的部分是export命令处理重定向。因此，当我们使用PODViewer插件并重定向到MetaCPAN时，页面会根据重定向的位置进行更新！
将来，如果将此命令设置为插件，以便它可以具有用于自定义导出内容的钩子或对断开链接的附加检查，那将是很好的。如果有人有兴趣帮助完成这项工作，请告诉我，我可以帮助他们开始工作！
现在，通过Yancy CMS，PODViewer插件和Mojolicious导出命令，我为Yancy提供了一个好看的文档网站！查看完整的应用程序。</p>

    </div>

    
    
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/redis/'> 给 redis 设置密码</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-19T16:16:21+0000" class="dt-published">Wed Dec 19, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>brew install redis
To have launchd start redis now and restart at login: brew services start redis Or, if you don&#39;t want/need a background service you can just run: redis-server /usr/local/etc/redis.conf 可以编辑 /usr/local/etc/redis.conf， 设置 redis 密码 requirepass
启动：
# redis-server redis-server /usr/local/etc/redis.conf 127.0.0.1:6379&gt; pfadd mykey a b c (integer) 1 127.0.0.1:6379&gt; pfcount mykey (integer) 3 127.0.0.1:6379&gt; pfadd mykey2 a b c c d (integer) 1 127.0.0.1:6379&gt; pfcount mykey2 (integer) 4 127.</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/redis/'
               title="Read more about 给 redis 设置密码">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 给 redis 设置密码</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/using-map-and-seq-to-compute-the-value-of-pi-in-perl6/'> 🎄 19/25. 在 Raku 中使用 map 和 Seq 计算 π 的值</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-19T09:19:29+0000" class="dt-published">Wed Dec 19, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>欢迎来到Raku One-Liner Advent Calendar的第19天！今天，我们将使用两种不同的方法计算π的值。这篇博文的目的是使用不同的方法来生成数字序列。
Pre-party 当然，在 Raku 中你不需要自己计算 π 的值，因为 Raku 给出了一些π和pi 形式的预定义常数，以及双倍的值τ和tau。
但为了演示 map 和序列的用法，让我们实现一种最简单的算法来计算 π：
这是检查答案的草案代码：
my $pi = 1; my $sign = 1; for 1..10000 -&gt; $k { $sign *= -1; $pi += $sign / ($k * 2 + 1); } say 4 * $pi; 第1部分 现在，让我们使用map来使答案紧凑一点。最好使公式更通用：
这是我们的第一个单行程序：
say 4 * [+] (^1000).map({(-1) ** $_ / (2 * $_ + 1)}) 我希望你能理解这段代码里的所有东西。我们在今年的 Advent Calendar 的前几天介绍了该答案的不同部分，例如，在第11天的帖子中。
但是，我仍然想强调你需要-1周围的圆括号。如果输入-1 ** $_，则总是得到 -1，因为减号前缀应用于取幂的结果。所以正确的代码是(-1) ** $_。</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/using-map-and-seq-to-compute-the-value-of-pi-in-perl6/'
               title="Read more about 🎄 19/25. 在 Raku 中使用 map 和 Seq 计算 π 的值">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 🎄 19/25. 在 Raku 中使用 map 和 Seq 计算 π 的值</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/%E5%9C%A8dancer%E4%B8%AD%E4%BD%BF%E7%94%A8minion/'> 第十六天 - 在 Dancer 中使用 Minion</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-18T21:19:48+0000" class="dt-published">Tue Dec 18, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>在$work 中，我们使用 Dancer 构建了一个 API，用于生成 PDF 文档和 XML 文件。此 API 是保险登记系统的重要组成部分：生成PDF以立即在Web浏览器中传送给客户端，并且XML一旦可用就会立即传送给运营商。由于XML通常需要花费大量时间来生成，因此在后台生成作业，以免在较长时间内占用应用程序服务器。完成后，开发了一个自行开发的流程管理系统，通过fork() 进程工作，跟踪其 pid，并希望我们以后可以成功地获得完成的过程。
这种方法存在一些问题：
很脆弱 它没有规模 作为开发人员搞砸某事太容易了 在2019年，我们不得不加大承担更大的工作量。目前的解决方案根本无法处理我们预计需要处理的工作量。直到遇见了 Minion。
**注意：**本文中使用的技术在 Dancer或 Dancer2同样适用。
为何选择Minion？ 我们研究了Minion的几种替代品，包括beanstalkd和celeryd。然而，使用其中任何一个意味着涉及我们已经过度征用的基础设施团队; 使用Minion允许我们使用我的团队已经拥有的专业知识，而不必向其他人提供帮助。从开发的角度来看，使用Perl开发的产品为我们提供了最快的实施时间。
扩展我们现有的设置几乎是不可能的。处理我们 folk 的进程所消耗的资源不仅难以处理，而且不可能在多个服务器上运行作业。从Minion开始也给了我们一个急需的机会来清理一些需要重构的代码。通过最少量的工作，我们能够清理我们的XML渲染代码并使其在Minion中运行。通过此清理，我们可以更轻松地获取有关XML渲染作业消耗了多少内存和CPU的信息。这些信息对于我们规划未来容量至关重要。
进入 Minion 既然我们是一个 Dancer 商店，而不是 Mojolicious，你从Mojolicious获得的与Minion工作的很多东西都不适合我们。鉴于我们还在商业模式中共享一些基于Minion的代码，我们必须围绕Minion构建一些自己的管道：
package MyJob::JobQueue; use Moose; use Minion; use MyJob::Models::FooBar; with &#39;MyJob::Roles::ConfigReader&#39;; has &#39;runner&#39; =&gt; ( is =&gt; &#39;ro&#39;, isa =&gt; &#39;Minion&#39;, lazy =&gt; 1, default =&gt; sub( $self ) { $ENV{ MOJO_PUBSUB_EXPERIMENTAL } = 1; Minion-&gt;new( mysql =&gt; MyJob::DBConnectionManager-&gt;new-&gt;get_connection_uri({ db_type =&gt; &#39;feeds&#39;, io_type =&gt; &#39;rw&#39;, })); }, ); 我们在Minion周围包含了一个简单的Moose类，以便使用我们想要的额外功能轻松添加到任何类或Dancer应用程序。</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/%E5%9C%A8dancer%E4%B8%AD%E4%BD%BF%E7%94%A8minion/'
               title="Read more about 第十六天 - 在 Dancer 中使用 Minion">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 第十六天 - 在 Dancer 中使用 Minion</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/a-view-to-a-pod/'> 第十八天 - POD 一览</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-18T12:28:38+0000" class="dt-published">Tue Dec 18, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>第18天：对POD的看法 为了让Yancy拥有一个好的文档站点，实际上它需要渲染文档。要在Mojolicious中渲染Perl文档 ，我可以使用 PODViewer 插件（现已弃用的PODRenderer 插件的一个分支 ）。
将PODViewer添加到现有站点很容易！
use Mojolicious::Lite; plugin &#39;PODViewer&#39;; app-&gt;start; 现在，当我访问http://127.0.0.1:3000/perldoc 时我看到了Mojolicious的 POD::Guides。这很棒，但是这是 Yancy 的文档站点，而不是 Mojolicious 的。让我们调整一些配置来使 Yancy 成为默认模块，并且只允许查看Yancy 模块（尝试查看另一个模块会将用户重定向到MetaCPAN）。
use Mojolicious::Lite; plugin &#39;PODViewer&#39;, { default_module =&gt; &#39;Yancy&#39;, allow_modules =&gt; [qw( Yancy Mojolicious::Plugin::Yancy )], }; app-&gt;start; 在那里，现在Yancy文档显示在首页。
最后，让它看起来更好一些：文档肯定需要使用默认的站点布局，而一些额外的CSS也会使文档看起来好看多了！
use Mojolicious::Lite; plugin &#39;PODViewer&#39;, { default_module =&gt; &#39;Yancy&#39;, allow_modules =&gt; [qw( Yancy Mojolicious::Plugin::Yancy )], layout =&gt; &#39;default&#39;, }; app-&gt;start; __DATA__ @@ layouts/default.html.ep &lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;link rel=&#34;stylesheet&#34; href=&#34;/yancy/bootstrap.css&#34;&gt; &lt;style&gt; h1 { font-size: 2.</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/a-view-to-a-pod/'
               title="Read more about 第十八天 - POD 一览">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 第十八天 - POD 一览</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/renameing-files-with-raku/'> 🎄 18/25. 使用 Raku 重命名文件</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-18T09:16:49+0000" class="dt-published">Tue Dec 18, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>欢迎来到Raku One-Liner Advent Calendar的第18天！今天，将会有一个真正的单行程序，在某种意义上说，你要作为一个运维从终端中运行它。
我们的任务是重命名命令行参数中传递的所有文件，并以偏爱的格式提供文件序列号。以下是命令行的示例：
$ raku rename.pl * .jpg img_0000.jpg 在此示例中，当前目录中的所有图像文件将重命名为img_0001.jpg，img_0002.jpg等。
这是 Raku 中可能的解决方案：
@*ARGS[0..*-2].sort.map: *.Str.IO.rename(++@*ARGS[*-1]) 预定义的动态变量@*ARGS包含命令行中的参数。在上面的示例中，shell 将 *.jpg 掩码展开到文件列表中，因此数组中包含所有这些掩码。最后一个元素是重命名样本 img_0000.jpg。
请注意，与 Perl 5 不同，该变量称为 ARGS，而不是 ARGV。
为了遍历所有文件（并使用文件掩码跳过最后一个文件项），我们正在进行@*ARGS的切片。0..*-2 结构创建了索引范围以接收除了最后一个元素的所有元素。
然后对列表进行排序（原始的@*ARGS数组保持不变），我们使用map 方法迭代文件名 。
map 主体包含一个WhateveCode块 ; 它接受当前值的字符串表示形式，从中生成一个IO::Path对象，并调用 rename 方法。请注意，IO方法创建IO::Path类的对象; 而裸 IO是Raku对象系统层次结构中的一个角色。
最后，增量运算符++更改重命名样本（保存在@*ARGS 中的最后一个, 即 *-1 元素）。当操作符应用于字符串时，它会增加它的数字部分，因此我们得到 img_0001.jpg，img_0002.jpg等。
我希望 Raku 不会被称为 star-noise 语言 🙂 。尽管如此，明天还会有另一篇关于 Raku 的短篇小文！</p>

    </div>

    
    
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/a-pre-christmas-diet-for-mojolicious/'> 第十六天 - Mojolicious 之圣诞节前的开胃菜 - 儿童故事</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-17T21:12:02+0000" class="dt-published">Mon Dec 17, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>您刚刚阅读了 如何在浏览器中减轻体重， 并希望了解减少Mojo应用程序的效果。该过程的一部分是阻止浏览器请求几乎不变的文件。我花了一个充满咖啡因的下午试图用Mojolicious做到这一点。我一直在&rsquo;围绕房子，扰乱警报我直到最后才找到答案，有点像你最喜欢的圣诞节动画特别与一个小的林地生物叙述“Gruffalo的HTTP标题”。
儿童故事 我们心爱的小型林地生物需要显示一个森林日历，其中包含从数据库中提取的森林事件。Perl 可以获取事件数据并将其打包为JSON feed 流。Mojolicious 可以为每个用户准备具有正确 JSON feed 流的网页。使用一些JavaScript 库来显示 Web 日历，所有这些都可以在森林中使用。
除 JavaScript 库之外的所有内容都是轻量级的。每个人都知道, 如果不是每次都去下载 Javascript, 那么页面重载的速度会更快。那些库几个月都不会改变！如果只有客户端浏览器知道它可以使用上次下载的文件。
当然，秘诀是设置Cache-ControlHTTP 头的字段，但是怎样设置呢？
首先，有一匹马 &hellip;&hellip; 每个使用 Apache 的人都会考虑使用 mod_expires ，这看起来很容易，除了 Apache 没有被用来为网页提供服务。
&hellip;但是马儿提到了一些甜蜜的 Cache-Control指令可以咀嚼，同时继续在早先下载的一些HTTP缓存页面上吃草 。小动物继续前进。
&hellip;&hellip; 然后有一只蟾蜍 森林生物使用 Mojolicious附带的 Hypnotoad Web服务器来为其页面提供服务。他们发现它非常适合他们的树栖生产环境。
它可以设置HTTP标头将其转换为反向代理，但是流行的设置是将Hypnotoad 置于 Nginx 或Apache/mod_proxy后面。那些服务器应该让你玩Expires标题。但是蟾蜍没有完全具备这种特殊的啮齿动物所需要的东西。
抛开 - 不，我没有提到 Plack。也许如果我今年好，圣诞老人会 告诉我 应该如何使用它。可能与某事有关
Plack::Response-&gt;header(&#39;Expires&#39; =&gt; &#39;Tue, 25 Dec 2018 07:28:00 GMT&#39;); 但我不知道，我的叙述者也没有。
&hellip;&hellip; 然后有一个独角兽 嗯，这很容易。只需使用标准的 Mojo::Headers 模块来设置Expires标头。
可是等等！这为一个不是那么大的页面设置了它。我们毛茸茸的朋友只想阻止 JavaScript 文件每次都重新加载，这会破坏 Sciuridae 的移动体验。Hmmmm。</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/a-pre-christmas-diet-for-mojolicious/'
               title="Read more about 第十六天 - Mojolicious 之圣诞节前的开胃菜 - 儿童故事">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 第十六天 - Mojolicious 之圣诞节前的开胃菜 - 儿童故事</span>
            </a>
        </div>
    
</article>
      
    
</div>



                <footer>
                    

<div class="pagination no-text-decoration">
    
        <a class="pagination-item newer" href="/page/34/">Newer</a>
    
    
        <a class="pagination-item older" href="/page/36/">Older</a>
    
</div>




                    <ul class="no-bullets feed right inline">
    
        
        
            <li class="inline no-text-decoration">
                <a href="https://ohmycloud.github.io/index.xml">RSS</a>
            </li>
        
    
        
        
            <li class="inline no-text-decoration">
                <a href="https://ohmycloud.github.io/atom.xml">ATOM</a>
            </li>
        
    
        
        
    
</ul>
<div class="clear-float"></div>

                </footer>
                <hr />
            </div>               

            <footer> 
                

<ul class="social no-text-decoration">
    
</ul>










 
    
    



<p class="generated no-text-decoration">
    Generated using  <a href="https://gitlab.com/kaushalmodi/hugo-theme-refined"><code class="nobr">hugo-theme-refined</code></a> + <span class="nobr">Hugo <a href="https://github.com/gohugoio/hugo/commit/312735366b20d64bd61bff8627f593749f86c964">0.123.7</a></span>
</p>

<p>
    
</p>




<div class="badges no-text-decoration">
    
    

    
</div>




<script type="application/javascript">var nav=responsiveNav("#nav");</script>




<script defer src="/js/libs/fragmentions/wrapper.min.e8c468c89edc4f5dccaa8c720c6b220b3088a16cd7b1e4a1e3345985788260c9.js"></script>









            </footer>
        </div> 
    </body>
</html>
