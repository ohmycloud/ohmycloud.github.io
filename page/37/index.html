<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">

    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
    
    
    

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5">

    
    <meta name="referrer" content="no-referrer">

    <title>
        
            焉知非鱼 ❚
        
    </title>

    
    


    
    
    
    

    
    
    
    

    
    
    

    
    
    
    <style>
     
     
     :root {
         --theme-color: #ac4142;
         --theme-color-light: rgba(172, 65, 66, 0.2);
     }
     
     html {
         line-height: 1.5;
     }
    </style>

    
    

    
    
    
    
    <link rel="stylesheet" href="/css/refined.min.7f6d3ee611034e4ebcbc063f1db3bc042fecdc8901afbedad80ff02bae409204.css">
    
    <link rel="preload" href="/css/refined.min.7f6d3ee611034e4ebcbc063f1db3bc042fecdc8901afbedad80ff02bae409204.css" as="style">

    



    
        <style>
         
         /* Background */ .chroma { background-color: #ffffff }
/* Error */ .chroma .err { color: #a61717; background-color: #e3d2d2 }
/* LineTableTD */ .chroma .lntd { vertical-align: top; padding: 0; margin: 0; border: 0; }
/* LineTable */ .chroma .lntable { border-spacing: 0; padding: 0; margin: 0; border: 0; width: auto; overflow: auto; display: block; }
/* LineHighlight */ .chroma .hl { display: block; width: 100%;background-color: #ffffcc }
/* LineNumbersTable */ .chroma .lnt { margin-right: 0.4em; padding: 0 0.4em 0 0.4em; }
/* LineNumbers */ .chroma .ln { margin-right: 0.4em; padding: 0 0.4em 0 0.4em; }
/* Keyword */ .chroma .k { color: #000000; font-weight: bold }
/* KeywordConstant */ .chroma .kc { color: #000000; font-weight: bold }
/* KeywordDeclaration */ .chroma .kd { color: #000000; font-weight: bold }
/* KeywordNamespace */ .chroma .kn { color: #000000; font-weight: bold }
/* KeywordPseudo */ .chroma .kp { color: #000000; font-weight: bold }
/* KeywordReserved */ .chroma .kr { color: #000000; font-weight: bold }
/* KeywordType */ .chroma .kt { color: #445588; font-weight: bold }
/* NameAttribute */ .chroma .na { color: #008080 }
/* NameBuiltin */ .chroma .nb { color: #0086b3 }
/* NameBuiltinPseudo */ .chroma .bp { color: #999999 }
/* NameClass */ .chroma .nc { color: #445588; font-weight: bold }
/* NameConstant */ .chroma .no { color: #008080 }
/* NameDecorator */ .chroma .nd { color: #3c5d5d; font-weight: bold }
/* NameEntity */ .chroma .ni { color: #800080 }
/* NameException */ .chroma .ne { color: #990000; font-weight: bold }
/* NameFunction */ .chroma .nf { color: #990000; font-weight: bold }
/* NameLabel */ .chroma .nl { color: #990000; font-weight: bold }
/* NameNamespace */ .chroma .nn { color: #555555 }
/* NameTag */ .chroma .nt { color: #000080 }
/* NameVariable */ .chroma .nv { color: #008080 }
/* NameVariableClass */ .chroma .vc { color: #008080 }
/* NameVariableGlobal */ .chroma .vg { color: #008080 }
/* NameVariableInstance */ .chroma .vi { color: #008080 }
/* LiteralString */ .chroma .s { color: #dd1144 }
/* LiteralStringAffix */ .chroma .sa { color: #dd1144 }
/* LiteralStringBacktick */ .chroma .sb { color: #dd1144 }
/* LiteralStringChar */ .chroma .sc { color: #dd1144 }
/* LiteralStringDelimiter */ .chroma .dl { color: #dd1144 }
/* LiteralStringDoc */ .chroma .sd { color: #dd1144 }
/* LiteralStringDouble */ .chroma .s2 { color: #dd1144 }
/* LiteralStringEscape */ .chroma .se { color: #dd1144 }
/* LiteralStringHeredoc */ .chroma .sh { color: #dd1144 }
/* LiteralStringInterpol */ .chroma .si { color: #dd1144 }
/* LiteralStringOther */ .chroma .sx { color: #dd1144 }
/* LiteralStringRegex */ .chroma .sr { color: #009926 }
/* LiteralStringSingle */ .chroma .s1 { color: #dd1144 }
/* LiteralStringSymbol */ .chroma .ss { color: #990073 }
/* LiteralNumber */ .chroma .m { color: #009999 }
/* LiteralNumberBin */ .chroma .mb { color: #009999 }
/* LiteralNumberFloat */ .chroma .mf { color: #009999 }
/* LiteralNumberHex */ .chroma .mh { color: #009999 }
/* LiteralNumberInteger */ .chroma .mi { color: #009999 }
/* LiteralNumberIntegerLong */ .chroma .il { color: #009999 }
/* LiteralNumberOct */ .chroma .mo { color: #009999 }
/* Operator */ .chroma .o { color: #000000; font-weight: bold }
/* OperatorWord */ .chroma .ow { color: #000000; font-weight: bold }
/* Comment */ .chroma .c { color: #999988; font-style: italic }
/* CommentHashbang */ .chroma .ch { color: #999988; font-style: italic }
/* CommentMultiline */ .chroma .cm { color: #999988; font-style: italic }
/* CommentSingle */ .chroma .c1 { color: #999988; font-style: italic }
/* CommentSpecial */ .chroma .cs { color: #999999; font-weight: bold; font-style: italic }
/* CommentPreproc */ .chroma .cp { color: #999999; font-weight: bold; font-style: italic }
/* CommentPreprocFile */ .chroma .cpf { color: #999999; font-weight: bold; font-style: italic }
/* GenericDeleted */ .chroma .gd { color: #000000; background-color: #ffdddd }
/* GenericEmph */ .chroma .ge { color: #000000; font-style: italic }
/* GenericError */ .chroma .gr { color: #aa0000 }
/* GenericHeading */ .chroma .gh { color: #999999 }
/* GenericInserted */ .chroma .gi { color: #000000; background-color: #ddffdd }
/* GenericOutput */ .chroma .go { color: #888888 }
/* GenericPrompt */ .chroma .gp { color: #555555 }
/* GenericStrong */ .chroma .gs { font-weight: bold }
/* GenericSubheading */ .chroma .gu { color: #aaaaaa }
/* GenericTraceback */ .chroma .gt { color: #aa0000 }
/* GenericUnderline */ .chroma .gl { text-decoration: underline }
/* TextWhitespace */ .chroma .w { color: #bbbbbb }

         
         /* Overrides on top of the theme and Chroma CSS */
/* Chroma-based lines highlighting in code blocks */
.chroma .hl {
    background-color: #e8e8e8;
    /* Extend highlight up to 100 characters (assuming that the code blocks never have more than 100 characters in a line) */
    min-width: 100ch;
}
/* GenericHeading */ .chroma .gh { color: #999999; font-weight: bold }
/* GenericSubheading */ .chroma .gu { color: #aaaaaa; font-weight: bold }

         
        </style>
    

    

    
    
    

    
    <script src="/js/responsive-nav-orig.min.e2b5f2a956b488f466da513820636134defdc38b90ed566248960593f2bb4ba5.js"></script>
    
    <link rel="preload" href="/js/responsive-nav-orig.min.e2b5f2a956b488f466da513820636134defdc38b90ed566248960593f2bb4ba5.js" as="script">

    
    
    <script defer src="/js/libs/fa/fontawesome-all.min.08916ac0fd078adfb58edc890460e2c8990729aee02bca7586404b56805f5219.js"></script>
    
    <link rel="preload" href="/js/libs/fa/fontawesome-all.min.08916ac0fd078adfb58edc890460e2c8990729aee02bca7586404b56805f5219.js" as="script">

    

    

    
    
    

    
    
<!-- rel="me" links for IndieAuth -->







    
 
<meta property="og:title" content="焉知非鱼" />
<meta property="og:description"
      content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://ohmycloud.github.io/" />


    
        <meta property="og:updated_time" content="2022-12-27T00:00:00&#43;00:00"/>
    












     <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="焉知非鱼"/>
<meta name="twitter:description" content=""/>


    
    
    <link rel="alternate" type="application/rss+xml" href="https://ohmycloud.github.io/index.xml" title="Rss for 焉知非鱼" />
    <link rel="alternate" type="application/atom+xml" href="https://ohmycloud.github.io/atom.xml" title="Atom for 焉知非鱼" />
    <link rel="alternate" type="application/jf2feed+json" href="https://ohmycloud.github.io/jf2feed.json" title="Jf2feed for 焉知非鱼" />
    
     






    
    
    
    <meta name="hugo-build-date" content="2024-03-01T16:16:06Z"/>
    <meta name="hugo-commit-hash" content="312735366b20d64bd61bff8627f593749f86c964"/>
    <meta name="generator" content="Hugo 0.123.7">
</head>


    
        <body lang="en">
    

        
        <div class="border" id="home"></div>

        <div class="wrapper">   
            
<nav id="nav" class="nav-collapse opened" aria-hidden="false">
    <ul class="navbar">
        <li><a class="active" href="/">Home</a></li>
        
            
                <li><a class="" href="https://ohmycloud.github.io/posts/">Posts</a></li>
            
        
            
                <li><a class="" href="https://ohmycloud.github.io/notes/">Notes</a></li>
            
        
        
            <li><a class="" href="https://ohmycloud.github.io/search/">Search</a></li>
        
    </ul>
</nav>

            <div class="container">
                <header class="masthead">
                    <div class="masthead-title no-text-decoration">
                        <a href="/">焉知非鱼</a> <span class="blinking-cursor">❚</span>
                    </div>
                    <div class="masthead-tagline">
                        Wait the light to fall
                    </div>
                </header>

                

<div class="posts h-feed">
    <header>
        
        <data class="u-url" value="https://ohmycloud.github.io/"></data>
         





        <data class="p-name" value="焉知非鱼"></data>
    </header>
    
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/using-minion-in-dancer-apps/'> 第十二天 - 在 Dancer 应用程序中使用 Minion</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-12T14:22:46+0000" class="dt-published">Wed Dec 12, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>在 $work，我们使用 Dancer 构建了一个 API，用于生成 PDF 文档和 XML 文件。此 API 是保险登记系统的重要组成部分：生成 PDF 以立即在 Web 浏览器中传送给客户端，并且 XML 一旦可用就会立即传送给运营商。由于XML 通常需要花费大量时间来生成，因此在后台生成作业，以免在较长时间内占用应用程序服务器。完成后，开发了一个自行开发的流程管理系统，并通过 fork() 进程，跟踪其 pid，并希望我们以后可以成功获得完成的流程。
这种方法存在一些问题： - 它很脆弱 - 它不能扩展 - 作为开发人员搞砸某事太容易了
在2019年，我们不得不加大承担更大的工作量。目前的解决方案根本无法处理我们预计需要处理的工作量。z直到遇见 Minion。
注意：本文中使用的技术与 Dancer 或 Dancer2 同样适用。
为何选择 Minion？ 我们研究了 Minion 的几种替代品，包括 beanstalkd 和 celeryd。然而，使用其中任何一个意味着涉及我们已经过度征税的基础设施团队;使用 Minion 允许我们使用我的团队已经拥有的专业知识，而不必向其他人提供帮助。从开发的角度来看，使用 Perl 开发的产品为我们提供了最快的实施时间。
扩展我们现有的设置几乎是不可能的。处理我们分叉的进程所消耗的资源不仅难以处理，而且不可能在多个服务器上运行作业。从 Minion 开始也给了我们一个急需的机会来清理一些需要重构的代码。通过最少量的工作，我们能够清理我们的 XML 呈现代码并使其在 Minion 中运行。通过此清理，我们可以更轻松地获取有关XML呈现作业消耗了多少内存和 CPU 的信息。这些信息对于我们规划未来容量至关重要。
进入 Minion 由于我们是一个舞蹈工作室，而不是 Mojolicious，因此我们可以从 Mojolicious 那里获得很多与 Minion 合作的便利。鉴于我们还在商业模式中共享一些基于 Minion 的代码，我们必须围绕 Minion 构建一些自己的管道：
package MyJob::JobQueue; use Moose; use Minion; use MyJob::Models::FooBar; with &#39;MyJob::Roles::ConfigReader&#39;; has &#39;runner&#39; =&gt; ( is =&gt; &#39;ro&#39;, isa =&gt; &#39;Minion&#39;, lazy =&gt; 1, default =&gt; sub( $self ) { $ENV{ MOJO_PUBSUB_EXPERIMENTAL } = 1; Minion-&gt;new( mysql =&gt; MyJob::DBConnectionManager-&gt;new-&gt;get_connection_uri({ db_type =&gt; &#39;feeds&#39;, io_type =&gt; &#39;rw&#39;, })); }, ); 我们在 Minion 周围包含了一个简单的 Moose 类，以便使用我们想要的额外功能轻松添加到任何类或 Dancer 应用程序。</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/using-minion-in-dancer-apps/'
               title="Read more about 第十二天 - 在 Dancer 应用程序中使用 Minion">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 第十二天 - 在 Dancer 应用程序中使用 Minion</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry posts">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/posts/69.unicode/'> Unicode</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-12T21:13:31+0800" class="dt-published">Wed Dec 12, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>Raku 对 Unicode 有很高的支持。本文档旨在概述和描述不属于例程和方法文档的 Unicode 功能。
有关 MoarVM 内部字符串表示的概述，请参阅 MoarVM 字符串文档。
文件句柄和输入输出 标准化 默认情况下，Raku 对所有输入和输出应用标准化，但存储为 UTF8-C8 的文件名除外;字形是用户可见的字符形式，将使用标准化表示。这是什么意思？例如，字形数字 á 可以用两种方式表示，或者使用一个代码点：
á (U+E1 &#34;LATIN SMALL LETTER A WITH ACUTE&#34;) 或两个代码点:
a + ́ (U+61 &#34;LATIN SMALL LETTER A&#34; + U+301 &#34;COMBINING ACUTE ACCENT&#34;) Raku 将这两个输入转换为一个代码点，如规范化形式 C（NFC）所指定的那样。在大多数情况下，这很有用，意味着两个相同的输入都被视为相同。 Unicode 具有规范等价的概念，它允许我们确定字符串的规范形式，允许我们正确地比较字符串并操纵它们，而不必担心文本丢失这些属性。默认情况下，您处理或从 Raku 输出的任何文本都将采用此“规范”形式，即使在对字符串进行修改或连接时也是如此（请参阅下文，了解如何避免这种情况）。有关规范化表单C和规范等效性的更多详细信息，请参阅Unicode Foundation 的规范化和规范等效性页面。
我们不默认的一种情况是文件名。这是因为必须完全访问文件的名称，就像在磁盘上写入字节一样。
为避免规范化，您可以使用名为 UTF8-C8 的特殊编码格式。将此编码与任何文件句柄一起使用将允许您读取磁盘上的确切字节，而不进行规范化。如果使用 UTF8 句柄打印出来，打印出来时看起来会很滑稽。如果将其打印到输出编码为 UTF8-C8 的句柄，则它将按照您通常的预期进行渲染，并且是字节精确复制的字节。有关 MoarVM 上 UTF8-C8 的更多技术细节, 请参见下文。
UTF8-C8 UTF-8 Clean-8 是一种编码器/解码器，主要用作 UTF-8。但是，遇到一个不能解码为有效 UTF-8 的字节序列，或者由于规范化而不会往返的字节序列时，它将使用 NFG 合成来跟踪所涉及的原始字节。这意味着编码回 UTF-8 Clean-8 将能够重新创建它们最初存在的字节。合成物包含4个代码点：</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/posts/69.unicode/'
               title="Read more about Unicode">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about Unicode</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry posts">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/posts/68.type-system/'> 类型系统</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-12T21:13:31+0800" class="dt-published">Wed Dec 12, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>Raku类型的定义 类型通过创建类型对象来定义新对象，该类型对象提供用于创建对象实例或检查值的接口。任何类型对象都是 Any 或 Mu 的子类。通过从这些基类和内省后缀 .^ 继承来提供内省方法。在编译时由以下类型声明符之一或在运行时使用元对象协议将新类型引入当前作用域。所有类型名称的作用域必须是唯一的。
默认类型 如果用户没有提供类型，则 Raku 假定类型为 Any。这包括容器，基类，参数和返回类型。
my $a = 1; $a = Nil; say $a.^name; # OUTPUT: «Any» class C {}; say C.^parents(:all); # OUTPUT: «((Any) (Mu))» 对于容器，默认类型为 Any，但默认类型约束为 Mu。请注意，绑定会替换容器，而不仅仅是值。在这种情况下，类型约束可能会变。
类型对象 要测试对象是否为类型对象，请对使用类型为 smiley 或 .DEFINITE 方法约束的类型使用 smartmatch：
my $a = Int; say $a ~~ Mu:U; # OUTPUT: «True» say not $a.DEFINITE; # OUTPUT: «True» 如果调用者是实例，则 .DEFINITE 将返回 True。如果它返回 False，则调用者是一个类型对象。
Undefinedness 未定义的对象在 Raku 中维护类型信息。类型对象用于表示未定义值和未定义值的类型。要提供一般的未定义值，请使用 Any。如果要区分容器和参数的默认类型 Any，则需要使用 Mu。</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/posts/68.type-system/'
               title="Read more about 类型系统">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 类型系统</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/five-spark-sql-helper-utility-functions-to-extract-and-explore-complex-data-types/'> 五个用于提取和探索复杂数据类型的 Spark SQL Helper 实用程序函数</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-12T11:26:52+0000" class="dt-published">Wed Dec 12, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>https://docs.databricks.com/_static/notebooks/complex-nested-structured.html
虽然这个深入的博客列出并解释了处理和处理复杂数据类型和格式的概念和动机，但这个笔记本示例通过几个具体示例检查了如何将它们应用于您在使用中可能遇到的数据类型案例。这个简短的笔记本教程展示了一些方法，您可以在其中探索和使用许多新的帮助程序 Spark SQL 实用程序函数和 API 作为org.apache.spark.sql.functions 包的一部分。特别是，它们在执行 Streaming ETL 时派上用场，其中数据是具有复杂和嵌套结构的 JSON 对象：嵌入为 JSON 的 Map 和 Structs：
_ get_json_object()
_ from_json()
_ to_json()
_ explode()
_ selectExpr()
本简短教程的内容是使用 Spark SQL 实用程序函数对嵌套 JSON 结构进行切片和切块的无数方法。
让我们创建一个带有属性和值的简单 JSON 模式，而不使用任何嵌套结构。
import org.apache.spark.sql.types._ // include the Spark Types to define our schema import org.apache.spark.sql.functions._ // include the Spark helper functions val jsonSchema = new StructType() .add(&#34;battery_level&#34;, LongType) .add(&#34;c02_level&#34;, LongType) .add(&#34;cca3&#34;,StringType) .add(&#34;cn&#34;, StringType) .add(&#34;device_id&#34;, LongType) .</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/five-spark-sql-helper-utility-functions-to-extract-and-explore-complex-data-types/'
               title="Read more about 五个用于提取和探索复杂数据类型的 Spark SQL Helper 实用程序函数">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 五个用于提取和探索复杂数据类型的 Spark SQL Helper 实用程序函数</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/whats-behind-0-dot-1-plus-0-dot2-in-perl6/'> 🎄 12/25. 在 Raku 中, 0.1 &#43; 0.2 背后的东西</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-12T09:13:30+0000" class="dt-published">Wed Dec 12, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>欢迎来到今年 12/25 的 Raku One-Liner Advent Calendar! 的第12天。今天，我们将研究一个计算零的单行程序。
say 0.1 + 0.2 - 0.3 如果您熟悉编程，那么您很清楚，只要开始使用浮点运算，就会失去精度，并且很快就会面对小错误。
您可能还看到了网站，0.30000000000000004.com，它有很多不同的编程语言列表，以及它们如何打印简单的表达式 0.1 + 0.2。在大多数情况下，您没有得到 0.3 这个准确值。通常当你得到零时，它实际上是在打印操作期间舍入的结果。
在 Raku 中，0.1 + 0.2正好是 0.3，今天的单行程序正好打印了一个零。
让我们稍微探讨一下 Raku 的内部结构，看看它是如何工作的。几天前，我们看到 Raku 的 grammar（在 Rakudo 编译器中实现）具有以下检测数字的片段：
token numish { [ | &#39;NaN&#39; &gt;&gt; | &lt;integer&gt; | &lt;dec_number&gt; | &lt;rad_number&gt; | &lt;rat_number&gt; | &lt;complex_number&gt; | &#39;Inf&#39; &gt;&gt; | $&lt;uinf&gt;=&#39;∞&#39; | &lt;unum=:No+:Nl&gt; ] } 假如你很熟悉 Raku，就会知道 Raku 使用有理数来存储浮点数（如0.1）这一事实可以解释上述行为。这是对的，但是看一下 grammar，你会发现这篇文章有点长。
Grammar 中所谓的 rat_number 是用尖括号写的数字：</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/whats-behind-0-dot-1-plus-0-dot2-in-perl6/'
               title="Read more about 🎄 12/25. 在 Raku 中, 0.1 &#43; 0.2 背后的东西">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 🎄 12/25. 在 Raku 中, 0.1 &#43; 0.2 背后的东西</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/who-watches-the-minions/'> 第十一天 - 谁在看着 Minions</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-11T23:02:01+0000" class="dt-published">Tue Dec 11, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>现在我有一个 Minion 工作队列，我需要妥善处理它。工人是否在工作（他们是否抓住了生产资料）？工作是否顺利完成？有什么错误吗？这些是什么？
Minion Jobs Command Minion 带有一个 job 命令，列出了作业及其状态。
$ perl myapp.pl minion job 6 inactive default check_url 5 active default check_url 4 failed default check_url 3 failed default check_url 2 finished default check_url 1 finished default check_url 我可以通过传递工作的ID来查看单个工作的信息。
$ perl minion.pl minion job 1 { &#34;args&#34; =&gt; [ &#34;http://mojolicious.org&#34; ], &#34;attempts&#34; =&gt; 1, &#34;children&#34; =&gt; [], &#34;created&#34; =&gt; &#34;2018-11-23T19:15:47Z&#34;, &#34;delayed&#34; =&gt; &#34;2018-11-23T19:15:47Z&#34;, &#34;finished&#34; =&gt; &#34;2018-11-23T19:15:48Z&#34;, &#34;id&#34; =&gt; 1, &#34;notes&#34; =&gt; {}, &#34;parents&#34; =&gt; [], &#34;priority&#34; =&gt; 0, &#34;queue&#34; =&gt; &#34;default&#34;, &#34;result&#34; =&gt; &#34;0.</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/who-watches-the-minions/'
               title="Read more about 第十一天 - 谁在看着 Minions">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 第十一天 - 谁在看着 Minions</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/%E4%BD%BF%E7%94%A8-hbase-%E7%9A%84-filterlist-%E8%BF%87%E6%BB%A4%E5%99%A8/'> 使用 HBase 的 FilterList 过滤器</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-11T16:16:21+0000" class="dt-published">Tue Dec 11, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>package wmstat.trip import org.apache.hadoop.hbase.client._ import org.apache.hadoop.hbase.io.ImmutableBytesWritable import org.apache.hadoop.hbase.mapreduce.TableInputFormat import org.apache.hadoop.hbase.HBaseConfiguration import org.apache.hadoop.hbase.filter._ import org.apache.hadoop.hbase.protobuf.ProtobufUtil import org.apache.hadoop.hbase.util.{Base64, Bytes} import org.apache.spark.sql.SQLContext import org.apache.spark.{SparkConf, SparkContext} import wmutils.WmTimeUtil._ import scala.collection.mutable.ArrayBuffer object HBaseSpark { def main(args:Array[String]): Unit ={ // 本地模式运行,便于测试 val sparkConf = new SparkConf().setMaster(&#34;local&#34;).setAppName(&#34;HBaseTest&#34;) // 创建 HBase 扫描器 val scan = new Scan() // val filter=new RowFilter(CompareFilter.CompareOp.GREATER_OR_EQUAL, new RegexStringComparator(&#34;^[a-zA-Z0-9]+_20180903[0-9]{6}$&#34;)) //使用正则表达式过滤近一个月的 // scan.setFilter(filter) // 过去 7 天 val arrayWeek: ArrayBuffer[String] = lastestNdays(&#34;&#34;, 7) // filterList val filterList = new FilterList(FilterList.</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/%E4%BD%BF%E7%94%A8-hbase-%E7%9A%84-filterlist-%E8%BF%87%E6%BB%A4%E5%99%A8/'
               title="Read more about 使用 HBase 的 FilterList 过滤器">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 使用 HBase 的 FilterList 过滤器</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry posts">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/posts/67.traits/'> Traits</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-11T21:13:31+0800" class="dt-published">Tue Dec 11, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>在 Raku 中，traits是附加到对象和类的编译器钩子，它们修改了类和对象的默认行为，功能或表示。作为这样的编译器钩子，它们是在编译时定义的，尽管它们可以用于运行时。
通过使用 trait_mod 关键字，已经将几个 traits 定义为语言或 Rakudo 编译器的一部分。接下来列出并解释它们。
is trait 定义为
proto sub trait_mod:&lt;is&gt;(Mu $, |) {*} is 适用于任何类型的标量对象，并且可以接收任意数量的命名参数或位置参数。它是最常用的 trait，取决于第一个参数的类型，采用以下形式。
is 应用于类 最常见的形式涉及两个类，一个正在定义，另一个现有，定义为 defines parenthood。 A is B, 如果两个都是类，则将 A 定义为 B 的子类。
is DEPRECATED 可以应用于类，属性或例程，将它们标记为已弃用并发出警告消息（如果提供了的话）。
is 的几个实例被直接转换为它们引用的类的属性：rw，nativesize，ctype，unsigned，hidden，array_type。
不可实例化的表示 trait 与表示没有多大关系，与特定类可以做什么有关; 它有效地防止以任何可能的方式创建类的实例。
constant @IMM = &lt;Innie Minnie Moe&gt;; class don&#39;t-instantiate is repr(&#39;Uninstantiable&#39;) { my $.counter; method imm () { return @IMM[ $.counter++ mod @IMM.elems ]; } } say don&#39;t-instantiate.</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/posts/67.traits/'
               title="Read more about Traits">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about Traits</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/solving-the-problem-34-in-raku/'> 🎄 11/25. 在 Raku 中解决34号问题</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-11T09:16:06+0000" class="dt-published">Tue Dec 11, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>欢迎来到 Raku One-Liner Advent Calendar 的第11天！ 今天，日历文章完全致力于解决欧拉计划的问题34。 如果你想在看到我的答案之前找到自己的答案，请再次暂停阅读。
因此，任务是找到所有数字的总和，它们等于其数字的阶乘的总和。 听起来很清楚？ 🙂 你可以看一下单行程序的解决方案，以便更好地理解它。
say [+] (3..50_000).grep({$_ == [+] .comb.map({[*] 2..$_})}) 让我们从&hellip;&hellip;开始吧。
我们循环范围 3 .. 50_000。上边界是基于某些要考虑因素的猜测。我不会在这里解释，但如果你好奇，你可能会试着找到答案。基本上，在某些时候你会理解这个数字要么包含太多数字，要么本身就太大了。请参阅有关 Project Euler 的讨论以获得纯理论的解释。
第二步是 grep。我们正在搜索与总和相等的数字（$_ ==）。它是通过第二个化简加号 [+] 计算出来的，但你可以使用 sum 方法代替：
{$_ == .comb.map({[*] 2..$_}).sum} 请注意 .comb 是一个在默认变量 $_ 上调用的方法。 comb 方法将数字拆分为单独的数字（作为字符）。 map 方法将每个数字转换为阶乘（再次使用化简运算符 [*]，就像我们昨天所做的那样）。
最后，最外层的 [+] 将所有 grepped 的数字相加，并将结果传递给 say 例程。
虽然主要想法是展示一个单行，但在实际操作中，在使用它们之前准备因子是更明智的：
my @f = (0..9).map({[*] 1..$_}); say [+] (3..50_000).grep({$_ == [+] .comb.map({@f[$_]})}); 这就是今天故事的结局。这个日历的其余部分还有更多内容！</p>

    </div>

    
    
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/minion-stands-alone/'> 第十天 - Minion Stands Alone</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-10T22:49:38+0000" class="dt-published">Mon Dec 10, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>Minion 作业队列是一个非常有用的工具，但有时我需要将它用于非 Web 项目。那么，如何在不需要 Mojolicious Web 应用程序的情况下使用 Minion？
如果我没有足够大的工作需要 Beam::Minion 提供的任务组织，虽然 Minion 可以用作完全独立的库，但最简单的解决方案就是构建一个 Mojolicious 应用程序。幸运的是，一个 Mojolicious 应用程序可以只有2行：
use Mojolicious::Lite; app-&gt;start; 现在，如果我从未运行过 web 守护进程，那么这绝不会是一个网站。那么，如果没有人使用网络浏览器访问它，这可以称为 Web 应用程序吗？🤔
Add Minion 要使用 Minion，请将 Minion 插件添加到应用程序。对于这个例子，我将使用 SQLite Minion 后端，这样我就不需要运行单独的数据库进程，但如果你有一个接受远程连接的数据库，Minion 可以在多台机器上工作。
plugin Minion =&gt; { SQLite =&gt; &#39;sqlite:&#39; . app-&gt;home-&gt;child(&#39;minion.db&#39;), }; 加载 Minion 插件后，我的应用程序获得了一些新功能：
我可以使用 minion.add_task 助手程序添加 Minion 任务（可运行的代码） 我可以通过多种方式排队工作： 从命令行使用 minion job 命令 从应用程序内部使用 minion.enqueue 助手程序 从任何 Perl 脚本加载 Minion 并使用 enqueue 方法 我可以使用 minion worker 命令运行一个 Minion worker，它将执行任何排队的作业 Create a Task 我将创建一个名为 check_url 的任务来检查下载 URL 所需的时间。 Time::HiRes 核心模块将为我提供高分辨率时间。</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/minion-stands-alone/'
               title="Read more about 第十天 - Minion Stands Alone">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 第十天 - Minion Stands Alone</span>
            </a>
        </div>
    
</article>
      
    
</div>



                <footer>
                    

<div class="pagination no-text-decoration">
    
        <a class="pagination-item newer" href="/page/36/">Newer</a>
    
    
        <a class="pagination-item older" href="/page/38/">Older</a>
    
</div>




                    <ul class="no-bullets feed right inline">
    
        
        
            <li class="inline no-text-decoration">
                <a href="https://ohmycloud.github.io/index.xml">RSS</a>
            </li>
        
    
        
        
            <li class="inline no-text-decoration">
                <a href="https://ohmycloud.github.io/atom.xml">ATOM</a>
            </li>
        
    
        
        
    
</ul>
<div class="clear-float"></div>

                </footer>
                <hr />
            </div>               

            <footer> 
                

<ul class="social no-text-decoration">
    
</ul>










 
    
    



<p class="generated no-text-decoration">
    Generated using  <a href="https://gitlab.com/kaushalmodi/hugo-theme-refined"><code class="nobr">hugo-theme-refined</code></a> + <span class="nobr">Hugo <a href="https://github.com/gohugoio/hugo/commit/312735366b20d64bd61bff8627f593749f86c964">0.123.7</a></span>
</p>

<p>
    
</p>




<div class="badges no-text-decoration">
    
    

    
</div>




<script type="application/javascript">var nav=responsiveNav("#nav");</script>




<script defer src="/js/libs/fragmentions/wrapper.min.e8c468c89edc4f5dccaa8c720c6b220b3088a16cd7b1e4a1e3345985788260c9.js"></script>









            </footer>
        </div> 
    </body>
</html>
