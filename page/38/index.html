<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">

    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
    
    
    

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5">

    
    <meta name="referrer" content="no-referrer">

    <title>
        
            焉知非鱼 ❚
        
    </title>

    
    


    
    
    
    

    
    
    
    

    
    
    

    
    
    
    <style>
     
     
     :root {
         --theme-color: #ac4142;
         --theme-color-light: rgba(172, 65, 66, 0.2);
     }
     
     html {
         line-height: 1.5;
     }
    </style>

    
    

    
    
    
    
    <link rel="stylesheet" href="/css/refined.min.7f6d3ee611034e4ebcbc063f1db3bc042fecdc8901afbedad80ff02bae409204.css">
    
    <link rel="preload" href="/css/refined.min.7f6d3ee611034e4ebcbc063f1db3bc042fecdc8901afbedad80ff02bae409204.css" as="style">

    



    
        <style>
         
         /* Background */ .chroma { background-color: #ffffff }
/* Error */ .chroma .err { color: #a61717; background-color: #e3d2d2 }
/* LineTableTD */ .chroma .lntd { vertical-align: top; padding: 0; margin: 0; border: 0; }
/* LineTable */ .chroma .lntable { border-spacing: 0; padding: 0; margin: 0; border: 0; width: auto; overflow: auto; display: block; }
/* LineHighlight */ .chroma .hl { display: block; width: 100%;background-color: #ffffcc }
/* LineNumbersTable */ .chroma .lnt { margin-right: 0.4em; padding: 0 0.4em 0 0.4em; }
/* LineNumbers */ .chroma .ln { margin-right: 0.4em; padding: 0 0.4em 0 0.4em; }
/* Keyword */ .chroma .k { color: #000000; font-weight: bold }
/* KeywordConstant */ .chroma .kc { color: #000000; font-weight: bold }
/* KeywordDeclaration */ .chroma .kd { color: #000000; font-weight: bold }
/* KeywordNamespace */ .chroma .kn { color: #000000; font-weight: bold }
/* KeywordPseudo */ .chroma .kp { color: #000000; font-weight: bold }
/* KeywordReserved */ .chroma .kr { color: #000000; font-weight: bold }
/* KeywordType */ .chroma .kt { color: #445588; font-weight: bold }
/* NameAttribute */ .chroma .na { color: #008080 }
/* NameBuiltin */ .chroma .nb { color: #0086b3 }
/* NameBuiltinPseudo */ .chroma .bp { color: #999999 }
/* NameClass */ .chroma .nc { color: #445588; font-weight: bold }
/* NameConstant */ .chroma .no { color: #008080 }
/* NameDecorator */ .chroma .nd { color: #3c5d5d; font-weight: bold }
/* NameEntity */ .chroma .ni { color: #800080 }
/* NameException */ .chroma .ne { color: #990000; font-weight: bold }
/* NameFunction */ .chroma .nf { color: #990000; font-weight: bold }
/* NameLabel */ .chroma .nl { color: #990000; font-weight: bold }
/* NameNamespace */ .chroma .nn { color: #555555 }
/* NameTag */ .chroma .nt { color: #000080 }
/* NameVariable */ .chroma .nv { color: #008080 }
/* NameVariableClass */ .chroma .vc { color: #008080 }
/* NameVariableGlobal */ .chroma .vg { color: #008080 }
/* NameVariableInstance */ .chroma .vi { color: #008080 }
/* LiteralString */ .chroma .s { color: #dd1144 }
/* LiteralStringAffix */ .chroma .sa { color: #dd1144 }
/* LiteralStringBacktick */ .chroma .sb { color: #dd1144 }
/* LiteralStringChar */ .chroma .sc { color: #dd1144 }
/* LiteralStringDelimiter */ .chroma .dl { color: #dd1144 }
/* LiteralStringDoc */ .chroma .sd { color: #dd1144 }
/* LiteralStringDouble */ .chroma .s2 { color: #dd1144 }
/* LiteralStringEscape */ .chroma .se { color: #dd1144 }
/* LiteralStringHeredoc */ .chroma .sh { color: #dd1144 }
/* LiteralStringInterpol */ .chroma .si { color: #dd1144 }
/* LiteralStringOther */ .chroma .sx { color: #dd1144 }
/* LiteralStringRegex */ .chroma .sr { color: #009926 }
/* LiteralStringSingle */ .chroma .s1 { color: #dd1144 }
/* LiteralStringSymbol */ .chroma .ss { color: #990073 }
/* LiteralNumber */ .chroma .m { color: #009999 }
/* LiteralNumberBin */ .chroma .mb { color: #009999 }
/* LiteralNumberFloat */ .chroma .mf { color: #009999 }
/* LiteralNumberHex */ .chroma .mh { color: #009999 }
/* LiteralNumberInteger */ .chroma .mi { color: #009999 }
/* LiteralNumberIntegerLong */ .chroma .il { color: #009999 }
/* LiteralNumberOct */ .chroma .mo { color: #009999 }
/* Operator */ .chroma .o { color: #000000; font-weight: bold }
/* OperatorWord */ .chroma .ow { color: #000000; font-weight: bold }
/* Comment */ .chroma .c { color: #999988; font-style: italic }
/* CommentHashbang */ .chroma .ch { color: #999988; font-style: italic }
/* CommentMultiline */ .chroma .cm { color: #999988; font-style: italic }
/* CommentSingle */ .chroma .c1 { color: #999988; font-style: italic }
/* CommentSpecial */ .chroma .cs { color: #999999; font-weight: bold; font-style: italic }
/* CommentPreproc */ .chroma .cp { color: #999999; font-weight: bold; font-style: italic }
/* CommentPreprocFile */ .chroma .cpf { color: #999999; font-weight: bold; font-style: italic }
/* GenericDeleted */ .chroma .gd { color: #000000; background-color: #ffdddd }
/* GenericEmph */ .chroma .ge { color: #000000; font-style: italic }
/* GenericError */ .chroma .gr { color: #aa0000 }
/* GenericHeading */ .chroma .gh { color: #999999 }
/* GenericInserted */ .chroma .gi { color: #000000; background-color: #ddffdd }
/* GenericOutput */ .chroma .go { color: #888888 }
/* GenericPrompt */ .chroma .gp { color: #555555 }
/* GenericStrong */ .chroma .gs { font-weight: bold }
/* GenericSubheading */ .chroma .gu { color: #aaaaaa }
/* GenericTraceback */ .chroma .gt { color: #aa0000 }
/* GenericUnderline */ .chroma .gl { text-decoration: underline }
/* TextWhitespace */ .chroma .w { color: #bbbbbb }

         
         /* Overrides on top of the theme and Chroma CSS */
/* Chroma-based lines highlighting in code blocks */
.chroma .hl {
    background-color: #e8e8e8;
    /* Extend highlight up to 100 characters (assuming that the code blocks never have more than 100 characters in a line) */
    min-width: 100ch;
}
/* GenericHeading */ .chroma .gh { color: #999999; font-weight: bold }
/* GenericSubheading */ .chroma .gu { color: #aaaaaa; font-weight: bold }

         
        </style>
    

    

    
    
    

    
    <script src="/js/responsive-nav-orig.min.e2b5f2a956b488f466da513820636134defdc38b90ed566248960593f2bb4ba5.js"></script>
    
    <link rel="preload" href="/js/responsive-nav-orig.min.e2b5f2a956b488f466da513820636134defdc38b90ed566248960593f2bb4ba5.js" as="script">

    
    
    <script defer src="/js/libs/fa/fontawesome-all.min.08916ac0fd078adfb58edc890460e2c8990729aee02bca7586404b56805f5219.js"></script>
    
    <link rel="preload" href="/js/libs/fa/fontawesome-all.min.08916ac0fd078adfb58edc890460e2c8990729aee02bca7586404b56805f5219.js" as="script">

    

    

    
    
    

    
    
<!-- rel="me" links for IndieAuth -->







    
 
<meta property="og:title" content="焉知非鱼" />
<meta property="og:description"
      content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://ohmycloud.github.io/" />


    
        <meta property="og:updated_time" content="2024-04-11T00:00:00&#43;00:00"/>
    












     <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="焉知非鱼"/>
<meta name="twitter:description" content=""/>


    
    
    <link rel="alternate" type="application/rss+xml" href="https://ohmycloud.github.io/index.xml" title="Rss for 焉知非鱼" />
    <link rel="alternate" type="application/atom+xml" href="https://ohmycloud.github.io/atom.xml" title="Atom for 焉知非鱼" />
    <link rel="alternate" type="application/jf2feed+json" href="https://ohmycloud.github.io/jf2feed.json" title="Jf2feed for 焉知非鱼" />
    
     






    
    
    
    <meta name="hugo-build-date" content="2024-03-01T16:16:06Z"/>
    <meta name="hugo-commit-hash" content="312735366b20d64bd61bff8627f593749f86c964"/>
    <meta name="generator" content="Hugo 0.123.7">
</head>


    
        <body lang="en">
    

        
        <div class="border" id="home"></div>

        <div class="wrapper">   
            
<nav id="nav" class="nav-collapse opened" aria-hidden="false">
    <ul class="navbar">
        <li><a class="active" href="/">Home</a></li>
        
            
                <li><a class="" href="https://ohmycloud.github.io/posts/">Posts</a></li>
            
        
            
                <li><a class="" href="https://ohmycloud.github.io/notes/">Notes</a></li>
            
        
        
            <li><a class="" href="https://ohmycloud.github.io/search/">Search</a></li>
        
    </ul>
</nav>

            <div class="container">
                <header class="masthead">
                    <div class="masthead-title no-text-decoration">
                        <a href="/">焉知非鱼</a> <span class="blinking-cursor">❚</span>
                    </div>
                    <div class="masthead-tagline">
                        Wait the light to fall
                    </div>
                </header>

                

<div class="posts h-feed">
    <header>
        
        <data class="u-url" value="https://ohmycloud.github.io/"></data>
         





        <data class="p-name" value="焉知非鱼"></data>
    </header>
    
    
        <article class="summary h-entry posts">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/posts/71.variables/'> 变量</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-14T21:13:31+0800" class="dt-published">Fri Dec 14, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>变量名以一个叫做魔符 sigil 的特殊字符开头, 后面跟着一个可选的第二个叫做 twigil 的特殊字符, 然后是一个标识符.
Sigils 符号 类型约束 默认类型 Flattens Assignment $ Mu (no type constraint) Any No item &amp; Callable Callable No item @ Positional Array Yes list % Associative Hash Yes list 例子:
my $square = 9 ** 2; my @array = 1, 2, 3; # Array variable with three elements my %hash = London =&gt; &#39;UK&#39;, Berlin =&gt; &#39;Germany&#39;; 默认类型可以使用 is 关键字设置。
class FailHash is Hash { has Bool $!</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/posts/71.variables/'
               title="Read more about 变量">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 变量</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/a-practical-example-of-mojo-dom/'> 第十四天 - Mojo::DOM 实例</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-14T12:30:57+0000" class="dt-published">Fri Dec 14, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>随着最新版本的Mojolicious，Mojo::DOM获得了很多力量，我很兴奋尝试，但没有时间。最近，我在实际工作中遇到了一个问题（在工程，采购和施工，或简称EPC），我在很短的时间内用Mojo::DOM（和Mojolicious的其他部分）解决了 - 包括学习如何使用Mojo::DOM，我以前从未做过。
任务 - 简单，但乏味 3D模型和绘图是很棒的工具，但实际上并不是那么完美。建筑公差就是它们的原因，我们公司非常依赖激光扫描，我们在那里进入项目现场并创建一个竣工条件的点云。这会生成数百个需要花费数小时才能处理的文件 - 最近的一个项目有超过30亿个人点。这些对于我们所做的每个项目的工程，建模和构造都至关重要。
问题是当我们的3D建模软件（Tekla Structures）处理点云时，它会将每个文件名从人类可读的东西（例如Pipe Rack Area1）更改为散列，如2e9d52829f973c5b98f60935d8a9fa2b。当一个项目可能有几十个区域时，这不是非常用户友好，而您实际上只想一次加载一个或两个（平均面积为15gb！）。
点云提供的关键信息太难或太昂贵，无法直接建模
幸运的是，Tekla使用了许多任何人都可以编辑的标准文件格式 - 包括使用XML来描述它已处理的每个点云。当然，我可以手工编辑它们来更改名称，但是每次扫描和每个项目都必须这样做 - 这不是一个好的解决方案。
方便的是，XML文件包含哈希名称和原始文件名 - 所以我知道我可以使用Mojo::DOM来解析XML并将点云重命名为人类可读。这个简单的任务就是Mojolicious如何用相对较短的代码完成大量工作的完美例子。结果如下：
#!/usr/bin/perl use Mojo::Base -base; use Mojo::Util qw(getopt); use Mojo::File; use Mojo::DOM; getopt &#39;p|path=s&#39; =&gt; \my $path; sub main { # look in xml elements for laserscans that have hashes for names my $file = Mojo::File-&gt;new($path, &#39;pointclouds.xml&#39;); my $dom = Mojo::DOM-&gt;new($file-&gt;slurp); # if &#39;Hash&#39; is populated, rename_files(); otherwise ignore for my $e ($dom-&gt;find(&#39;PointCloudData&#39;)-&gt;each) { $e-&gt;{Folder} = rename_files($e) and $e-&gt;{Hash} = &#39;&#39; if $e-&gt;{Hash}; } # save xml file so we don&#39;t try to rename the pointclouds again $file-&gt;spurt($dom); } sub rename_files { # rename pointcloud folder and database file my $e = shift; my $newname = $e-&gt;{Folder} =~ s/$e-&gt;{Hash}/$e-&gt;{Name}/r; say &#34;renaming: $e-&gt;{Folder} to:\n$newname&#34;; rename $e-&gt;{Folder}, $newname || die $!</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/a-practical-example-of-mojo-dom/'
               title="Read more about 第十四天 - Mojo::DOM 实例">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 第十四天 - Mojo::DOM 实例</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/another-solution-of-yesterday-problem/'> 🎄 14/25. 昨天问题的另一个解决方案</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-14T09:15:43+0000" class="dt-published">Fri Dec 14, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>欢迎来到 Raku One-Liner Advent Calendar 的第14天！今天，我们正在提出我们昨天解决的问题的另一个答案。任务是计算二十世纪第一个月的所有星期日。
昨天，我们只扫描了整个世纪的所有日子，选择星期日（ .day-of-week == 7）并且是本月的第一天（.day == 1）。
可以制作更有效的算法。由于我们只对本月的第一天感兴趣，因此无需在100年内扫描所有36525天，而只需要扫描100天，这是1901年到2000年之间每个月的第一天。
因此，我们需要两个嵌套循环：年和月。我们需要两个 for 吗？不必要。我们使用 X 运算符;我们从以前的出版帖子中熟悉它。
这是我们今天的单行：
(gather for 1901..2000 X 1..12 { take Date.new(|@_, 1) }).grep(*.day-of-week == 7).elems.say; for 1901..2000 X 1..12 循环在遍历二十世纪的每个月份。对于每个循环变量，我们通过调用具有三个参数的构造函数来创建 Date 对象。
请注意，在循环内部，您可以同时使用 $_[0] 和 $_[1]，以及 @_[0] 和 @_[1]。在第一种情况下，$_ 变量包含两个元素的列表，而在第二种情况下，它是一个数组 @_。如果您只是使用点来调用主题（默认）变量上的方法，则可以实现最短的代码：.[0] 和 .[1]。
您可以键入 Date.new(.[0], .[1], 1) 代替 Date.new(|@_, 1)。 |@_ 语法用于展开数组，否则 Raku 会认为您将数组作为第一个参数传递。
在 gather-take 对儿的帮助下，将这些月份的所有第一天收集到序列中。
最后一步是昨天的 grep，但这次我们只需要选择星期日，所以单个 *.day-of-week == 7 条件就足够了。
elems 方法的调用返回列表中元素的数量，即我们正在寻找的星期日数量。因此，请用 say 打印出来。</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/another-solution-of-yesterday-problem/'
               title="Read more about 🎄 14/25. 昨天问题的另一个解决方案">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 🎄 14/25. 昨天问题的另一个解决方案</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/%E4%BD%BF%E7%94%A8-spark-hbase-connector-%E8%AF%BB%E5%8F%96-hbase/'> 使用 Spark HBase Connector 读取 HBase</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-13T16:16:21+0000" class="dt-published">Thu Dec 13, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>pom 依赖：
&lt;!-- https://mvnrepository.com/artifact/com.hortonworks/shc-core --&gt; &lt;dependency&gt; &lt;groupId&gt;com.hortonworks&lt;/groupId&gt; &lt;artifactId&gt;shc-core&lt;/artifactId&gt; &lt;version&gt;1.1.1-2.1-s_2.11&lt;/version&gt; &lt;/dependency&gt; 部分代码：
package xxxx.xxxx import org.apache.log4j.{Level, Logger} import org.apache.spark.sql.execution.datasources.hbase._ import org.apache.spark.sql.functions._ import org.apache.spark.sql.{DataFrame, SparkSession} /** * 提交方式 * spark2-submit --name HBASE-CONNECTOR --files /etc/hbase/conf/hbase-site.xml --class xxx.xxxx --master yarn --deploy-mode cluster --driver-memory 2g --driver-cores 2 --executor-memory 2g --executor-cores 1 --num-executors 2 wmanxiety-1.0-SNAPSHOT.jar --day 20180810 --repartition 500 --interval 7 */ object MileageAnxiety { def cat = s&#34;&#34;&#34;{ |&#34;table&#34;:{&#34;namespace&#34;:&#34;default&#34;, &#34;name&#34;:&#34;trip_signal&#34;, &#34;tableCoder&#34;:&#34;PrimitiveType&#34;}, |&#34;rowkey&#34;:&#34;key&#34;, |&#34;columns&#34;:{ |&#34;rowkey&#34; :{&#34;cf&#34;:&#34;rowkey&#34;, &#34;col&#34;:&#34;key&#34;, &#34;type&#34;:&#34;string&#34;}, |&#34;vin&#34; :{&#34;cf&#34;:&#34;info&#34;, &#34;col&#34;:&#34;vin&#34;, &#34;type&#34;:&#34;string&#34;}, |&#34;tripStatus&#34; :{&#34;cf&#34;:&#34;info&#34;, &#34;col&#34;:&#34;tripStatus&#34;, &#34;type&#34;:&#34;string&#34;}, |&#34;tripStartTime&#34;:{&#34;cf&#34;:&#34;info&#34;, &#34;col&#34;:&#34;tripStartTime&#34;, &#34;type&#34;:&#34;string&#34;}, |&#34;tripEndTime&#34; :{&#34;cf&#34;:&#34;info&#34;, &#34;col&#34;:&#34;tripEndTime&#34;, &#34;type&#34;:&#34;string&#34;}, |&#34;tripDistance&#34; :{&#34;cf&#34;:&#34;info&#34;, &#34;col&#34;:&#34;tripDistance&#34;, &#34;type&#34;:&#34;string&#34;}, |&#34;startSoc&#34; :{&#34;cf&#34;:&#34;info&#34;, &#34;col&#34;:&#34;startSoc&#34;, &#34;type&#34;:&#34;string&#34;}, |&#34;endSoc&#34; :{&#34;cf&#34;:&#34;info&#34;, &#34;col&#34;:&#34;endSoc&#34;, &#34;type&#34;:&#34;string&#34;}, |&#34;maxSpeed&#34; :{&#34;cf&#34;:&#34;info&#34;, &#34;col&#34;:&#34;maxSpeed&#34;, &#34;type&#34;:&#34;string&#34;}, |&#34;startMileage&#34; :{&#34;cf&#34;:&#34;info&#34;, &#34;col&#34;:&#34;startMileage&#34;, &#34;type&#34;:&#34;string&#34;}, |&#34;coordinate&#34; :{&#34;cf&#34;:&#34;info&#34;, &#34;col&#34;:&#34;coordinate&#34;, &#34;type&#34;:&#34;string&#34;} |} |}&#34;&#34;&#34;.</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/%E4%BD%BF%E7%94%A8-spark-hbase-connector-%E8%AF%BB%E5%8F%96-hbase/'
               title="Read more about 使用 Spark HBase Connector 读取 HBase">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 使用 Spark HBase Connector 读取 HBase</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry posts">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/posts/70.unicode-versus-ascii-symbols/'> Unicode vs. ASCII 符号</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-13T21:13:31+0800" class="dt-published">Thu Dec 13, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>可以在 Raku 中使用以下 Unicode 符号，而无需加载任何其他模块。其中一些具有可以使用 ASCII 独有字符键入的等效物。这些变体通常由比 Unicode 版本更多的字符组成，因此它们看起来更大。
下面参考 unicode 码点的各种属性。最终列表可以在这里找到：https://www.unicode.org/Public/UCD/latest/ucd/PropList.txt.
字母字符 任何具有 Ll（字母，小写），Lu（字母，大写），Lt（字母，标题），Lm（字母，修饰符）或 Lo（字母，其他）属性的代码点都可以像任何其他字母一样使用 ASCII 范围内的字符。
数字字符 任何具有 Nd（数字，十进制数字）属性的代码点都可以用作任何数字的数字。例如：
my $var = １９; # U+FF11 U+FF19 say $var + 2; # OUTPUT: «21␤» 数字值 任何具有 No（Number，other）或 Nl（Number，letter）属性的代码点都可以单独用作数值，例如 ½ 和 ⅓。 （这些不是十进制数字，因此不能组合。）例如：
my $var = ⅒ + 2 + Ⅻ; # here ⅒ is No and Rat and Ⅻ is Nl and Int say $var; # OUTPUT: «14.1␤» 空白字符 除了空格和制表符，您还可以使用具有 Zs（分隔符，空格），Zl（分隔符，行）或 Zp（分隔符，段落）属性的任何其他 unicode 空白字符。</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/posts/70.unicode-versus-ascii-symbols/'
               title="Read more about Unicode vs. ASCII 符号">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about Unicode vs. ASCII 符号</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/taking-on-roles/'> 第十三天 - 承担角色</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-13T12:25:53+0000" class="dt-published">Thu Dec 13, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>在我之前的 Advent 文章中，我创建了高阶 promise并向您展示了如何使用它们。我没有告诉你它们如何工作的魔力。现在我将从另一个方向开发另一个例子。
有时候我希望 Mojo::File 的行为有点不同。我经常有一个路径，我想只将基本名称与不同的目录结合起来。我最终为两者制作 Mojo::File 对象，然后使用目录对象来获得我想要的东西：
use Mojo::File qw(path); my $path = Mojo::File-&gt;new( &#39;/Users/brian/bin/interesting.txt&#39; ); my $dir = Mojo::File-&gt;new( &#39;/usr/local/bin&#39; ); my $new_path = $dir-&gt;child( $path-&gt;basename ); say $new_path; # /usr/local/bin/interesting.txt 那很烦人。我不喜欢它需要这么多步骤。我想要一些方法。我宁愿能够像这样编写它，我从有趣的文件开始并继续处理它而不是切换到其他对象：
use Mojo::File qw(path); my $new_path = Mojo::File -&gt;new( &#39;/Users/brian/bin/interesting.txt&#39; ) -&gt;rebase( &#39;/usr/local/bin&#39; ); # this isn&#39;t a method say $new_path; # /usr/local/bin/interesting.txt 我可以通过各种 Perl 技巧通过猴子补丁或子类化将此方法添加到 Mojo::File。但是，像往常一样，Mojolicious 期待我的愿望并提供一种方法来做到这一点。我可以添加一个角色，
当我跳进它时，你可以自己阅读角色。首先，我创建一个代表我的角色的类。我定义了我想要的方法。我使用我想要影响的包的名称，添加 ::Role::，然后我想使用的名称;它的小写并不重要。 Mojo::Base 设置了当我导入 -role 时所需的一切：
package Mojo::File::Role::rebase { use Mojo::Base qw(-role -signatures); sub rebase ($file, $dir) { $file-&gt;new( $dir, $file-&gt;basename ) } } 我在我想要影响的类上使用 with_roles 来应用我的新功能。因为我使用命名约定通过在它前面加上目标类（Mojo::File），然后是 ::Role::，然后是我想要的短名称。当我应用这个时，我可以省去大部分包裹名称，并使用前面加号的短名称：</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/taking-on-roles/'
               title="Read more about 第十三天 - 承担角色">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 第十三天 - 承担角色</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/how-many-days-in-the-century-match-the-condition/'> 🎄 13/25. 本世纪多少天符合条件?</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-13T09:20:12+0000" class="dt-published">Thu Dec 13, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>欢迎来到 Raku One-Liner Advent Calendar 的第13天！今天的单行将很长，最好用两行编写，但它会显示 Raku 的 Date 对象的一个​​非常好的功能：它可以很容易地在一个范围内使用。
今天，我们正在解决欧拉项目的问题19。从本质上讲，任务是计算在1901年1月1日至2000年12月31日期间的星期日，这是在第一个月。
Raku 中的 Date 对象实现了 succ 和 prec 方法，它们递增和递减日期。也可以使用两个日期作为范围的边界：
say ( Date.new(year =&gt; 1901) ..^ Date.new(year =&gt; 2001) ).grep({.day == 1 &amp;&amp; .day-of-week == 7}).elems 在这里评论一下。
首先，使用单个命名参数（year）创建两个 Date 对象。这是可能的，因为构造函数的签名具有月和日的默认值：
multi method new( Date: Int:D() :$year!, Int:D() :$month = 1, Int:D() :$day = 1, :&amp;formatter, *%_) { . . . } 因此，创建1月1日的日期很容易，但是在一年的最后一天你不能这样做。但是 Raku 有一个很好的范围运算符 ..^，它排除了右边界并允许我们节省相当多的字符（而我们还没有玩 Raku Golf :-)。
具有日期的所有显式部分的较长版本将如下所示：
say ( Date.</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/how-many-days-in-the-century-match-the-condition/'
               title="Read more about 🎄 13/25. 本世纪多少天符合条件?">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 🎄 13/25. 本世纪多少天符合条件?</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry posts">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/posts/2018-12-13-web-server-from-scratch-with-cro-and-debian/'> 第十三天 - 使用 Cro 和 Debian 从头构建 Web 服务</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-13T10:43:05+0800" class="dt-published">Thu Dec 13, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>我和圣诞老人​​谈过，他说他不知道如何在 Debian 上安装 Cro，所以我对自己说：我要帮助他。
如果您对 Apache 等 Web 服务器有一些经验，并且您已经听说过 Raku 强大的并发/响应方面，那么您肯定有兴趣了解 Cro 服务。这篇文章的受众是具有 Debian 基本经验的人，或者在 Raku 新手&hellip;就像圣诞老人一样。
Cro 是一个 Raku 模块，它提供了轻松构建反应式和并发服务所需的一切，例如：Web 服务器。
在这篇文章中，我们将看到如何在 Debian 中安装 Cro，这是最受欢迎的 Linux 发行版之一。然后，我将解释 Cro 的演示示例。
我们将使用 Debian 9,64 位（Stretch），我们将在安装后启动它。
安装 Rakudo Raku 编译器 Rakudo 是 Cro 模块运行的当前 Raku 编译器。安装 Rakudo 的常规方法是安装 Rakudo Star，但我更喜欢快速的方式：rakudo-pkg &hellip;&hellip;怎么样？只需从此 repo 下载并安装相应的 Debian 软件包。在我们的例子中，是来自 Debian 9, 64位的 .deb 文件。
使用 Debian 中的 root 用户，我们可以在 root home 中为 Rakudo 创建一个包文件夹，进入这个目录，下载 Debian 9, 64 位的当前 Rakudo 包，并安装它。就我而言：</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/posts/2018-12-13-web-server-from-scratch-with-cro-and-debian/'
               title="Read more about 第十三天 - 使用 Cro 和 Debian 从头构建 Web 服务">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 第十三天 - 使用 Cro 和 Debian 从头构建 Web 服务</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/%E4%BD%BF%E7%94%A8-phoenix-%E8%AF%BB%E5%8F%96-hbase/'> 使用 Phoenix 读取 HBase</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-12T16:16:21+0000" class="dt-published">Wed Dec 12, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>我使用的是 CDH5.13.2， 所以 pom 文件依赖为：
&lt;dependency&gt; &lt;groupId&gt;org.apache.phoenix&lt;/groupId&gt; &lt;artifactId&gt;phoenix-spark&lt;/artifactId&gt; &lt;version&gt;4.14.0-cdh5.13.2&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.phoenix&lt;/groupId&gt; &lt;artifactId&gt;phoenix-core&lt;/artifactId&gt; &lt;version&gt;4.14.0-cdh5.13.2&lt;/version&gt; &lt;/dependency&gt; 这样读取：
val df = sqlContext.read.format(&#34;jdbc&#34;) .option(&#34;driver&#34;, &#34;org.apache.phoenix.jdbc.PhoenixDriver&#34;) .option(&#34;url&#34;, &#34;jdbc:phoenix:localhost:2181&#34;) .option(&#34;dbtable&#34;, &#34;US_POPULATION&#34;) .load() 或者
val df = sqlContext.load( &#34;jdbc&#34;, Map(&#34;zkUrl&#34; -&gt; &#34;localhost:2181&#34;, &#34;url&#34; -&gt; &#34;jdbc:phoenix:localhost:2181&#34;, &#34;dbtable&#34; -&gt; &#34;US_POPULATION&#34;, &#34;driver&#34; -&gt; &#34;org.apache.phoenix.jdbc.PhoenixDriver&#34;) ) </p>

    </div>

    
    
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/using-minion-in-dancer-apps/'> 第十二天 - 在 Dancer 应用程序中使用 Minion</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-12T14:22:46+0000" class="dt-published">Wed Dec 12, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>在 $work，我们使用 Dancer 构建了一个 API，用于生成 PDF 文档和 XML 文件。此 API 是保险登记系统的重要组成部分：生成 PDF 以立即在 Web 浏览器中传送给客户端，并且 XML 一旦可用就会立即传送给运营商。由于XML 通常需要花费大量时间来生成，因此在后台生成作业，以免在较长时间内占用应用程序服务器。完成后，开发了一个自行开发的流程管理系统，并通过 fork() 进程，跟踪其 pid，并希望我们以后可以成功获得完成的流程。
这种方法存在一些问题： - 它很脆弱 - 它不能扩展 - 作为开发人员搞砸某事太容易了
在2019年，我们不得不加大承担更大的工作量。目前的解决方案根本无法处理我们预计需要处理的工作量。z直到遇见 Minion。
注意：本文中使用的技术与 Dancer 或 Dancer2 同样适用。
为何选择 Minion？ 我们研究了 Minion 的几种替代品，包括 beanstalkd 和 celeryd。然而，使用其中任何一个意味着涉及我们已经过度征税的基础设施团队;使用 Minion 允许我们使用我的团队已经拥有的专业知识，而不必向其他人提供帮助。从开发的角度来看，使用 Perl 开发的产品为我们提供了最快的实施时间。
扩展我们现有的设置几乎是不可能的。处理我们分叉的进程所消耗的资源不仅难以处理，而且不可能在多个服务器上运行作业。从 Minion 开始也给了我们一个急需的机会来清理一些需要重构的代码。通过最少量的工作，我们能够清理我们的 XML 呈现代码并使其在 Minion 中运行。通过此清理，我们可以更轻松地获取有关XML呈现作业消耗了多少内存和 CPU 的信息。这些信息对于我们规划未来容量至关重要。
进入 Minion 由于我们是一个舞蹈工作室，而不是 Mojolicious，因此我们可以从 Mojolicious 那里获得很多与 Minion 合作的便利。鉴于我们还在商业模式中共享一些基于 Minion 的代码，我们必须围绕 Minion 构建一些自己的管道：
package MyJob::JobQueue; use Moose; use Minion; use MyJob::Models::FooBar; with &#39;MyJob::Roles::ConfigReader&#39;; has &#39;runner&#39; =&gt; ( is =&gt; &#39;ro&#39;, isa =&gt; &#39;Minion&#39;, lazy =&gt; 1, default =&gt; sub( $self ) { $ENV{ MOJO_PUBSUB_EXPERIMENTAL } = 1; Minion-&gt;new( mysql =&gt; MyJob::DBConnectionManager-&gt;new-&gt;get_connection_uri({ db_type =&gt; &#39;feeds&#39;, io_type =&gt; &#39;rw&#39;, })); }, ); 我们在 Minion 周围包含了一个简单的 Moose 类，以便使用我们想要的额外功能轻松添加到任何类或 Dancer 应用程序。</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/using-minion-in-dancer-apps/'
               title="Read more about 第十二天 - 在 Dancer 应用程序中使用 Minion">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 第十二天 - 在 Dancer 应用程序中使用 Minion</span>
            </a>
        </div>
    
</article>
      
    
</div>



                <footer>
                    

<div class="pagination no-text-decoration">
    
        <a class="pagination-item newer" href="/page/37/">Newer</a>
    
    
        <a class="pagination-item older" href="/page/39/">Older</a>
    
</div>




                    <ul class="no-bullets feed right inline">
    
        
        
            <li class="inline no-text-decoration">
                <a href="https://ohmycloud.github.io/index.xml">RSS</a>
            </li>
        
    
        
        
            <li class="inline no-text-decoration">
                <a href="https://ohmycloud.github.io/atom.xml">ATOM</a>
            </li>
        
    
        
        
    
</ul>
<div class="clear-float"></div>

                </footer>
                <hr />
            </div>               

            <footer> 
                

<ul class="social no-text-decoration">
    
</ul>










 
    
    



<p class="generated no-text-decoration">
    Generated using  <a href="https://gitlab.com/kaushalmodi/hugo-theme-refined"><code class="nobr">hugo-theme-refined</code></a> + <span class="nobr">Hugo <a href="https://github.com/gohugoio/hugo/commit/312735366b20d64bd61bff8627f593749f86c964">0.123.7</a></span>
</p>

<p>
    
</p>




<div class="badges no-text-decoration">
    
    

    
</div>




<script type="application/javascript">var nav=responsiveNav("#nav");</script>




<script defer src="/js/libs/fragmentions/wrapper.min.e8c468c89edc4f5dccaa8c720c6b220b3088a16cd7b1e4a1e3345985788260c9.js"></script>









            </footer>
        </div> 
    </body>
</html>
