<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">

    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
    
    
    

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5">

    
    <meta name="referrer" content="no-referrer">

    <title>
        
            焉知非鱼 ❚
        
    </title>

    
    


    
    
    
    

    
    
    
    

    
    
    

    
    
    
    <style>
     
     
     :root {
         --theme-color: #ac4142;
         --theme-color-light: rgba(172, 65, 66, 0.2);
     }
     
     html {
         line-height: 1.5;
     }
    </style>

    
    

    
    
    
    
    <link rel="stylesheet" href="/css/refined.min.7f6d3ee611034e4ebcbc063f1db3bc042fecdc8901afbedad80ff02bae409204.css">
    
    <link rel="preload" href="/css/refined.min.7f6d3ee611034e4ebcbc063f1db3bc042fecdc8901afbedad80ff02bae409204.css" as="style">

    



    
        <style>
         
         /* Background */ .chroma { background-color: #ffffff }
/* Error */ .chroma .err { color: #a61717; background-color: #e3d2d2 }
/* LineTableTD */ .chroma .lntd { vertical-align: top; padding: 0; margin: 0; border: 0; }
/* LineTable */ .chroma .lntable { border-spacing: 0; padding: 0; margin: 0; border: 0; width: auto; overflow: auto; display: block; }
/* LineHighlight */ .chroma .hl { display: block; width: 100%;background-color: #ffffcc }
/* LineNumbersTable */ .chroma .lnt { margin-right: 0.4em; padding: 0 0.4em 0 0.4em; }
/* LineNumbers */ .chroma .ln { margin-right: 0.4em; padding: 0 0.4em 0 0.4em; }
/* Keyword */ .chroma .k { color: #000000; font-weight: bold }
/* KeywordConstant */ .chroma .kc { color: #000000; font-weight: bold }
/* KeywordDeclaration */ .chroma .kd { color: #000000; font-weight: bold }
/* KeywordNamespace */ .chroma .kn { color: #000000; font-weight: bold }
/* KeywordPseudo */ .chroma .kp { color: #000000; font-weight: bold }
/* KeywordReserved */ .chroma .kr { color: #000000; font-weight: bold }
/* KeywordType */ .chroma .kt { color: #445588; font-weight: bold }
/* NameAttribute */ .chroma .na { color: #008080 }
/* NameBuiltin */ .chroma .nb { color: #0086b3 }
/* NameBuiltinPseudo */ .chroma .bp { color: #999999 }
/* NameClass */ .chroma .nc { color: #445588; font-weight: bold }
/* NameConstant */ .chroma .no { color: #008080 }
/* NameDecorator */ .chroma .nd { color: #3c5d5d; font-weight: bold }
/* NameEntity */ .chroma .ni { color: #800080 }
/* NameException */ .chroma .ne { color: #990000; font-weight: bold }
/* NameFunction */ .chroma .nf { color: #990000; font-weight: bold }
/* NameLabel */ .chroma .nl { color: #990000; font-weight: bold }
/* NameNamespace */ .chroma .nn { color: #555555 }
/* NameTag */ .chroma .nt { color: #000080 }
/* NameVariable */ .chroma .nv { color: #008080 }
/* NameVariableClass */ .chroma .vc { color: #008080 }
/* NameVariableGlobal */ .chroma .vg { color: #008080 }
/* NameVariableInstance */ .chroma .vi { color: #008080 }
/* LiteralString */ .chroma .s { color: #dd1144 }
/* LiteralStringAffix */ .chroma .sa { color: #dd1144 }
/* LiteralStringBacktick */ .chroma .sb { color: #dd1144 }
/* LiteralStringChar */ .chroma .sc { color: #dd1144 }
/* LiteralStringDelimiter */ .chroma .dl { color: #dd1144 }
/* LiteralStringDoc */ .chroma .sd { color: #dd1144 }
/* LiteralStringDouble */ .chroma .s2 { color: #dd1144 }
/* LiteralStringEscape */ .chroma .se { color: #dd1144 }
/* LiteralStringHeredoc */ .chroma .sh { color: #dd1144 }
/* LiteralStringInterpol */ .chroma .si { color: #dd1144 }
/* LiteralStringOther */ .chroma .sx { color: #dd1144 }
/* LiteralStringRegex */ .chroma .sr { color: #009926 }
/* LiteralStringSingle */ .chroma .s1 { color: #dd1144 }
/* LiteralStringSymbol */ .chroma .ss { color: #990073 }
/* LiteralNumber */ .chroma .m { color: #009999 }
/* LiteralNumberBin */ .chroma .mb { color: #009999 }
/* LiteralNumberFloat */ .chroma .mf { color: #009999 }
/* LiteralNumberHex */ .chroma .mh { color: #009999 }
/* LiteralNumberInteger */ .chroma .mi { color: #009999 }
/* LiteralNumberIntegerLong */ .chroma .il { color: #009999 }
/* LiteralNumberOct */ .chroma .mo { color: #009999 }
/* Operator */ .chroma .o { color: #000000; font-weight: bold }
/* OperatorWord */ .chroma .ow { color: #000000; font-weight: bold }
/* Comment */ .chroma .c { color: #999988; font-style: italic }
/* CommentHashbang */ .chroma .ch { color: #999988; font-style: italic }
/* CommentMultiline */ .chroma .cm { color: #999988; font-style: italic }
/* CommentSingle */ .chroma .c1 { color: #999988; font-style: italic }
/* CommentSpecial */ .chroma .cs { color: #999999; font-weight: bold; font-style: italic }
/* CommentPreproc */ .chroma .cp { color: #999999; font-weight: bold; font-style: italic }
/* CommentPreprocFile */ .chroma .cpf { color: #999999; font-weight: bold; font-style: italic }
/* GenericDeleted */ .chroma .gd { color: #000000; background-color: #ffdddd }
/* GenericEmph */ .chroma .ge { color: #000000; font-style: italic }
/* GenericError */ .chroma .gr { color: #aa0000 }
/* GenericHeading */ .chroma .gh { color: #999999 }
/* GenericInserted */ .chroma .gi { color: #000000; background-color: #ddffdd }
/* GenericOutput */ .chroma .go { color: #888888 }
/* GenericPrompt */ .chroma .gp { color: #555555 }
/* GenericStrong */ .chroma .gs { font-weight: bold }
/* GenericSubheading */ .chroma .gu { color: #aaaaaa }
/* GenericTraceback */ .chroma .gt { color: #aa0000 }
/* GenericUnderline */ .chroma .gl { text-decoration: underline }
/* TextWhitespace */ .chroma .w { color: #bbbbbb }

         
         /* Overrides on top of the theme and Chroma CSS */
/* Chroma-based lines highlighting in code blocks */
.chroma .hl {
    background-color: #e8e8e8;
    /* Extend highlight up to 100 characters (assuming that the code blocks never have more than 100 characters in a line) */
    min-width: 100ch;
}
/* GenericHeading */ .chroma .gh { color: #999999; font-weight: bold }
/* GenericSubheading */ .chroma .gu { color: #aaaaaa; font-weight: bold }

         
        </style>
    

    

    
    
    

    
    <script src="/js/responsive-nav-orig.min.e2b5f2a956b488f466da513820636134defdc38b90ed566248960593f2bb4ba5.js"></script>
    
    <link rel="preload" href="/js/responsive-nav-orig.min.e2b5f2a956b488f466da513820636134defdc38b90ed566248960593f2bb4ba5.js" as="script">

    
    
    <script defer src="/js/libs/fa/fontawesome-all.min.08916ac0fd078adfb58edc890460e2c8990729aee02bca7586404b56805f5219.js"></script>
    
    <link rel="preload" href="/js/libs/fa/fontawesome-all.min.08916ac0fd078adfb58edc890460e2c8990729aee02bca7586404b56805f5219.js" as="script">

    

    

    
    
    

    
    
<!-- rel="me" links for IndieAuth -->







    
 
<meta property="og:title" content="焉知非鱼" />
<meta property="og:description"
      content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://ohmycloud.github.io/" />


    
        <meta property="og:updated_time" content="2022-12-27T00:00:00&#43;00:00"/>
    












     <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="焉知非鱼"/>
<meta name="twitter:description" content=""/>


    
    
    <link rel="alternate" type="application/rss+xml" href="https://ohmycloud.github.io/index.xml" title="Rss for 焉知非鱼" />
    <link rel="alternate" type="application/atom+xml" href="https://ohmycloud.github.io/atom.xml" title="Atom for 焉知非鱼" />
    <link rel="alternate" type="application/jf2feed+json" href="https://ohmycloud.github.io/jf2feed.json" title="Jf2feed for 焉知非鱼" />
    
     






    
    
    
    <meta name="hugo-build-date" content="2024-03-01T16:16:06Z"/>
    <meta name="hugo-commit-hash" content="312735366b20d64bd61bff8627f593749f86c964"/>
    <meta name="generator" content="Hugo 0.123.7">
</head>


    
        <body lang="en">
    

        
        <div class="border" id="home"></div>

        <div class="wrapper">   
            
<nav id="nav" class="nav-collapse opened" aria-hidden="false">
    <ul class="navbar">
        <li><a class="active" href="/">Home</a></li>
        
            
                <li><a class="" href="https://ohmycloud.github.io/posts/">Posts</a></li>
            
        
            
                <li><a class="" href="https://ohmycloud.github.io/notes/">Notes</a></li>
            
        
        
            <li><a class="" href="https://ohmycloud.github.io/search/">Search</a></li>
        
    </ul>
</nav>

            <div class="container">
                <header class="masthead">
                    <div class="masthead-title no-text-decoration">
                        <a href="/">焉知非鱼</a> <span class="blinking-cursor">❚</span>
                    </div>
                    <div class="masthead-tagline">
                        Wait the light to fall
                    </div>
                </header>

                

<div class="posts h-feed">
    <header>
        
        <data class="u-url" value="https://ohmycloud.github.io/"></data>
         





        <data class="p-name" value="焉知非鱼"></data>
    </header>
    
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/sub-trip-using-flink/'> 使用 Flink 进行行程划分</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2019-02-27T17:25:58+0800" class="dt-published">Wed Feb 27, 2019</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>准备 ① 启动 Flink 本地模式
/usr/local/Cellar/apache-flink/1.7.0/libexec/bin/start-cluster.sh Starting cluster. Starting standalonesession daemon on host summer. Starting taskexecutor daemon on host summer. ② 模拟实时流数据
raku fake-streaming.pl6 该脚本每隔秒打印一行数据, 每隔 15 秒暂停打印, 然后在继续每隔一秒打印一行, 然后在 sleep 15 秒, 模拟行程间隔。
sub MAIN(Str :$host = &#39;0.0.0.0&#39;, Int :$port = 3333) { my $vin = &#39;LSJA0000000000091&#39;; my $last_meter = 0; react { whenever IO::Socket::Async.listen($host, $port) -&gt; $conn { react { my Bool:D $ignore = True; whenever Supply.interval(15).rotor(1, 1 =&gt; 1) { $ignore = !</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/sub-trip-using-flink/'
               title="Read more about 使用 Flink 进行行程划分">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 使用 Flink 进行行程划分</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry posts">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/posts/2019-02-03-threading-nqp-through-a-channel/'> Threading Nqp Through a Channel</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2019-02-03T11:07:23+0800" class="dt-published">Sun Feb 3, 2019</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>categories: [&ldquo;Raku&rdquo;] 考虑到 nqp 比普通 Perl 6 和线程快，两者结合起来应该会给我们带来不错的速度。在上一篇文章中承诺的使用 Supply 并没有真正的帮助。emit 会阻塞，直到 Supply 的内部队列被清空。如果我们想递归处理文件，文件系统可能会在递归线程被解除阻塞后停滞。如果我们在消费者中对文件系统施加压力，我们最好使用一个能迅速填满文件路径的 Channel。
让我们先模拟一个每时每刻都会停滞的消费者，并以 $c 为 Channel。
my @files; react { whenever $c -&gt; $path { @files.push: $path; sleep 1 if rand &lt; 0.00001; } } 如果我们尽可能快地抽出路径，我们可以填满相当多的 RAM，并给 CPU 缓存带来很大的压力。经过一些试验和错误，我发现当有超过64个工作线程等待被放到机器线程上时，在通道上的 .send 之前 sleep 会有帮助。这些信息可以通过 Telemetry::Instrument::ThreadPool::Snap.new&lt;gtq&gt; 访问。
my $c = Channel.new; start { my @dirs = &#39;/snapshots/home-2019-01-29&#39;; while @dirs.shift -&gt; str $dir { my Mu $dirh := nqp::opendir(nqp::unbox_s($dir)); while my str $name = nqp::nextfiledir($dirh) { next if $name eq &#39;.</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/posts/2019-02-03-threading-nqp-through-a-channel/'
               title="Read more about Threading Nqp Through a Channel">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about Threading Nqp Through a Channel</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/extract-section-block/'> 提取文本块儿的 5 种方法</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2019-01-19T23:53:38+0000" class="dt-published">Sat Jan 19, 2019</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>假设有一段文本, =begin code 和 =end code 把文本分割为一个一个的 section, 我想提取每一个 section 之间的内容。 Grammar 来拯救！
my $excerpt = q:to/END/; Here&#39;s some unimportant text. =begin code This code block is what we&#39;re after. We&#39;ll use &#39;ff&#39; to get it. =end code More unimportant text. =begin code I want this line. and this line as well. HaHa =end code More unimport text. =begin code Let&#39;s to go home. =end code END Grammar #use Grammar::Tracer; #use Grammar::Debugger; grammar ExtractSection { rule TOP { ^ &lt;section&gt;+ %% &lt;.</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/extract-section-block/'
               title="Read more about 提取文本块儿的 5 种方法">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 提取文本块儿的 5 种方法</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/toggle/'> 开关</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2019-01-19T10:56:07+0000" class="dt-published">Sat Jan 19, 2019</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>toggle 字面意思是开关, 函数签名如下：
method toggle(Any:D: *@conditions where .all ~~ Callable:D, Bool :$off --&gt; Seq:D) 它接收一个数组, 数组中的每个元素都是一个 Callable。
它迭代调用者, 产生一个 Seq, 根据开关是开还是关把接收到的值填充到结果中, 开关是开还是关取决于 @conditions 数组里面调用 Callables 的结果:
say (1..15).toggle(* &lt; 5, * &gt; 10, * &lt; 15); # OUTPUT: «(1 2 3 4 11 12 13 14)␤» say (1..15).toggle(:off, * &gt; 2, * &lt; 5, * &gt; 10, * &lt; 15); # OUTPUT: «(3 4 11 12 13 14)␤» 想象一下开关是打开还是关闭（True或False），如果它打开则产生值。默认情况下，该开关的初始状态处于 &ldquo;on&rdquo; 位置，除非 :$off 设置为 true 值，在这种情况下，初始状态将为&quot;off&quot;。</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/toggle/'
               title="Read more about 开关">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 开关</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/using-raku-grammars-to-decompressing-zelda3-gfx/'> 使用 Raku Grammars 解压缩 Zelda 3 GFX</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2019-01-15T10:37:24+0000" class="dt-published">Tue Jan 15, 2019</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>grammars
Grammar 结合 actions 可以解析字符串并从字符串中产生一些东西。如果说任何压缩后的数据遵循可能由相应的解压缩算法“解析”的结构，那就不足为奇了。
那么为什么不使用 Raku Grammar 进行这类工作呢？特别是我熟悉的压缩。
深入研究任天堂压缩 任天堂在他们的 SNES 游戏中使用了相同的基本压缩格式，并根据游戏使用了一些变体。这非常简单，在 ~2Mhz 的 SNES CPU 上很容易。
它是这样的：
&lt;a byte that contains an header&gt; the header is split into 2 parts : the 3 left most bits form a command number The 5 other bits code the lenght associated with the command &lt;An arbitrary number of bytes associated with the command&gt; &lt;repeat until the header is \xFF&gt; 命令取决于游戏，但是 Zelda 3 的命令非常简单</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/using-raku-grammars-to-decompressing-zelda3-gfx/'
               title="Read more about 使用 Raku Grammars 解压缩 Zelda 3 GFX">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 使用 Raku Grammars 解压缩 Zelda 3 GFX</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/%E4%BD%BF%E7%94%A8rotor%E6%93%8D%E4%BD%9C%E5%88%97%E8%A1%A8/'> 使用rotor操作列表</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2019-01-10T15:23:11+0000" class="dt-published">Thu Jan 10, 2019</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>假设有一个 0..100 的数字区间, 需要分成下面这样的区间：
0..5 5..10 10..15 15..20 20..25 25..30 30..35 35..40 40..45 45..50 50..55 55..60 60..65 65..70 70..75 75..80 80..85 85..90 90..95 95..100 rotor 来拯救：
.minmax.say for (0..100).rotor(6 =&gt; -1) 我想偷懒用程序生成下面的代码：
if (current &gt;=0 &amp;&amp; current &lt; 5) &#34;0&#34; if (current &gt;=5 &amp;&amp; current &lt; 10) &#34;1&#34; if (current &gt;=10 &amp;&amp; current &lt; 15) &#34;2&#34; if (current &gt;=15 &amp;&amp; current &lt; 20) &#34;3&#34; if (current &gt;=20 &amp;&amp; current &lt; 25) &#34;4&#34; if (current &gt;=25 &amp;&amp; current &lt; 30) &#34;5&#34; if (current &gt;=30 &amp;&amp; current &lt; 35) &#34;6&#34; if (current &gt;=35 &amp;&amp; current &lt; 40) &#34;7&#34; if (current &gt;=40 &amp;&amp; current &lt; 45) &#34;8&#34; if (current &gt;=45 &amp;&amp; current &lt; 50) &#34;9&#34; if (current &gt;=50 &amp;&amp; current &lt; 55) &#34;10&#34; if (current &gt;=55 &amp;&amp; current &lt; 60) &#34;11&#34; if (current &gt;=60 &amp;&amp; current &lt; 65) &#34;12&#34; if (current &gt;=65 &amp;&amp; current &lt; 70) &#34;13&#34; if (current &gt;=70 &amp;&amp; current &lt; 75) &#34;14&#34; if (current &gt;=75 &amp;&amp; current &lt; 80) &#34;15&#34; if (current &gt;=80 &amp;&amp; current &lt; 85) &#34;16&#34; if (current &gt;=85 &amp;&amp; current &lt; 90) &#34;17&#34; if (current &gt;=90 &amp;&amp; current &lt; 95) &#34;18&#34; if (current &gt;=95 &amp;&amp; current &lt; 100) &#34;19&#34; for (0.</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/%E4%BD%BF%E7%94%A8rotor%E6%93%8D%E4%BD%9C%E5%88%97%E8%A1%A8/'
               title="Read more about 使用rotor操作列表">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 使用rotor操作列表</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/sub-trip-with-structured-spark-streaming/'> 使用 Spark Structured Streaming 进行行程划分</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2019-01-05T14:15:31+0000" class="dt-published">Sat Jan 5, 2019</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>使用 Structured Spark Streaming 进行行程划分 我们有一辆车, 车上的传感器每隔 1 秒发出一条 JSON 格式的数据。每条数据包含 3 个字段：
field description type unit vin 车辆唯一标识 String 辆 createTime 信号发生时间 Long 毫秒 mileage 当前里程数 Int 千米 下面一段样本数据:
{&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667565,&#39;mileage&#39;:0} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667566,&#39;mileage&#39;:1} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667567,&#39;mileage&#39;:2} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667568,&#39;mileage&#39;:3} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667569,&#39;mileage&#39;:4} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667570,&#39;mileage&#39;:5} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667571,&#39;mileage&#39;:6} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667572,&#39;mileage&#39;:7} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667573,&#39;mileage&#39;:8} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667574,&#39;mileage&#39;:9} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667575,&#39;mileage&#39;:10} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667576,&#39;mileage&#39;:11} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667577,&#39;mileage&#39;:12} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667578,&#39;mileage&#39;:13} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667579,&#39;mileage&#39;:14} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667580,&#39;mileage&#39;:15} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667581,&#39;mileage&#39;:16} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667582,&#39;mileage&#39;:17} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667583,&#39;mileage&#39;:18} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667584,&#39;mileage&#39;:19} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667585,&#39;mileage&#39;:20} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667586,&#39;mileage&#39;:21} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667587,&#39;mileage&#39;:22} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667588,&#39;mileage&#39;:23} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667589,&#39;mileage&#39;:24} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667590,&#39;mileage&#39;:25} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667591,&#39;mileage&#39;:26} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667592,&#39;mileage&#39;:27} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667593,&#39;mileage&#39;:28} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667594,&#39;mileage&#39;:29} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667595,&#39;mileage&#39;:30} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667596,&#39;mileage&#39;:31} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667597,&#39;mileage&#39;:32} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667598,&#39;mileage&#39;:33} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667599,&#39;mileage&#39;:34} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667600,&#39;mileage&#39;:35} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667601,&#39;mileage&#39;:36} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667602,&#39;mileage&#39;:37} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667603,&#39;mileage&#39;:38} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667604,&#39;mileage&#39;:39} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667605,&#39;mileage&#39;:40} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667606,&#39;mileage&#39;:41} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667607,&#39;mileage&#39;:42} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667608,&#39;mileage&#39;:43} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667609,&#39;mileage&#39;:44} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667610,&#39;mileage&#39;:45} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667611,&#39;mileage&#39;:46} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667612,&#39;mileage&#39;:47} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667613,&#39;mileage&#39;:48} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667614,&#39;mileage&#39;:49} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667615,&#39;mileage&#39;:50} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667616,&#39;mileage&#39;:51} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667617,&#39;mileage&#39;:52} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667618,&#39;mileage&#39;:53} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667619,&#39;mileage&#39;:54} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667620,&#39;mileage&#39;:55} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667621,&#39;mileage&#39;:56} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667622,&#39;mileage&#39;:57} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667623,&#39;mileage&#39;:58} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667624,&#39;mileage&#39;:59} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667745,&#39;mileage&#39;:60} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667746,&#39;mileage&#39;:61} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667747,&#39;mileage&#39;:62} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667748,&#39;mileage&#39;:63} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667749,&#39;mileage&#39;:64} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667750,&#39;mileage&#39;:65} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667751,&#39;mileage&#39;:66} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667752,&#39;mileage&#39;:67} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667753,&#39;mileage&#39;:68} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667754,&#39;mileage&#39;:69} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667755,&#39;mileage&#39;:70} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667756,&#39;mileage&#39;:71} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667757,&#39;mileage&#39;:72} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667758,&#39;mileage&#39;:73} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667759,&#39;mileage&#39;:74} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667760,&#39;mileage&#39;:75} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667761,&#39;mileage&#39;:76} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667762,&#39;mileage&#39;:77} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667763,&#39;mileage&#39;:78} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667764,&#39;mileage&#39;:79} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667765,&#39;mileage&#39;:80} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667766,&#39;mileage&#39;:81} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667767,&#39;mileage&#39;:82} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667768,&#39;mileage&#39;:83} {&#39;vin&#39;:&#39;LSJA0000000000091&#39;,&#39;createTime&#39;:1546667769,&#39;mileage&#39;:84} 开车的时候, 从一个地方到另一个地方, 会有很多行程。</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/sub-trip-with-structured-spark-streaming/'
               title="Read more about 使用 Spark Structured Streaming 进行行程划分">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 使用 Spark Structured Streaming 进行行程划分</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/leap-seconds/'> 润秒</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2019-01-05T13:13:57+0000" class="dt-published">Sat Jan 5, 2019</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>2019年1月有闰秒吗？（剧透：没有）
今晚我们将在午夜时分从10倒数到0，并来到新的一年。
但是当我们倒数到0时，它会是2019年吗？如果有闰秒怎么办？
快点 - 让我们检查IETF提供的闰秒列表。
不 - 它看起来不错，2017年1月1日是最后一个，并且该列表在2019年6月28日之前是 OK 的。
两年前，情况有所不同。
在“午夜”（UTC）时，它变成了2017年。
~ $ raku -e &#39;say DateTime.new(&#34;2017-01-01T00:00:00Z&#34;).year&#39; 2017 但实际上，从晚上（和年）的11:59:59开始已经过了两秒钟！
~ $ raku -e &#39;say DateTime.new(&#34;2017-01-01T00:00:00Z&#34;) - DateTime.new(&#34;2016-12-31T23:59:59Z&#34;)&#39; 2 在它变成2017年的那一刻，有一个闰秒。now返回的值表明了这一点。
虽然今晚会很好：
~ $ raku -e &#39;say DateTime.new(&#34;2019-01-01T00:00:00Z&#34;) - DateTime.new(&#34;2018-12-31T23:59:59Z&#34;)&#39; 1 如果我们想要更明确，我们可以使用 posix 和 from-posix 将 DateTime 转换为 Instant 并再返回 - 后者将布尔值作为第二个参数来指示是否应该考虑闰秒。
my $date = DateTime.new(&#34;2017-01-01T00:00:00Z&#34;); my $instant = Instant.from-posix: $date.posix, True; my $instant2 = Instant.from-posix: $date.posix; say $instant.DateTime.year; say $instant2.</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/leap-seconds/'
               title="Read more about 润秒">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 润秒</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/exploring-stateful-streaming-with-spark-structured-streaming/'> 使用 Spark 结构化流探索状态流</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-26T21:14:24+0000" class="dt-published">Wed Dec 26, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>在之前的文章中，我们探讨了如何使用带DStream抽象的Sparks Streaming API进行处理状态流。今天，我想和你一起探索Spark 2.2，它在Structured Streaming API下支持状态流。在这篇文章中，我们将看到API如何成熟和发展，看看两种方法（流与结构化流）之间的差异，并了解对API进行了哪些更改。我们将通过上一篇文章中的示例，并使其适应新的API来实现。
回顾 Spark Streaming 状态管理 如果你需要在Spark中使用状态流，你必须在两个抽象之间进行选择（直到Spark 2.2）。updateStateByKey 和 mapWithState后者或多或少是前者的改进（API和性能方面）版本（具有一些不同的语义）。为了利用微批次之间的状态，你提供了一个StateSpec函数，mapWithState对于到达当前微批次的每个键值对，将调用该函数。对于 mapWithState，主要优点是：
状态的初始RDD - 可以加载具有先前保存状态的RDD 超时 - 超时管理由Spark处理。你可以为所有键值对设置单个超时。 部分更新 - 仅迭代当前微批中“触摸”的键以进行更新 返回类型 - 你可以选择任何返回类型。 但事情并不总是完美的&hellip;&hellip;
mapWithState 的痛点 mapWithState 比以前的 updateStateByKey API 有了很大的改进。但是去年在我使用它的过程中，体验过一些缺点：
检查点 为了确保Spark可以从失败的任务中恢复，它必须将数据 checkpoint 到分布式文件系统中，它可以在失败时从中恢复。使用 mapWithState 时，每个 executor 在内存中保存已累积的所有状态的 HashMap。在每个检查点，Spark 每次都会序列化整个状态。如果你在内存中持有很多状态，这可能会导致严重的处理延迟。例如，以下设置：
批处理间隔：4秒 检查点间隔：40秒（4秒批次x 10 常量 spark 系数） 每秒80,000条消息 消息大小：500B - 2KB 5 m4.2xlarge机器（8个vCPU，32GB RAM） 每台机器2个 executor executor 存储大小~7GB（每个） 将数据 checkpoint 到 HDFS 我经历了长达4小时的累积延迟，因为高负荷下的每个检查点在整个状态下花费30秒-1分钟，我们每4秒产生一次批次。我也看到人们在StackOverflow上对此感到困惑，因为实际上并不明白为什么有些批次比其他批次花费的时间要长得多。
如果你计划使用状态流来实现高吞吐量，则必须将此视为一个严重的警告。这个问题非常严重，以至于它让我找到了在Spark中使用内存状态的替代方法。但我们很快就会看到事情看起来很光明;）
在版本更新之间保存状态 软件是一个不断发展的过程，我们总是在改进，增强和实现新的功能要求。因此，我们需要能够从一个版本升级到另一个版本，最好不要影响现有数据。在内存数据中，这变得非常棘手。我们如何保持现状？我们如何确保从中断的地方继续？</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/exploring-stateful-streaming-with-spark-structured-streaming/'
               title="Read more about 使用 Spark 结构化流探索状态流">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 使用 Spark 结构化流探索状态流</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmycloud.github.io/notes/tips-and-ideas-for-the-raku-golf-code/'> 🎄 25/25. Raku Golf 代码的提示和想法</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmycloud.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2018-12-25T05:28:31+0000" class="dt-published">Tue Dec 25, 2018</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>欢迎来到第25天，这是Raku One-Liner Advent Calendar的最后一天！传统的 advent calendar 只有24个条目，我们今天的奖励帖子将专注于你可以在Raku高尔夫比赛中使用的一些提示和技巧。
有一个很棒的网站code-golf.io，你可以尝试解决一些问题，并将Raku移到最高分。我怀疑许多问题可以从这个One-Liner Advent Calendar 前几天所涵盖的技术中受益。
省略主题变量 如果在主题变量$_上调用方法，那么 Raku 实际上不需要变量名来理解你在说什么，所以，避免显式命名主题变量：
$_.say for 1..10 使用范围进行循环 Perl 中的范围是表达循环细节的好东西：用几个字符，指定循环变量的初始和最终状态。倒装形式通常更短。
for 1..10 {.say} .say for 1..10 想想你是否可以从0开始计数，在这种情况下，可以使用脱字符来获得从0开始的范围。以下代码打印数字0到9：
.say for ^10 在范围和序列之间进行选择 在循环中，序列可以与范围完全相同。选择可能取决于Golf软件是计数字节还是计数Unicode字符。在第一种情况下，两个点的范围优于三个点的范围。在第二种情况下，使用Unicode字符：
.say for 1..10 .say for 1...10 .say for 1…10 当你需要向下计数时，序列是你的朋友，因为他们可以推断出循环计数器更改的方向：
.say for 10…1 使用map而不是循环 在某些情况下，尤其是当你必须使用循环变量进行多个操作时，请尝试使用map迭代所有值：
(^10).map: *.say 省略括号 与 Perl 5 不同，Raku 不会强制你在常规形式的条件检查中使用括号：
if ($x &gt; 0) {say $x;exit} if $x &gt; 0 {say $x;exit} 有时，你也希望省略函数调用中的括号。
在声明数组或散列时，你都不需要括号。对于数组，使用引号构造：</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmycloud.github.io/notes/tips-and-ideas-for-the-raku-golf-code/'
               title="Read more about 🎄 25/25. Raku Golf 代码的提示和想法">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 🎄 25/25. Raku Golf 代码的提示和想法</span>
            </a>
        </div>
    
</article>
      
    
</div>



                <footer>
                    

<div class="pagination no-text-decoration">
    
        <a class="pagination-item newer" href="/page/32/">Newer</a>
    
    
        <a class="pagination-item older" href="/page/34/">Older</a>
    
</div>




                    <ul class="no-bullets feed right inline">
    
        
        
            <li class="inline no-text-decoration">
                <a href="https://ohmycloud.github.io/index.xml">RSS</a>
            </li>
        
    
        
        
            <li class="inline no-text-decoration">
                <a href="https://ohmycloud.github.io/atom.xml">ATOM</a>
            </li>
        
    
        
        
    
</ul>
<div class="clear-float"></div>

                </footer>
                <hr />
            </div>               

            <footer> 
                

<ul class="social no-text-decoration">
    
</ul>










 
    
    



<p class="generated no-text-decoration">
    Generated using  <a href="https://gitlab.com/kaushalmodi/hugo-theme-refined"><code class="nobr">hugo-theme-refined</code></a> + <span class="nobr">Hugo <a href="https://github.com/gohugoio/hugo/commit/312735366b20d64bd61bff8627f593749f86c964">0.123.7</a></span>
</p>

<p>
    
</p>




<div class="badges no-text-decoration">
    
    

    
</div>




<script type="application/javascript">var nav=responsiveNav("#nav");</script>




<script defer src="/js/libs/fragmentions/wrapper.min.e8c468c89edc4f5dccaa8c720c6b220b3088a16cd7b1e4a1e3345985788260c9.js"></script>









            </footer>
        </div> 
    </body>
</html>
