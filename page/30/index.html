<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">

    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
    
    
    

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5">

    
    <meta name="referrer" content="no-referrer">

    <title>
        
            焉知非鱼 ❚
        
    </title>

    
    


    
    
    
    

    
    
    
    

    
    
    

    
    
    
    <style>
     
     
     :root {
         --theme-color: #ac4142;
         --theme-color-light: rgba(172, 65, 66, 0.2);
     }
     
     html {
         line-height: 1.5;
     }
    </style>

    
    

    
    
    
    
    <link rel="stylesheet" href="/css/refined.min.7f6d3ee611034e4ebcbc063f1db3bc042fecdc8901afbedad80ff02bae409204.css">
    
    <link rel="preload" href="/css/refined.min.7f6d3ee611034e4ebcbc063f1db3bc042fecdc8901afbedad80ff02bae409204.css" as="style">

    



    
        <style>
         
         /* Background */ .chroma { background-color: #ffffff }
/* Error */ .chroma .err { color: #a61717; background-color: #e3d2d2 }
/* LineTableTD */ .chroma .lntd { vertical-align: top; padding: 0; margin: 0; border: 0; }
/* LineTable */ .chroma .lntable { border-spacing: 0; padding: 0; margin: 0; border: 0; width: auto; overflow: auto; display: block; }
/* LineHighlight */ .chroma .hl { display: block; width: 100%;background-color: #ffffcc }
/* LineNumbersTable */ .chroma .lnt { margin-right: 0.4em; padding: 0 0.4em 0 0.4em; }
/* LineNumbers */ .chroma .ln { margin-right: 0.4em; padding: 0 0.4em 0 0.4em; }
/* Keyword */ .chroma .k { color: #000000; font-weight: bold }
/* KeywordConstant */ .chroma .kc { color: #000000; font-weight: bold }
/* KeywordDeclaration */ .chroma .kd { color: #000000; font-weight: bold }
/* KeywordNamespace */ .chroma .kn { color: #000000; font-weight: bold }
/* KeywordPseudo */ .chroma .kp { color: #000000; font-weight: bold }
/* KeywordReserved */ .chroma .kr { color: #000000; font-weight: bold }
/* KeywordType */ .chroma .kt { color: #445588; font-weight: bold }
/* NameAttribute */ .chroma .na { color: #008080 }
/* NameBuiltin */ .chroma .nb { color: #0086b3 }
/* NameBuiltinPseudo */ .chroma .bp { color: #999999 }
/* NameClass */ .chroma .nc { color: #445588; font-weight: bold }
/* NameConstant */ .chroma .no { color: #008080 }
/* NameDecorator */ .chroma .nd { color: #3c5d5d; font-weight: bold }
/* NameEntity */ .chroma .ni { color: #800080 }
/* NameException */ .chroma .ne { color: #990000; font-weight: bold }
/* NameFunction */ .chroma .nf { color: #990000; font-weight: bold }
/* NameLabel */ .chroma .nl { color: #990000; font-weight: bold }
/* NameNamespace */ .chroma .nn { color: #555555 }
/* NameTag */ .chroma .nt { color: #000080 }
/* NameVariable */ .chroma .nv { color: #008080 }
/* NameVariableClass */ .chroma .vc { color: #008080 }
/* NameVariableGlobal */ .chroma .vg { color: #008080 }
/* NameVariableInstance */ .chroma .vi { color: #008080 }
/* LiteralString */ .chroma .s { color: #dd1144 }
/* LiteralStringAffix */ .chroma .sa { color: #dd1144 }
/* LiteralStringBacktick */ .chroma .sb { color: #dd1144 }
/* LiteralStringChar */ .chroma .sc { color: #dd1144 }
/* LiteralStringDelimiter */ .chroma .dl { color: #dd1144 }
/* LiteralStringDoc */ .chroma .sd { color: #dd1144 }
/* LiteralStringDouble */ .chroma .s2 { color: #dd1144 }
/* LiteralStringEscape */ .chroma .se { color: #dd1144 }
/* LiteralStringHeredoc */ .chroma .sh { color: #dd1144 }
/* LiteralStringInterpol */ .chroma .si { color: #dd1144 }
/* LiteralStringOther */ .chroma .sx { color: #dd1144 }
/* LiteralStringRegex */ .chroma .sr { color: #009926 }
/* LiteralStringSingle */ .chroma .s1 { color: #dd1144 }
/* LiteralStringSymbol */ .chroma .ss { color: #990073 }
/* LiteralNumber */ .chroma .m { color: #009999 }
/* LiteralNumberBin */ .chroma .mb { color: #009999 }
/* LiteralNumberFloat */ .chroma .mf { color: #009999 }
/* LiteralNumberHex */ .chroma .mh { color: #009999 }
/* LiteralNumberInteger */ .chroma .mi { color: #009999 }
/* LiteralNumberIntegerLong */ .chroma .il { color: #009999 }
/* LiteralNumberOct */ .chroma .mo { color: #009999 }
/* Operator */ .chroma .o { color: #000000; font-weight: bold }
/* OperatorWord */ .chroma .ow { color: #000000; font-weight: bold }
/* Comment */ .chroma .c { color: #999988; font-style: italic }
/* CommentHashbang */ .chroma .ch { color: #999988; font-style: italic }
/* CommentMultiline */ .chroma .cm { color: #999988; font-style: italic }
/* CommentSingle */ .chroma .c1 { color: #999988; font-style: italic }
/* CommentSpecial */ .chroma .cs { color: #999999; font-weight: bold; font-style: italic }
/* CommentPreproc */ .chroma .cp { color: #999999; font-weight: bold; font-style: italic }
/* CommentPreprocFile */ .chroma .cpf { color: #999999; font-weight: bold; font-style: italic }
/* GenericDeleted */ .chroma .gd { color: #000000; background-color: #ffdddd }
/* GenericEmph */ .chroma .ge { color: #000000; font-style: italic }
/* GenericError */ .chroma .gr { color: #aa0000 }
/* GenericHeading */ .chroma .gh { color: #999999 }
/* GenericInserted */ .chroma .gi { color: #000000; background-color: #ddffdd }
/* GenericOutput */ .chroma .go { color: #888888 }
/* GenericPrompt */ .chroma .gp { color: #555555 }
/* GenericStrong */ .chroma .gs { font-weight: bold }
/* GenericSubheading */ .chroma .gu { color: #aaaaaa }
/* GenericTraceback */ .chroma .gt { color: #aa0000 }
/* GenericUnderline */ .chroma .gl { text-decoration: underline }
/* TextWhitespace */ .chroma .w { color: #bbbbbb }

         
         /* Overrides on top of the theme and Chroma CSS */
/* Chroma-based lines highlighting in code blocks */
.chroma .hl {
    background-color: #e8e8e8;
    /* Extend highlight up to 100 characters (assuming that the code blocks never have more than 100 characters in a line) */
    min-width: 100ch;
}
/* GenericHeading */ .chroma .gh { color: #999999; font-weight: bold }
/* GenericSubheading */ .chroma .gu { color: #aaaaaa; font-weight: bold }

         
        </style>
    

    

    
    
    

    
    <script src="/js/responsive-nav-orig.min.e2b5f2a956b488f466da513820636134defdc38b90ed566248960593f2bb4ba5.js"></script>
    
    <link rel="preload" href="/js/responsive-nav-orig.min.e2b5f2a956b488f466da513820636134defdc38b90ed566248960593f2bb4ba5.js" as="script">

    
    
    <script defer src="/js/libs/fa/fontawesome-all.min.08916ac0fd078adfb58edc890460e2c8990729aee02bca7586404b56805f5219.js"></script>
    
    <link rel="preload" href="/js/libs/fa/fontawesome-all.min.08916ac0fd078adfb58edc890460e2c8990729aee02bca7586404b56805f5219.js" as="script">

    

    

    
    
    

    
    
<!-- rel="me" links for IndieAuth -->







    
 
<meta property="og:title" content="焉知非鱼" />
<meta property="og:description"
      content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://ohmyweekly.github.io/" />


    
        <meta property="og:updated_time" content="2022-12-27T00:00:00&#43;00:00"/>
    












     <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="焉知非鱼"/>
<meta name="twitter:description" content=""/>


    
    
    <link rel="alternate" type="application/rss+xml" href="https://ohmyweekly.github.io/index.xml" title="Rss for 焉知非鱼" />
    <link rel="alternate" type="application/atom+xml" href="https://ohmyweekly.github.io/atom.xml" title="Atom for 焉知非鱼" />
    <link rel="alternate" type="application/jf2feed+json" href="https://ohmyweekly.github.io/jf2feed.json" title="Jf2feed for 焉知非鱼" />
    
     






    
    
    
    <meta name="hugo-build-date" content="2024-03-01T16:16:06Z"/>
    <meta name="hugo-commit-hash" content="312735366b20d64bd61bff8627f593749f86c964"/>
    <meta name="generator" content="Hugo 0.123.7">
</head>


    
        <body lang="en">
    

        
        <div class="border" id="home"></div>

        <div class="wrapper">   
            
<nav id="nav" class="nav-collapse opened" aria-hidden="false">
    <ul class="navbar">
        <li><a class="active" href="/">Home</a></li>
        
            
                <li><a class="" href="https://ohmyweekly.github.io/posts/">Posts</a></li>
            
        
            
                <li><a class="" href="https://ohmyweekly.github.io/notes/">Notes</a></li>
            
        
        
            <li><a class="" href="https://ohmyweekly.github.io/search/">Search</a></li>
        
    </ul>
</nav>

            <div class="container">
                <header class="masthead">
                    <div class="masthead-title no-text-decoration">
                        <a href="/">焉知非鱼</a> <span class="blinking-cursor">❚</span>
                    </div>
                    <div class="masthead-tagline">
                        rakulang, dartlang, nimlang, golang, rustlang, lang lang no see
                    </div>
                </header>

                

<div class="posts h-feed">
    <header>
        
        <data class="u-url" value="https://ohmyweekly.github.io/"></data>
         





        <data class="p-name" value="焉知非鱼"></data>
    </header>
    
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmyweekly.github.io/notes/kafka-ksql-in-action/'> Kafka KSQL 用例</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmyweekly.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmyweekly.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2019-05-15T15:18:18+0000" class="dt-published">Wed May 15, 2019</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>有一次, 在威马项目, 项目经理说, xxx, 你能不能给我查一下 kafka 中, 这个车某一时间段的数据？ 我说不好查, 查询 Kafka 中某一条记录, 需要 Consumer 程序来消费。虽然 kt 之类的 Kafka 命令行工具可以查询 Kafka 中数据. 但是能力有限, 它只能从某个 offset 开始查询, 满足不了我们的过滤条件。
幸运的是, ksql 可以让我们像查询 sql 一样来查询 kafka, 毕竟写 sql, 谁不会呢？于是我们到它的官网, 看到 ksql 这个产品的宣传是 Streaming SQL for Apache Kafka。 毕竟底层用的是 Kafka-Streams, 所以 ksql 支持流式查询。我们下载最新的 ksql。我们将程序解压到 ~/opt/confluent-5.0.0
启动 zk cd ~/opt/confluent-5.0.0 bin/zookeeper-server-start -daemon etc/kafka/zookeeper.properties 启动 kafka cd ~/opt/confluent-5.0.0 bin/kafka-server-start -daemon etc/kafka/server.properties 创建 topic 和 data confluent 自带了一个 ksql-datagen 工具，可以创建和产生相关的 topic 和数据，</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmyweekly.github.io/notes/kafka-ksql-in-action/'
               title="Read more about Kafka KSQL 用例">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about Kafka KSQL 用例</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmyweekly.github.io/notes/ksql-stream-processing-cookbook/'> KSQL Stream Processing CookBook</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmyweekly.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmyweekly.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2019-05-15T15:18:18+0000" class="dt-published">Wed May 15, 2019</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>KSQL Stream Processing CookBook 数据过滤 KSQL 流式查询持续运行。您可以使用 KSQL CREATE STREAM AS 语法将流式查询输出持久保存到 Kafka topic。 KSQL 从一个 Kafka topic 中实时获取事件，转换它们并将它们连续写入另一个 topic。
此示例显示如何从入站 topic 过滤数据流数据以排除源自特定地理位置的记录。
指示 在此示例中，使用名为 purchase 的源事件流。
{ &#34;order_id&#34;: 1, &#34;customer_name&#34;: &#34;Maryanna Andryszczak&#34;, &#34;date_of_birth&#34;: &#34;1922-06-06T02:21:59Z&#34;, &#34;product&#34;: &#34;Nut - Walnut, Pieces&#34;, &#34;order_total_usd&#34;: &#34;1.65&#34;, &#34;town&#34;: &#34;Portland&#34;, &#34;country&#34;: &#34;United States&#34; } 1、在 KSQL 中, 注册 purchases 流:
ksql&gt; CREATE STREAM purchases \ (order_id INT, customer_name VARCHAR, date_of_birth VARCHAR, \ product VARCHAR, order_total_usd VARCHAR, town VARCHAR, country VARCHAR) \ WITH (KAFKA_TOPIC=&#39;purchases&#39;, VALUE_FORMAT=&#39;JSON&#39;); 2、检查收到的前几条消息：</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmyweekly.github.io/notes/ksql-stream-processing-cookbook/'
               title="Read more about KSQL Stream Processing CookBook">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about KSQL Stream Processing CookBook</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmyweekly.github.io/notes/run-flink-in-idea/'> 在 IDEA 中运行 Flink 程序</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmyweekly.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmyweekly.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2019-05-14T21:22:28+0000" class="dt-published">Tue May 14, 2019</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>我们需要把 Flink 安装路径中的 opt 和 lib 添加到项目的 Libraries 中。
依次点击 File -&gt; Project Structure -&gt; Project Settings -&gt; Libraries, 然后点击右侧栏中的加号 ➕, 选择 Java, 在弹出的对话框中选择 Flink 安装路径。
我的 Flink 安装在 /usr/local/Cellar/apache-flink/1.8.0/libexec, 默认是隐藏的, 所以要点击 Macintosh HD, 同时按住 Command + Shift + . 即可显示出隐藏目录, 分别添加 opt 目录和 lib 目录到相应的模块的 Libraries 中。这样就可以在 IDEA 中直接运行 Flink 程序了。
tree /usr/local/Cellar/apache-flink/1.8.0/libexec ├── bin │ ├── config.sh │ ├── start-cluster.sh │ ├── ... ├── conf │ ├── flink-conf.yaml │ ├── log4j-cli.</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmyweekly.github.io/notes/run-flink-in-idea/'
               title="Read more about 在 IDEA 中运行 Flink 程序">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 在 IDEA 中运行 Flink 程序</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmyweekly.github.io/notes/rewrite-subtrip-in-flink/'> 使用 Flink 重写项目</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmyweekly.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmyweekly.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2019-03-20T23:37:58+0000" class="dt-published">Wed Mar 20, 2019</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>使用 Flink 重写一下之前用 Spark Streaming 做的项目, 发现 Flink 在实时处理上比 Spark Streaming 友好。
结构 目录结构跟之前基本一样:
src ├── main │ ├── java │ ├── resources │ │ └── application.conf │ └── scala │ ├── dataset │ └── datastream │ ├── com │ │ └── gac │ │ └── xs6 │ │ ├── BigdataApplication.scala │ │ ├── conf │ │ │ └── KafkaConfiguration.scala │ │ ├── core │ │ │ ├── Adapter.scala │ │ │ └── impl │ │ │ ├── AdapterImpl.</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmyweekly.github.io/notes/rewrite-subtrip-in-flink/'
               title="Read more about 使用 Flink 重写项目">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 使用 Flink 重写项目</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmyweekly.github.io/notes/make-commandline-tools-in-raku/'> 在 Raku 中制作命令行工具</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmyweekly.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmyweekly.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2019-03-20T11:25:38+0000" class="dt-published">Wed Mar 20, 2019</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>准备 zef install App::Mi6 # 安装模块骨架工具 mi6 new FakeStreaming # 创建一个模块骨架 使用 tree 看一下目录结构：
├── Changes ├── LICENSE ├── META6.json ├── README.md ├── bin │ └── fake-stream ├── dist.ini ├── lib │ └── FakeStreaming.pm6 └── t └── 01-basic.t 我们主要看 META6.json, bin 目录, lib 目录。
META6.json { &#34;authors&#34; : [ &#34;&#34; ], &#34;build-depends&#34; : [ ], &#34;depends&#34; : [&#34;PKafka&#34;], &#34;description&#34; : &#34;a commandline tool to simulate socket streraming mock and kafka producer&#34;, &#34;license&#34; : &#34;Artistic-2.</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmyweekly.github.io/notes/make-commandline-tools-in-raku/'
               title="Read more about 在 Raku 中制作命令行工具">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 在 Raku 中制作命令行工具</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmyweekly.github.io/notes/sub-trip-using-flink/'> 使用 Flink 进行行程划分</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmyweekly.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmyweekly.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2019-02-27T17:25:58+0800" class="dt-published">Wed Feb 27, 2019</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>准备 ① 启动 Flink 本地模式
/usr/local/Cellar/apache-flink/1.7.0/libexec/bin/start-cluster.sh Starting cluster. Starting standalonesession daemon on host summer. Starting taskexecutor daemon on host summer. ② 模拟实时流数据
raku fake-streaming.pl6 该脚本每隔秒打印一行数据, 每隔 15 秒暂停打印, 然后在继续每隔一秒打印一行, 然后在 sleep 15 秒, 模拟行程间隔。
sub MAIN(Str :$host = &#39;0.0.0.0&#39;, Int :$port = 3333) { my $vin = &#39;LSJA0000000000091&#39;; my $last_meter = 0; react { whenever IO::Socket::Async.listen($host, $port) -&gt; $conn { react { my Bool:D $ignore = True; whenever Supply.interval(15).rotor(1, 1 =&gt; 1) { $ignore = !</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmyweekly.github.io/notes/sub-trip-using-flink/'
               title="Read more about 使用 Flink 进行行程划分">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 使用 Flink 进行行程划分</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmyweekly.github.io/notes/extract-section-block/'> 提取文本块儿的 5 种方法</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmyweekly.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmyweekly.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2019-01-19T23:53:38+0000" class="dt-published">Sat Jan 19, 2019</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>假设有一段文本, =begin code 和 =end code 把文本分割为一个一个的 section, 我想提取每一个 section 之间的内容。 Grammar 来拯救！
my $excerpt = q:to/END/; Here&#39;s some unimportant text. =begin code This code block is what we&#39;re after. We&#39;ll use &#39;ff&#39; to get it. =end code More unimportant text. =begin code I want this line. and this line as well. HaHa =end code More unimport text. =begin code Let&#39;s to go home. =end code END Grammar #use Grammar::Tracer; #use Grammar::Debugger; grammar ExtractSection { rule TOP { ^ &lt;section&gt;+ %% &lt;.</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmyweekly.github.io/notes/extract-section-block/'
               title="Read more about 提取文本块儿的 5 种方法">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 提取文本块儿的 5 种方法</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmyweekly.github.io/notes/toggle/'> 开关</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmyweekly.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmyweekly.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2019-01-19T10:56:07+0000" class="dt-published">Sat Jan 19, 2019</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>toggle 字面意思是开关, 函数签名如下：
method toggle(Any:D: *@conditions where .all ~~ Callable:D, Bool :$off --&gt; Seq:D) 它接收一个数组, 数组中的每个元素都是一个 Callable。
它迭代调用者, 产生一个 Seq, 根据开关是开还是关把接收到的值填充到结果中, 开关是开还是关取决于 @conditions 数组里面调用 Callables 的结果:
say (1..15).toggle(* &lt; 5, * &gt; 10, * &lt; 15); # OUTPUT: «(1 2 3 4 11 12 13 14)␤» say (1..15).toggle(:off, * &gt; 2, * &lt; 5, * &gt; 10, * &lt; 15); # OUTPUT: «(3 4 11 12 13 14)␤» 想象一下开关是打开还是关闭（True或False），如果它打开则产生值。默认情况下，该开关的初始状态处于 &ldquo;on&rdquo; 位置，除非 :$off 设置为 true 值，在这种情况下，初始状态将为&quot;off&quot;。</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmyweekly.github.io/notes/toggle/'
               title="Read more about 开关">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 开关</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmyweekly.github.io/notes/using-raku-grammars-to-decompressing-zelda3-gfx/'> 使用 Raku Grammars 解压缩 Zelda 3 GFX</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmyweekly.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmyweekly.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2019-01-15T10:37:24+0000" class="dt-published">Tue Jan 15, 2019</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>grammars
Grammar 结合 actions 可以解析字符串并从字符串中产生一些东西。如果说任何压缩后的数据遵循可能由相应的解压缩算法“解析”的结构，那就不足为奇了。
那么为什么不使用 Raku Grammar 进行这类工作呢？特别是我熟悉的压缩。
深入研究任天堂压缩 任天堂在他们的 SNES 游戏中使用了相同的基本压缩格式，并根据游戏使用了一些变体。这非常简单，在 ~2Mhz 的 SNES CPU 上很容易。
它是这样的：
&lt;a byte that contains an header&gt; the header is split into 2 parts : the 3 left most bits form a command number The 5 other bits code the lenght associated with the command &lt;An arbitrary number of bytes associated with the command&gt; &lt;repeat until the header is \xFF&gt; 命令取决于游戏，但是 Zelda 3 的命令非常简单</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmyweekly.github.io/notes/using-raku-grammars-to-decompressing-zelda3-gfx/'
               title="Read more about 使用 Raku Grammars 解压缩 Zelda 3 GFX">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 使用 Raku Grammars 解压缩 Zelda 3 GFX</span>
            </a>
        </div>
    
</article>
      
    
        <article class="summary h-entry notes">
    <header>
        <h2 class="post-title p-name no-text-decoration"><a class="u-url" href='https://ohmyweekly.github.io/notes/%E4%BD%BF%E7%94%A8rotor%E6%93%8D%E4%BD%9C%E5%88%97%E8%A1%A8/'> 使用rotor操作列表</a> </h2>
        
    <div class="taxo no-text-decoration">
         
            
                <ul class="no-bullets inline categories">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts categorized in ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmyweekly.github.io/categories/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
         
            
                <ul class="no-bullets inline tags">
                    
                        
                        
                        
                            
                            
                            
                            
                            
                            <li class="__rakulang__"
                                
                                
                                title="See all 0 posts tagged with ‘rakulang’"
                                
                            >
                                <a class="p-category" href="https://ohmyweekly.github.io/tags/rakulang/">rakulang</a>
                            </li>
                        
                    
                </ul>
            
        
    </div>


        


    
    
    <div class="post-date">
        
        <time datetime="2019-01-10T15:23:11+0000" class="dt-published">Thu Jan 10, 2019</time>
        
        
    </div>


    </header>

    <div class="post p-summary" >
        <p>假设有一个 0..100 的数字区间, 需要分成下面这样的区间：
0..5 5..10 10..15 15..20 20..25 25..30 30..35 35..40 40..45 45..50 50..55 55..60 60..65 65..70 70..75 75..80 80..85 85..90 90..95 95..100 rotor 来拯救：
.minmax.say for (0..100).rotor(6 =&gt; -1) 我想偷懒用程序生成下面的代码：
if (current &gt;=0 &amp;&amp; current &lt; 5) &#34;0&#34; if (current &gt;=5 &amp;&amp; current &lt; 10) &#34;1&#34; if (current &gt;=10 &amp;&amp; current &lt; 15) &#34;2&#34; if (current &gt;=15 &amp;&amp; current &lt; 20) &#34;3&#34; if (current &gt;=20 &amp;&amp; current &lt; 25) &#34;4&#34; if (current &gt;=25 &amp;&amp; current &lt; 30) &#34;5&#34; if (current &gt;=30 &amp;&amp; current &lt; 35) &#34;6&#34; if (current &gt;=35 &amp;&amp; current &lt; 40) &#34;7&#34; if (current &gt;=40 &amp;&amp; current &lt; 45) &#34;8&#34; if (current &gt;=45 &amp;&amp; current &lt; 50) &#34;9&#34; if (current &gt;=50 &amp;&amp; current &lt; 55) &#34;10&#34; if (current &gt;=55 &amp;&amp; current &lt; 60) &#34;11&#34; if (current &gt;=60 &amp;&amp; current &lt; 65) &#34;12&#34; if (current &gt;=65 &amp;&amp; current &lt; 70) &#34;13&#34; if (current &gt;=70 &amp;&amp; current &lt; 75) &#34;14&#34; if (current &gt;=75 &amp;&amp; current &lt; 80) &#34;15&#34; if (current &gt;=80 &amp;&amp; current &lt; 85) &#34;16&#34; if (current &gt;=85 &amp;&amp; current &lt; 90) &#34;17&#34; if (current &gt;=90 &amp;&amp; current &lt; 95) &#34;18&#34; if (current &gt;=95 &amp;&amp; current &lt; 100) &#34;19&#34; for (0.</p>

    </div>

    
    
    
        <div class="readmore no-text-decoration">
            <a href='https://ohmyweekly.github.io/notes/%E4%BD%BF%E7%94%A8rotor%E6%93%8D%E4%BD%9C%E5%88%97%E8%A1%A8/'
               title="Read more about 使用rotor操作列表">
                read <span class="more"> more</span>
                <span class="screen-readers-only" > about 使用rotor操作列表</span>
            </a>
        </div>
    
</article>
      
    
</div>



                <footer>
                    

<div class="pagination no-text-decoration">
    
        <a class="pagination-item newer" href="/page/29/">Newer</a>
    
    
        <a class="pagination-item older" href="/page/31/">Older</a>
    
</div>




                    <ul class="no-bullets feed right inline">
    
        
        
            <li class="inline no-text-decoration">
                <a href="https://ohmyweekly.github.io/index.xml">RSS</a>
            </li>
        
    
        
        
            <li class="inline no-text-decoration">
                <a href="https://ohmyweekly.github.io/atom.xml">ATOM</a>
            </li>
        
    
        
        
    
</ul>
<div class="clear-float"></div>

                </footer>
                <hr />
            </div>               

            <footer> 
                

<ul class="social no-text-decoration">
    
</ul>










 
    
    



<p class="generated no-text-decoration">
    Generated using  <a href="https://gitlab.com/kaushalmodi/hugo-theme-refined"><code class="nobr">hugo-theme-refined</code></a> + <span class="nobr">Hugo <a href="https://github.com/gohugoio/hugo/commit/312735366b20d64bd61bff8627f593749f86c964">0.123.7</a></span>
</p>

<p>
    
</p>




<div class="badges no-text-decoration">
    
    

    
</div>




<script type="application/javascript">var nav=responsiveNav("#nav");</script>




<script defer src="/js/libs/fragmentions/wrapper.min.e8c468c89edc4f5dccaa8c720c6b220b3088a16cd7b1e4a1e3345985788260c9.js"></script>









            </footer>
        </div> 
    </body>
</html>
